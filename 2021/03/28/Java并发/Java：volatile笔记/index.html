<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="æœ¬ç¬”è®°æ˜¯æ ¹æ®bilibiliä¸Š å°šç¡…è°· çš„è¯¾ç¨‹ Javaå¤§å‚é¢è¯•é¢˜ç¬¬äºŒå­£ è€Œåšçš„å­¦ä¹ ç¬”è®°ï¼›  å› ä¸ºæœ€è¿‘ä¹Ÿæ‰“ç®—æ‰¾ä¸‹æš‘æœŸå®ä¹ ...å°±é’ˆå¯¹æ€§çš„å­¦ä¹ ä¸€ä¸‹ğŸ˜¬">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaï¼švolatileç¬”è®°">
<meta property="og:url" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="è´¤ä½™è¶…">
<meta property="og:description" content="æœ¬ç¬”è®°æ˜¯æ ¹æ®bilibiliä¸Š å°šç¡…è°· çš„è¯¾ç¨‹ Javaå¤§å‚é¢è¯•é¢˜ç¬¬äºŒå­£ è€Œåšçš„å­¦ä¹ ç¬”è®°ï¼›  å› ä¸ºæœ€è¿‘ä¹Ÿæ‰“ç®—æ‰¾ä¸‹æš‘æœŸå®ä¹ ...å°±é’ˆå¯¹æ€§çš„å­¦ä¹ ä¸€ä¸‹ğŸ˜¬">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/volatileå¯è§æ€§.png">
<meta property="og:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜.png">
<meta property="og:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/æ•°å€¼ä¸¢å¤±.png">
<meta property="og:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/æ‰©å±•javapå‘½ä»¤.png">
<meta property="og:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/æ‰©å±•javapå‘½ä»¤2.png">
<meta property="og:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/å†…å­˜å±éšœ.png">
<meta property="article:published_time" content="2021-03-28T02:24:10.000Z">
<meta property="article:modified_time" content="2021-03-28T02:24:10.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="é¢è¯•ç¬”è®°">
<meta property="article:tag" content="å¹¶å‘ç¼–ç¨‹">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/volatileå¯è§æ€§.png">

<link rel="canonical" href="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Javaï¼švolatileç¬”è®° | è´¤ä½™è¶…</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">è´¤ä½™è¶…</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸€ä½åº•å±‚ç å†œ :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">96</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">203</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="ä¸æ€¥ä¸èºã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è´¤ä½™è¶…">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Javaï¼švolatileç¬”è®°
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-03-28 10:24:10" itemprop="dateCreated datePublished" datetime="2021-03-28T10:24:10+08:00">2021-03-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">å¹¶å‘ç¼–ç¨‹</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>19k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>17 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>æœ¬ç¬”è®°æ˜¯æ ¹æ®bilibiliä¸Š <a target="_blank" rel="noopener" href="https://space.bilibili.com/302417610">å°šç¡…è°·</a> çš„è¯¾ç¨‹ <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV18b411M7xz?spm_id_from=333.788.b_636f6d6d656e74.29">Javaå¤§å‚é¢è¯•é¢˜ç¬¬äºŒå­£</a> è€Œåšçš„å­¦ä¹ ç¬”è®°ï¼›</p>
<blockquote>
<p>å› ä¸ºæœ€è¿‘ä¹Ÿæ‰“ç®—æ‰¾ä¸‹æš‘æœŸå®ä¹ ...å°±é’ˆå¯¹æ€§çš„å­¦ä¹ ä¸€ä¸‹<span class="emoji" data-emoji="grimacing">ğŸ˜¬</span></p>
</blockquote>
<span id="more"></span>
<h1 id="javavolatileç¬”è®°">Javaï¼švolatileç¬”è®°</h1>
<h2 id="volatile-å’Œ-jmm-å†…å­˜æ¨¡å‹çš„å¯è§æ€§">1. volatile å’Œ JMM å†…å­˜æ¨¡å‹çš„å¯è§æ€§</h2>
<p>JUC ä¸‹çš„ä¸‰ä¸ªåŒ…</p>
<ul>
<li>java.util.concurrent</li>
<li>java.util.concurrent.atomic</li>
<li>java.util.concurrent.locks</li>
</ul>
<h3 id="è°ˆè°ˆå¯¹-volatile-çš„ç†è§£">è°ˆè°ˆå¯¹ volatile çš„ç†è§£</h3>
<p>volatile åœ¨æ—¥å¸¸çš„å•çº¿ç¨‹ç¯å¢ƒæ˜¯åº”ç”¨ä¸åˆ°çš„</p>
<p>volatile æ˜¯ Java è™šæ‹Ÿæœºæä¾›çš„è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼ˆä¸‰å¤§ç‰¹æ€§ï¼‰</p>
<ul>
<li>ä¿è¯å¯è§æ€§</li>
<li>ä¸ä¿è¯åŸå­æ€§</li>
<li>ç¦æ­¢æŒ‡ä»¤é‡æ’</li>
</ul>
<h3 id="jmmæ˜¯ä»€ä¹ˆ">JMMæ˜¯ä»€ä¹ˆ</h3>
<p>JMM æ˜¯ Java å†…å­˜æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ Java Memory Modelï¼Œç®€ç§° JMMï¼Œæœ¬èº«æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œå®é™…ä¸Šå¹¶ä¸å­˜åœ¨ï¼Œå®ƒæè¿°çš„æ˜¯ä¸€ç»„è§„åˆ™æˆ–è§„èŒƒï¼Œé€šè¿‡è¿™ç»„è§„èŒƒå®šä¹‰äº†ç¨‹åºä¸­å„ä¸ªå˜é‡ï¼ˆåŒ…æ‹¬å®ä¾‹å­—æ®µï¼Œé™æ€å­—æ®µå’Œæ„æˆæ•°ç»„å¯¹è±¡çš„å…ƒç´ ï¼‰çš„è®¿é—®æ–¹å¼</p>
<p>JMM å…³äºåŒæ­¥çš„è§„å®šï¼š</p>
<ul>
<li>çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„å€¼åˆ·æ–°å›ä¸»å†…å­˜</li>
<li>çº¿ç¨‹åŠ é”å‰ï¼Œå¿…é¡»è¯»å–ä¸»å†…å­˜çš„æœ€æ–°å€¼ï¼Œåˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜</li>
<li>åŠ é”å’Œè§£é”æ˜¯åŒä¸€æŠŠé”</li>
</ul>
<p>ç”±äº JVM è¿è¡Œç¨‹åºçš„å®ä½“æ˜¯çº¿ç¨‹ï¼Œè€Œæ¯ä¸ªçº¿ç¨‹åˆ›å»ºæ—¶ JVM éƒ½ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå·¥ä½œå†…å­˜ï¼ˆæœ‰äº›åœ°æ–¹ç§°ä¸ºæ ˆç©ºé—´ï¼‰ï¼Œå·¥ä½œå†…å­˜æ˜¯æ¯ä¸ªçº¿ç¨‹çš„ç§æœ‰æ•°æ®åŒºåŸŸï¼Œè€Œ Java å†…å­˜æ¨¡å‹ä¸­è§„å®šæ‰€æœ‰å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼Œä¸»å†…å­˜æ˜¯å…±äº«å†…å­˜åŒºåŸŸï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥è®¿é—®ï¼Œ<strong>ä½†çº¿ç¨‹å¯¹å˜é‡çš„æ“ä½œï¼ˆè¯»å–èµ‹å€¼ç­‰ï¼‰å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œé¦–å…ˆè¦å°†å˜é‡ä»ä¸»å†…å­˜æ‹·è´åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜ç©ºé—´ï¼Œç„¶åå¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œæ“ä½œå®Œæˆåå†å°†å˜é‡å†™å›ä¸»å†…å­˜</strong>ï¼Œä¸èƒ½ç›´æ¥æ“ä½œä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œå„ä¸ªçº¿ç¨‹ä¸­çš„å·¥ä½œå†…å­˜ä¸­å­˜å‚¨ç€ä¸»å†…å­˜ä¸­çš„å˜é‡å‰¯æœ¬æ‹·è´ï¼Œå› æ­¤ä¸åŒçš„çº¿ç¨‹é—´æ— æ³•è®¿é—®å¯¹æ–¹çš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹é—´çš„é€šä¿¡ï¼ˆä¼ å€¼ï¼‰å¿…é¡»é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆï¼Œå…¶ç®€è¦è®¿é—®è¿‡ç¨‹ï¼š</p>
<p><img src="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/volatileå¯è§æ€§.png" alt="volatileå¯è§æ€§"></p>
<p>æ•°æ®ä¼ è¾“é€Ÿç‡ï¼šç¡¬ç›˜ &lt; å†…å­˜ &lt; cache &lt; CPU</p>
<p>ä¸Šé¢æåˆ°äº†ä¸¤ä¸ªæ¦‚å¿µï¼š<strong>ä¸»å†…å­˜</strong> å’Œ <strong>å·¥ä½œå†…å­˜</strong></p>
<ul>
<li><p>ä¸»å†…å­˜ï¼šå°±æ˜¯è®¡ç®—æœºçš„å†…å­˜ï¼Œä¹Ÿå°±æ˜¯ç»å¸¸æåˆ°çš„8Gå†…å­˜ï¼Œ16Gå†…å­˜</p></li>
<li><p>å·¥ä½œå†…å­˜ï¼šå½“æˆ‘ä»¬å®ä¾‹åŒ– <code>new Student()</code>ï¼Œé‚£ä¹ˆ <code>age = 25</code> ä¹Ÿæ˜¯å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­</p>
<ul>
<li>å½“åŒæ—¶æœ‰ä¸‰ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—® student ä¸­çš„ age å˜é‡æ—¶ï¼Œé‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæ‹·è´ä¸€ä»½ï¼Œåˆ°å„è‡ªçš„å·¥ä½œå†…å­˜ï¼Œä»è€Œå®ç°äº†å˜é‡çš„æ‹·è´</li>
</ul>
<p><img src="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜.png" alt="ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"></p></li>
</ul>
<p>å³ï¼šJMM å†…å­˜æ¨¡å‹çš„å¯è§æ€§ï¼ŒæŒ‡çš„æ˜¯å½“ä¸»å†…å­˜åŒºåŸŸä¸­çš„å€¼è¢«æŸä¸ªçº¿ç¨‹å†™å…¥æ›´æ”¹åï¼Œå…¶å®ƒçº¿ç¨‹ä¼šé©¬ä¸ŠçŸ¥æ™“æ›´æ”¹åçš„å€¼ï¼Œå¹¶é‡æ–°å¾—åˆ°æ›´æ”¹åçš„å€¼ã€‚</p>
<h3 id="jmmçš„ç‰¹æ€§">JMMçš„ç‰¹æ€§</h3>
<p>JMMçš„ä¸‰å¤§ç‰¹æ€§ï¼Œvolatileåªä¿è¯äº†ä¸¤ä¸ªï¼Œå³<strong>å¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä½†ä¸æ»¡è¶³åŸå­æ€§</strong></p>
<h3 id="å¯è§æ€§ä»£ç éªŒè¯">å¯è§æ€§ä»£ç éªŒè¯</h3>
<p>ä½†æˆ‘ä»¬å¯¹äºæˆå‘˜å˜é‡æ²¡æœ‰æ·»åŠ ä»»ä½•ä¿®é¥°æ—¶ï¼Œæ˜¯æ— æ³•æ„ŸçŸ¥å…¶å®ƒçº¿ç¨‹ä¿®æ”¹åçš„å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * volatile Javaè™šæ‹Ÿæœºæä¾›çš„è½»é‡çº§åŒæ­¥æœºåˆ¶</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å¯è§æ€§ï¼ˆåŠæ—¶é€šçŸ¥ï¼‰</span></span><br><span class="line"><span class="comment"> * ä¸ä¿è¯åŸå­æ€§</span></span><br><span class="line"><span class="comment"> * ç¦æ­¢æŒ‡ä»¤é‡æ’</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡è®¾æ˜¯ä¸»ç‰©ç†å†…å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyData</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTo60</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éªŒè¯volatileçš„å¯è§æ€§</span></span><br><span class="line"><span class="comment"> * 1. å‡è®¾int number = 0ï¼Œ numberå˜é‡ä¹‹å‰æ²¡æœ‰æ·»åŠ volatileå…³é”®å­—ä¿®é¥°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">volatileDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args [])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// èµ„æºç±»</span></span><br><span class="line">        MyData myData = <span class="keyword">new</span> MyData();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// AAAçº¿ç¨‹ å®ç°äº†Runnableæ¥å£çš„ï¼Œlambdaè¡¨è¾¾å¼</span></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t come in&quot;</span>);</span><br><span class="line">            <span class="comment">// çº¿ç¨‹ç¡çœ 3ç§’ï¼Œå‡è®¾åœ¨è¿›è¡Œè¿ç®—</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¿®æ”¹numberçš„å€¼</span></span><br><span class="line">            myData.addTo60();</span><br><span class="line">            <span class="comment">// è¾“å‡ºä¿®æ”¹åçš„å€¼</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t update number value:&quot;</span> + myData.number);</span><br><span class="line">        &#125;, <span class="string">&quot;AAA&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(myData.number == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// mainçº¿ç¨‹å°±ä¸€ç›´åœ¨è¿™é‡Œç­‰å¾…å¾ªç¯ï¼Œç›´åˆ°numberçš„å€¼ä¸ç­‰äºé›¶</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŒ‰é“ç†è¿™ä¸ªå€¼æ˜¯ä¸å¯èƒ½æ‰“å°å‡ºæ¥çš„ï¼Œå› ä¸ºä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œnumberçš„å€¼ä¸º0ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨å¾ªç¯</span></span><br><span class="line">        <span class="comment">// å¦‚æœèƒ½è¾“å‡ºè¿™å¥è¯ï¼Œè¯´æ˜AAAçº¿ç¨‹åœ¨ç¡çœ 3ç§’åï¼Œæ›´æ–°çš„numberçš„å€¼ï¼Œé‡æ–°å†™å…¥åˆ°ä¸»å†…å­˜ï¼Œå¹¶è¢«mainçº¿ç¨‹æ„ŸçŸ¥åˆ°äº†</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t mission is over&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€åè¾“å‡ºç»“æœï¼š</span></span><br><span class="line"><span class="comment">// AAA	 come in</span></span><br><span class="line"><span class="comment">// AAA	 update number value:60</span></span><br><span class="line"><span class="comment">// æœ€åçº¿ç¨‹æ²¡æœ‰åœæ­¢ï¼Œå¹¶è¡Œæ²¡æœ‰è¾“å‡º  mission is over è¿™å¥è¯ï¼Œè¯´æ˜æ²¡æœ‰ç”¨volatileä¿®é¥°çš„å˜é‡ï¼Œæ˜¯æ²¡æœ‰å¯è§æ€§</span></span><br></pre></td></tr></table></figure>
<p>æœ€åçº¿ç¨‹æ²¡æœ‰åœæ­¢ï¼Œå¹¶è¡Œæ²¡æœ‰è¾“å‡º mission is over è¿™å¥è¯ï¼Œè¯´æ˜<strong>æ²¡æœ‰ç”¨ volatile ä¿®é¥°çš„å˜é‡ï¼Œæ˜¯æ²¡æœ‰å¯è§æ€§çš„</strong></p>
<p>å½“æˆ‘ä»¬ä¿®æ”¹ MyData ç±»ä¸­çš„æˆå‘˜å˜é‡æ—¶ï¼Œå¹¶ä¸”æ·»åŠ  volatile å…³é”®å­—ä¿®é¥°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡è®¾æ˜¯ä¸»ç‰©ç†å†…å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyData</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * volatile ä¿®é¥°çš„å…³é”®å­—ï¼Œæ˜¯ä¸ºäº†å¢åŠ ä¸»çº¿ç¨‹å’Œçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å†…å­˜ä¸­çš„å€¼ï¼Œå…¶å®ƒçº¿ç¨‹ä¹Ÿèƒ½é©¬ä¸Šæ„ŸçŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTo60</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ€åè¾“å‡ºç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * AAA	 come in</span></span><br><span class="line"><span class="comment"> * AAA	 update number value:60</span></span><br><span class="line"><span class="comment"> * main  mission is over</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>ä¸»çº¿ç¨‹ä¹Ÿæ‰§è¡Œå®Œæ¯•äº†ï¼Œè¯´æ˜ volatile ä¿®é¥°çš„å˜é‡ï¼Œæ˜¯å…·å¤‡JVMè½»é‡çº§åŒæ­¥æœºåˆ¶çš„ï¼Œèƒ½å¤Ÿæ„ŸçŸ¥å…¶å®ƒçº¿ç¨‹çš„ä¿®æ”¹åçš„å€¼ã€‚</p>
<h2 id="volatile-ä¸ä¿è¯åŸå­æ€§">2. volatile ä¸ä¿è¯åŸå­æ€§</h2>
<h3 id="å‰è¨€">å‰è¨€</h3>
<p>é€šè¿‡å‰é¢å¯¹ JMM çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå„ä¸ªçº¿ç¨‹å¯¹ä¸»å†…å­˜ä¸­å…±äº«å˜é‡çš„æ“ä½œéƒ½æ˜¯å„ä¸ªçº¿ç¨‹å„è‡ªæ‹·è´åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜è¿›è¡Œæ“ä½œååœ¨å†™å›åˆ°ä¸»å†…å­˜ä¸­çš„ã€‚</p>
<p>è¿™å°±å¯èƒ½å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹ A ä¿®æ”¹äº†å…±äº«å˜é‡ X çš„å€¼ï¼Œä½†æ˜¯è¿˜æœªå†™å…¥ä¸»å†…å­˜æ—¶ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ B åˆå¯¹ä¸»å†…å­˜ä¸­åŒä¸€å…±äº«å˜é‡ X è¿›è¡Œæ“ä½œï¼Œä½†æ­¤æ—¶ A çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡ X å¯¹çº¿ç¨‹ B æ¥è¯´æ˜¯ä¸å¯è§ï¼Œè¿™ç§å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿç°è±¡å°±é€ æˆäº†å¯è§æ€§é—®é¢˜ã€‚</p>
<h3 id="åŸå­æ€§">åŸå­æ€§</h3>
<p>ä¸å¯åˆ†å‰²ï¼Œå®Œæ•´æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸ªçº¿ç¨‹æ­£åœ¨åšæŸä¸ªå…·ä½“ä¸šåŠ¡æ—¶ï¼Œ<strong>ä¸­é—´ä¸å¯ä»¥è¢«åŠ å¡æˆ–è€…è¢«åˆ†å‰²</strong>ï¼Œéœ€è¦å…·ä½“å®Œæˆï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p>
<p>æ•°æ®åº“ä¹Ÿç»å¸¸æåˆ°äº‹åŠ¡å…·å¤‡åŸå­æ€§ã€‚</p>
<h3 id="ä»£ç æµ‹è¯•">ä»£ç æµ‹è¯•</h3>
<p>ä¸ºäº†æµ‹è¯• volatile æ˜¯å¦ä¿è¯åŸå­æ€§ï¼Œæˆ‘ä»¬åˆ›å»ºäº† 20 ä¸ªçº¿ç¨‹ï¼Œç„¶åæ¯ä¸ªçº¿ç¨‹åˆ†åˆ«å¾ªç¯ 1000 æ¬¡ï¼Œæ¥è°ƒç”¨ number++ çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MyData myData = <span class="keyword">new</span> MyData();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹é‡Œé¢è¿›è¡Œ1000æ¬¡å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">        <span class="comment">// é‡Œé¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">            myData.addPlusPlus();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, String.valueOf(i)).start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åé€šè¿‡ <code>Thread.activeCount()</code>ï¼Œæ¥æ„ŸçŸ¥ 20 ä¸ªçº¿ç¨‹æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œè¿™é‡Œåˆ¤æ–­çº¿ç¨‹æ•°æ˜¯å¦å¤§äº2ï¼Œä¸ºä»€ä¹ˆæ˜¯2ï¼Ÿå› ä¸ºé»˜è®¤æ˜¯æœ‰ä¸¤ä¸ªçº¿ç¨‹çš„ï¼Œä¸€ä¸ª main çº¿ç¨‹ï¼Œä¸€ä¸ª GC çº¿ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦ç­‰å¾…ä¸Šé¢20ä¸ªçº¿ç¨‹éƒ½è®¡ç®—å®Œæˆåï¼Œåœ¨ç”¨mainçº¿ç¨‹å–å¾—æœ€ç»ˆçš„ç»“æœå€¼</span></span><br><span class="line"><span class="keyword">while</span>(Thread.activeCount() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// yieldè¡¨ç¤ºä¸æ‰§è¡Œ</span></span><br><span class="line">    Thread.yield();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬åœ¨æŸ¥çœ‹ number çš„å€¼ï¼Œå‡è®¾ volatile ä¿è¯åŸå­æ€§çš„è¯ï¼Œé‚£ä¹ˆæœ€åè¾“å‡ºçš„å€¼åº”è¯¥æ˜¯ï¼š<code>20 * 1000 = 20000</code></p>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡è®¾æ˜¯ä¸»ç‰©ç†å†…å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyData</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * volatile ä¿®é¥°çš„å…³é”®å­—ï¼Œæ˜¯ä¸ºäº†å¢åŠ  ä¸»çº¿ç¨‹å’Œçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å†…å­˜ä¸­çš„å€¼ï¼Œå…¶å®ƒçº¿ç¨‹ä¹Ÿèƒ½é©¬ä¸Šæ„ŸçŸ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTo60</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨æ„ï¼Œæ­¤æ—¶number å‰é¢æ˜¯åŠ äº†volatileä¿®é¥°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPlusPlus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        number ++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">volatileDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args [])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        MyData myData = <span class="keyword">new</span> MyData();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹é‡Œé¢è¿›è¡Œ1000æ¬¡å¾ªç¯</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                <span class="comment">// é‡Œé¢</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">                    myData.addPlusPlus();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éœ€è¦ç­‰å¾…ä¸Šé¢20ä¸ªçº¿ç¨‹éƒ½è®¡ç®—å®Œæˆåï¼Œåœ¨ç”¨mainçº¿ç¨‹å–å¾—æœ€ç»ˆçš„ç»“æœå€¼</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œåˆ¤æ–­çº¿ç¨‹æ•°æ˜¯å¦å¤§äº2ï¼Œä¸ºä»€ä¹ˆæ˜¯2ï¼Ÿå› ä¸ºé»˜è®¤æ˜¯æœ‰ä¸¤ä¸ªçº¿ç¨‹çš„ï¼Œä¸€ä¸ªmainçº¿ç¨‹ï¼Œä¸€ä¸ªgcçº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">while</span>(Thread.activeCount() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="comment">// yieldè¡¨ç¤ºä¸æ‰§è¡Œ</span></span><br><span class="line">            Thread.yield();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŸ¥çœ‹æœ€ç»ˆçš„å€¼</span></span><br><span class="line">        <span class="comment">// å‡è®¾volatileä¿è¯åŸå­æ€§ï¼Œé‚£ä¹ˆè¾“å‡ºçš„å€¼åº”è¯¥ä¸º:20 * 1000 = 20000</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t finally number value: &quot;</span> + myData.number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆç»“æœæˆ‘ä»¬ä¼šå‘ç°ï¼Œnumberè¾“å‡ºçš„å€¼å¹¶æ²¡æœ‰20000ï¼Œè€Œä¸”æ˜¯æ¯æ¬¡è¿è¡Œçš„ç»“æœéƒ½ä¸ä¸€è‡´çš„ï¼Œè¿™è¯´æ˜äº†volatileä¿®é¥°çš„å˜é‡ä¸ä¿è¯åŸå­æ€§</p>
<h3 id="ä¸ºä»€ä¹ˆå‡ºç°æ•°å€¼ä¸¢å¤±">ä¸ºä»€ä¹ˆå‡ºç°æ•°å€¼ä¸¢å¤±</h3>
<p><img src="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/æ•°å€¼ä¸¢å¤±.png" alt="æ•°å€¼ä¸¢å¤±"></p>
<p>å„è‡ªçº¿ç¨‹åœ¨å†™å…¥ä¸»å†…å­˜çš„æ—¶å€™ï¼Œå‡ºç°äº†æ•°æ®çš„ä¸¢å¤±ï¼Œè€Œå¼•èµ·çš„æ•°å€¼ç¼ºå¤±çš„é—®é¢˜</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†ä¸€ä¸ªç®€å•çš„ number++ æ“ä½œï¼Œè½¬æ¢ä¸ºå­—èŠ‚ç æ–‡ä»¶ä¸€æ¢ç©¶ç«Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">T1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬æ¢åçš„å­—èŠ‚ç æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">moxi</span>.<span class="title">interview</span>.<span class="title">study</span>.<span class="title">thread</span>.<span class="title">T1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">volatile</span> <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> com.moxi.interview.study.thread.T1();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>     <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: aload_0</span><br><span class="line">       <span class="number">5</span>: iconst_0</span><br><span class="line">       <span class="number">6</span>: putfield      #<span class="number">2</span>     <span class="comment">// Field n:I</span></span><br><span class="line">       <span class="number">9</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: dup</span><br><span class="line">       <span class="number">2</span>: getfield      #<span class="number">2</span>     <span class="comment">// Field n:I,æ‹¿åˆ°n</span></span><br><span class="line">       <span class="number">5</span>: iconst_1			   <span class="comment">// å‡†å¤‡å¥½1</span></span><br><span class="line">       <span class="number">6</span>: iadd				   <span class="comment">// ç»™nåŠ ä¸Šå»</span></span><br><span class="line">       <span class="number">7</span>: putfield      #<span class="number">2</span>     <span class="comment">// Field n:Iï¼Œåœ¨æŠŠnæ”¾å›å»</span></span><br><span class="line">      <span class="number">10</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡ŒæŸ¥çœ‹å­—èŠ‚ç çš„æ“ä½œï¼Œæ˜¯ç”¨åˆ°äº† IDEA çš„ javap å‘½ä»¤</p>
<p>æˆ‘ä»¬é¦–å…ˆï¼Œä½¿ç”¨ IDEA æä¾›çš„ External Toolsï¼Œæ¥æ‰©å±• javap å‘½ä»¤</p>
<p><img src="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/æ‰©å±•javapå‘½ä»¤.png" alt="æ‰©å±•javapå‘½ä»¤"></p>
<p>å®Œæˆä¸Šè¿°æ“ä½œåï¼Œæˆ‘ä»¬åœ¨éœ€è¦æŸ¥çœ‹å­—èŠ‚ç çš„æ–‡ä»¶ä¸‹ï¼Œå³é”®é€‰æ‹© External Tools å³å¯</p>
<p><img src="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/æ‰©å±•javapå‘½ä»¤2.png" alt="æ‰©å±•javapå‘½ä»¤2"></p>
<p>ç§»åŠ¨åˆ°åº•éƒ¨ï¼Œæœ‰ä¸€ä»½å­—èŠ‚ç æŒ‡ä»¤å¯¹ç…§è¡¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œé˜…è¯»</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±é’ˆå¯¹ add() è¿™ä¸ªæ–¹æ³•çš„å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œåˆ†æ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">  Code:</span><br><span class="line">     <span class="number">0</span>: aload_0</span><br><span class="line">     <span class="number">1</span>: dup</span><br><span class="line">     <span class="number">2</span>: getfield      #<span class="number">2</span>    <span class="comment">// Field n:I</span></span><br><span class="line">     <span class="number">5</span>: iconst_1</span><br><span class="line">     <span class="number">6</span>: iadd</span><br><span class="line">     <span class="number">7</span>: putfield      #<span class="number">2</span>    <span class="comment">// Field n:I</span></span><br><span class="line">    <span class="number">10</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬èƒ½å¤Ÿå‘ç° n++ è¿™æ¡å‘½ä»¤ï¼Œè¢«æ‹†åˆ†æˆäº†4ä¸ªæŒ‡ä»¤</p>
<ul>
<li>æ‰§è¡Œ<code>getfield</code> ä»ä¸»å†…å­˜æ‹¿åˆ°åŸå§‹n</li>
<li>æ‰§è¡Œ<code>iconst_1</code>å‡†å¤‡å¸¸é‡1</li>
<li>æ‰§è¡Œ<code>iadd</code> è¿›è¡ŒåŠ 1æ“ä½œ</li>
<li>æ‰§è¡Œ<code>putfileld</code> æŠŠç´¯åŠ åçš„å€¼å†™å›ä¸»å†…å­˜</li>
</ul>
<p>å‡è®¾æˆ‘ä»¬æ²¡æœ‰åŠ  <code>synchronized</code>é‚£ä¹ˆç¬¬ä¸€æ­¥å°±å¯èƒ½å­˜åœ¨ç€ï¼Œä¸‰ä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ <code>getfield</code> å‘½ä»¤ï¼Œæ‹¿åˆ°ä¸»å­˜ä¸­çš„ n å€¼ï¼Œç„¶åä¸‰ä¸ªçº¿ç¨‹ï¼Œå„è‡ªåœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­è¿›è¡ŒåŠ  1 æ“ä½œï¼Œä½†ä»–ä»¬å¹¶å‘è¿›è¡Œ <code>iadd</code> å‘½ä»¤çš„æ—¶å€™ï¼Œå› ä¸ºåªèƒ½ä¸€ä¸ªè¿›è¡Œå†™ï¼Œæ‰€ä»¥å…¶å®ƒæ“ä½œä¼šè¢«æŒ‚èµ·ï¼Œå‡è®¾1çº¿ç¨‹ï¼Œå…ˆè¿›è¡Œäº†å†™æ“ä½œï¼Œåœ¨å†™å®Œåï¼Œvolatile çš„å¯è§æ€§ï¼Œåº”è¯¥éœ€è¦å‘Šè¯‰å…¶å®ƒä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸»å†…å­˜çš„å€¼å·²ç»è¢«ä¿®æ”¹äº†ï¼Œä½†æ˜¯å› ä¸ºå¤ªå¿«äº†ï¼Œå…¶å®ƒä¸¤ä¸ªçº¿ç¨‹ï¼Œé™†ç»­æ‰§è¡Œ <code>iadd</code>å‘½ä»¤ï¼Œè¿›è¡Œå†™å…¥æ“ä½œï¼Œè¿™å°±é€ æˆäº†å…¶ä»–çº¿ç¨‹æ²¡æœ‰æ¥å—åˆ°ä¸»å†…å­˜ n çš„æ”¹å˜ï¼Œä»è€Œè¦†ç›–äº†åŸæ¥çš„å€¼ï¼Œå‡ºç°å†™ä¸¢å¤±ï¼Œè¿™æ ·ä¹Ÿå°±è®©æœ€ç»ˆçš„ç»“æœå°‘äº 20000</p>
<h3 id="å¦‚ä½•è§£å†³">å¦‚ä½•è§£å†³</h3>
<p>å› æ­¤è¿™ä¹Ÿè¯´æ˜ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ <code>number++</code> åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè§£å†³çš„æ–¹æ³•æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<ul>
<li>åœ¨æ–¹æ³•ä¸ŠåŠ å…¥ <code>synchronized</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">addPlusPlus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    number ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬èƒ½å¤Ÿå‘ç°å¼•å…¥synchronizedå…³é”®å­—åï¼Œä¿è¯äº†è¯¥æ–¹æ³•æ¯æ¬¡åªèƒ½å¤Ÿä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè®¿é—®å’Œæ“ä½œï¼Œæœ€ç»ˆè¾“å‡ºçš„ç»“æœä¹Ÿå°±ä¸º20000</p>
<h3 id="å…¶å®ƒè§£å†³æ–¹æ³•">å…¶å®ƒè§£å†³æ–¹æ³•</h3>
<p>ä¸Šé¢çš„æ–¹æ³•å¼•å…¥synchronizedï¼Œè™½ç„¶èƒ½å¤Ÿä¿è¯åŸå­æ€§ï¼Œä½†æ˜¯ä¸ºäº†è§£å†³ <code>number++</code>ï¼Œè€Œå¼•å…¥é‡é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œæœ‰ç§ æ€é¸¡ç„‰ç”¨ç‰›åˆ€ çš„æ„Ÿè§‰</p>
<p>é™¤äº†å¼•ç”¨synchronizedå…³é”®å­—å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ JUC ä¸‹é¢çš„åŸå­åŒ…è£…ç±»ï¼Œå³åˆšåˆšçš„ int ç±»å‹çš„ numberï¼Œå¯ä»¥ä½¿ç”¨ AtomicInteger æ¥ä»£æ›¿</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  åˆ›å»ºä¸€ä¸ªåŸå­IntegeråŒ…è£…ç±»ï¼Œé»˜è®¤ä¸º0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">AtomicInteger atomicInteger = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtomic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç›¸å½“äº atomicInter ++</span></span><br><span class="line">    atomicInteger.getAndIncrement();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååŒç†ï¼Œç»§ç»­åˆšåˆšçš„æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹é‡Œé¢è¿›è¡Œ1000æ¬¡å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">        <span class="comment">// é‡Œé¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">            myData.addPlusPlus();</span><br><span class="line">            myData.addAtomic();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, String.valueOf(i)).start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ volatile ä¿è¯åŸå­æ€§ï¼Œé‚£ä¹ˆè¾“å‡ºçš„å€¼åº”è¯¥ä¸ºï¼š  20 * 1000 = 20000</span></span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t finally number value: &quot;</span> + myData.number);</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t finally atomicNumber value: &quot;</span> + myData.atomicInteger);</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ç»“æœï¼Œä¸€ä¸ªæ˜¯å¼•å…¥ synchronizedï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨äº†åŸå­åŒ…è£…ç±» AtomicInteger</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">main	finally number valueï¼š 20000</span><br><span class="line">main	finally atomicNumber value: 20000</span><br></pre></td></tr></table></figure>
<h3 id="å­—èŠ‚ç æŒ‡ä»¤è¡¨">å­—èŠ‚ç æŒ‡ä»¤è¡¨</h3>
<blockquote>
<p>ä¸ºäº†æ–¹ä¾¿é˜…è¯»JVMå­—èŠ‚ç æ–‡ä»¶ï¼Œæˆ‘ä»ç½‘ä¸Šæ‰¾äº†ä¸€ä»½å­—èŠ‚ç æŒ‡ä»¤è¡¨</p>
<p>å¼•ç”¨ï¼šhttps://segmentfault.com/a/1190000008722128</p>
<p>è¡¨æ ¼æ”¾åœ¨æ–‡æœ«äº†</p>
</blockquote>
<h2 id="volatile-ç¦æ­¢æŒ‡ä»¤é‡æ’">3. volatile ç¦æ­¢æŒ‡ä»¤é‡æ’</h2>
<p>è®¡ç®—æœºåœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œ<strong>ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤é‡æ’</strong>ï¼Œä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æºä»£ç  -&gt; ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’ -&gt; æŒ‡ä»¤å¹¶è¡Œçš„é‡æ’ -&gt; å†…å­˜ç³»ç»Ÿçš„é‡æ’ -&gt; æœ€ç»ˆæ‰§è¡ŒæŒ‡ä»¤</span><br></pre></td></tr></table></figure>
<p>å•çº¿ç¨‹ç¯å¢ƒé‡Œé¢ç¡®ä¿æœ€ç»ˆæ‰§è¡Œç»“æœå’Œä»£ç é¡ºåºçš„ç»“æœä¸€è‡´</p>
<p><strong>å¤„ç†å™¨åœ¨è¿›è¡Œé‡æ’åºæ—¶ï¼Œå¿…é¡»è¦è€ƒè™‘æŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§</strong></p>
<p>å¤šçº¿ç¨‹ç¯å¢ƒä¸­çº¿ç¨‹äº¤æ›¿æ‰§è¡Œï¼Œç”±äºç¼–è¯‘å™¨ä¼˜åŒ–é‡æ’çš„å­˜åœ¨ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡èƒ½å¦ä¿è¯ä¸€è‡´æ€§æ˜¯æ— æ³•ç¡®å®šçš„ï¼Œç»“æœæ— æ³•é¢„æµ‹ã€‚</p>
<h3 id="æŒ‡ä»¤é‡æ’-1">æŒ‡ä»¤é‡æ’-1</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mySort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> x = <span class="number">11</span>;			<span class="comment">// 1</span></span><br><span class="line">	<span class="keyword">int</span> y = <span class="number">12</span>;			<span class="comment">// 2</span></span><br><span class="line">	x = x + <span class="number">5</span>;			<span class="comment">// 3</span></span><br><span class="line">	y = x * x;			<span class="comment">// 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§æ­£å¸¸å•çº¿ç¨‹ç¯å¢ƒï¼Œæ‰§è¡Œé¡ºåºæ˜¯ 1 2 3 4</p>
<p>ä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯èƒ½å‡ºç°ä»¥ä¸‹çš„é¡ºåºï¼š</p>
<ul>
<li>2 1 3 4</li>
<li>1 3 2 4</li>
</ul>
<p>ä¸Šè¿°çš„è¿‡ç¨‹å°±å¯ä»¥å½“åšæ˜¯æŒ‡ä»¤çš„é‡æ’ï¼Œå³å†…éƒ¨æ‰§è¡Œé¡ºåºï¼Œå’Œæˆ‘ä»¬çš„ä»£ç é¡ºåºä¸ä¸€æ ·</p>
<p>ä½†æ˜¯æŒ‡ä»¤é‡æ’ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œå³ä¸ä¼šå‡ºç°ä¸‹é¢çš„é¡ºåº</p>
<ul>
<li>4 3 2 1</li>
</ul>
<p>å› ä¸ºå¤„ç†å™¨åœ¨è¿›è¡Œé‡æ’æ—¶å€™ï¼Œ<strong>å¿…é¡»è€ƒè™‘åˆ°æŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§</strong></p>
<p>å› ä¸ºæ­¥éª¤ 4ï¼šéœ€è¦ä¾èµ–äº y çš„ç”³æ˜ï¼Œä»¥åŠ x çš„ç”³æ˜ï¼Œæ•…å› ä¸ºå­˜åœ¨æ•°æ®ä¾èµ–ï¼Œæ— æ³•é¦–å…ˆæ‰§è¡Œ</p>
<p><strong>ä¾‹å­ï¼š</strong></p>
<p><code>int a,b,x,y = 0</code></p>
<table>
<thead>
<tr class="header">
<th>çº¿ç¨‹1</th>
<th>çº¿ç¨‹2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x = a;</td>
<td>y = b;</td>
</tr>
<tr class="even">
<td>b = 1;</td>
<td>a = 2;</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>ç»“æœï¼šx = 0; y = 0</td>
<td></td>
</tr>
</tbody>
</table>
<p>å› ä¸ºä¸Šé¢çš„ä»£ç ï¼Œä¸å­˜åœ¨æ•°æ®çš„ä¾èµ–æ€§ï¼Œå› æ­¤ç¼–è¯‘å™¨å¯èƒ½å¯¹æ•°æ®è¿›è¡Œé‡æ’</p>
<table>
<thead>
<tr class="header">
<th>çº¿ç¨‹1</th>
<th>çº¿ç¨‹2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>b = 1;</td>
<td>a = 2;</td>
</tr>
<tr class="even">
<td>x = a;</td>
<td>y = b;</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td>ç»“æœï¼šx = 2; y = 1</td>
<td></td>
</tr>
</tbody>
</table>
<p>è¿™æ ·é€ æˆçš„ç»“æœï¼Œå’Œæœ€å¼€å§‹çš„å°±ä¸ä¸€è‡´äº†ï¼Œè¿™å°±æ˜¯å¯¼è‡´é‡æ’åï¼Œç»“æœå’Œæœ€å¼€å§‹çš„ä¸ä¸€æ ·ï¼Œå› æ­¤ä¸ºäº†é˜²æ­¢è¿™ç§ç»“æœå‡ºç°ï¼Œ<strong>volatile å°±è§„å®šç¦æ­¢æŒ‡ä»¤é‡æ’</strong>ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§</p>
<h3 id="æŒ‡ä»¤é‡æ’-2">æŒ‡ä»¤é‡æ’-2</h3>
<p>æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResortSeqDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a = <span class="number">1</span>;</span><br><span class="line">        flag = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">            a = a + <span class="number">5</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;reValue:&quot;</span> + a);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŒ‰ç…§æ­£å¸¸çš„é¡ºåºï¼Œåˆ†åˆ«è°ƒç”¨ <code>method01()</code> å’Œ <code>method02()</code> é‚£ä¹ˆï¼Œæœ€ç»ˆè¾“å‡ºå°±æ˜¯ <code>a = 6</code></p>
<p>ä½†æ˜¯å¦‚æœåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå› ä¸º <code>method01()</code> å’Œ <code>method02()</code>ï¼Œä»–ä»¬ä¹‹é—´ä¸èƒ½å­˜åœ¨æ•°æ®ä¾èµ–çš„é—®é¢˜ï¼Œå› æ­¤åŸå…ˆçš„é¡ºåºå¯èƒ½æ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>;</span><br><span class="line">flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">a = a + <span class="number">5</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;reValue:&quot;</span> + a); </span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨ç»è¿‡ç¼–è¯‘å™¨ï¼ŒæŒ‡ä»¤ï¼Œæˆ–è€…å†…å­˜çš„é‡æ’åï¼Œå¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">a = a + <span class="number">5</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;reValue:&quot;</span> + a);</span><br><span class="line"></span><br><span class="line">a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œ <code>flag = true</code> åï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹é©¬ä¸Šè°ƒç”¨ <code>method02()</code>ï¼Œæ»¡è¶³ flag çš„åˆ¤æ–­ï¼Œæœ€ç»ˆè®© <code>a + 5</code>ï¼Œç»“æœä¸º 5ï¼Œè¿™æ ·åŒæ ·å‡ºç°äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªç»“æœï¼š<strong>å¤šçº¿ç¨‹ç¯å¢ƒä¸­çº¿ç¨‹äº¤æ›¿æ‰§è¡Œï¼Œç”±äºç¼–è¯‘å™¨ä¼˜åŒ–é‡æ’çš„å­˜åœ¨ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡èƒ½å¦ä¿è¯ä¸€è‡´æ€§æ˜¯æ— æ³•ç¡®å®šçš„ï¼Œç»“æœæ— æ³•é¢„æµ‹ã€‚</strong></p>
<p>è¿™æ ·å°±éœ€è¦é€šè¿‡ volatile æ¥ä¿®é¥°ï¼Œæ¥ä¿è¯çº¿ç¨‹å®‰å…¨æ€§</p>
<h3 id="volatile-é’ˆå¯¹æŒ‡ä»¤é‡æ’åšäº†å•¥">volatile é’ˆå¯¹æŒ‡ä»¤é‡æ’åšäº†å•¥</h3>
<p>volatile å®ç°ç¦æ­¢æŒ‡ä»¤é‡æ’ä¼˜åŒ–ï¼Œä»è€Œé¿å…äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç¨‹åºå‡ºç°ä¹±åºæ‰§è¡Œçš„ç°è±¡</p>
<p>é¦–å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œ<strong>å†…å­˜å±éšœ</strong>ï¼ˆMemory Barrierï¼‰åˆç§°å†…å­˜æ …æ ï¼Œæ˜¯ä¸€ä¸ª CPU æŒ‡ä»¤ï¼Œå®ƒçš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>ä¿è¯ç‰¹å®šæ“ä½œçš„é¡ºåº</li>
<li>ä¿è¯æŸäº›å˜é‡çš„å†…å­˜å¯è§æ€§ï¼ˆåˆ©ç”¨è¯¥ç‰¹æ€§å®ç° volatile çš„å†…å­˜å¯è§æ€§ï¼‰</li>
</ul>
<p>ç”±äºç¼–è¯‘å™¨å’Œå¤„ç†å™¨éƒ½èƒ½æ‰§è¡ŒæŒ‡ä»¤é‡æ’çš„ä¼˜åŒ–ï¼Œå¦‚æœåœ¨æŒ‡ä»¤é—´æ’å…¥ä¸€æ¡ Memory Barrier åˆ™ä¼šå‘Šè¯‰ç¼–è¯‘å™¨å’ŒCPUï¼Œä¸ç®¡ä»€ä¹ˆæŒ‡ä»¤éƒ½ä¸èƒ½å’Œè¿™æ¡ Memory Barrier æŒ‡ä»¤é‡æ’åºï¼Œä¹Ÿå°±æ˜¯è¯´<strong>é€šè¿‡æ’å…¥å†…å­˜å±éšœç¦æ­¢åœ¨å†…å­˜å±éšœå‰åçš„æŒ‡ä»¤æ‰§è¡Œé‡æ’åºä¼˜åŒ–</strong>ã€‚ å†…å­˜å±éšœ<strong>å¦å¤–ä¸€ä¸ªä½œç”¨æ˜¯åˆ·æ–°å‡ºå„ç§ CPU çš„ç¼“å­˜æ•°</strong>ï¼Œå› æ­¤ä»»ä½• CPU ä¸Šçš„çº¿ç¨‹éƒ½èƒ½è¯»å–åˆ°è¿™äº›æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p><img src="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9Avolatile%E7%AC%94%E8%AE%B0/å†…å­˜å±éšœ.png" alt="å†…å­˜å±éšœ"></p>
<p>ä¹Ÿå°±æ˜¯è¿‡åœ¨volatileçš„å†™å’Œè¯»çš„æ—¶å€™ï¼ŒåŠ å…¥å±éšœï¼Œé˜²æ­¢å‡ºç°æŒ‡ä»¤é‡æ’çš„</p>
<h3 id="çº¿ç¨‹å®‰å…¨è·å¾—ä¿è¯">çº¿ç¨‹å®‰å…¨è·å¾—ä¿è¯</h3>
<p>å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿç°è±¡å¯¼è‡´çš„å¯è§æ€§é—®é¢˜</p>
<ul>
<li>å¯é€šè¿‡ synchronized æˆ– volatile å…³é”®å­—è§£å†³ï¼Œä»–ä»¬éƒ½å¯ä»¥ä½¿ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹åçš„å˜é‡ç«‹å³å¯¹å…¶å®ƒçº¿ç¨‹å¯è§</li>
</ul>
<p>å¯¹äºæŒ‡ä»¤é‡æ’å¯¼è‡´çš„å¯è§æ€§é—®é¢˜å’Œæœ‰åºæ€§é—®é¢˜</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨ volatile å…³é”®å­—è§£å†³ï¼Œå› ä¸º volatile å…³é”®å­—çš„å¦ä¸€ä¸ªä½œç”¨å°±æ˜¯ç¦æ­¢é‡æ’åºä¼˜åŒ–</li>
</ul>
<h2 id="volatile-çš„åº”ç”¨">4. volatile çš„åº”ç”¨</h2>
<h3 id="å•ä¾‹æ¨¡å¼dclä»£ç ">å•ä¾‹æ¨¡å¼DCLä»£ç </h3>
<p>DCLï¼šDouble Check Lock</p>
<p>é¦–å…ˆå›é¡¾ä¸€ä¸‹ï¼Œå•çº¿ç¨‹ä¸‹çš„å•ä¾‹æ¨¡å¼ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SingletonDemoï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingletonDemo instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonDemo</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonDemo <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> SingletonDemo();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„ == æ˜¯æ¯”è¾ƒå†…å­˜åœ°å€</span></span><br><span class="line">        System.out.println(SingletonDemo.getInstance() == SingletonDemo.getInstance());</span><br><span class="line">        System.out.println(SingletonDemo.getInstance() == SingletonDemo.getInstance());</span><br><span class="line">        System.out.println(SingletonDemo.getInstance() == SingletonDemo.getInstance());</span><br><span class="line">        System.out.println(SingletonDemo.getInstance() == SingletonDemo.getInstance());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€åè¾“å‡ºçš„ç»“æœï¼š</span></span><br><span class="line"><span class="comment">// main	 æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬çš„å•ä¾‹æ¨¡å¼æ˜¯å¦è¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SingletonDemoï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingletonDemo instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonDemo</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonDemo <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> SingletonDemo();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                SingletonDemo.getInstance();</span><br><span class="line">            &#125;, String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸‹é¢çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–å…¶ä¸­ä¸€æ¬¡è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// 0	 æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo</span></span><br><span class="line"><span class="comment">// 1	 æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo</span></span><br><span class="line"><span class="comment">// 2	 æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šè¿‡ <code>SingletonDemo.getInstance()</code> è·å–åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯åŒä¸€ä¸ªï¼Œè€Œæ˜¯è¢«å¥½å‡ ä¸ªçº¿ç¨‹éƒ½è¿›è¡Œäº†åˆ›å»º</p>
<p>é‚£ä¹ˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå•ä¾‹æ¨¡å¼å¦‚ä½•ä¿è¯å‘¢ï¼Ÿ</p>
<h4 id="è§£å†³æ–¹æ³•-1">è§£å†³æ–¹æ³•-1</h4>
<p>å¼•å…¥ synchronized å…³é”®å­—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> SingletonDemo <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">        instance = <span class="keyword">new</span> SingletonDemo();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬èƒ½å¤Ÿå‘ç°ï¼Œé€šè¿‡å¼•å…¥synchronized å…³é”®å­—ï¼Œèƒ½å¤Ÿè§£å†³é«˜å¹¶å‘ç¯å¢ƒä¸‹çš„å•ä¾‹æ¨¡å¼é—®é¢˜</p>
<p>ä½†æ˜¯ synchronized å±äºé‡é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒåªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®è·å–å®ä¾‹çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œè€Œå‡ä½äº†å¹¶å‘æ€§ï¼Œå› æ­¤é‡‡ç”¨çš„æ¯”è¾ƒå°‘</p>
<h4 id="è§£å†³æ–¹æ³•2">è§£å†³æ–¹æ³•2</h4>
<p>é€šè¿‡å¼•å…¥DCL Double Check Lock åŒç«¯æ£€é”æœºåˆ¶</p>
<p>å°±æ˜¯åœ¨è¿›æ¥å’Œå‡ºå»çš„æ—¶å€™ï¼Œè¿›è¡Œæ£€æµ‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonDemo <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// åŒæ­¥ä»£ç æ®µçš„æ—¶å€™ï¼Œè¿›è¡Œæ£€æµ‹</span></span><br><span class="line">        <span class="keyword">synchronized</span> (SingletonDemo.class) &#123;</span><br><span class="line">            <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                instance = <span class="keyword">new</span> SingletonDemo();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¾“å‡ºç»“æœæ¥çœ‹ï¼Œç¡®å®èƒ½å¤Ÿä¿è¯å•ä¾‹æ¨¡å¼çš„æ­£ç¡®æ€§ï¼Œä½†æ˜¯ä¸Šé¢çš„æ–¹æ³•è¿˜æ˜¯å­˜åœ¨é—®é¢˜çš„</p>
<p><strong>DCLï¼ˆåŒç«¯æ£€é”ï¼‰æœºåˆ¶ä¸ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒåŸå› æ˜¯æœ‰æŒ‡ä»¤é‡æ’çš„å­˜åœ¨ï¼Œè€ŒåŠ å…¥volatileå¯ä»¥ç¦æ­¢æŒ‡ä»¤é‡æ’</strong></p>
<p>åŸå› æ˜¯åœ¨æŸä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°ç¬¬ä¸€æ¬¡æ£€æµ‹çš„æ—¶å€™ï¼Œè¯»å–åˆ° instance ä¸ä¸º nullï¼Œè€Œç”±äºæŒ‡ä»¤é‡æ‹æ“ä½œï¼Œæ­¤æ—¶ instance çš„å¼•ç”¨å¯¹è±¡å¯èƒ½<strong>æ²¡æœ‰å®Œæˆå®ä¾‹åŒ–</strong>ã€‚</p>
<p>å› ä¸º <code>instance = new SingletonDemo()</code>ï¼›å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥è¿›è¡Œå®Œæˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">memory = allocate(); 	<span class="comment">// 1ã€åˆ†é…å¯¹è±¡å†…å­˜ç©ºé—´</span></span><br><span class="line"></span><br><span class="line">instance(memory); 		<span class="comment">// 2ã€åˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">instance = memory; 		<span class="comment">// 3ã€è®¾ç½®instanceæŒ‡å‘åˆšåˆšåˆ†é…çš„å†…å­˜åœ°å€ï¼Œæ­¤æ—¶instance != null</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œèƒ½å¤Ÿå‘ç°ï¼Œæ­¥éª¤2 å’Œ æ­¥éª¤3ä¹‹é—´ä¸å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼Œè€Œä¸”æ— è®ºé‡æ’å‰è¿˜æ˜¯é‡æ’åï¼Œç¨‹åºçš„æ‰§è¡Œç»“æœåœ¨å•çº¿ç¨‹ä¸­å¹¶æ²¡æœ‰æ”¹å˜ï¼Œå› æ­¤è¿™ç§é‡æ’ä¼˜åŒ–æ˜¯å…è®¸çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">memory = allocate(); 	<span class="comment">// 1ã€åˆ†é…å¯¹è±¡å†…å­˜ç©ºé—´</span></span><br><span class="line">instance = memory; 		<span class="comment">// 3ã€è®¾ç½®instanceæŒ‡å‘åˆšåˆšåˆ†é…çš„å†…å­˜åœ°å€ï¼Œæ­¤æ—¶instance != nullï¼Œä½†æ˜¯å¯¹è±¡è¿˜æ²¡æœ‰åˆå§‹åŒ–å®Œæˆ</span></span><br><span class="line">instance(memory); 		<span class="comment">// 2ã€åˆå§‹åŒ–å¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ä¼šé€ æˆä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ<strong>å‡ºç°äº†å…ˆèµ‹å€¼å†è¿›è¡Œæ„é€ çš„æƒ…å†µ</strong></p>
<p><strong>æ‰€ä»¥å½“ä¸€æ¡çº¿ç¨‹è®¿é—®instanceä¸ä¸ºnullæ—¶ï¼Œç”±äºinstanceå®ä¾‹æœªå¿…å·²åˆå§‹åŒ–å®Œæˆï¼Œè¿™å°±é€ æˆäº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜</strong></p>
<p>æ‰€ä»¥éœ€è¦å¼•å…¥volatileï¼Œæ¥ä¿è¯å‡ºç°æŒ‡ä»¤é‡æ’çš„é—®é¢˜ï¼Œä»è€Œä¿è¯å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨æ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> SingletonDemo instance = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€ç»ˆä»£ç ">æœ€ç»ˆä»£ç </h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SingletonDemoï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> SingletonDemo instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonDemo</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;\t æˆ‘æ˜¯æ„é€ æ–¹æ³•SingletonDemo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonDemo <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// aï¼šåŒé‡æ£€æŸ¥åŠ é”å¤šçº¿ç¨‹æƒ…å†µä¸‹ä¼šå‡ºç°ï¼šçº¿ç¨‹Aå·²ç»æ‰§è¡Œåˆ°då¤„ï¼Œæ²¡æœ‰å®Œæˆåˆå§‹ï¼›å› æ­¤æ­¤å¤„è¿˜æ˜¯ä¸ºç©ºï¼Œåˆ™çº¿ç¨‹Bè¿˜æ˜¯èƒ½åˆ°è¿™é‡Œ</span></span><br><span class="line">            <span class="comment">// ç„¶ååœ¨çº¿ç¨‹Aå®Œæˆåˆå§‹åŒ–åï¼ŒBè¿˜æ˜¯èƒ½æ‹¿åˆ°è¿™æŠŠé”ï¼Œå› æ­¤åç»­è¿˜æ˜¯è¦åœ¨è¿›è¡Œä¸€æ¬¡nullçš„åˆ¤æ–­</span></span><br><span class="line">            <span class="keyword">synchronized</span> (SingletonDemo.class) <span class="comment">// b</span></span><br><span class="line">            &#123; </span><br><span class="line">            	<span class="comment">// cï¼šä¸åŠ volitaleå…³é”®å­—çš„è¯æœ‰å¯èƒ½ä¼šå‡ºç°å°šæœªå®Œå…¨åˆå§‹åŒ–å°±è·å–åˆ°çš„æƒ…å†µã€‚åŸå› æ˜¯å†…å­˜æ¨¡å‹å…è®¸æ— åºå†™å…¥</span></span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123; </span><br><span class="line">                	<span class="comment">// dï¼šæ­¤æ—¶æ‰å¼€å§‹åˆå§‹åŒ–</span></span><br><span class="line">                    instance = <span class="keyword">new</span> SingletonDemo();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                SingletonDemo.getInstance();</span><br><span class="line">            &#125;, String.valueOf(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é™„å½•å­—èŠ‚ç æŒ‡ä»¤è¡¨">é™„å½•ï¼šå­—èŠ‚ç æŒ‡ä»¤è¡¨</h2>
<table>
<thead>
<tr class="header">
<th>å­—èŠ‚ç </th>
<th>åŠ©è®°ç¬¦</th>
<th>æŒ‡ä»¤å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0x00</td>
<td>nop</td>
<td>None</td>
</tr>
<tr class="even">
<td>0x01</td>
<td>aconst_null</td>
<td>å°†nullæ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x02</td>
<td>iconst_m1</td>
<td>å°†intå‹-1æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x03</td>
<td>iconst_0</td>
<td>å°†intå‹0æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x04</td>
<td>iconst_1</td>
<td>å°†intå‹1æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x05</td>
<td>iconst_2</td>
<td>å°†intå‹2æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x06</td>
<td>iconst_3</td>
<td>å°†intå‹3æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x07</td>
<td>iconst_4</td>
<td>å°†intå‹4æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x08</td>
<td>iconst_5</td>
<td>å°†intå‹5æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x09</td>
<td>lconst_0</td>
<td>å°†longå‹0æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x0a</td>
<td>lconst_1</td>
<td>å°†longå‹1æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x0b</td>
<td>fconst_0</td>
<td>å°†floatå‹0æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x0c</td>
<td>fconst_1</td>
<td>å°†floatå‹1æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x0d</td>
<td>fconst_2</td>
<td>å°†floatå‹2æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x0e</td>
<td>dconst_0</td>
<td>å°†doubleå‹0æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x0f</td>
<td>dconst_1</td>
<td>å°†doubleå‹1æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x10</td>
<td>bipush</td>
<td>å°†å•å­—èŠ‚çš„å¸¸é‡å€¼(-128~127)æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x11</td>
<td>sipush</td>
<td>å°†ä¸€ä¸ªçŸ­æ•´å‹å¸¸é‡(-32768~32767)æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x12</td>
<td>ldc</td>
<td>å°†int,floatæˆ–Stringå‹å¸¸é‡å€¼ä»å¸¸é‡æ± ä¸­æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x13</td>
<td>ldc_w</td>
<td>å°†int,floatæˆ–Stringå‹å¸¸é‡å€¼ä»å¸¸é‡æ± ä¸­æ¨é€è‡³æ ˆé¡¶(å®½ç´¢å¼•)</td>
</tr>
<tr class="odd">
<td>0x14</td>
<td>ldc2_w</td>
<td>å°†longæˆ–doubleå‹å¸¸é‡å€¼ä»å¸¸é‡æ± ä¸­æ¨é€è‡³æ ˆé¡¶(å®½ç´¢å¼•)</td>
</tr>
<tr class="even">
<td>0x15</td>
<td>iload</td>
<td>å°†æŒ‡å®šçš„intå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x16</td>
<td>lload</td>
<td>å°†æŒ‡å®šçš„longå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x17</td>
<td>fload</td>
<td>å°†æŒ‡å®šçš„floatå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x18</td>
<td>dload</td>
<td>å°†æŒ‡å®šçš„doubleå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x19</td>
<td>aload</td>
<td>å°†æŒ‡å®šçš„å¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x1a</td>
<td>iload_0</td>
<td>å°†ç¬¬ä¸€ä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x1b</td>
<td>iload_1</td>
<td>å°†ç¬¬äºŒä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x1c</td>
<td>iload_2</td>
<td>å°†ç¬¬ä¸‰ä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x1d</td>
<td>iload_3</td>
<td>å°†ç¬¬å››ä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x1e</td>
<td>lload_0</td>
<td>å°†ç¬¬ä¸€ä¸ªlongå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x1f</td>
<td>lload_1</td>
<td>å°†ç¬¬äºŒä¸ªlongå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x20</td>
<td>lload_2</td>
<td>å°†ç¬¬ä¸‰ä¸ªlongå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x21</td>
<td>lload_3</td>
<td>å°†ç¬¬å››ä¸ªlongå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x22</td>
<td>fload_0</td>
<td>å°†ç¬¬ä¸€ä¸ªfloatå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x23</td>
<td>fload_1</td>
<td>å°†ç¬¬äºŒä¸ªfloatå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x24</td>
<td>fload_2</td>
<td>å°†ç¬¬ä¸‰ä¸ªfloatå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x25</td>
<td>fload_3</td>
<td>å°†ç¬¬å››ä¸ªfloatå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x26</td>
<td>dload_0</td>
<td>å°†ç¬¬ä¸€ä¸ªdoubleå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x27</td>
<td>dload_1</td>
<td>å°†ç¬¬äºŒä¸ªdoubleå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x28</td>
<td>dload_2</td>
<td>å°†ç¬¬ä¸‰ä¸ªdoubleå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x29</td>
<td>dload_3</td>
<td>å°†ç¬¬å››ä¸ªdoubleå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x2a</td>
<td>aload_0</td>
<td>å°†ç¬¬ä¸€ä¸ªå¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x2b</td>
<td>aload_1</td>
<td>å°†ç¬¬äºŒä¸ªå¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x2c</td>
<td>aload_2</td>
<td>å°†ç¬¬ä¸‰ä¸ªå¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x2d</td>
<td>aload_3</td>
<td>å°†ç¬¬å››ä¸ªå¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x2e</td>
<td>iaload</td>
<td>å°†intå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x2f</td>
<td>laload</td>
<td>å°†longå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x30</td>
<td>faload</td>
<td>å°†floatå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x31</td>
<td>daload</td>
<td>å°†doubleå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x32</td>
<td>aaload</td>
<td>å°†å¼•ç”¨ç±»å‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x33</td>
<td>baload</td>
<td>å°†booleanæˆ–byteå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x34</td>
<td>caload</td>
<td>å°†charå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x35</td>
<td>saload</td>
<td>å°†shortå‹æ•°ç»„æŒ‡å®šç´¢å¼•çš„å€¼æ¨é€è‡³æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x36</td>
<td>istore</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥æŒ‡å®šæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x37</td>
<td>lstore</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å­˜å…¥æŒ‡å®šæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x38</td>
<td>fstore</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å­˜å…¥æŒ‡å®šæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x39</td>
<td>dstore</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å­˜å…¥æŒ‡å®šæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x3a</td>
<td>astore</td>
<td>å°†æ ˆé¡¶å¼•ç”¨ç±»å‹æ•°å€¼å­˜å…¥æŒ‡å®šæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x3b</td>
<td>istore_0</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬ä¸€ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x3c</td>
<td>istore_1</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x3d</td>
<td>istore_2</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬ä¸‰ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x3e</td>
<td>istore_3</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬å››ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x3f</td>
<td>lstore_0</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å­˜å…¥ç¬¬ä¸€ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x40</td>
<td>lstore_1</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x41</td>
<td>lstore_2</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å­˜å…¥ç¬¬ä¸‰ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x42</td>
<td>lstore_3</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å­˜å…¥ç¬¬å››ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x43</td>
<td>fstore_0</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å­˜å…¥ç¬¬ä¸€ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x44</td>
<td>fstore_1</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x45</td>
<td>fstore_2</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å­˜å…¥ç¬¬ä¸‰ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x46</td>
<td>fstore_3</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å­˜å…¥ç¬¬å››ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x47</td>
<td>dstore_0</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å­˜å…¥ç¬¬ä¸€ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x48</td>
<td>dstore_1</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x49</td>
<td>dstore_2</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å­˜å…¥ç¬¬ä¸‰ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x4a</td>
<td>dstore_3</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å­˜å…¥ç¬¬å››ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x4b</td>
<td>astore_0</td>
<td>å°†æ ˆé¡¶å¼•ç”¨å‹æ•°å€¼å­˜å…¥ç¬¬ä¸€ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x4c</td>
<td>astore_1</td>
<td>å°†æ ˆé¡¶å¼•ç”¨å‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x4d</td>
<td>astore_2</td>
<td>å°†æ ˆé¡¶å¼•ç”¨å‹æ•°å€¼å­˜å…¥ç¬¬ä¸‰ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="odd">
<td>0x4e</td>
<td>astore_3</td>
<td>å°†æ ˆé¡¶å¼•ç”¨å‹æ•°å€¼å­˜å…¥ç¬¬å››ä¸ªæœ¬åœ°å˜é‡</td>
</tr>
<tr class="even">
<td>0x4f</td>
<td>iastore</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="odd">
<td>0x50</td>
<td>lastore</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="even">
<td>0x51</td>
<td>fastore</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="odd">
<td>0x52</td>
<td>dastore</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="even">
<td>0x53</td>
<td>aastore</td>
<td>å°†æ ˆé¡¶å¼•ç”¨å‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="odd">
<td>0x54</td>
<td>bastore</td>
<td>å°†æ ˆé¡¶booleanæˆ–byteå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="even">
<td>0x55</td>
<td>castore</td>
<td>å°†æ ˆé¡¶charå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="odd">
<td>0x56</td>
<td>sastore</td>
<td>å°†æ ˆé¡¶shortå‹æ•°å€¼å­˜å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šç´¢å¼•ä½ç½®</td>
</tr>
<tr class="even">
<td>0x57</td>
<td>pop</td>
<td>å°†æ ˆé¡¶æ•°å€¼å¼¹å‡º(æ•°å€¼ä¸èƒ½æ˜¯longæˆ–doubleç±»å‹çš„)</td>
</tr>
<tr class="odd">
<td>0x58</td>
<td>pop2</td>
<td>å°†æ ˆé¡¶çš„ä¸€ä¸ª(å¯¹äºélongæˆ–doubleç±»å‹)æˆ–ä¸¤ä¸ªæ•°å€¼(å¯¹äºélongæˆ–doubleçš„å…¶ä»–ç±»å‹)å¼¹å‡º</td>
</tr>
<tr class="even">
<td>0x59</td>
<td>dup</td>
<td>å¤åˆ¶æ ˆé¡¶æ•°å€¼å¹¶å°†å¤åˆ¶å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x5a</td>
<td>dup_x1</td>
<td>å¤åˆ¶æ ˆé¡¶æ•°å€¼å¹¶å°†ä¸¤ä¸ªå¤åˆ¶å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x5b</td>
<td>dup_x2</td>
<td>å¤åˆ¶æ ˆé¡¶æ•°å€¼å¹¶å°†ä¸‰ä¸ª(æˆ–ä¸¤ä¸ª)å¤åˆ¶å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x5c</td>
<td>dup2</td>
<td>å¤åˆ¶æ ˆé¡¶ä¸€ä¸ª(å¯¹äºlongæˆ–doubleç±»å‹)æˆ–ä¸¤ä¸ª(å¯¹äºélongæˆ–doubleçš„å…¶ä»–ç±»å‹)æ•°å€¼å¹¶å°†å¤åˆ¶å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x5d</td>
<td>dup2_x1</td>
<td>dup_x1æŒ‡ä»¤çš„åŒå€ç‰ˆæœ¬</td>
</tr>
<tr class="odd">
<td>0x5e</td>
<td>dup2_x2</td>
<td>dup_x2æŒ‡ä»¤çš„åŒå€ç‰ˆæœ¬</td>
</tr>
<tr class="even">
<td>0x5f</td>
<td>swap</td>
<td>å°†æ ˆé¡¶æœ€é¡¶ç«¯çš„ä¸¤ä¸ªæ•°å€¼äº’æ¢(æ•°å€¼ä¸èƒ½æ˜¯longæˆ–doubleç±»å‹)</td>
</tr>
<tr class="odd">
<td>0x60</td>
<td>iadd</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ç›¸åŠ å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x61</td>
<td>ladd</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼ç›¸åŠ å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x62</td>
<td>fadd</td>
<td>å°†æ ˆé¡¶ä¸¤floatå‹æ•°å€¼ç›¸åŠ å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x63</td>
<td>dadd</td>
<td>å°†æ ˆé¡¶ä¸¤doubleå‹æ•°å€¼ç›¸åŠ å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x64</td>
<td>isub</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ç›¸å‡å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x65</td>
<td>lsub</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼ç›¸å‡å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x66</td>
<td>fsub</td>
<td>å°†æ ˆé¡¶ä¸¤floatå‹æ•°å€¼ç›¸å‡å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x67</td>
<td>dsub</td>
<td>å°†æ ˆé¡¶ä¸¤doubleå‹æ•°å€¼ç›¸å‡å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x68</td>
<td>imul</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ç›¸ä¹˜å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x69</td>
<td>lmul</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼ç›¸ä¹˜å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x6a</td>
<td>fmul</td>
<td>å°†æ ˆé¡¶ä¸¤floatå‹æ•°å€¼ç›¸ä¹˜å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x6b</td>
<td>dmul</td>
<td>å°†æ ˆé¡¶ä¸¤doubleå‹æ•°å€¼ç›¸ä¹˜å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x6c</td>
<td>idiv</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ç›¸é™¤å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x6d</td>
<td>ldiv</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼ç›¸é™¤å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x6e</td>
<td>fdiv</td>
<td>å°†æ ˆé¡¶ä¸¤floatå‹æ•°å€¼ç›¸é™¤å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x6f</td>
<td>ddiv</td>
<td>å°†æ ˆé¡¶ä¸¤doubleå‹æ•°å€¼ç›¸é™¤å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x70</td>
<td>irem</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ä½œå–æ¨¡è¿ç®—å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x71</td>
<td>lrem</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼ä½œå–æ¨¡è¿ç®—å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x72</td>
<td>frem</td>
<td>å°†æ ˆé¡¶ä¸¤floatå‹æ•°å€¼ä½œå–æ¨¡è¿ç®—å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x73</td>
<td>drem</td>
<td>å°†æ ˆé¡¶ä¸¤doubleå‹æ•°å€¼ä½œå–æ¨¡è¿ç®—å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x74</td>
<td>ineg</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å–è´Ÿå¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x75</td>
<td>lneg</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å–è´Ÿå¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x76</td>
<td>fneg</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å–è´Ÿå¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x77</td>
<td>dneg</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å–è´Ÿå¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x78</td>
<td>ishl</td>
<td>å°†intå‹æ•°å€¼å·¦ç§»æŒ‡å®šä½æ•°å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x79</td>
<td>lshl</td>
<td>å°†longå‹æ•°å€¼å·¦ç§»æŒ‡å®šä½æ•°å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x7a</td>
<td>ishr</td>
<td>å°†intå‹æ•°å€¼å³(å¸¦ç¬¦å·)ç§»æŒ‡å®šä½æ•°å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x7b</td>
<td>lshr</td>
<td>å°†longå‹æ•°å€¼å³(å¸¦ç¬¦å·)ç§»æŒ‡å®šä½æ•°å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x7c</td>
<td>iushr</td>
<td>å°†intå‹æ•°å€¼å³(æ— ç¬¦å·)ç§»æŒ‡å®šä½æ•°å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x7d</td>
<td>lushr</td>
<td>å°†longå‹æ•°å€¼å³(æ— ç¬¦å·)ç§»æŒ‡å®šä½æ•°å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x7e</td>
<td>iand</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼&quot;æŒ‰ä½ä¸&quot;å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x7f</td>
<td>land</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼&quot;æŒ‰ä½ä¸&quot;å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x80</td>
<td>ior</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼&quot;æŒ‰ä½æˆ–&quot;å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x81</td>
<td>lor</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼&quot;æŒ‰ä½æˆ–&quot;å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x82</td>
<td>ixor</td>
<td>å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼&quot;æŒ‰ä½å¼‚æˆ–&quot;å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x83</td>
<td>lxor</td>
<td>å°†æ ˆé¡¶ä¸¤longå‹æ•°å€¼&quot;æŒ‰ä½å¼‚æˆ–&quot;å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x84</td>
<td>iinc</td>
<td>å°†æŒ‡å®šintå‹å˜é‡å¢åŠ æŒ‡å®šå€¼(å¦‚i++, i--, i+=2ç­‰)</td>
</tr>
<tr class="even">
<td>0x85</td>
<td>i2l</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºlongå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x86</td>
<td>i2f</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºfloatå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x87</td>
<td>i2d</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºdoubleå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x88</td>
<td>l2i</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºintå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x89</td>
<td>l2f</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºfloatå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x8a</td>
<td>l2d</td>
<td>å°†æ ˆé¡¶longå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºdoubleå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x8b</td>
<td>f2i</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºintå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x8c</td>
<td>f2l</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºlongå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x8d</td>
<td>f2d</td>
<td>å°†æ ˆé¡¶floatå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºdoubleå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x8e</td>
<td>d2i</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºintå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x8f</td>
<td>d2l</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºlongå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x90</td>
<td>d2f</td>
<td>å°†æ ˆé¡¶doubleå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºfloatå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x91</td>
<td>i2b</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºbyteå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x92</td>
<td>i2c</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºcharå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x93</td>
<td>i2s</td>
<td>å°†æ ˆé¡¶intå‹æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºshortå‹æ•°å€¼å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x94</td>
<td>lcmp</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤longå‹æ•°å€¼å¤§å°, å¹¶å°†ç»“æœ(1, 0æˆ–-1)å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x95</td>
<td>fcmpl</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤floatå‹æ•°å€¼å¤§å°, å¹¶å°†ç»“æœ(1, 0æˆ–-1)å‹å…¥æ ˆé¡¶; å½“å…¶ä¸­ä¸€ä¸ªæ•°å€¼ä¸º<code>NaN</code>æ—¶, å°†-1å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x96</td>
<td>fcmpg</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤floatå‹æ•°å€¼å¤§å°, å¹¶å°†ç»“æœ(1, 0æˆ–-1)å‹å…¥æ ˆé¡¶; å½“å…¶ä¸­ä¸€ä¸ªæ•°å€¼ä¸º<code>NaN</code>æ—¶, å°†1å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x97</td>
<td>dcmpl</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤doubleå‹æ•°å€¼å¤§å°, å¹¶å°†ç»“æœ(1, 0æˆ–-1)å‹å…¥æ ˆé¡¶; å½“å…¶ä¸­ä¸€ä¸ªæ•°å€¼ä¸º<code>NaN</code>æ—¶, å°†-1å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0x98</td>
<td>dcmpg</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤doubleå‹æ•°å€¼å¤§å°, å¹¶å°†ç»“æœ(1, 0æˆ–-1)å‹å…¥æ ˆé¡¶; å½“å…¶ä¸­ä¸€ä¸ªæ•°å€¼ä¸º<code>NaN</code>æ—¶, å°†1å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0x99</td>
<td>ifeq</td>
<td>å½“æ ˆé¡¶intå‹æ•°å€¼ç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0x9a</td>
<td>ifne</td>
<td>å½“æ ˆé¡¶intå‹æ•°å€¼ä¸ç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0x9b</td>
<td>iflt</td>
<td>å½“æ ˆé¡¶intå‹æ•°å€¼å°äº0æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0x9c</td>
<td>ifge</td>
<td>å½“æ ˆé¡¶intå‹æ•°å€¼å¤§äºç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0x9d</td>
<td>ifgt</td>
<td>å½“æ ˆé¡¶intå‹æ•°å€¼å¤§äº0æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0x9e</td>
<td>ifle</td>
<td>å½“æ ˆé¡¶intå‹æ•°å€¼å°äºç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0x9f</td>
<td>if_icmpeq</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤intå‹æ•°å€¼å¤§å°, å½“ç»“æœç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0xa0</td>
<td>if_icmpne</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤intå‹æ•°å€¼å¤§å°, å½“ç»“æœä¸ç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0xa1</td>
<td>if_icmplt</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤intå‹æ•°å€¼å¤§å°, å½“ç»“æœå°äº0æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0xa2</td>
<td>if_icmpge</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤intå‹æ•°å€¼å¤§å°, å½“ç»“æœå¤§äºç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0xa3</td>
<td>if_icmpgt</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤intå‹æ•°å€¼å¤§å°, å½“ç»“æœå¤§äº0æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0xa4</td>
<td>if_icmple</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤intå‹æ•°å€¼å¤§å°, å½“ç»“æœå°äºç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0xa5</td>
<td>if_acmpeq</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤å¼•ç”¨å‹æ•°å€¼, å½“ç»“æœç›¸ç­‰æ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0xa6</td>
<td>if_acmpne</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤å¼•ç”¨å‹æ•°å€¼, å½“ç»“æœä¸ç›¸ç­‰æ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0xa7</td>
<td>goto</td>
<td>æ— æ¡ä»¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0xa8</td>
<td>jsr</td>
<td>è·³è½¬è‡³æŒ‡å®šçš„16ä½offsetä½ç½®, å¹¶å°†jsrçš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0xa9</td>
<td>ret</td>
<td>è¿”å›è‡³æœ¬åœ°å˜é‡æŒ‡å®šçš„indexçš„æŒ‡ä»¤ä½ç½®(ä¸€èˆ¬ä¸jsræˆ–jsr_wè”åˆä½¿ç”¨)</td>
</tr>
<tr class="odd">
<td>0xaa</td>
<td>tableswitch</td>
<td>ç”¨äºswitchæ¡ä»¶è·³è½¬, caseå€¼è¿ç»­(å¯å˜é•¿åº¦æŒ‡ä»¤)</td>
</tr>
<tr class="even">
<td>0xab</td>
<td>lookupswitch</td>
<td>ç”¨äºswitchæ¡ä»¶è·³è½¬, caseå€¼ä¸è¿ç»­(å¯å˜é•¿åº¦æŒ‡ä»¤)</td>
</tr>
<tr class="odd">
<td>0xac</td>
<td>ireturn</td>
<td>ä»å½“å‰æ–¹æ³•è¿”å›int</td>
</tr>
<tr class="even">
<td>0xad</td>
<td>lreturn</td>
<td>ä»å½“å‰æ–¹æ³•è¿”å›long</td>
</tr>
<tr class="odd">
<td>0xae</td>
<td>freturn</td>
<td>ä»å½“å‰æ–¹æ³•è¿”å›float</td>
</tr>
<tr class="even">
<td>0xaf</td>
<td>dreturn</td>
<td>ä»å½“å‰æ–¹æ³•è¿”å›double</td>
</tr>
<tr class="odd">
<td>0xb0</td>
<td>areturn</td>
<td>ä»å½“å‰æ–¹æ³•è¿”å›å¯¹è±¡å¼•ç”¨</td>
</tr>
<tr class="even">
<td>0xb1</td>
<td>return</td>
<td>ä»å½“å‰æ–¹æ³•è¿”å›void</td>
</tr>
<tr class="odd">
<td>0xb2</td>
<td>getstatic</td>
<td>è·å–æŒ‡å®šç±»çš„é™æ€åŸŸ, å¹¶å°†å…¶å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0xb3</td>
<td>putstatic</td>
<td>ä¸ºæŒ‡å®šç±»çš„é™æ€åŸŸèµ‹å€¼</td>
</tr>
<tr class="odd">
<td>0xb4</td>
<td>getfield</td>
<td>è·å–æŒ‡å®šç±»çš„å®ä¾‹åŸŸ, å¹¶å°†å…¶å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0xb5</td>
<td>putfield</td>
<td>ä¸ºæŒ‡å®šç±»çš„å®ä¾‹åŸŸèµ‹å€¼</td>
</tr>
<tr class="odd">
<td>0xb6</td>
<td>invokevirtual</td>
<td>è°ƒç”¨å®ä¾‹æ–¹æ³•</td>
</tr>
<tr class="even">
<td>0xb7</td>
<td>invokespecial</td>
<td>è°ƒç”¨è¶…ç±»æ„å»ºæ–¹æ³•, å®ä¾‹åˆå§‹åŒ–æ–¹æ³•, ç§æœ‰æ–¹æ³•</td>
</tr>
<tr class="odd">
<td>0xb8</td>
<td>invokestatic</td>
<td>è°ƒç”¨é™æ€æ–¹æ³•</td>
</tr>
<tr class="even">
<td>0xb9</td>
<td>invokeinterface</td>
<td>è°ƒç”¨æ¥å£æ–¹æ³•</td>
</tr>
<tr class="odd">
<td>0xba</td>
<td>invokedynamic</td>
<td>è°ƒç”¨åŠ¨æ€æ–¹æ³•</td>
</tr>
<tr class="even">
<td>0xbb</td>
<td>new</td>
<td>åˆ›å»ºä¸€ä¸ªå¯¹è±¡, å¹¶å°†å…¶å¼•ç”¨å¼•ç”¨å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0xbc</td>
<td>newarray</td>
<td>åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„åŸå§‹ç±»å‹(å¦‚int, float, charç­‰)çš„æ•°ç»„, å¹¶å°†å…¶å¼•ç”¨å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0xbd</td>
<td>anewarray</td>
<td>åˆ›å»ºä¸€ä¸ªå¼•ç”¨å‹(å¦‚ç±», æ¥å£, æ•°ç»„)çš„æ•°ç»„, å¹¶å°†å…¶å¼•ç”¨å€¼å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0xbe</td>
<td>arraylength</td>
<td>è·å–æ•°ç»„çš„é•¿åº¦å€¼å¹¶å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="even">
<td>0xbf</td>
<td>athrow</td>
<td>å°†æ ˆé¡¶çš„å¼‚å¸¸æŠ›å‡º</td>
</tr>
<tr class="odd">
<td>0xc0</td>
<td>checkcast</td>
<td>æ£€éªŒç±»å‹è½¬æ¢, æ£€éªŒæœªé€šè¿‡å°†æŠ›å‡º ClassCastException</td>
</tr>
<tr class="even">
<td>0xc1</td>
<td>instanceof</td>
<td>æ£€éªŒå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»çš„å®é™…, å¦‚æœæ˜¯å°†1å‹å…¥æ ˆé¡¶, å¦åˆ™å°†0å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0xc2</td>
<td>monitorenter</td>
<td>è·å¾—å¯¹è±¡çš„é”, ç”¨äºåŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—</td>
</tr>
<tr class="even">
<td>0xc3</td>
<td>monitorexit</td>
<td>é‡Šæ”¾å¯¹è±¡çš„é”, ç”¨äºåŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—</td>
</tr>
<tr class="odd">
<td>0xc4</td>
<td>wide</td>
<td>æ‰©å±•æœ¬åœ°å˜é‡çš„å®½åº¦</td>
</tr>
<tr class="even">
<td>0xc5</td>
<td>multianewarray</td>
<td>åˆ›å»ºæŒ‡å®šç±»å‹å’ŒæŒ‡å®šç»´åº¦çš„å¤šç»´æ•°ç»„(æ‰§è¡Œè¯¥æŒ‡ä»¤æ—¶, æ“ä½œæ ˆä¸­å¿…é¡»åŒ…å«å„ç»´åº¦çš„é•¿åº¦å€¼), å¹¶å°†å…¶å¼•ç”¨å‹å…¥æ ˆé¡¶</td>
</tr>
<tr class="odd">
<td>0xc6</td>
<td>ifnull</td>
<td>ä¸ºnullæ—¶è·³è½¬</td>
</tr>
<tr class="even">
<td>0xc7</td>
<td>ifnonnull</td>
<td>ä¸ä¸ºnullæ—¶è·³è½¬</td>
</tr>
<tr class="odd">
<td>0xc8</td>
<td>goto_w</td>
<td>æ— æ¡ä»¶è·³è½¬(å®½ç´¢å¼•)</td>
</tr>
<tr class="even">
<td>0xc9</td>
<td>jsr_w</td>
<td>è·³è½¬è‡³æŒ‡å®šçš„32ä½offsetä½ç½®, å¹¶å°†jsr_wçš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€å‹å…¥æ ˆé¡¶</td>
</tr>
</tbody>
</table>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- æœ¬æ–‡ç»“æŸ </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> æ„Ÿè°¢é˜…è¯» ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Java</a>
              <a href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> é¢è¯•ç¬”è®°</a>
              <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> å¹¶å‘ç¼–ç¨‹</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/03/14/%E5%88%B7%E9%A2%98/LeetCode%EF%BC%9A%E6%80%92%E5%88%B7%20%E2%80%9C%E5%89%91%E6%8C%87%20Offer%20%E2%80%9D/" rel="prev" title="LeetCodeï¼šæ€’åˆ· â€œå‰‘æŒ‡ Offerâ€">
      <i class="fa fa-chevron-left"></i> LeetCodeï¼šæ€’åˆ· â€œå‰‘æŒ‡ Offerâ€
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/03/28/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9ACAS%E5%B0%8F%E8%AE%B0/" rel="next" title="Javaï¼šCAS å°è®°">
      Javaï¼šCAS å°è®° <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#javavolatile%E7%AC%94%E8%AE%B0"><span class="nav-text">Javaï¼švolatileç¬”è®°</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#volatile-%E5%92%8C-jmm-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7"><span class="nav-text">1. volatile å’Œ JMM å†…å­˜æ¨¡å‹çš„å¯è§æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%88%E8%B0%88%E5%AF%B9-volatile-%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-text">è°ˆè°ˆå¯¹ volatile çš„ç†è§£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jmm%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-text">JMMæ˜¯ä»€ä¹ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jmm%E7%9A%84%E7%89%B9%E6%80%A7"><span class="nav-text">JMMçš„ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E8%A7%81%E6%80%A7%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81"><span class="nav-text">å¯è§æ€§ä»£ç éªŒè¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#volatile-%E4%B8%8D%E4%BF%9D%E8%AF%81%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="nav-text">2. volatile ä¸ä¿è¯åŸå­æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="nav-text">åŸå­æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95"><span class="nav-text">ä»£ç æµ‹è¯•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%87%BA%E7%8E%B0%E6%95%B0%E5%80%BC%E4%B8%A2%E5%A4%B1"><span class="nav-text">ä¸ºä»€ä¹ˆå‡ºç°æ•°å€¼ä¸¢å¤±</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="nav-text">å¦‚ä½•è§£å†³</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="nav-text">å…¶å®ƒè§£å†³æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4%E8%A1%A8"><span class="nav-text">å­—èŠ‚ç æŒ‡ä»¤è¡¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#volatile-%E7%A6%81%E6%AD%A2%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92"><span class="nav-text">3. volatile ç¦æ­¢æŒ‡ä»¤é‡æ’</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92-1"><span class="nav-text">æŒ‡ä»¤é‡æ’-1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92-2"><span class="nav-text">æŒ‡ä»¤é‡æ’-2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#volatile-%E9%92%88%E5%AF%B9%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92%E5%81%9A%E4%BA%86%E5%95%A5"><span class="nav-text">volatile é’ˆå¯¹æŒ‡ä»¤é‡æ’åšäº†å•¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E8%8E%B7%E5%BE%97%E4%BF%9D%E8%AF%81"><span class="nav-text">çº¿ç¨‹å®‰å…¨è·å¾—ä¿è¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#volatile-%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-text">4. volatile çš„åº”ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8Fdcl%E4%BB%A3%E7%A0%81"><span class="nav-text">å•ä¾‹æ¨¡å¼DCLä»£ç </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95-1"><span class="nav-text">è§£å†³æ–¹æ³•-1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%952"><span class="nav-text">è§£å†³æ–¹æ³•2</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E7%BB%88%E4%BB%A3%E7%A0%81"><span class="nav-text">æœ€ç»ˆä»£ç </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84%E5%BD%95%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4%E8%A1%A8"><span class="nav-text">é™„å½•ï¼šå­—èŠ‚ç æŒ‡ä»¤è¡¨</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">ä¸æ€¥ä¸èºã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">203</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">96</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arthas/" rel="tag">Arthas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CompletableFuture/" rel="tag">CompletableFuture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">74</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">JavaåŸºç¡€</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">Javaè¯­æ³•</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">Kè¿‘é‚»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TransmittableThreadLocal/" rel="tag">TransmittableThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E7%BB%8F%E5%8E%86/" rel="tag">ä¸ªäººç»å†</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">ä¸­é—´ä»¶</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">å…¨æ–‡æ£€ç´¢</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">å†³ç­–æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">åˆ†ç±»é—®é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">åˆ·é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">åˆ·é¢˜ç¬”è®°</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/" rel="tag">åŠ å¯†æ–‡ç« </a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">åšå®¢æ­å»º</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">å‚è€ƒæ–‡ä»¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">åŸºç¡€çŸ¥è¯†</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">å­¦ä¹ ç¬”è®°</a><span class="tag-list-count">104</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">å¹¶å‘ç¼–ç¨‹</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">å¼€å‘æ¡†æ¶</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%90%E9%95%BF%E5%8F%B2/" rel="tag">æˆé•¿å²</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">æŒä¹…å±‚æ¡†æ¶</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">æ’åºç®—æ³•</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">æ“ä½œç³»ç»Ÿ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">æ”¯æŒå‘é‡æœº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">æ•°å­¦æ¨å¯¼</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">æ•°æ®æ¸…æ´—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8/" rel="tag">æ—¥å¸¸</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">æ—¥å¿—æ¡†æ¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">æœºå™¨å­¦ä¹ </a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">æ ‘ç»“æ„</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">æ ‘è“æ´¾</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag">æµ‹è¯•å·¥å…·</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">æ¶ˆæ¯é˜Ÿåˆ—</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">æ·±åº¦å­¦ä¹ </a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">ç‰¹å¾é€‰æ‹©</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">ç¯å¢ƒé…ç½®</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">ç›®æ ‡æ£€æµ‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">çº¿æ€§å›å½’</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">èšç±»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">è¡¨ç¤ºå±‚</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">è®¡ç®—æœºç½‘è·¯</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">è¯»ä¹¦ç¬”è®°</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">è°ƒç”¨é“¾ç›‘æ§</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">è´å¶æ–¯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">è½¯ä»¶ä½¿ç”¨</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">é€»è¾‘å›å½’</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">é›†åˆç±»</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">é›†æˆå­¦ä¹ </a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">é¢ç»</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">é¢è¯•ç¬”è®°</a><span class="tag-list-count">61</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">3.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">54:18</span>
</div>

<!--
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "è¯·å¤šå¤šæŒ‡æ•™~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
