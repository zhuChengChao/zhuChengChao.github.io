<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="‰∏™‰∫∫Êï¥ÁêÜ üí™ ‰∏™‰∫∫‰∏ìÁî® üí™ ÊöëÊúüÂÆû‰π† üí™ ÁßãÊãõ üí™ ÂêéÁ´ØÂºÄÂèë üí™ ÂÖ´ËÇ°Êñá üò∂">
<meta property="og:type" content="article">
<meta property="og:title" content="Èù¢ÁªèÔºö11-‰∏≠Èó¥‰ª∂">
<meta property="og:url" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/index.html">
<meta property="og:site_name" content="Ë¥§‰ΩôË∂Ö">
<meta property="og:description" content="‰∏™‰∫∫Êï¥ÁêÜ üí™ ‰∏™‰∫∫‰∏ìÁî® üí™ ÊöëÊúüÂÆû‰π† üí™ ÁßãÊãõ üí™ ÂêéÁ´ØÂºÄÂèë üí™ ÂÖ´ËÇ°Êñá üò∂">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ÊÆµÂíåÊèê‰∫§ÁÇπ.PNG">
<meta property="og:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/Á¥¢ÂºïËøáÁ®ã.PNG">
<meta property="og:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ËØª‰∏Ä‰∏™ÊñáÊ°£.png">
<meta property="og:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ÊñáÊ°£Êìç‰Ωú.png">
<meta property="og:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/Â∑•‰ΩúÂéüÁêÜ.PNG">
<meta property="og:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/‰∫îÁßçÊ∂àÊÅØÊ®°Âûã.png">
<meta property="article:published_time" content="2021-10-10T02:24:00.000Z">
<meta property="article:modified_time" content="2021-10-10T02:24:00.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="Â≠¶‰π†Á¨îËÆ∞">
<meta property="article:tag" content="Èù¢ËØïÁ¨îËÆ∞">
<meta property="article:tag" content="Èù¢Áªè">
<meta property="article:tag" content="‰∏≠Èó¥‰ª∂">
<meta property="article:tag" content="CAT">
<meta property="article:tag" content="Ë∞ÉÁî®ÈìæÁõëÊéß">
<meta property="article:tag" content="ELK">
<meta property="article:tag" content="Elasticsearch">
<meta property="article:tag" content="Ê∂àÊÅØÈòüÂàó">
<meta property="article:tag" content="RabbitMQ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ÊÆµÂíåÊèê‰∫§ÁÇπ.PNG">

<link rel="canonical" href="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Èù¢ÁªèÔºö11-‰∏≠Èó¥‰ª∂ | Ë¥§‰ΩôË∂Ö</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="ÂàáÊç¢ÂØºËà™Ê†è">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ë¥§‰ΩôË∂Ö</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">‰∏Ä‰ΩçÂ∫ïÂ±ÇÁ†ÅÂÜú :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>È¶ñÈ°µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>ÂÖ≥‰∫é</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Ê†áÁ≠æ<span class="badge">100</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>ÂàÜÁ±ª<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ÂΩíÊ°£<span class="badge">206</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>ÊêúÁ¥¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="ÊêúÁ¥¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="‰∏çÊÄ•‰∏çË∫Å„ÄÇ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ë¥§‰ΩôË∂Ö">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Èù¢ÁªèÔºö11-‰∏≠Èó¥‰ª∂
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ÂèëË°®‰∫é</span>

              <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2021-10-10 10:24:00" itemprop="dateCreated datePublished" datetime="2021-10-10T10:24:00+08:00">2021-10-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">Èù¢Áªè</span></a>
                </span>
                  Ôºå
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">‰∏≠Èó¥‰ª∂</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">ValineÔºö</span>
    
    <a title="valine" href="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="Êú¨ÊñáÂ≠óÊï∞">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Êú¨ÊñáÂ≠óÊï∞Ôºö</span>
              <span>19k</span>
            </span>
            <span class="post-meta-item" title="ÈòÖËØªÊó∂Èïø">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">ÈòÖËØªÊó∂Èïø &asymp;</span>
              <span>17 ÂàÜÈíü</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>‰∏™‰∫∫Êï¥ÁêÜ <span class="emoji" data-emoji="muscle">üí™</span> ‰∏™‰∫∫‰∏ìÁî® <span class="emoji" data-emoji="muscle">üí™</span> ÊöëÊúüÂÆû‰π† <span class="emoji" data-emoji="muscle">üí™</span> ÁßãÊãõ <span class="emoji" data-emoji="muscle">üí™</span> ÂêéÁ´ØÂºÄÂèë <span class="emoji" data-emoji="muscle">üí™</span> ÂÖ´ËÇ°Êñá <span class="emoji" data-emoji="no_mouth">üò∂</span></p>
<span id="more"></span>
<h1 id="Èù¢Áªè11-‰∏≠Èó¥‰ª∂">Èù¢ÁªèÔºö11-‰∏≠Èó¥‰ª∂</h1>
<h2 id="elk">ELK</h2>
<h3 id="‰ΩøÁî®-es-ÁöÑÂéüÂõ†">‰ΩøÁî® ES ÁöÑÂéüÂõ†</h3>
<p>ÈóÆÈ¢òÔºöÁ≥ªÁªü‰∏≠ÁöÑÊï∞ÊçÆÔºåÈöèÁùÄ‰∏öÂä°ÁöÑÂèëÂ±ïÔºåÊó∂Èó¥ÁöÑÊé®ÁßªÔºåÂ∞Ü‰ºöÈùûÂ∏∏Â§öÔºåËÄå‰∏öÂä°‰∏≠ÂæÄÂæÄÈááÁî®Ê®°Á≥äÊü•ËØ¢ËøõË°åÊï∞ÊçÆÁöÑÊêúÁ¥¢ÔºåËÄå<strong>Ê®°Á≥äÊü•ËØ¢‰ºöÂØºËá¥Êü•ËØ¢ÂºïÊìéÊîæÂºÉÁ¥¢Âºï</strong>ÔºåÂØºËá¥Á≥ªÁªüÊü•ËØ¢Êï∞ÊçÆÊó∂ÈÉΩÊòØÂÖ®Ë°®Êâ´ÊèèÔºåÂú®Áôæ‰∏áÁ∫ßÂà´ÁöÑÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÊü•ËØ¢ÊïàÁéáÊòØÈùûÂ∏∏‰Ωé‰∏ãÁöÑ„ÄÇ</p>
<p>ËÄå‰ΩøÁî® ES ÂÅö‰∏Ä‰∏™<strong>ÂÖ®ÊñáÁ¥¢Âºï</strong>ÔºåÂ∞ÜÁªèÂ∏∏Êü•ËØ¢ÁöÑÁ≥ªÁªüÂäüËÉΩÁöÑÊüê‰∫õÂ≠óÊÆµÔºåÊØîÂ¶ÇËØ¥ÁîµÂïÜÁ≥ªÁªüÁöÑÂïÜÂìÅË°®‰∏≠ÂïÜÂìÅÂêçÔºåÊèèËø∞„ÄÅ‰ª∑Ê†ºËøòÊúâ id Ëøô‰∫õÂ≠óÊÆµÊàë‰ª¨ÊîæÂÖ• ES Á¥¢ÂºïÂ∫ìÈáåÔºåÂèØ‰ª•ÊèêÈ´òÊü•ËØ¢ÈÄüÂ∫¶„ÄÇ</p>
<h3 id="ÂÄíÊéíÁ¥¢Âºï">ÂÄíÊéíÁ¥¢Âºï <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>ÂÄíÊéíÁ¥¢ÂºïÊòØÊêúÁ¥¢ÂºïÊìéÁöÑÊ†∏ÂøÉ„ÄÇ</p>
<p><strong>ÊêúÁ¥¢ÁöÑÊ¶ÇÂøµ</strong>ÔºöÁî®Êà∑ËæìÂÖ•ÊÉ≥Ë¶ÅÁöÑÂÖ≥ÈîÆËØçÔºåËøîÂõûÂê´ÊúâËØ•ÂÖ≥ÈîÆËØçÁöÑÊâÄÊúâ‰ø°ÊÅØ„ÄÇËÄå‰º†ÁªüÁöÑÊ£ÄÁ¥¢ÊñπÂºèÊòØÊ†πÊçÆÂÖ≥ÈîÆËØçÔºåÈÄê‰∏™ÈÅçÂéÜÊâÄÊúâÁöÑËÆ∞ÂΩïÔºåÁÑ∂ÂêéËøîÂõûÂê´ÊúâÂÖ≥ÈîÆËØçÁöÑËÆ∞ÂΩï„ÄÇ</p>
<p><strong>ÂÄíÊéíÁ¥¢Âºï</strong>ÔºöÊ∫ê‰∫éÂÆûÈôÖÂ∫îÁî®‰∏≠ÈúÄË¶ÅÊ†πÊçÆÂ±ûÊÄßÁöÑÂÄºÊù•Êü•ÊâæËÆ∞ÂΩï„ÄÇËøôÁßçÁ¥¢ÂºïË°®‰∏≠ÁöÑÊØè‰∏ÄÈ°πÈÉΩÂåÖÊã¨‰∏Ä‰∏™Â±ûÊÄßÂÄºÂíåÂÖ∑ÊúâËØ•Â±ûÊÄßÂÄºÁöÑÂêÑËÆ∞ÂΩïÁöÑÂú∞ÂùÄ„ÄÇÁî±‰∫é‰∏çÊòØÁî±ËÆ∞ÂΩïÊù•Á°ÆÂÆöÂ±ûÊÄßÂÄºÔºåËÄåÊòØÁî±Â±ûÊÄßÂÄºÊù•Á°ÆÂÆöËÆ∞ÂΩïÁöÑ‰ΩçÁΩÆÔºåÂõ†ËÄåÁß∞‰∏∫ÂÄíÊéíÁ¥¢Âºï„ÄÇ</p>
<p><strong>ÂÖ®ÊñáÊ£ÄÁ¥¢</strong>Ôºö</p>
<ul>
<li><strong>ËøôÁßçÂÖàÂª∫Á´ãÁ¥¢ÂºïÔºåÂÜçÂØπÁ¥¢ÂºïËøõË°åÊêúÁ¥¢ÁöÑËøáÁ®ãÂ∞±Âè´ÂÖ®ÊñáÊ£ÄÁ¥¢(Full-text Search) ÔºåÂÖ∂‰∏≠ÁöÑÁ¥¢ÂºïÂ∞±ÊòØÂÄíÊéíÁ¥¢Âºï</strong></li>
<li>Â∞ÜÈùûÁªìÊûÑÂåñÊï∞ÊçÆ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜ‰ø°ÊÅØÊèêÂèñÂá∫Êù•ÔºåÈáçÊñ∞ÁªÑÁªáÔºå‰ΩøÂÖ∂ÂèòÂæóÊúâ‰∏ÄÂÆöÁªìÊûÑÔºåÁÑ∂ÂêéÂØπÊ≠§Êúâ‰∏ÄÂÆöÁªìÊûÑÁöÑÊï∞ÊçÆËøõË°åÊêúÁ¥¢Ôºå‰ªéËÄåËææÂà∞ÊêúÁ¥¢Áõ∏ÂØπËæÉÂø´ÁöÑÁõÆÁöÑ„ÄÇ</li>
<li>ËøôÈÉ®ÂàÜ‰ªéÈùûÁªìÊûÑÂåñÊï∞ÊçÆ‰∏≠ÊèêÂèñÂá∫ÁöÑÁÑ∂ÂêéÈáçÊñ∞ÁªÑÁªáÁöÑ‰ø°ÊÅØÔºåÊàë‰ª¨Áß∞‰πãÁ¥¢Âºï„ÄÇ</li>
</ul>
<blockquote>
<p>‰æãÂ¶ÇÔºö Â≠óÂÖ∏„ÄÇ Â≠óÂÖ∏ÁöÑÊãºÈü≥Ë°®ÂíåÈÉ®È¶ñÊ£ÄÂ≠óË°®Â∞±Áõ∏ÂΩì‰∫éÂ≠óÂÖ∏ÁöÑÁ¥¢ÂºïÔºåÂØπÊØè‰∏Ä‰∏™Â≠óÁöÑËß£ÈáäÊòØÈùûÁªìÊûÑÂåñÁöÑÔºåÂ¶ÇÊûúÂ≠óÂÖ∏Ê≤°ÊúâÈü≥ËäÇË°®ÂíåÈÉ®È¶ñÊ£ÄÂ≠óË°®ÔºåÂú®Ëå´Ëå´ËæûÊµ∑‰∏≠Êâæ‰∏Ä‰∏™Â≠óÂè™ËÉΩÈ°∫Â∫èÊâ´Êèè„ÄÇÁÑ∂ËÄåÂ≠óÁöÑÊüê‰∫õ‰ø°ÊÅØÂèØ‰ª•ÊèêÂèñÂá∫Êù•ËøõË°åÁªìÊûÑÂåñÂ§ÑÁêÜÔºåÊØîÂ¶ÇËØªÈü≥ÔºåÂ∞±ÊØîËæÉÁªìÊûÑÂåñÔºåÂàÜÂ£∞ÊØçÂíåÈüµÊØçÔºåÂàÜÂà´Âè™ÊúâÂá†ÁßçÂèØ‰ª•‰∏Ä‰∏ÄÂàó‰∏æÔºå‰∫éÊòØÂ∞ÜËØªÈü≥ÊãøÂá∫Êù•Êåâ‰∏ÄÂÆöÁöÑÈ°∫Â∫èÊéíÂàóÔºåÊØè‰∏ÄÈ°πËØªÈü≥ÈÉΩÊåáÂêëÊ≠§Â≠óÁöÑËØ¶ÁªÜËß£ÈáäÁöÑÈ°µÊï∞„ÄÇÊàë‰ª¨ÊêúÁ¥¢Êó∂ÊåâÁªìÊûÑÂåñÁöÑÊãºÈü≥ÊêúÂà∞ËØªÈü≥ÔºåÁÑ∂ÂêéÊåâÂÖ∂ÊåáÂêëÁöÑÈ°µÊï∞Ôºå‰æøÂèØÊâæÂà∞Êàë‰ª¨ÁöÑÈùûÁªìÊûÑÂåñÊï∞ÊçÆÔºåÂç≥ÂØπÂ≠óÁöÑËß£Èáä„ÄÇ</p>
</blockquote>
<h3 id="esÊ†∏ÂøÉÊ¶ÇÂøµ">ESÔºöÊ†∏ÂøÉÊ¶ÇÂøµ</h3>
<p><strong>ÈõÜÁæ§</strong>ÔºöÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂêØÂä®ÁùÄ ES ÂÆû‰æãÁöÑÊú∫Âô®Áæ§ÔºåÈÄöÂ∏∏‰∏ÄÂè∞Êú∫Âô®Ëµ∑‰∏Ä‰∏™ ES ÂÆû‰æãÔºåÂêå‰∏ÄÁΩëÁªú‰∏ãÔºåÈõÜÂêç‰∏ÄÊ†∑ÁöÑÂ§ö‰∏™ ES ÂÆû‰æãËá™Âä®ÁªÑÊàêÈõÜÁæ§ÔºåËá™Âä®ÂùáË°°ÂàÜÁâáÁ≠âË°å‰∏∫ÔºåÈªòËÆ§ÈõÜÁæ§Âêç‰∏∫ ‚Äúelasticsearch‚ÄùÔºõ</p>
<p><strong>ËäÇÁÇπ</strong>ÔºöËäÇÁÇπÊòØÂ±û‰∫éÈõÜÁæ§‰∏ÄÈÉ®ÂàÜÁöÑÂçï‰∏™ÊúçÂä°Âô®ÔºåÂÆÉÂ≠òÂÇ®Êï∞ÊçÆÂπ∂ÂèÇ‰∏éÁæ§ÈõÜÁ¥¢ÂºïÂíåÊêúÁ¥¢ÂäüËÉΩ„ÄÇ</p>
<ul>
<li><strong>‰∏ªÁªìÁÇπ</strong>Ôºömaster ËäÇÁÇπ‰∏ªË¶ÅÁî®‰∫éÈõÜÁæ§ÁöÑÁÆ°ÁêÜÂèäÁ¥¢Âºï ÊØîÂ¶ÇÊñ∞Â¢ûÁªìÁÇπ„ÄÅÂàÜÁâáÂàÜÈÖç„ÄÅÁ¥¢ÂºïÁöÑÊñ∞Â¢ûÂíåÂà†Èô§Á≠â„ÄÇ</li>
<li><strong>Êï∞ÊçÆÁªìÁÇπ</strong>Ôºödata ËäÇÁÇπ‰∏ä‰øùÂ≠ò‰∫ÜÊï∞ÊçÆÂàÜÁâáÔºåÂÆÉË¥üË¥£Á¥¢ÂºïÂíåÊêúÁ¥¢Êìç‰Ωú„ÄÇ</li>
<li><strong>ÂÆ¢Êà∑Á´ØÁªìÁÇπ</strong>Ôºöclient ËäÇÁÇπ‰ªÖ‰Ωú‰∏∫ËØ∑Ê±ÇÂÆ¢Êà∑Á´ØÂ≠òÂú®Ôºåclient ÁöÑ‰ΩúÁî®‰πü‰Ωú‰∏∫Ë¥üËΩΩÂùáË°°Âô®Ôºåclient ËäÇÁÇπ‰∏çÂ≠òÊï∞ÊçÆÔºåÂè™ÊòØÂ∞ÜËØ∑Ê±ÇÂùáË°°ËΩ¨ÂèëÂà∞ÂÖ∂ÂÆÉÁªìÁÇπ„ÄÇ</li>
</ul>
<p><strong>index Á¥¢Âºï</strong>ÔºöÂåÖÂê´‰∏ÄÂ†ÜÊúâÁõ∏‰ººÁªìÊûÑÁöÑÊñáÊ°£Êï∞ÊçÆÔºåÂ∞±ÂÉèÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‚ÄúÊï∞ÊçÆÂ∫ì‚Äù„ÄÇÁ¥¢ÂºïÊòØÈÄªËæëÂêçÁß∞Á©∫Èó¥ÔºåÊò†Â∞ÑÂà∞‰∏Ä<br>
‰∏™ÊàñÂ§ö‰∏™‰∏ªÂàÜÁâáÔºåÂπ∂‰∏îÂèØ‰ª•ÊúâÈõ∂‰∏™ÊàñÂ§ö‰∏™ÂâØÊú¨ÂàÜÁâá„ÄÇ</p>
<p><strong>Document ÊñáÊ°£</strong>ÔºöES ‰∏≠ÁöÑÊúÄÂ∞èÊï∞ÊçÆÂçïÂÖÉÔºå‰∏Ä‰∏™ document Â∞±ÂÉèÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÈÄöÂ∏∏‰ª• Json Ê†ºÂºèÊòæÁ§∫ÔºåÂ§ö‰∏™ document Â≠òÂÇ®‰∫é‰∏Ä‰∏™Á¥¢ÂºïÔºàIndexÔºâ‰∏≠„ÄÇ</p>
<p><strong>Field Â≠óÊÆµ</strong>ÔºöÂ∞±ÂÉèÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàóÔºàColumnsÔºâÔºåÂÆö‰πâÊØè‰∏™ document Â∫îËØ•ÊúâÁöÑÂ≠óÊÆµ„ÄÇ</p>
<p><strong>Type Á±ªÂûãÔºö</strong>ÊØè‰∏™Á¥¢ÂºïÈáåÈÉΩÂèØ‰ª•Êúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ typeÔºåtype ÊòØ index ‰∏≠ÁöÑ‰∏Ä‰∏™ÈÄªËæëÊï∞ÊçÆÂàÜÁ±ªÔºå‰∏Ä‰∏™ type ‰∏ãÁöÑ documentÔºåÈÉΩÊúâÁõ∏ÂêåÁöÑ field„ÄÇ</p>
<blockquote>
<p><strong>Ê≥®ÊÑè</strong>Ôºö6.0 ‰πãÂâçÁöÑÁâàÊú¨Êúâ typeÔºàÁ±ªÂûãÔºâÊ¶ÇÂøµÔºåtype Áõ∏ÂΩì‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑË°®ÔºåES ÂÆòÊñπÂ∞ÜÂú® ES9.0 ÁâàÊú¨‰∏≠ÂΩªÂ∫ïÂà†Èô§ type„ÄÇ</p>
</blockquote>
<p><strong>shard ÂàÜÁâáÔºö</strong>index Êï∞ÊçÆËøáÂ§ßÊó∂ÔºåÂ∞Ü index ÈáåÈù¢ÁöÑÊï∞ÊçÆÔºåÂàÜ‰∏∫Â§ö‰∏™ shardÔºåÂàÜÂ∏ÉÂºèÁöÑÂ≠òÂÇ®Âú®ÂêÑ‰∏™ÊúçÂä°Âô®‰∏äÈù¢„ÄÇÂèØ‰ª•ÊîØÊåÅÊµ∑ÈáèÊï∞ÊçÆÂíåÈ´òÂπ∂ÂèëÔºåÊèêÂçáÊÄßËÉΩÂíåÂêûÂêêÈáèÔºåÂÖÖÂàÜÂà©Áî®Â§öÂè∞Êú∫Âô®ÁöÑ cpu„ÄÇ</p>
<p><strong>replicaÔºöÂâØÊú¨</strong></p>
<ul>
<li>Âú®ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºå‰ªª‰Ωï‰∏ÄÂè∞Êú∫Âô®ÈÉΩ‰ºöÈöèÊó∂ÂÆïÊú∫ÔºåÂ¶ÇÊûúÂÆïÊú∫Ôºåindex ÁöÑ‰∏Ä‰∏™ÂàÜÁâáÊ≤°ÊúâÔºåÂØºËá¥Ê≠§ index ‰∏çËÉΩÊêúÁ¥¢„ÄÇÊâÄ‰ª•Ôºå‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÔºåÊàë‰ª¨‰ºöÂ∞ÜÊØè‰∏™ index ÁöÑÂàÜÁâáÁªèË°åÂ§á‰ªΩÔºåÂ≠òÂÇ®Âú®Âè¶Â§ñÁöÑÊú∫Âô®‰∏ä„ÄÇ‰øùËØÅÂ∞ëÊï∞Êú∫Âô®ÂÆïÊú∫esÈõÜÁæ§‰ªçÂèØ‰ª•ÊêúÁ¥¢„ÄÇ</li>
<li>ËÉΩÊ≠£Â∏∏Êèê‰æõÊü•ËØ¢ÂíåÊèíÂÖ•ÁöÑÂàÜÁâáÊàë‰ª¨Âè´ÂÅö‰∏ªÂàÜÁâáÔºàprimary shardÔºâÔºåÂÖ∂‰ΩôÁöÑÊàë‰ª¨Â∞±ÁÆ°‰ªñ‰ª¨Âè´ÂÅöÂ§á‰ªΩÁöÑÂàÜÁâáÔºàreplica shardÔºâ„ÄÇ</li>
</ul>
<blockquote>
<p>ES 6 ÈªòËÆ§Êñ∞Âª∫Á¥¢ÂºïÊó∂Ôºå5ÂàÜÁâáÔºå2ÂâØÊú¨Ôºå‰πüÂ∞±ÊòØ‰∏Ä‰∏ª‰∏ÄÂ§áÔºåÂÖ±10‰∏™ÂàÜÁâáÔºõËÄåÂú® ES 7ÔºåÈªòËÆ§ÂàÜÁâáÊï∞‰∏∫1ÔºåÂâØÊú¨‰πü‰∏∫ 1</p>
</blockquote>
<h3 id="es-ÁöÑ-master-Áõ∏ÂÖ≥">ES ÁöÑ master Áõ∏ÂÖ≥</h3>
<p><strong>ÈÖçÁΩÆ</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÊåáÂÆöËØ•ËäÇÁÇπÊòØÂê¶ÊúâËµÑÊ†ºË¢´ÈÄâ‰∏æÊàê‰∏∫masterÁªìÁÇπÔºåÈªòËÆ§ÊòØtrueÔºåÂ¶ÇÊûúÂéüÊù•ÁöÑmasterÂÆïÊú∫‰ºöÈáçÊñ∞ÈÄâ‰∏æÊñ∞ÁöÑmaster„ÄÇ</span></span><br><span class="line"><span class="attr">node.master:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># ÂèØ‰ª•‰Ωú‰∏∫‰∏ªËäÇÁÇπÁöÑËäÇÁÇπÂàóË°®</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;node-1&quot;</span>]  </span><br><span class="line"><span class="comment"># ‰∏ªÁªìÁÇπÊï∞ÈáèÁöÑÊúÄÂ∞ëÂÄº,Ê≠§ÂÄºÁöÑÂÖ¨Âºè‰∏∫Ôºö(master_eligible_nodes / 2) + 1 ÔºåÊØîÂ¶ÇÔºöÊúâ3‰∏™Á¨¶ÂêàË¶ÅÊ±ÇÁöÑ‰∏ªÁªìÁÇπÔºåÈÇ£‰πàËøôÈáåË¶ÅËÆæÁΩÆ‰∏∫2„ÄÇ</span></span><br><span class="line"><span class="attr">discovery.zen.minimum_master_nodes:</span></span><br></pre></td></tr></table></figure>
<p><strong>Master ÈÄâ‰∏æÊµÅÁ®ã</strong></p>
<ul>
<li>Elasticsearch ÁöÑÈÄâ‰∏ªÊòØ ZenDiscovery Ê®°ÂùóË¥üË¥£ÁöÑÔºõ</li>
<li>ÂØπÊâÄÊúâÂèØ‰ª•Êàê‰∏∫ Master ÁöÑËäÇÁÇπÔºànode.master: trueÔºâÊ†πÊçÆ nodeId Â≠óÂÖ∏ÊéíÂ∫èÔºåÊØèÊ¨°ÈÄâ‰∏æÊØè‰∏™ËäÇÁÇπÈÉΩÊääËá™Â∑±ÊâÄÁü•ÈÅìËäÇÁÇπÊéí‰∏ÄÊ¨°Â∫èÔºåÁÑ∂ÂêéÈÄâÂá∫Á¨¨‰∏Ä‰∏™ÔºàÁ¨¨ 0 ‰ΩçÔºâËäÇÁÇπÔºåÊöÇ‰∏îËÆ§‰∏∫ÂÆÉÊòØ Master ËäÇÁÇπÔºõ<br>
</li>
<li>Â¶ÇÊûúÂØπÊüê‰∏™ËäÇÁÇπÁöÑÊäïÁ•®Êï∞ËææÂà∞‰∏ÄÂÆöÁöÑÂÄºÔºàÂèØ‰ª•Êàê‰∏∫ master ËäÇÁÇπÊï∞ n/2+1ÔºâÂπ∂‰∏îËØ•ËäÇÁÇπËá™Â∑±‰πüÈÄâ‰∏æËá™Â∑±ÔºåÈÇ£Ëøô‰∏™ËäÇÁÇπÂ∞±ÊòØ MasterÔºåÂê¶ÂàôÈáçÊñ∞ÈÄâ‰∏æ‰∏ÄÁõ¥Âà∞Êª°Ë∂≥‰∏äËø∞Êù°‰ª∂Ôºõ</li>
<li>Master ËäÇÁÇπÁöÑËÅåË¥£‰∏ªË¶ÅÂåÖÊã¨ÈõÜÁæ§„ÄÅËäÇÁÇπÂíåÁ¥¢ÂºïÁöÑÁÆ°ÁêÜÔºå‰∏çË¥üË¥£ÊñáÊ°£Á∫ßÂà´ÁöÑÁÆ°ÁêÜ„ÄÇ</li>
</ul>
<p><strong>‰ªÄ‰πàÊó∂ÂÄôËß¶Âèë</strong>Ôºö</p>
<ol type="1">
<li>ÈõÜÁæ§ÂêØÂä®Ôºõ</li>
<li>Master Â§±ÊïàÔºõ</li>
</ol>
<p><strong>ËÑëË£ÇÈóÆÈ¢ò</strong></p>
<ul>
<li><p>‚ÄúËÑëË£Ç‚ÄùÈóÆÈ¢òÂèØËÉΩÁöÑÊàêÂõ†Ôºö</p>
<p><strong>ÁΩëÁªúÈóÆÈ¢ò</strong>ÔºöÈõÜÁæ§Èó¥ÁöÑÁΩëÁªúÂª∂ËøüÂØºËá¥‰∏Ä‰∫õËäÇÁÇπËÆøÈóÆ‰∏çÂà∞ masterÔºåËÆ§‰∏∫ master ÊåÇÊéâ‰∫Ü‰ªéËÄåÈÄâ‰∏æÂá∫Êñ∞ÁöÑ masterÔºåÂπ∂ÂØπ master ‰∏äÁöÑÂàÜÁâáÂíåÂâØÊú¨Ê†áÁ∫¢ÔºåÂàÜÈÖçÊñ∞ÁöÑ‰∏ªÂàÜÁâáÔºõ</p>
<p><strong>ËäÇÁÇπË¥üËΩΩ</strong>Ôºö‰∏ªËäÇÁÇπÁöÑËßíËâ≤Êó¢‰∏∫ master Âèà‰∏∫ dataÔºåËÆøÈóÆÈáèËæÉÂ§ßÊó∂ÂèØËÉΩ‰ºöÂØºËá¥ ES ÂÅúÊ≠¢ÂìçÂ∫îÈÄ†ÊàêÂ§ßÈù¢ÁßØÂª∂ËøüÔºåÊ≠§Êó∂ÂÖ∂‰ªñËäÇÁÇπÂæó‰∏çÂà∞‰∏ªËäÇÁÇπÁöÑÂìçÂ∫îËÆ§‰∏∫‰∏ªËäÇÁÇπÊåÇÊéâ‰∫ÜÔºå‰ºöÈáçÊñ∞ÈÄâÂèñ‰∏ªËäÇÁÇπ„ÄÇ</p>
<p><strong>ÂÜÖÂ≠òÂõûÊî∂</strong>Ôºödata ËäÇÁÇπ‰∏äÁöÑ ES ËøõÁ®ãÂç†Áî®ÁöÑÂÜÖÂ≠òËæÉÂ§ßÔºåÂºïÂèë JVM ÁöÑÂ§ßËßÑÊ®°ÂÜÖÂ≠òÂõûÊî∂ÔºåÈÄ†Êàê ES ËøõÁ®ãÂ§±ÂéªÂìçÂ∫î„ÄÇ</p></li>
<li><p>ËÑëË£ÇÈóÆÈ¢òËß£ÂÜ≥ÊñπÊ°àÔºö</p>
<p><strong>ÂáèÂ∞ëËØØÂà§</strong>Ôºö<code>discovery.zen.ping_timeout</code> ËäÇÁÇπÁä∂ÊÄÅÁöÑÂìçÂ∫îÊó∂Èó¥ÔºåÈªòËÆ§‰∏∫ 3sÔºåÂèØ‰ª•ÈÄÇÂΩìË∞ÉÂ§ßÔºåÂ¶ÇÊûú master Âú®ËØ•ÂìçÂ∫îÊó∂Èó¥ÁöÑËåÉÂõ¥ÂÜÖÊ≤°ÊúâÂÅöÂá∫ÂìçÂ∫îÂ∫îÁ≠îÔºåÂà§Êñ≠ËØ•ËäÇÁÇπÂ∑≤ÁªèÊåÇÊéâ‰∫Ü„ÄÇË∞ÉÂ§ßÂèÇÊï∞ÔºàÂ¶Ç 6sÔºå<code>discovery.zen.ping_timeout=6</code>ÔºâÔºåÂèØÈÄÇÂΩìÂáèÂ∞ëËØØÂà§„ÄÇ</p>
<p><strong>ÈÄâ‰∏æËß¶Âèë</strong>Ôºö<code>discovery.zen.minimum_master_nodes=1</code>ÔºåËØ•ÂèÇÊï∞ÊòØÁî®‰∫éÊéßÂà∂ÈÄâ‰∏æË°å‰∏∫ÂèëÁîüÁöÑÊúÄÂ∞èÈõÜÁæ§‰∏ªËäÇÁÇπÊï∞Èáè„ÄÇÂΩìÂ§áÈÄâ‰∏ªËäÇÁÇπÁöÑ‰∏™Êï∞Â§ß‰∫éÁ≠â‰∫éËØ•ÂèÇÊï∞ÁöÑÂÄºÔºå‰∏îÂ§áÈÄâ‰∏ªËäÇÁÇπ‰∏≠ÊúâËØ•ÂèÇÊï∞‰∏™ËäÇÁÇπËÆ§‰∏∫‰∏ªËäÇÁÇπÊåÇ‰∫ÜÔºåËøõË°åÈÄâ‰∏æ„ÄÇÂÆòÊñπÂª∫ËÆÆ‰∏∫ <code>(n/2) +1</code>Ôºå n ‰∏∫‰∏ªËäÇÁÇπ‰∏™Êï∞ÔºàÂç≥ÊúâËµÑÊ†ºÊàê‰∏∫‰∏ªËäÇÁÇπÁöÑËäÇÁÇπ‰∏™Êï∞Ôºâ</p>
<p><strong>ËßíËâ≤ÂàÜÁ¶ª</strong>ÔºöÂç≥ master ËäÇÁÇπ‰∏é data ËäÇÁÇπÂàÜÁ¶ªÔºåÈôêÂà∂ËßíËâ≤</p>
<ul>
<li>‰∏ªËäÇÁÇπÈÖçÁΩÆ‰∏∫Ôºö <code>node.master: true</code>Ôºå<code>node.data: false</code></li>
<li>‰ªéËäÇÁÇπÈÖçÁΩÆ‰∏∫Ôºö<code>node.master: false</code>Ôºå<code>node.data: true</code></li>
</ul></li>
</ul>
<h3 id="es-Á¥¢Âºï-index">ES Á¥¢Âºï-Index <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÂõæËß£Ôºö</strong></p>
<p><img src="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ÊÆµÂíåÊèê‰∫§ÁÇπ.PNG" alt="ÊÆµÂíåÊèê‰∫§ÁÇπ"></p>
<p><strong>Á¥¢Âºï‰∏çÂèØÂèò</strong>Ôºö</p>
<ul>
<li>ES ÁöÑÁ¥¢ÂºïÔºåÂú®ËêΩÁõò‰πãÂêéÊòØ‰∏çÂèØÂèòÔºåÂç≥‰∏çÂèØÂØπÂÖ∂ËøõË°å‰∫åÊ¨°‰øÆÊîπÔºåÂ¶ÇÊûúÊÉ≥Ë¶Å‰øÆÊîπÔºåÂøÖÈ°ªÂÖàÂà†Èô§ÂêéÈáçÂª∫„ÄÇ</li>
<li>‰∏çÂèòÊÄßÊúâÈáçË¶ÅÁöÑ‰ª∑ÂÄºÔºö
<ul>
<li><strong>‰∏çÈúÄË¶ÅÈîÅ</strong>ÔºåÂÅáÂ¶ÇÁ¥¢ÂºïÂèØÂèòÔºåÂ∞±ÂøÖÈ°ªÂ¢ûÂä†ÈîÅÁöÑÊú∫Âà∂„ÄÇ</li>
<li><strong>Êõ¥È´òÊïàÂà©Áî®ÁºìÂ≠ò</strong>ÔºöÁî±‰∫éÁ¥¢Âºï‰∏çÂèØÂèòÔºåÂΩìÁ¥¢Âºï‰∏ÄÊó¶Ë¢´ËØªÂÖ•ÂÜÖÂ≠òÔºåÂÆÉÂ∞±ÂèØ‰ª•Âú®‰∏ÄÁõ¥Âú®ÈÇ£ÂÑø„ÄÇÂè™Ë¶ÅÁ≥ªÁªüÊúâË∂≥Â§üÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂ§ßÈáèÁöÑËØªÂ∞±ÂèØ‰ª•Áõ¥Êé•ÈÄöËøáËÆøÈóÆÂÜÖÂ≠òÊù•ÂÆåÊàêÔºåÊûÅÂ§ßÊèêÈ´òÁ≥ªÁªüÁöÑÊÄßËÉΩ„ÄÇ</li>
</ul></li>
<li>Â≠òÂú®ÈóÆÈ¢òÔºö‰∏çËÉΩ‰øÆÊîπÂÆÉÔºåÂç≥ÊØèÂ¢ûÂä†Êñ∞ÊñáÊ°£ÁöÑÊó∂ÂÄôÔºåÈÉΩÈúÄË¶ÅÊääÊóßÁ¥¢ÂºïÂÖ®ÈÉ®Âà†Èô§ÔºåÂÜçÈáçÂª∫„ÄÇ</li>
<li>Ëß£ÂÜ≥ÊñπÊ°àÔºöÂä®ÊÄÅÁ¥¢ÂºïÔºåËßÅ‰∏ãÊñπ„ÄÇ</li>
</ul>
<p><strong>Âä®ÊÄÅÁ¥¢Âºï</strong>Ôºö</p>
<ul>
<li>Âä®ÊÄÅÁ¥¢ÂºïÁöÑÊú¨Ë¥®Â∞±ÊòØ<strong>Â§ö‰∏™Á¥¢Âºï</strong>ÔºåÂç≥Êñ∞Â¢ûÊñáÊ°£Êó∂ÔºåÁõ¥Êé•ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÁ¥¢ÂºïÔºåÊü•ËØ¢Êó∂Ôºå<strong>ÊääÊØè‰∏™Á¥¢ÂºïÁöÑÊï∞ÊçÆÈÉΩÊü•Âá∫Êù•ÂêéÔºåÂÜçËøõË°åËÅöÂêàÂ§ÑÁêÜ</strong>„ÄÇËøôÁßçÊñπÂºèÔºåÊó¢‰øùÁïô‰∫ÜÁ¥¢Âºï‰∏çÂèØÂèòÁöÑ‰ºòÂäøÔºåÂèàËß£ÂÜ≥‰∫ÜÊõ¥Êñ∞ÁöÑÈóÆÈ¢ò„ÄÇ</li>
<li>‰ΩÜÊòØÔºåËøôÁßçÂä®ÊÄÅÁ¥¢ÂºïÂèà‰∫ßÁîü‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÈóÆÈ¢òÔºå<strong>Âç≥ÂΩìÊñ∞Âª∫ÁöÑÁ¥¢ÂºïË∂äÊù•Ë∂äÂ§öÊó∂Ôºå‰ºöÂΩ±ÂìçÂà∞ËÅöÂêàÁöÑÊïàÁéá</strong>Ôºå‰πüÂ∞±‰ºöÂΩ±ÂìçÂà∞Êü•ËØ¢ÁöÑÊïàÁéá„ÄÇ</li>
<li>Ëß£ÂÜ≥ÊñπÊ°à1ÔºöÂØπ‰∫éËøôÁßçÊÉÖÂÜµÔºåÊàë‰ª¨ÂèØËÉΩ‰ºö<strong>‰ªé‰∏öÂä°ËßíÂ∫¶Êù•Â§ÑÁêÜ</strong>„ÄÇÂç≥ÈÄâÊã©ÈùûÁÉ≠ÁÇπÊó∂ÊÆµÔºåËøõË°åÁ¥¢ÂºïÁöÑÈáçÂª∫ÂíåÂàáÊç¢„ÄÇ</li>
<li>Ëß£ÂÜ≥ÊñπÊ°à2Ôºö<strong>es ‰πü‰∏∫ËøôÁßçÊÉÖÂÜµÂáÜÂ§á‰∫Ü segment ÂêàÂπ∂ÁöÑÁ≠ñÁï•</strong>„ÄÇ</li>
</ul>
<p><strong>segment</strong>Ôºö</p>
<ul>
<li>ÊñáÊ°£ÁªèËøá ES Â§ÑÁêÜÂêéÔºå‰ºöÂΩ¢ÊàêÂÄíÊéíÁ¥¢ÂºïÔºåÊîæÂà∞ ES ÁöÑÊüê‰∏™ÊàñÊüêÂá†‰∏™ÂàÜÁâá‰∏äÔºõ</li>
<li>ÊâÄ‰ª•ÔºåES ÁöÑÊØè‰∏™ÂàÜÁâá‰∏äÔºåÂæÄÂæÄ‰ºöÂåÖÂê´ÂæàÂ§ö‰∏™ÂÄíÊéíÁ¥¢ÂºïÔºå<strong>Êàë‰ª¨ÊääÊØè‰∏Ä‰∏™ÂÄíÊéíÁ¥¢ÂºïÔºåÁß∞‰πã‰∏∫ segment</strong>ÔºåÂç≥ÊØè‰∏Ä‰∏™ segment ÈÉΩÊòØ‰∏Ä‰∏™ÂÄíÊéíÁ¥¢ÂºïÔºõ</li>
<li>Âú®Êü•ËØ¢ÁöÑÊó∂ÂÄôÔºåES ‰ºöÊääÊâÄÊúâÁöÑ segment ÁöÑÊü•ËØ¢ÁªìÊûú<strong>ÂêàÂπ∂Ê±áÊÄªÊàêÊúÄÂêéÁöÑÁªìÊûúÂÜçËøîÂõû</strong>„ÄÇ</li>
<li><strong>Á¥¢Âºï‰∏çÂèØÂèòÔºå‰∫ãÂÆû‰∏äÂ∞±ÊòØ segment ‰∏çÂèØÂèò</strong>Ôºõ</li>
<li>ÂΩì segment ‰∏çÊñ≠Â¢ûÂ§öÊó∂ÔºåÂêàÂπ∂Ê±áÊÄªÁöÑÂéãÂäõ‰ºöÂ¢ûÂ§ßÔºåÊ≠§Êó∂Ôºå<strong>ES ‰ºöËß¶Âèë segment ÂêàÂπ∂ÁöÑÁ∫øÁ®ãÔºåÊääËÆ∏Â§öÂ∞èÁöÑsegment ÂêàÂπ∂Êàê‰∏Ä‰∏™Â§ßÁöÑ segmentÔºåÂπ∂Âà†Èô§ÂéüÊù•ÁöÑÂ∞èÁöÑ segment</strong>„ÄÇ</li>
</ul>
<p><strong>ËøëÂÆûÊó∂ÂåñÊêúÁ¥¢</strong>Ôºö</p>
<ul>
<li>ËøëÂÆûÊó∂ÂåñÊêúÁ¥¢ÁöÑÂê´‰πâÊåáÁöÑÊòØÂΩìÂÜôÂÖ•‰∏Ä‰∏™ÊñáÊ°£ÂêéÔºåËØ•ÊñáÊ°£Âú®ÂæàÁü≠Êó∂Èó¥ÂÜÖÂ∞±ÂèØ‰ª•Ë¢´ÈÄöËøáÂÖ≥ÈîÆËØçÊêúÁ¥¢Âà∞„ÄÇ</li>
<li>ÂâçÈù¢ÊèêÂà∞ÔºåES ‰πãÊâÄ‰ª•ËÉΩËææÂà∞ËøëÂÆûÊó∂ÂåñÊêúÁ¥¢ÁöÑÂÖ≥ÈîÆÊòØÔºå<strong>Âè™Ë¶ÅÁºìÂ≠òÂå∫ÁöÑÂÜÖÂÆπÂú® filesystem cache ‰∏≠ÂΩ¢Êàêsegment Ôºà1sÔºåreflushÔºåÁîüÊàêÊñ∞ÁöÑÊÆµÔºâ ÂêéÔºåÂÆÉÂ∞±ËÉΩË¢´ÊêúÁ¥¢‰∫Ü</strong>„ÄÇ</li>
<li>ÂØπ‰∫é‰∫éÊó©ÊúüÁöÑ luceneÔºåÂè™ÊúâÂΩì segment Ë¢´ÂÜôÂÖ•Á£ÅÁõòÊâçËÉΩË¢´ÊêúÁ¥¢ÔºåÁÆÄÁõ¥‰∏çË¶ÅËøõÊ≠•ÁöÑÂ§™Â§ö„ÄÇÂØπÊØî‰ºöÂèëÁé∞ÔºåËøô‰∏≠Èó¥Ôºå‰ªéÂºÄÂßãÂàõÂª∫Âà∞ËÉΩË¢´ÊêúÁ¥¢Ôºå‰∫ãÂÆû‰∏äÁúÅÊéâ‰∫ÜÁ£ÅÁõòIO„ÄÇ</li>
</ul>
<p><strong>commit point</strong></p>
<ul>
<li><p>Áõ¥ËØë‰∏∫Êèê‰∫§ÁÇπÔºå<strong>ES Áî®ÂÆÉÊù•ËÆ∞ÂΩïÂΩìÂâçÊâÄÊúâÂèØÁî® segment</strong>Ôºå‰ª•ÂèäË¢´Âà†Èô§ÁöÑ segmentÔºàÊ†áËÆ∞Âà†Èô§ÔºâÔºõ</p></li>
<li><p>commit point Âú® segment ÂêàÂπ∂Èò∂ÊÆµÔºåËµ∑Âà∞Â∏ÆÂä©ÂêàÂπ∂‰∏îÁª¥ÊåÅÊêúÁ¥¢ÁöÑ‰ΩúÁî®„ÄÇÊØèÊ¨°ÂêàÂπ∂ÈÉΩ‰ºöÈÄöËøáËÆ∞ÂΩï commit point ÁöÑÊñπÂºèÔºåÂëäËØâÂâçÊù•ÁöÑÊü•ËØ¢ÔºåÂì™‰∫õÊÆµÊòØÂèØÁî®ÁöÑÔºåÂì™‰∫õÊÆµÊòØÂ∑≤ÁªèË¢´Âà†Èô§ÁöÑ„ÄÇ</p></li>
<li><p><strong>ÂêàÂπ∂ËøáÁ®ã</strong>Â§ßËá¥Â¶Ç‰∏ãÔºö</p>
<ol type="1">
<li><p>ÈÄâÊã©‰∏Ä‰∫õÂ§ßÂ∞èÁõ∏‰ººÁöÑ segment ÂêàÂπ∂Êàê‰∏Ä‰∏™ËæÉÂ§ßÁöÑ segmentÔºõ</p>
<blockquote>
<p>‰∏∫‰∫Ü‰øùËØÅËøëÂÆûÊó∂ÔºåÊØè 1s ËøõË°å reflush ÈÉΩ‰ºö‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑÊÆµ‰æõÊêúÁ¥¢Ôºå‰ΩÜ‰∏çËêΩÁõò</p>
</blockquote></li>
<li><p>Â∞ÜÊñ∞ÁöÑ segment <strong>Âà∑Âà∞Á£ÅÁõò‰∏ä</strong>„ÄÇ</p></li>
<li><p>ÂàõÂª∫Êñ∞ÁöÑ commit pointÔºåÂÖ∂‰∏≠ÔºåËÆ∞ÂΩï‰∫ÜÊñ∞ÁöÑ segmentÔºåÂπ∂Âà†Èô§ÁöÑÊóßÁöÑ„ÄÇ</p></li>
<li><p>Â∞ÜÊñ∞ÁöÑ segment ÊâìÂºÄ‰æõÊêúÁ¥¢„ÄÇ</p></li>
</ol></li>
</ul>
<p><strong>translog</strong>Ôºö</p>
<ul>
<li>Á±ª‰ºº‰∫é MySQL ÈÄöËøáÈáçÂÅöÊó•Âøó redo Êù•ÂÆûÁé∞‰∫ãÂä°ÁöÑÊåÅ‰πÖÂåñÔºõ</li>
<li>ÂØπ‰∫é ES Êù•ËØ¥Ôºå<strong>ÊñáÊ°£‰πü‰∏çÊòØÁõ¥Êé•Â∞±ÊîæËøõÊñá‰ª∂‰∏≠ÔºåËÄåÊòØÂÖà‰ºöÂú®ÂÜÖÂ≠ò‰∏≠ËøõË°åÂ§ÑÁêÜÔºåÂ§ÑÁêÜÊàêÁ¥¢Âºï‰ø°ÊÅØÂêéÔºå‰ºöÁ≠âÂà∞ÁºìÂÜ≤Âå∫Êª°ÊàñÊòæÂºèÊèê‰∫§Êó∂ÔºåÊâç‰ºö‰øùÂ≠òÂà∞Êñá‰ª∂‰∏≠</strong>Ôºõ</li>
<li>Âú®‰øùÂ≠ò‰πãÂâç ES ËøõÁ®ãÊåÇÊéâÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÖ∂ÂÆÉÊú∫Âà∂ÔºåÂ∞±ËÇØÂÆö‰ºö‰∏¢Êï∞ÊçÆÔºõ</li>
<li>translog Êù•‰∫Ü„ÄÇÂç≥Âú®Êï∞ÊçÆËøõË°åÁ¥¢ÂºïÂâçÔºå‰ºö<strong>ÂÖàÂÜô translog Êó•Âøó</strong>ÔºåËØ•Êó•ÂøóÊòØÂÜôÂú®Êñá‰ª∂‰∏≠ÁöÑ„ÄÇÂΩì ES ËøõÁ®ãÂá∫Áé∞ÈóÆÈ¢òÔºåÈúÄË¶ÅÊÅ¢Â§çÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºöÂü∫‰∫é translog ËøõË°åÈáçÊîæÊó•Âøó„ÄÇËøôÊ†∑ÔºåÂ∞±‰øùËØÅ‰∫ÜÊï∞ÊçÆÁöÑ‰∏ç‰∏¢Â§±„ÄÇ</li>
<li>ÈªòËÆ§Ôºötranslog ÊØèÈöî 5 Áßí‰ºöË¢´ÂÜôÂÖ•Á£ÅÁõòÔºåÊàñËÄÖÂú®ÊØèÊ¨°ÂÜôËØ∑Ê±ÇÂÆåÊàê‰πãÂêéÊâßË°åÔºåÂèØ‰ª•ÈÖçÁΩÆ‰∏∫ÂºÇÊ≠•ÁöÑ„ÄÇ</li>
</ul>
<h3 id="Á¥¢ÂºïÁöÑËøáÁ®ã">Á¥¢ÂºïÁöÑËøáÁ®ã</h3>
<blockquote>
<p>Âú®ÂàÜÊûê‰∫Ü index ÁöÑÊ¶ÇÂøµÂêéÔºåÂêéÂØπÁ¥¢ÂºïËøáÁ®ãÂÅöËøõ‰∏ÄÊ≠•‰∫ÜËß£‰∫Ü</p>
</blockquote>
<p><img src="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/Á¥¢ÂºïËøáÁ®ã.PNG" alt="Á¥¢ÂºïËøáÁ®ã"></p>
<p>Âü∫‰∫é‰∏äÂõæÔºåÊàë‰ª¨ÂèØ‰ª•ÂÆåÊï¥Êï¥ÁêÜÂá∫‰∏Ä‰∏™ ES ÂØπÊñáÊ°£ËøõË°åÁ¥¢ÂºïÁöÑÂü∫Êú¨ËøáÁ®ãÔºåÂ¶Ç‰∏ãÔºö</p>
<ol type="1">
<li><p>Êé•Êî∂Âà∞ÂÆ¢Êà∑Á´Ø‰º†ËøáÊù•ÁöÑÊñáÊ°£ÂêéÔºå‰ºöÈ¶ñÂÖàÂÜôÂÖ• translog Êó•ÂøóÂíåÂÜÖÂ≠òÁºìÂÜ≤Âå∫ bufferÔºõ</p>
<blockquote>
<p>ÂÖ∂‰∏≠ÁöÑ translog ‰∏∫‰∫Ü‰øùËØÅÊ∂àÊÅØÁöÑÂèØÈù†ÊÄßÔºåÂΩì filesystem cache‰∏≠ÁöÑÊï∞ÊçÆÂÜôÂÖ•Âà∞Á£ÅÁõò‰∏≠Êó∂ÔºåÊâç‰ºöÊ∏ÖÈô§ÊéâÔºåËøô‰∏™ËøáÁ®ãÂè´ÂÅö flushÔºõ</p>
</blockquote></li>
<li><p>ÊØèÈöî‰∏ÄÁßíÔºåÁºìÂÜ≤Âå∫‰∏≠ÁöÑÂÜÖÂÆπ‰ºöË¢´Âà∑Êñ∞Âà∞ filesystem cache ‰∏≠ÔºåÊàê‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑ segment„ÄÇÊ≠§Êó∂ÔºåËØ• segment Â∞±‰ºöË¢´ÊâìÂºÄÔºå<strong>ÂèØ‰ª•ËøõË°åÊêúÁ¥¢‰∫Ü</strong>Ôºõ</p>
<blockquote>
<p>Ëøô‰πüÊòØesËÉΩÂÆûÁé∞ËøëÂÆûÊó∂ÊÄßË¢´ÊêúÁ¥¢ÁöÑÂÖ≥ÈîÆÔºå‰∏ÄÊ¨° <strong>reflush</strong></p>
</blockquote></li>
<li><p>ÊØèÁßíÈÉΩÊúâ segment Âà∑ÂÖ•Ôºåsegment Êï∞Èáè‰∏çÊñ≠Â¢ûÈïøÔºåÂ∞±‰ºöËß¶ÂèëÂêàÂπ∂ÔºåÂç≥Â∞ÜÂ∞èÁöÑ segment ÂêàÂπ∂ÊàêÂ§ßÁöÑÔºåËøô‰∏™Â∞±ÊòØ flush ËøáÁ®ãÔºõ</p></li>
<li><p>ÊúÄÂêéÊääÂêàÂπ∂ÊàêÁöÑÂ§ßÁöÑ segment ÂÜôÂÖ•Âà∞Á£ÅÁõò‰∏äÔºåÁîüÊàêÊñ∞ÁöÑ commit pointÔºåÂ∞±ÂÆåÊàê‰∫ÜÊï¥‰∏™ÊñáÊ°£ÁöÑÁ¥¢ÂºïËøáÁ®ãÔºåÂêåÊó∂‰ºöÊ∏ÖÁ©∫ translog</p></li>
</ol>
<p>Âõõ‰∏™Èò∂ÊÆµÂèØ‰ª•Êï¥ÁêÜÊàêÂõõ‰∏™ÂÖ≥ÈîÆËØçÔºö<strong>translog/cache -&gt; segment -&gt; ÂêàÂπ∂ -&gt; ÂÜôÂÖ•</strong></p>
<h3 id="es-Êü•ËØ¢ÊñáÊ°£ÊµÅÁ®ã">ES Êü•ËØ¢ÊñáÊ°£ÊµÅÁ®ã</h3>
<ol type="1">
<li><p>ÂÆ¢Êà∑Á´ØÂèëÈÄÅËØ∑Ê±ÇÂà∞‰ªªÊÑè‰∏Ä‰∏™ nodeÔºåÊàê‰∏∫ÂçèË∞ÉËäÇÁÇπÔºàcoordinate nodeÔºâ</p></li>
<li><p>coordinate node ÂØπ document ËøõË°åË∑ØÁî±ÔºåÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÂØπÂ∫îÁöÑ nodeÔºåÊ≠§Êó∂‰ºö‰ΩøÁî® <strong>round-robin ÈöèÊú∫ËΩÆËØ¢ÁÆóÊ≥ï</strong>ÔºåÂú® primary shard ‰ª•ÂèäÂÖ∂ÊâÄÊúâ replica ‰∏≠ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÔºåËÆ©ËØªËØ∑Ê±ÇË¥üËΩΩÂùáË°°</p>
<blockquote>
<p>Êï∞ÊçÆË∑ØÁî±ÁÆóÊ≥ïÔºö<code>shard = hash(document_id) % (num_of_primary_shards)</code></p>
</blockquote></li>
<li><p>Êé•Êî∂ËØ∑Ê±ÇÁöÑ node ËøîÂõû document Áªô coordinate node</p></li>
<li><p>coordinate node ËøîÂõû document ÁªôÂÆ¢Êà∑Á´Ø</p></li>
</ol>
<blockquote>
<p><strong>ÁâπÊÆäÊÉÖÂÜµ</strong>Ôºödocument Â¶ÇÊûúËøòÂú®Âª∫Á´ãÁ¥¢ÂºïËøáÁ®ã‰∏≠ÔºåÂèØËÉΩÂè™Êúâ primary shard ÊúâÔºå‰ªª‰Ωï‰∏Ä‰∏™ replica shard ÈÉΩÊ≤°ÊúâÔºåÊ≠§Êó∂ÂèØËÉΩ‰ºöÂØºËá¥Êó†Ê≥ïËØªÂèñÂà∞ documentÔºå‰ΩÜÊòØ document ÂÆåÊàêÁ¥¢ÂºïÂª∫Á´ã‰πãÂêéÔºåprimary shard Âíå replica shard Â∞±ÈÉΩÊúâ‰∫Ü„ÄÇ</p>
</blockquote>
<p>ÂõæÁ§∫Ôºö</p>
<p><img src="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ËØª‰∏Ä‰∏™ÊñáÊ°£.png" alt="ËØª‰∏Ä‰∏™ÊñáÊ°£"></p>
<p><strong>Ëøõ‰∏ÄÊ≠•</strong>ÔºöÂΩìÂ≠òÂú®<strong>ËØÑÂàÜÈóÆÈ¢ò</strong>Êó∂ÔºåÊêúÁ¥¢Ë¢´ÊâßË°åÊàê‰∏Ä‰∏™‰∏§Èò∂ÊÆµËøáÁ®ãÔºåÊàë‰ª¨Áß∞‰πã‰∏∫ <strong>Query Then Fetch</strong>Ôºõ</p>
<blockquote>
<p>‰ºöÂ≠òÂú®‰∏Ä‰∏™ Deep Paging ÈóÆÈ¢ò</p>
</blockquote>
<ul>
<li><p>Âú®ÂàùÂßãÊü•ËØ¢Èò∂ÊÆµÊó∂ÔºåÊü•ËØ¢‰ºöÂπøÊí≠Âà∞Á¥¢Âºï‰∏≠ÊØè‰∏Ä‰∏™ÂàÜÁâáÊã∑Ë¥ùÔºà‰∏ªÂàÜÁâáÊàñËÄÖÂâØÊú¨ÂàÜÁâáÔºâ„ÄÇÊØè‰∏™ÂàÜÁâáÂú®Êú¨Âú∞ÊâßË°åÊêúÁ¥¢Âπ∂<strong>ÊûÑÂª∫‰∏Ä‰∏™ÂåπÈÖçÊñáÊ°£ÁöÑÂ§ßÂ∞è‰∏∫ from + size ÁöÑ‰ºòÂÖàÈòüÂàó</strong>„ÄÇ</p>
<blockquote>
<p>PSÔºöÂú®ÊêúÁ¥¢ÁöÑÊó∂ÂÄôÊòØ‰ºöÊü•ËØ¢ Filesystem Cache ÁöÑÔºå‰ΩÜÊòØÊúâÈÉ®ÂàÜÊï∞ÊçÆËøòÂú® Memory BufferÔºåÊâÄ‰ª•ÊêúÁ¥¢ÊòØËøëÂÆûÊó∂ÁöÑ„ÄÇ</p>
</blockquote></li>
<li><p>ÊØè‰∏™ÂàÜÁâáËøîÂõûÂêÑËá™‰ºòÂÖàÈòüÂàó‰∏≠<strong>ÊâÄÊúâÊñáÊ°£ÁöÑ ID ÂíåÊéíÂ∫èÂÄº</strong>ÁªôÂçèË∞ÉËäÇÁÇπÔºåÂÆÉ<strong>ÂêàÂπ∂Ëøô‰∫õÂÄºÂà∞Ëá™Â∑±ÁöÑ‰ºòÂÖàÈòüÂàó</strong>‰∏≠Êù•‰∫ßÁîü‰∏Ä‰∏™ÂÖ®Â±ÄÊéíÂ∫èÂêéÁöÑÁªìÊûúÂàóË°®„ÄÇ</p></li>
<li><p>Êé•‰∏ãÊù•Â∞±ÊòØ<strong>ÂèñÂõûÈò∂ÊÆµ</strong>ÔºåÂçèË∞ÉËäÇÁÇπËæ®Âà´Âá∫Âì™‰∫õÊñáÊ°£ÈúÄË¶ÅË¢´ÂèñÂõûÂπ∂ÂêëÁõ∏ÂÖ≥ÁöÑÂàÜÁâáÊèê‰∫§Â§ö‰∏™ GET ËØ∑Ê±Ç„ÄÇÊØè‰∏™ÂàÜÁâáÂä†ËΩΩÂπ∂‰∏∞ÂØåÊñáÊ°£ÔºåÂ¶ÇÊûúÊúâÈúÄË¶ÅÁöÑËØùÔºåÊé•ÁùÄËøîÂõûÊñáÊ°£ÁªôÂçèË∞ÉËäÇÁÇπ„ÄÇ‰∏ÄÊó¶ÊâÄÊúâÁöÑÊñáÊ°£ÈÉΩË¢´ÂèñÂõû‰∫ÜÔºåÂçèË∞ÉËäÇÁÇπËøîÂõûÁªìÊûúÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p></li>
</ul>
<h3 id="es-Â¢ûÂà†ÊîπÊñáÊ°£">ES Â¢ûÂà†ÊîπÊñáÊ°£</h3>
<p>Â¢ûÂà†ÊîπÂèØ‰ª•ÁúãÂÅö updateÔºåÈÉΩÊòØÂØπÊï∞ÊçÆÁöÑÊîπÂä®„ÄÇ‰∏Ä‰∏™ÊîπÂä®ËØ∑Ê±ÇÂèëÈÄÅÂà∞ es ÈõÜÁæ§ÔºåÁªèÂéÜ‰ª•‰∏ãÂõõ‰∏™Ê≠•È™§Ôºö</p>
<ol type="1">
<li>ÂÆ¢Êà∑Á´ØÈÄâÊã©‰∏Ä‰∏™ node ÂèëÈÄÅËØ∑Ê±ÇËøáÂéªÔºåËøô‰∏™ node Â∞±ÊòØ coordinating nodeÔºàÂçèË∞ÉËäÇÁÇπÔºâ</li>
<li>coordinating nodeÔºåÂØπ document ËøõË°åË∑ØÁî±ÔºåÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂØπÂ∫îÁöÑ nodeÔºàÊúâprimary shardÔºâ</li>
<li>ÂÆûÈôÖÁöÑ node ‰∏äÁöÑ primary shard Â§ÑÁêÜËØ∑Ê±ÇÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆÂêåÊ≠•Âà∞ replica node„ÄÇ</li>
<li>coordinating nodeÔºåÂ¶ÇÊûúÂèëÁé∞ primary node ÂíåÊâÄÊúâ replica node ÈÉΩÊêûÂÆö‰πãÂêéÔºåÂ∞±ËøîÂõûÂìçÂ∫îÁªìÊûúÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li>
</ol>
<p>ÂõæÁ§∫Ôºö</p>
<p><img src="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/ÊñáÊ°£Êìç‰Ωú.png" alt="ÊñáÊ°£Êìç‰Ωú"></p>
<p>Ëøõ‰∏ÄÊ≠•Ôºö</p>
<ul>
<li>ES ‰∏≠ÁöÑÊñáÊ°£ÊòØ‰∏çÂèØÂèòÁöÑÔºåÂõ†Ê≠§‰∏çÊòØËøõË°åÁúüÊ≠£ÁöÑÂà†Èô§ÔºåËØ•ÊñáÊ°£‰æùÁÑ∂ËÉΩÂåπÈÖçÊü•ËØ¢Ôºå‰ΩÜÊòØ<strong>‰ºöÂú®ÁªìÊûú‰∏≠Ë¢´ËøáÊª§Êéâ</strong></li>
<li>Á£ÅÁõò‰∏äÁöÑÊØè‰∏™ÊÆµÈÉΩÊúâ‰∏Ä‰∏™Áõ∏Â∫îÁöÑ <code>.del</code> Êñá‰ª∂ÔºåÂà†Èô§Âêé‰ºöÂú® <code>.del</code> Êñá‰ª∂‰∏≠Ë¢´Ê†áËÆ∞‰∏∫Âà†Èô§ÔºåÂΩìÊÆµÂêàÂπ∂Êó∂ÔºåÂú® <code>.del</code> Êñá‰ª∂‰∏≠Ë¢´Ê†áËÆ∞‰∏∫Âà†Èô§ÁöÑÊñáÊ°£Â∞Ü‰∏ç‰ºöË¢´ÂÜôÂÖ•Êñ∞ÊÆµ„ÄÇ</li>
<li>Êñ∞Âª∫ÊñáÊ°£Êó∂ÔºåES ‰ºö‰∏∫ËØ•ÊñáÊ°£ÊåáÂÆö‰∏Ä‰∏™<strong>ÁâàÊú¨Âè∑</strong>ÔºåÂΩìÊâßË°åÊõ¥Êñ∞Êó∂ÔºåÊóßÁâàÊú¨ÁöÑÊñáÊ°£Âú® <code>.del</code> Êñá‰ª∂‰∏≠Ë¢´Ê†áËÆ∞‰∏∫Âà†Èô§ÔºåÊñ∞ÁâàÊú¨ÁöÑÊñáÊ°£Ë¢´Á¥¢ÂºïÂà∞‰∏Ä‰∏™Êñ∞ÊÆµ„ÄÇÊóßÁâàÊú¨ÁöÑÊñáÊ°£‰æùÁÑ∂ËÉΩÂåπÈÖçÊü•ËØ¢Ôºå‰ΩÜÊòØ<strong>‰ºöÂú®ÁªìÊûú‰∏≠Ë¢´ËøáÊª§Êéâ</strong>„ÄÇ</li>
</ul>
<h3 id="es-ËØªÂÜô‰∏ÄËá¥ÊÄß-Âπ∂ÂèëÊéßÂà∂">ES ËØªÂÜô‰∏ÄËá¥ÊÄß / Âπ∂ÂèëÊéßÂà∂</h3>
<p><strong>Âπ∂ÂèëÈóÆÈ¢ò</strong>ÔºöÂú®Â§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ãÔºåes ÂêåÊ†∑‰ºöÂá∫Áé∞Âπ∂ÂèëÂÜ≤Á™ÅÈóÆÈ¢òÔºåÂç≥Â§ö‰∏™Áî®Êà∑ÂêåÊó∂Êõ¥Êñ∞ ES ÊñáÊ°£Ôºõ</p>
<p><strong>‰πêËßÇÂπ∂ÂèëÊéßÂà∂</strong>Ôºö</p>
<ul>
<li><p>‰∏∫ÊéßÂà∂Âπ∂ÂèëÈóÆÈ¢òÔºåÊàë‰ª¨ÈÄöÂ∏∏ÈááÁî®ÈîÅÊú∫Âà∂„ÄÇÂàÜ‰∏∫ÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅ‰∏§ÁßçÊú∫Âà∂„ÄÇ</p></li>
<li><p><strong>ÊÇ≤ËßÇÈîÅ</strong>ÔºöÂæàÊÇ≤ËßÇÔºåÊâÄÊúâÊÉÖÂÜµÈÉΩ‰∏äÈîÅ„ÄÇÊ≠§Êó∂Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Êìç‰ΩúÊï∞ÊçÆ„ÄÇÂÖ∑‰Ωì‰æãÂ≠ê‰∏∫Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°åÁ∫ßÈîÅ„ÄÅË°®Á∫ßÈîÅ„ÄÅËØªÈîÅ„ÄÅÂÜôÈîÅÁ≠â„ÄÇ</p>
<p>ÁâπÁÇπÔºö‰ºòÁÇπÊòØÊñπ‰æøÔºåÁõ¥Êé•Âä†ÈîÅÔºåÂØπÁ®ãÂ∫èÈÄèÊòé„ÄÇÁº∫ÁÇπÊòØÊïàÁéá‰Ωé„ÄÇ</p></li>
<li><p><strong>‰πêËßÇÈîÅ</strong>ÔºöÂæà‰πêËßÇÔºåÂØπÊï∞ÊçÆÊú¨Ë∫´‰∏çÂä†ÈîÅ„ÄÇÊèê‰∫§Êï∞ÊçÆÊó∂ÔºåÈÄöËøá‰∏ÄÁßçÊú∫Âà∂È™åËØÅÊòØÂê¶Â≠òÂú®ÂÜ≤Á™ÅÔºåÂ¶Ç <strong>es ‰∏≠ÈÄöËøáÁâàÊú¨Âè∑È™åËØÅ</strong>„ÄÇ</p>
<p>ÁâπÁÇπÔºö‰ºòÁÇπÊòØÂπ∂ÂèëËÉΩÂäõÈ´ò„ÄÇÁº∫ÁÇπÊòØÊìç‰ΩúÁπÅÁêêÔºåÂú®Êèê‰∫§Êï∞ÊçÆÊó∂ÔºåÂèØËÉΩÂèçÂ§çÈáçËØïÂ§öÊ¨°„ÄÇ</p></li>
<li><p>ES ÊòØÂàÜÂ∏ÉÂºèÁöÑ„ÄÇÂΩìÊñáÊ°£ÂàõÂª∫„ÄÅÊõ¥Êñ∞ÊàñÂà†Èô§Êó∂Ôºå Êñ∞ÁâàÊú¨ÁöÑÊñáÊ°£ÂøÖÈ°ªÂ§çÂà∂Âà∞ÈõÜÁæ§‰∏≠ÁöÑÂÖ∂‰ªñËäÇÁÇπ„ÄÇ ES ‰πüÊòØÂºÇÊ≠•ÂíåÂπ∂ÂèëÁöÑÔºåËøôÊÑèÂë≥ÁùÄËøô‰∫õÂ§çÂà∂ËØ∑Ê±ÇË¢´Âπ∂Ë°åÂèëÈÄÅÔºåÂπ∂‰∏îÂà∞ËææÁõÆÁöÑÂú∞Êó∂‰πüËÆ∏È°∫Â∫èÊòØ‰π±ÁöÑ „ÄÇ<strong>ES ÈúÄË¶Å‰∏ÄÁßçÊñπÊ≥ïÁ°Æ‰øùÊñáÊ°£ÁöÑÊóßÁâàÊú¨‰∏ç‰ºöË¶ÜÁõñÊñ∞ÁöÑÁâàÊú¨</strong></p>
<p>ES Âà©Áî®‰∫Ü version Âè∑Êù•Á°Æ‰øùÂ∫îÁî®‰∏≠Áõ∏‰∫íÂÜ≤Á™ÅÁöÑÂèòÊõ¥‰∏ç‰ºöÂØºËá¥Êï∞ÊçÆ‰∏¢Â§±</p>
<blockquote>
<p>ËÄÅÁöÑÁâàÊú¨ ES ‰ΩøÁî® versionÔºå‰ΩÜÊòØÊñ∞ÁâàÊú¨‰∏çÊîØÊåÅ‰∫ÜÔºåÊèêÁ§∫Êàë‰ª¨Áî® <code>if_seq_no</code> Âíå <code>if_primary_term</code></p>
<ul>
<li>‰∏çÊîØÊåÅÔºö<code>PUT /test_index/_doc/3?version=1</code></li>
<li>ÁõÆÂâçÊîØÊåÅÔºö<code>PUT /test_index/_doc/3?if_seq_no=12&amp;if_primary_term=1</code></li>
</ul>
</blockquote></li>
<li><p><strong>Â§ñÈÉ®Á≥ªÁªüÁâàÊú¨ÊéßÂà∂</strong>ÔºöÂ∑≤ÊúâÊï∞ÊçÆÊòØÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊúâËá™Â∑±ÊâãÂä®Áª¥Êä§ÁöÑÁâàÊú¨Âè∑ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•‰ΩøÁî® external version ÊéßÂà∂„ÄÇ</p>
<p>Ë¶ÅÊ±ÇÔºö‰øÆÊîπÊó∂ external version Ë¶Å<strong>Â§ß‰∫é</strong>ÂΩìÂâçÊñáÊ°£ÁöÑ _versionÔºåËÄåÂÜÖÈÉ®ÁâàÊú¨Âè∑ÊØîËæÉÊñπÂºèÊòØ <strong>Á≠â‰∫é</strong>Ôºõ</p>
<p>‰ΩøÁî®Ôºö<code>?version=1&amp;version_type=external</code></p></li>
</ul>
<p><strong>ÂÖ∂‰ªñ</strong>Ôºö</p>
<ul>
<li>Âè¶Â§ñÂØπ‰∫éÂÜôÊìç‰ΩúÔºå‰∏ÄËá¥ÊÄßÁ∫ßÂà´ÊîØÊåÅ <code>quorum/one/all</code>ÔºåÈªòËÆ§‰∏∫ quorumÔºåÂç≥Âè™ÊúâÂΩìÂ§ßÂ§öÊï∞ÂàÜÁâáÂèØÁî®Êó∂ÊâçÂÖÅËÆ∏ÂÜôÊìç‰Ωú„ÄÇ‰ΩÜÂç≥‰ΩøÂ§ßÂ§öÊï∞ÂèØÁî®Ôºå‰πüÂèØËÉΩÂ≠òÂú®Âõ†‰∏∫ÁΩëÁªúÁ≠âÂéüÂõ†ÂØºËá¥ÂÜôÂÖ•ÂâØÊú¨Â§±Ë¥•ÔºåËøôÊ†∑ËØ•ÂâØÊú¨Ë¢´ËÆ§‰∏∫ÊïÖÈöúÔºåÂàÜÁâáÂ∞Ü‰ºöÂú®‰∏Ä‰∏™‰∏çÂêåÁöÑËäÇÁÇπ‰∏äÈáçÂª∫„ÄÇ</li>
<li>ÂØπ‰∫éËØªÊìç‰ΩúÔºåÂèØ‰ª•ËÆæÁΩÆ replication ‰∏∫ sync (ÈªòËÆ§)ÔºåËøô‰ΩøÂæóÊìç‰ΩúÂú®‰∏ªÂàÜÁâáÂíåÂâØÊú¨ÂàÜÁâáÈÉΩÂÆåÊàêÂêéÊâç‰ºöËøîÂõûÔºõÂ¶ÇÊûúËÆæÁΩÆ replication ‰∏∫ async Êó∂Ôºå‰πüÂèØ‰ª•ÈÄöËøáËÆæÁΩÆÊêúÁ¥¢ËØ∑Ê±ÇÂèÇÊï∞ _preference ‰∏∫ primary Êù•Êü•ËØ¢‰∏ªÂàÜÁâáÔºåÁ°Æ‰øùÊñáÊ°£ÊòØÊúÄÊñ∞ÁâàÊú¨„ÄÇ</li>
</ul>
<h3 id="es-ÂàÜÊûê-analyzer">ES ÂàÜÊûê analyzer</h3>
<p>ÂàÜÊûêÂåÖÂê´‰∏ãÈù¢ÁöÑËøáÁ®ãÔºö</p>
<ol type="1">
<li><p>Â∞Ü‰∏ÄÂùóÊñáÊú¨ÂàÜÊàêÈÄÇÂêà‰∫éÂÄíÊéíÁ¥¢ÂºïÁöÑÁã¨Á´ãÁöÑ<strong>ËØçÊù° term</strong></p></li>
<li><p>Â∞ÜËøô‰∫õËØçÊù°Áªü‰∏ÄÂåñ‰∏∫Ê†áÂáÜÊ†ºÂºè‰ª•ÊèêÈ´òÂÆÉ‰ª¨ÁöÑ‚ÄùÂèØÊêúÁ¥¢ÊÄß‚ÄùÔºåÊàñËÄÖ recallÔºåÂè¨ÂõûÁéáÔºõ</p>
<blockquote>
<p>recallÔºåÂè¨ÂõûÁéáÔºöÊêúÁ¥¢ÁöÑÊó∂ÂÄôÔºåÂ¢ûÂä†ËÉΩÂ§üÊêúÁ¥¢Âà∞ÁöÑÁªìÊûúÁöÑÊï∞Èáè</p>
</blockquote></li>
</ol>
<p>ÂàÜÊûêÂô®ÊâßË°å‰∏äÈù¢ÁöÑÂ∑•‰Ωú„ÄÇÂàÜÊûêÂô®ÂÆûÈôÖ‰∏äÊòØÂ∞Ü‰∏â‰∏™ÂäüËÉΩÂ∞ÅË£ÖÂà∞‰∫Ü‰∏Ä‰∏™ÂåÖÈáåÔºö</p>
<ol type="1">
<li><strong>Â≠óÁ¨¶ËøáÊª§Âô®</strong>ÔºöÂ≠óÁ¨¶‰∏≤ÊåâÈ°∫Â∫èÈÄöËøáÊØè‰∏™Â≠óÁ¨¶ËøáÊª§Âô®Ôºå‰ªñ‰ª¨ÁöÑ‰ªªÂä°ÊòØÂú®ÂàÜËØçÂâçÊï¥ÁêÜÂ≠óÁ¨¶‰∏≤„ÄÇ‰∏Ä‰∏™Â≠óÁ¨¶ËøáÊª§Âô®ÂèØ‰ª•Áî®Êù•ÂéªÊéâ HTMLÔºåÊàñËÄÖÂ∞Ü &amp; ËΩ¨ÂåñÊàê andÔºõ</li>
<li><strong>ÂàÜËØçÂô®</strong>ÔºöÂ≠óÁ¨¶‰∏≤Ë¢´ÂàÜËØçÂô®ÂàÜ‰∏∫Âçï‰∏™ÁöÑËØçÊù°ÔºåÊúâ standard analyzer Ê†áÂáÜÂàÜËØçÂô® / simple analyzerÁÆÄÂçïÂàÜËØçÂô® / language analyzer ÁâπÂÆöÁöÑËØ≠Ë®ÄÁöÑÂàÜËØçÂô®ÔºàIK ÂàÜËØçÂô®Ôºâ</li>
<li><strong>Token ËøáÊª§Âô®</strong>ÔºöËØçÊù°ÊåâÈ°∫Â∫èÈÄöËøáÊØè‰∏™ token ËøáÊª§Âô®ÔºåÂ§ßÂ∞èÂÜôËΩ¨Êç¢/ÂéªÊéâÂÅúÁî®ËØç/ÂçïËØçÂèòÊàêËØçÂπ≤/Âêå‰πâËØçËΩ¨Êç¢</li>
</ol>
<h3 id="es-Â≠óÂÖ∏Ê†ë">ES Â≠óÂÖ∏Ê†ë</h3>
<p>Â≠óÂÖ∏Ê†ëÂèàÁß∞ÂçïËØçÊü•ÊâæÊ†ëÔºåTrie Ê†ëÔºåÊòØ‰∏ÄÁßçÊ†ëÂΩ¢ÁªìÊûÑÔºåÊòØ‰∏ÄÁßçÂìàÂ∏åÊ†ëÁöÑÂèòÁßç„ÄÇÂÖ∏ÂûãÂ∫îÁî®ÊòØÁî®‰∫éÁªüËÆ°ÔºåÊéíÂ∫èÂíå‰øùÂ≠òÂ§ßÈáèÁöÑÂ≠óÁ¨¶‰∏≤Ôºà‰ΩÜ‰∏ç‰ªÖÈôê‰∫éÂ≠óÁ¨¶‰∏≤ÔºâÔºåÊâÄ‰ª•ÁªèÂ∏∏Ë¢´ÊêúÁ¥¢ÂºïÊìéÁ≥ªÁªüÁî®‰∫éÊñáÊú¨ËØçÈ¢ëÁªüËÆ°„ÄÇÂÆÉÁöÑ‰ºòÁÇπÊòØÔºö<strong>Âà©Áî®Â≠óÁ¨¶‰∏≤ÁöÑÂÖ¨ÂÖ±ÂâçÁºÄÊù•ÂáèÂ∞ëÊü•ËØ¢Êó∂Èó¥ÔºåÊúÄÂ§ßÈôêÂ∫¶Âú∞ÂáèÂ∞ëÊó†Ë∞ìÁöÑÂ≠óÁ¨¶‰∏≤ÊØîËæÉ</strong>ÔºåÊü•ËØ¢ÊïàÁéáÊØîÂìàÂ∏åÊ†ëÈ´ò„ÄÇ</p>
<p>Trie ÁöÑÊ†∏ÂøÉÊÄùÊÉ≥ÊòØ<strong>Á©∫Èó¥Êç¢Êó∂Èó¥</strong>ÔºåÂà©Áî®Â≠óÁ¨¶‰∏≤ÁöÑÂÖ¨ÂÖ±ÂâçÁºÄÊù•Èôç‰ΩéÊü•ËØ¢Êó∂Èó¥ÁöÑÂºÄÈîÄ‰ª•ËææÂà∞ÊèêÈ´òÊïàÁéáÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>ÂÆÉÊúâ 3 ‰∏™Âü∫Êú¨ÊÄßË¥®:</p>
<ul>
<li>Ê†πËäÇÁÇπ‰∏çÂåÖÂê´Â≠óÁ¨¶ÔºåÈô§Ê†πËäÇÁÇπÂ§ñÊØè‰∏Ä‰∏™ËäÇÁÇπÈÉΩÂè™ÂåÖÂê´‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ</li>
<li>‰ªéÊ†πËäÇÁÇπÂà∞Êüê‰∏ÄËäÇÁÇπÔºåË∑ØÂæÑ‰∏äÁªèËøáÁöÑÂ≠óÁ¨¶ËøûÊé•Ëµ∑Êù•Ôºå‰∏∫ËØ•ËäÇÁÇπÂØπÂ∫îÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</li>
<li>ÊØè‰∏™ËäÇÁÇπÁöÑÊâÄÊúâÂ≠êËäÇÁÇπÂåÖÂê´ÁöÑÂ≠óÁ¨¶ÈÉΩ‰∏çÁõ∏Âêå„ÄÇ</li>
</ul>
<p>ÂØπ‰∫é‰∏≠ÊñáÁöÑÂ≠óÂÖ∏Ê†ëÔºå<strong>ÊØè‰∏™ËäÇÁÇπÁöÑÂ≠êËäÇÁÇπÁî®‰∏Ä‰∏™ÂìàÂ∏åË°®Â≠òÂÇ®</strong>ÔºåËøôÊ†∑Â∞±‰∏çÁî®Êµ™Ë¥πÂ§™Â§ßÁöÑÁ©∫Èó¥ÔºåËÄå‰∏îÊü•ËØ¢ÈÄüÂ∫¶‰∏äÂèØ‰ª•‰øùÁïôÂìàÂ∏åÁöÑÂ§çÊùÇÂ∫¶ O(1)„ÄÇ</p>
<blockquote>
<p>Âõ†‰∏∫Ëã±ÊñáÂè™Êúâ26‰∏™Â≠óÊØçÔºåÊó†ÈúÄÈááÁî® hash Ë°®ÔºåÁõ¥Êé•Áî®Êï∞ÁªÑÂç≥ÂèØÔºõËÄå‰∏≠ÊñáÂ≠óÊØîËæÉÂ§ö...</p>
</blockquote>
<h3 id="logstash">Logstash</h3>
<p>Ê¶ÇËø∞Ôºö</p>
<ul>
<li>Logstash ÊòØ‰∏Ä‰∏™Êï∞ÊçÆÊäΩÂèñÂ∑•ÂÖ∑ÔºåÂ∞ÜÊï∞ÊçÆ‰ªé‰∏Ä‰∏™Âú∞ÊñπËΩ¨ÁßªÂà∞Âè¶‰∏Ä‰∏™Âú∞ÊñπÔºõ</li>
<li>Logstash ÈÖçÁΩÆÊñá‰ª∂ÊúâÂ¶Ç‰∏ã‰∏âÈÉ®ÂàÜÁªÑÊàêÔºåÂÖ∂‰∏≠ <strong>input</strong>„ÄÅ<strong>output</strong> ÈÉ®ÂàÜÊòØÂøÖÈ°ªÈÖçÁΩÆÔºå<strong>filter</strong> ÈÉ®ÂàÜÊòØÂèØÈÄâÈÖçÁΩÆÔºåËÄå filter Â∞±ÊòØËøáÊª§Âô®Êèí‰ª∂ÔºåÂèØ‰ª•Âú®ËøôÈÉ®ÂàÜÂÆûÁé∞ÂêÑÁßçÊó•ÂøóËøáÊª§ÂäüËÉΩ„ÄÇ</li>
</ul>
<p><strong>ÈÖçÁΩÆÊñá‰ª∂</strong>Ôºö/config/xxx.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    <span class="comment"># ËæìÂÖ•Êèí‰ª∂</span></span><br><span class="line">&#125;</span><br><span class="line">filter &#123;</span><br><span class="line">    <span class="comment"># ËøáÊª§ÂåπÈÖçÊèí‰ª∂</span></span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    <span class="comment"># ËæìÂá∫Êèí‰ª∂</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ËæìÂÖ•Êèí‰ª∂</strong>ÔºöÊ†áÂáÜËæìÂÖ• stdin / ËØªÂèñÊñá‰ª∂ file / ËØªÂèñ TCP ÁΩëÁªúÊï∞ÊçÆÔºõ</p>
<p><strong>ËøáÊª§Âô®Êèí‰ª∂</strong>Ôºö</p>
<ul>
<li>Grok Ê≠£ÂàôÊçïËé∑ÔºöÈÄöËøá<strong>Ê≠£ÂàôËß£Êûê‰ªªÊÑèÊñáÊú¨</strong>ÔºåÂ∞ÜÈùûÁªìÊûÑÂåñÊó•ÂøóÊï∞ÊçÆÂºÑÊàêÁªìÊûÑÂåñÂíåÊñπ‰æøÊü•ËØ¢ÁöÑÁªìÊûÑ„ÄÇ<strong>Grok ÁöÑËØ≠Ê≥ïËßÑÂàôÊòØ</strong>Ôºö<code>%&#123;ËØ≠Ê≥ï: ËØ≠‰πâ&#125;</code></li>
<li>date Êèí‰ª∂ÔºåÁî®Êù•<strong>ËΩ¨Êç¢Êó•ÂøóËÆ∞ÂΩï‰∏≠ÁöÑÊó∂Èó¥Â≠óÊÆµ</strong></li>
<li>Êï∞ÊçÆ‰øÆÊîπ Mutate</li>
</ul>
<p><strong>ËæìÂá∫Êèí‰ª∂</strong>Ôºö</p>
<ul>
<li>fileÔºöË°®Á§∫Â∞ÜÊó•ÂøóÊï∞ÊçÆÂÜôÂÖ•Á£ÅÁõò‰∏äÁöÑÊñá‰ª∂Ôºõ</li>
<li>elasticsearchÔºöË°®Á§∫Â∞ÜÊó•ÂøóÊï∞ÊçÆÂèëÈÄÅÁªô Elasticsearch„ÄÇ</li>
</ul>
<h2 id="rabbitmq">RabbitMQ</h2>
<h3 id="Ê∂àÊÅØÈòüÂàóÊ¶ÇËø∞">Ê∂àÊÅØÈòüÂàóÊ¶ÇËø∞ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>MQÔºàmessage queueÔºâÔºå‰ªéÂ≠óÈù¢ÊÑèÊÄù‰∏äÁúãÔºå<strong>Êú¨Ë¥®ÊòØ‰∏™ÈòüÂàóÔºåFIFO ÂÖàÂÖ•ÂÖàÂá∫</strong>ÔºåÂè™‰∏çËøáÈòüÂàó‰∏≠Â≠òÊîæÁöÑÂÜÖÂÆπÊòØ message ËÄåÂ∑≤Ôºå<strong>ËøôÊòØ‰∏ÄÁßçË∑®ËøõÁ®ãÁöÑÈÄö‰ø°Êú∫Âà∂</strong>ÔºåÁî®‰∫é‰∏ä‰∏ãÊ∏∏‰º†ÈÄíÊ∂àÊÅØ„ÄÇ</p>
<p><strong>Ê∂àÊÅØÈòüÂàóÊòØÂÖ∏ÂûãÁöÑÔºöÁîü‰∫ßËÄÖ„ÄÅÊ∂àË¥πËÄÖÊ®°Âûã</strong>„ÄÇÁîü‰∫ßËÄÖ‰∏çÊñ≠ÂêëÊ∂àÊÅØÈòüÂàó‰∏≠Áîü‰∫ßÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖ‰∏çÊñ≠ÁöÑ‰ªéÈòüÂàó‰∏≠Ëé∑ÂèñÊ∂àÊÅØ„ÄÇÂõ†‰∏∫Ê∂àÊÅØÁöÑÁîü‰∫ßÂíåÊ∂àË¥πÈÉΩÂèØ‰ª•ÊòØÂºÇÊ≠•ÁöÑÔºåËÄå‰∏îÂè™ÂÖ≥ÂøÉÊ∂àÊÅØÁöÑÂèëÈÄÅÂíåÊé•Êî∂ÔºåÊ≤°Êúâ‰∏öÂä°ÈÄªËæëÁöÑ‰æµÂÖ•ÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫Ü<strong>Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑËß£ËÄ¶</strong>„ÄÇ</p>
<p><strong>‰ΩøÁî® MQ ÁöÑÂéüÂõ†Ôºö</strong></p>
<ul>
<li><strong>ÊµÅÈáèÊ∂àÂ≥∞</strong></li>
</ul>
<blockquote>
<p>‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûúËÆ¢ÂçïÁ≥ªÁªüÊúÄÂ§öËÉΩÂ§ÑÁêÜ‰∏Ä‰∏áÊ¨°ËÆ¢ÂçïÔºåËøô‰∏™Â§ÑÁêÜËÉΩÂäõÂ∫î‰ªòÊ≠£Â∏∏Êó∂ÊÆµÁöÑ‰∏ãÂçïÊó∂Áª∞Áª∞Êúâ‰ΩôÔºåÊ≠£Â∏∏Êó∂ÊÆµÊàë‰ª¨‰∏ãÂçï‰∏ÄÁßíÂêéÂ∞±ËÉΩËøîÂõûÁªìÊûú„ÄÇ‰ΩÜÊòØÂú®È´òÂ≥∞ÊúüÔºåÂ¶ÇÊûúÊúâ‰∏§‰∏áÊ¨°‰∏ãÂçïÊìç‰ΩúÁ≥ªÁªüÊòØÂ§ÑÁêÜ‰∏ç‰∫ÜÁöÑÔºåÂè™ËÉΩÈôêÂà∂ËÆ¢ÂçïË∂ÖËøá‰∏Ä‰∏áÂêé‰∏çÂÖÅËÆ∏Áî®Êà∑‰∏ãÂçï„ÄÇ‰ΩøÁî®Ê∂àÊÅØÈòüÂàóÂÅöÁºìÂÜ≤ÔºåÊàë‰ª¨ÂèØ‰ª•ÂèñÊ∂àËøô‰∏™ÈôêÂà∂ÔºåÊää‰∏ÄÁßíÂÜÖ‰∏ãÁöÑËÆ¢ÂçïÂàÜÊï£Êàê‰∏ÄÊÆµÊó∂Èó¥Êù•Â§ÑÁêÜÔºåËøôÊó∂Êúâ‰∫õÁî®Êà∑ÂèØËÉΩÂú®‰∏ãÂçïÂçÅÂá†ÁßíÂêéÊâçËÉΩÊî∂Âà∞‰∏ãÂçïÊàêÂäüÁöÑÊìç‰ΩúÔºå‰ΩÜÊòØÊØî‰∏çËÉΩ‰∏ãÂçïÁöÑ‰ΩìÈ™åË¶ÅÂ•Ω„ÄÇ</p>
</blockquote>
<ul>
<li><strong>Â∫îÁî®Ëß£ËÄ¶</strong></li>
</ul>
<blockquote>
<p>‰ª•ÁîµÂïÜÂ∫îÁî®‰∏∫‰æãÔºåÂ∫îÁî®‰∏≠ÊúâËÆ¢ÂçïÁ≥ªÁªü„ÄÅÂ∫ìÂ≠òÁ≥ªÁªü„ÄÅÁâ©ÊµÅÁ≥ªÁªü„ÄÅÊîØ‰ªòÁ≥ªÁªü„ÄÇÁî®Êà∑ÂàõÂª∫ËÆ¢ÂçïÂêéÔºåÂ¶ÇÊûúËÄ¶ÂêàË∞ÉÁî®Â∫ìÂ≠òÁ≥ªÁªü„ÄÅÁâ©ÊµÅÁ≥ªÁªü„ÄÅÊîØ‰ªòÁ≥ªÁªüÔºå‰ªª‰Ωï‰∏Ä‰∏™Â≠êÁ≥ªÁªüÂá∫‰∫ÜÊïÖÈöúÔºåÈÉΩ‰ºöÈÄ†Êàê‰∏ãÂçïÊìç‰ΩúÂºÇÂ∏∏„ÄÇÂΩìËΩ¨ÂèòÊàêÂü∫‰∫éÊ∂àÊÅØÈòüÂàóÁöÑÊñπÂºèÂêéÔºåÁ≥ªÁªüÈó¥Ë∞ÉÁî®ÁöÑÈóÆÈ¢ò‰ºöÂáèÂ∞ëÂæàÂ§öÔºåÊØîÂ¶ÇÁâ©ÊµÅÁ≥ªÁªüÂõ†‰∏∫ÂèëÁîüÊïÖÈöúÔºåÈúÄË¶ÅÂá†ÂàÜÈíüÊù•‰øÆÂ§ç„ÄÇÂú®ËøôÂá†ÂàÜÈíüÁöÑÊó∂Èó¥ÈáåÔºåÁâ©ÊµÅÁ≥ªÁªüË¶ÅÂ§ÑÁêÜÁöÑÂÜÖÂÆπË¢´ÁºìÂ≠òÂú®Ê∂àÊÅØÈòüÂàó‰∏≠ÔºåÁî®Êà∑ÁöÑ‰∏ãÂçïÊìç‰ΩúÂèØ‰ª•Ê≠£Â∏∏ÂÆåÊàê„ÄÇÂΩìÁâ©ÊµÅÁ≥ªÁªüÊÅ¢Â§çÂêéÔºåÁªßÁª≠Â§ÑÁêÜËÆ¢Âçï‰ø°ÊÅØÂç≥ÂèØÔºå‰∏≠ÂçïÁî®Êà∑ÊÑüÂèó‰∏çÂà∞Áâ©ÊµÅÁ≥ªÁªüÁöÑÊïÖÈöúÔºåÊèêÂçáÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß„ÄÇ</p>
</blockquote>
<ul>
<li><strong>ÂºÇÊ≠•Â§ÑÁêÜ</strong></li>
</ul>
<blockquote>
<p>Êúâ‰∫õÊúçÂä°Èó¥Ë∞ÉÁî®ÊòØÂºÇÊ≠•ÁöÑÔºå‰æãÂ¶Ç A Ë∞ÉÁî® BÔºåB ÈúÄË¶ÅËä±Ë¥πÂæàÈïøÊó∂Èó¥ÊâßË°åÔºå‰ΩÜÊòØ A ÈúÄË¶ÅÁü•ÈÅì B ‰ªÄ‰πàÊó∂ÂÄôÂèØ‰ª•ÊâßË°åÂÆåÔºå‰ª•Ââç‰∏ÄËà¨Êúâ‰∏§ÁßçÊñπÂºèÔºåA Ëøá‰∏ÄÊÆµÊó∂Èó¥ÂéªË∞ÉÁî® B ÁöÑÊü•ËØ¢ api Êü•ËØ¢„ÄÇÊàñËÄÖ A Êèê‰æõ‰∏Ä‰∏™ callback apiÔºåB ÊâßË°åÂÆå‰πãÂêéË∞ÉÁî® api ÈÄöÁü• A ÊúçÂä°„ÄÇËøô‰∏§ÁßçÊñπÂºèÈÉΩ‰∏çÊòØÂæà‰ºòÈõÖÔºå‰ΩøÁî®Ê∂àÊÅØÊÄªÁ∫øÔºåÂèØ‰ª•ÂæàÊñπ‰æøËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåA Ë∞ÉÁî® B ÊúçÂä°ÂêéÔºåÂè™ÈúÄË¶ÅÁõëÂê¨ B Â§ÑÁêÜÂÆåÊàêÁöÑÊ∂àÊÅØÔºåÂΩì B Â§ÑÁêÜÂÆåÊàêÂêéÔºå‰ºöÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÁªô MQÔºå MQ ‰ºöÂ∞ÜÊ≠§Ê∂àÊÅØËΩ¨ÂèëÁªô A ÊúçÂä°„ÄÇËøôÊ†∑ A ÊúçÂä°Êó¢‰∏çÁî®Âæ™ÁéØË∞ÉÁî® B ÁöÑÊü•ËØ¢ apiÔºå‰πü‰∏çÁî®Êèê‰æõ callback api„ÄÇÂêåÊ†∑B ÊúçÂä°‰πü‰∏çÁî®ÂÅöËøô‰∫õÊìç‰Ωú„ÄÇ A ÊúçÂä°ËøòËÉΩÂèäÊó∂ÁöÑÂæóÂà∞ÂºÇÊ≠•Â§ÑÁêÜÊàêÂäüÁöÑÊ∂àÊÅØ„ÄÇ</p>
</blockquote>
<p><strong>Áº∫ÁÇπ</strong>Ôºö</p>
<ul>
<li>MQ Â≠òÂú®ÊåÇÊéâÁöÑÂèØËÉΩÔºàÈõÜÁæ§ÂèØ‰ª•Ëß£ÂÜ≥ÔºâÔºõ</li>
<li>Á≥ªÁªüÂ§çÊùÇÂ∫¶ÊèêÈ´òÔºåÈúÄË¶ÅËÄÉËôëÊ∂àÊÅØÁöÑÂπÇÁ≠âÊÄßÔºåÈÅøÂÖçÈáçÂ§çÊ∂àË¥πÁöÑÊÉÖÂÜµÔºõ</li>
<li>‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºåÈÉ®ÂàÜÊ∂àÊÅØÊàêÂäüÔºåÈÉ®ÂàÜÂ§±Ë¥•ÔºåÂØºËá¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇ</li>
</ul>
<h3 id="amqp-È´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆ">AMQP È´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆ</h3>
<p>MQ ÊòØÊ∂àÊÅØÈÄö‰ø°ÁöÑÊ®°ÂûãÔºåÂπ∂‰∏çÊòØÂÖ∑‰ΩìÂÆûÁé∞„ÄÇÁé∞Âú®ÂÆûÁé∞ MQ ÁöÑÊúâ‰∏§Áßç‰∏ªÊµÅÊñπÂºèÔºöAMQP„ÄÅJMSÔºàJava Message ServiceÔºâ„ÄÇ</p>
<blockquote>
<p>‰∏§ËÄÖÈó¥ÁöÑÂå∫Âà´ÂíåËÅîÁ≥ªÔºö</p>
<ul>
<li>JMSÊòØÂÆö‰πâ‰∫ÜÁªü‰∏ÄÁöÑÊé•Âè£ÔºåÊù•ÂØπÊ∂àÊÅØÊìç‰ΩúËøõË°åÁªü‰∏ÄÔºõAMQPÊòØÈÄöËøáËßÑÂÆöÂçèËÆÆÊù•Áªü‰∏ÄÊï∞ÊçÆ‰∫§‰∫íÁöÑÊ†ºÂºè</li>
<li>JMSÈôêÂÆö‰∫ÜÂøÖÈ°ª‰ΩøÁî®JavaËØ≠Ë®ÄÔºõ<strong>AMQPÂè™ÊòØÂçèËÆÆÔºå‰∏çËßÑÂÆöÂÆûÁé∞ÊñπÂºèÔºåÂõ†Ê≠§ÊòØË∑®ËØ≠Ë®ÄÁöÑ</strong>„ÄÇ</li>
<li>JMSËßÑÂÆö‰∫Ü‰∏§ÁßçÊ∂àÊÅØÊ®°ÂûãÔºõËÄåAMQPÁöÑÊ∂àÊÅØÊ®°ÂûãÊõ¥Âä†‰∏∞ÂØå</li>
</ul>
</blockquote>
<p><strong>RabbitMQ Â∞±ÊòØ AMQP ÂçèËÆÆÁöÑ Erlang ÁöÑÂÆûÁé∞</strong>ÔºåAMQP ÁöÑÊ®°ÂûãÊû∂ÊûÑÂíå RabbitMQ ÁöÑÊ®°ÂûãÊû∂ÊûÑÊòØ‰∏ÄÊ†∑ÁöÑÔºåÁîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÁªô‰∫§Êç¢Âô®Ôºå‰∫§Êç¢Âô®ÂíåÈòüÂàóÁªëÂÆö „ÄÇ</p>
<p>RabbitMQ ‰∏≠ÁöÑ‰∫§Êç¢Âô®„ÄÅ‰∫§Êç¢Âô®Á±ªÂûã„ÄÅÈòüÂàó„ÄÅÁªëÂÆö„ÄÅË∑ØÁî±key Á≠âÈÉΩÊòØÈÅµÂæ™ÁöÑ AMQP ÂçèËÆÆ‰∏≠Áõ∏Â∫îÁöÑÊ¶ÇÂøµ„ÄÇ</p>
<blockquote>
<p>AMQP ‰∏âÂ±Ç</p>
<ul>
<li>Module LayerÔºöÂçèËÆÆÊúÄÈ´òÂ±ÇÔºå‰∏ªË¶ÅÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÂÆ¢Êà∑Á´ØË∞ÉÁî®ÁöÑÂëΩ‰ª§ÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•Áî®Ëøô‰∫õÂëΩ‰ª§ÂÆûÁé∞Ëá™Â∑±ÁöÑ‰∏öÂä°ÈÄªËæë„ÄÇ</li>
<li>Session LayerÔºö‰∏≠Èó¥Â±ÇÔºå‰∏ªË¶ÅË¥üË¥£ÂÆ¢Êà∑Á´ØÂëΩ‰ª§ÂèëÈÄÅÁªôÊúçÂä°Âô®ÔºåÂÜçÂ∞ÜÊúçÂä°Á´ØÂ∫îÁ≠îËøîÂõûÂÆ¢Êà∑Á´ØÔºåÊèê‰æõÂèØÈù†ÊÄßÂêåÊ≠•Êú∫Âà∂ÂíåÈîôËØØÂ§ÑÁêÜ„ÄÇ</li>
<li>TransportLayerÔºöÊúÄÂ∫ïÂ±ÇÔºå‰∏ªË¶Å‰º†Ëæì‰∫åËøõÂà∂Êï∞ÊçÆÊµÅÔºåÊèê‰æõÂ∏ßÁöÑÂ§ÑÁêÜ„ÄÅ‰ø°ÈÅìÊúçÁî®„ÄÅÈîôËØØÊ£ÄÊµãÂíåÊï∞ÊçÆË°®Á§∫Á≠â„ÄÇ</li>
</ul>
</blockquote>
<h3 id="rabbitmq-Ê¶ÇËø∞">RabbitMQ Ê¶ÇËø∞ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>RabbitMQ ÊòØ‰∏ÄÊ¨æÂºÄÊ∫êÁöÑÔºåErlang ÁºñÂÜôÁöÑÔºåÂü∫‰∫é AMQPÔºàÈ´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆÔºâ ÂçèËÆÆÁöÑÔºåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Ôºõ</p>
<p><strong>‰ºòÁÇπ</strong></p>
<ul>
<li><strong>ÂèØÈù†ÊÄß</strong>ÔºöRabbitMQ ‰ΩøÁî®‰∏Ä‰∫õÊú∫Âà∂Êù•‰øùËØÅÂèØÈù†ÊÄßÔºåÂ¶ÇÊåÅ‰πÖÂåñÔºàÊ∂àÊÅØ/ÈòüÂàóÔºâ„ÄÅÂèëÂ∏ÉÁ°ÆËÆ§Á≠âÔºõ</li>
<li><strong>ÁÅµÊ¥ªÁöÑË∑ØÁî±</strong>ÔºöÂú®Ê∂àÊÅØËøõÂÖ•ÈòüÂàó‰πãÂâçÔºåÈÄöËøá‰∫§Êç¢Âô®Êù•Ë∑ØÁî±Ê∂àÊÅØ„ÄÇ</li>
<li><strong>È´òÂèØÁî®ÊÄß</strong>ÔºöÈòüÂàóÂèØ‰ª•Âú®ÈõÜÁæ§‰∏≠ÁöÑÊú∫Âô®‰∏äËÆæÁΩÆÈïúÂÉèÔºå‰ΩøÂæóÂú®ÈÉ®ÂàÜËäÇÁÇπÂá∫Áé∞ÈóÆÈ¢òÁöÑÊÉÖÂÜµ‰∏ãÈòüÂàó‰ªçÁÑ∂ÂèØÁî®„ÄÇ</li>
<li><strong>Â§öËØ≠Ë®ÄÂÆ¢Êà∑Á´Ø</strong>ÔºöRabbitMQ Âá†‰πéÊîØÊåÅÊâÄÊúâÂ∏∏Áî®ËØ≠Ë®ÄÔºåÊØîÂ¶Ç Java„ÄÅ Python„ÄÅ Ruby„ÄÅ PHP„ÄÅ C#„ÄÅ JavaScript Á≠â„ÄÇ</li>
<li><strong>ÁÆ°ÁêÜÁïåÈù¢</strong>ÔºöRabbitMQ Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÊòìÁî®ÁöÑÁî®Êà∑ÁïåÈù¢Ôºå‰ΩøÂæóÁî®Êà∑ÂèØ‰ª•ÁõëÊéßÂíåÁÆ°ÁêÜÊ∂àÊÅØ„ÄÅÈõÜÁæ§‰∏≠ÁöÑËäÇÁÇπÁ≠â„ÄÇ</li>
<li><strong>Êèí‰ª∂Êú∫Âà∂</strong>ÔºöRabbitMQ Êèê‰æõ‰∫ÜËÆ∏Â§öÊèí‰ª∂Ôºå‰ª•ÂÆûÁé∞‰ªéÂ§öÊñπÈù¢ËøõË°åÊâ©Â±ïÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•ÁºñÂÜôËá™Â∑±ÁöÑÊèí‰ª∂</li>
</ul>
<p><strong>ÂõõÂ§ßÁªÑ‰ª∂</strong></p>
<ol type="1">
<li><strong>Áîü‰∫ßËÄÖ</strong>Ôºö‰∫ßÁîüÊï∞ÊçÆÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫èÊòØÁîü‰∫ßËÄÖ</li>
<li><strong>‰∫§Êç¢Êú∫</strong>Ôºö‰∫§Êç¢Êú∫ÊòØ RabbitMQ ÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÈÉ®‰ª∂Ôºå<strong>‰∏ÄÊñπÈù¢ÂÆÉÊé•Êî∂Êù•Ëá™Áîü‰∫ßËÄÖÁöÑÊ∂àÊÅØÔºåÂè¶‰∏ÄÊñπÈù¢ÂÆÉÂ∞ÜÊ∂àÊÅØÊé®ÈÄÅÂà∞ÈòüÂàó‰∏≠</strong>„ÄÇ‰∫§Êç¢Êú∫ÂøÖÈ°ªÁ°ÆÂàáÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÂÆÉÊé•Êî∂Âà∞ÁöÑÊ∂àÊÅØÔºåÊòØÂ∞ÜËøô‰∫õÊ∂àÊÅØÊé®ÈÄÅÂà∞ÁâπÂÆöÈòüÂàóËøòÊòØÊé®ÈÄÅÂà∞Â§ö‰∏™ÈòüÂàóÔºå‰∫¶ÊàñËÄÖÊòØÊääÊ∂àÊÅØ‰∏¢ÂºÉÔºåËøô‰∏™ÂæóÁî±<strong>‰∫§Êç¢Êú∫Á±ªÂûã</strong>ÂÜ≥ÂÆö„ÄÇ</li>
<li><strong>ÈòüÂàó</strong>ÔºöÈòüÂàóÊòØ RabbitMQ ÂÜÖÈÉ®‰ΩøÁî®ÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂ∞ΩÁÆ°Ê∂àÊÅØÊµÅÁªè RabbitMQ ÂíåÂ∫îÁî®Á®ãÂ∫èÔºå‰ΩÜÂÆÉ‰ª¨Âè™ËÉΩÂ≠òÂÇ®Âú®ÈòüÂàó‰∏≠„ÄÇÈòüÂàó‰ªÖÂèó‰∏ªÊú∫ÁöÑÂÜÖÂ≠òÂíåÁ£ÅÁõòÈôêÂà∂ÁöÑÁ∫¶ÊùüÔºåÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™Â§ßÁöÑÊ∂àÊÅØÁºìÂÜ≤Âå∫„ÄÇËÆ∏Â§öÁîü‰∫ßËÄÖÂèØ‰ª•Â∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞‰∏Ä‰∏™ÈòüÂàóÔºåËÆ∏Â§öÊ∂àË¥πËÄÖÂèØ‰ª•Â∞ùËØï‰ªé‰∏Ä‰∏™ÈòüÂàóÊé•Êî∂Êï∞ÊçÆ„ÄÇËøôÂ∞±ÊòØÊàë‰ª¨‰ΩøÁî®ÈòüÂàóÁöÑÊñπÂºè</li>
<li><strong>Ê∂àË¥πËÄÖ</strong>ÔºöÊ∂àË¥π‰∏éÊé•Êî∂ÂÖ∑ÊúâÁõ∏‰ººÁöÑÂê´‰πâ„ÄÇÊ∂àË¥πËÄÖÂ§ßÂ§öÊó∂ÂÄôÊòØ‰∏Ä‰∏™Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØÁöÑÁ®ãÂ∫è„ÄÇËØ∑Ê≥®ÊÑèÁîü‰∫ßËÄÖÔºåÊ∂àË¥πËÄÖÂíåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂæàÂ§öÊó∂ÂÄôÂπ∂‰∏çÂú®Âêå‰∏ÄÊú∫Âô®‰∏ä„ÄÇÂêå‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÊó¢ÂèØ‰ª•ÊòØÁîü‰∫ßËÄÖÂèàÊòØÂèØ‰ª•ÊòØÊ∂àË¥πËÄÖ„ÄÇ</li>
</ol>
<h3 id="rabbitmq-Â∑•‰ΩúÂéüÁêÜ">RabbitMQ Â∑•‰ΩúÂéüÁêÜ</h3>
<p><img src="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/Â∑•‰ΩúÂéüÁêÜ.PNG" alt="Â∑•‰ΩúÂéüÁêÜ"></p>
<ul>
<li><strong>Broker</strong>ÔºöÊé•Êî∂ÂíåÂàÜÂèëÊ∂àÊÅØÁöÑÂ∫îÁî®ÔºåRabbitMQ Server Â∞±ÊòØ Message BrokerÔºå‰∏ÄËà¨‰∏Ä‰∏™ Broker Â∞±ÊòØ‰∏Ä‰∏™ RabbitMQ ÁöÑÊúçÂä°Âô®Ôºõ</li>
<li><strong>Exchange</strong>Ôºö message Âà∞Ëææ broker ÁöÑÁ¨¨‰∏ÄÁ´ôÔºåÊ†πÊçÆÂàÜÂèëËßÑÂàôÔºåÂåπÈÖçÊü•ËØ¢Ë°®‰∏≠ÁöÑ routing keyÔºåÂàÜÂèëÊ∂àÊÅØÂà∞ queue ‰∏≠Âéª„ÄÇÂ∏∏Áî®ÁöÑÁ±ªÂûãÊúâÔºödirect (point-to-point)Ôºåtopic (publish-subscribe) Ôºåfanout (multicast)</li>
<li><strong>Queue</strong>Ôºö Ê∂àÊÅØÊúÄÁªàË¢´ÈÄÅÂà∞ËøôÈáåÁ≠âÂæÖ consumer ÂèñËµ∞</li>
<li><strong>Binding</strong>Ôºöexchange Âíå queue ‰πãÈó¥ÁöÑËôöÊãüËøûÊé•Ôºå binding ‰∏≠ÂèØ‰ª•ÂåÖÂê´ routing keyÔºå Binding ‰ø°ÊÅØË¢´‰øùÂ≠òÂà∞ exchange ‰∏≠ÁöÑÊü•ËØ¢Ë°®‰∏≠ÔºåÁî®‰∫é message ÁöÑÂàÜÂèë‰æùÊçÆ<br>
</li>
<li><strong>Connection</strong>ÔºöpublisherÔºèconsumer Âíå broker ‰πãÈó¥ÁöÑ TCP ËøûÊé•</li>
<li><strong>Channel</strong>ÔºöÂ¶ÇÊûúÊØè‰∏ÄÊ¨°ËÆøÈóÆ RabbitMQ ÈÉΩÂª∫Á´ã‰∏Ä‰∏™ ConnectionÔºåÂú®Ê∂àÊÅØÈáèÂ§ßÁöÑÊó∂ÂÄôÂª∫Á´ã TCP Connection ÁöÑÂºÄÈîÄÂ∞ÜÊòØÂ∑®Â§ßÁöÑÔºåÊïàÁéá‰πüËæÉ‰Ωé„ÄÇ<strong>Channel ÊòØÂú® Connection ÂÜÖÈÉ®Âª∫Á´ãÁöÑÈÄªËæëËøûÊé•</strong>ÔºåÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÊîØÊåÅÂ§öÁ∫øÁ®ãÔºåÈÄöÂ∏∏ÊØè‰∏™ thread ÂàõÂª∫ÂçïÁã¨ÁöÑ Channel ËøõË°åÈÄöËÆØÔºåAMQP method ÂåÖÂê´‰∫Ü channel id Â∏ÆÂä©ÂÆ¢Êà∑Á´ØÂíå message broker ËØÜÂà´ channelÔºåÊâÄ‰ª• Channel ‰πãÈó¥ÊòØÂÆåÂÖ®ÈöîÁ¶ªÁöÑ„ÄÇ <strong>Channel ‰Ωú‰∏∫ËΩªÈáèÁ∫ßÁöÑ Connection ÊûÅÂ§ßÂáèÂ∞ë‰∫ÜÊìç‰ΩúÁ≥ªÁªüÂª∫Á´ã TCP connection ÁöÑÂºÄÈîÄ</strong>„ÄÇ</li>
<li><strong>Virtual host</strong>ÔºöÂá∫‰∫éÂ§öÁßüÊà∑ÂíåÂÆâÂÖ®Âõ†Á¥†ËÆæËÆ°ÁöÑÔºåÊää AMQP ÁöÑÂü∫Êú¨ÁªÑ‰ª∂ÂàíÂàÜÂà∞‰∏Ä‰∏™ËôöÊãüÁöÑÂàÜÁªÑ‰∏≠ÔºåÁ±ª‰ºº‰∫éÁΩëÁªú‰∏≠ÁöÑ namespace Ê¶ÇÂøµ„ÄÇÂΩìÂ§ö‰∏™‰∏çÂêåÁöÑÁî®Êà∑‰ΩøÁî®Âêå‰∏Ä‰∏™ RabbitMQ server Êèê‰æõÁöÑÊúçÂä°Êó∂ÔºåÂèØ‰ª•ÂàíÂàÜÂá∫Â§ö‰∏™ vhostÔºåÊØè‰∏™Áî®Êà∑Âú®Ëá™Â∑±ÁöÑ vhost ÂàõÂª∫ exchangeÔºèqueue Á≠â</li>
</ul>
<h3 id="routingkey-binding">RoutingKey &amp; Binding</h3>
<p><strong>RoutingKey</strong>Ôºö</p>
<p>Áîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÁªô‰∫§Êç¢Âô®ÁöÑÊó∂ÂÄôÔºå‰ºöÊåáÂÆö‰∏Ä‰∏™ <code>RoutingKey</code>ÔºåÁî®Êù•ÊåáÂÆöËøô‰∏™Ê∂àÊÅØÁöÑË∑ØÁî±ËßÑÂàôÔºåËøô‰∏™ <code>RoutingKey</code> ÈúÄË¶Å‰∏é‰∫§Êç¢Âô®Á±ªÂûãÂíåÁªëÂÆöÈîÆÔºà<code>BindingKey</code>ÔºâËÅîÂêà‰ΩøÁî®ÊâçËÉΩÊúÄÁªàÁîüÊïà„ÄÇ</p>
<p><strong>BindingÔºö</strong></p>
<p>ÈÄöËøáÁªëÂÆöÂ∞Ü‰∫§Êç¢Âô®ÂíåÈòüÂàóÂÖ≥ËÅîËµ∑Êù•Ôºå‰∏ÄËà¨‰ºöÊåáÂÆö‰∏Ä‰∏™ <code>BindingKey</code>ÔºåËøôÊ†∑ RabbitMQ Â∞±Áü•ÈÅìÂ¶Ç‰ΩïÊ≠£Á°ÆË∑ØÁî±Ê∂àÊÅØÂà∞ÈòüÂàó‰∫ÜÔºåÂç≥Ôºö<strong>ÈòüÂàóÂè™ÂØπÂÆÉÁªëÂÆöÁöÑ‰∫§Êç¢Êú∫ÁöÑÊ∂àÊÅØÊÑüÂÖ¥Ë∂£</strong>ÔºåËÄåÁªëÂÆöÁöÑÂèÇÊï∞Â∞±ÊòØ <code>BingdingKey</code></p>
<h3 id="‰∫§Êç¢Âô®4ÁßçÁ±ªÂûã">‰∫§Êç¢Âô®4ÁßçÁ±ªÂûã <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>‰∫§Êç¢Êú∫Ê¶ÇÂøµ</strong>Ôºö</p>
<p>RabbitMQ Ê∂àÊÅØ‰º†ÈÄíÊ®°ÂûãÁöÑÊ†∏ÂøÉÊÄùÊÉ≥ÊòØÔºå<strong>Áîü‰∫ßËÄÖÁîü‰∫ßÁöÑÊ∂àÊÅØ‰ªé‰∏ç‰ºöÁõ¥Êé•ÂèëÈÄÅÂà∞ÈòüÂàó</strong>„ÄÇÂÆûÈôÖ‰∏äÔºåÈÄöÂ∏∏Áîü‰∫ßËÄÖÁîöËá≥ÈÉΩ‰∏çÁü•ÈÅìËøô‰∫õÊ∂àÊÅØ‰º†ÈÄí‰º†ÈÄíÂà∞‰∫ÜÂì™‰∫õÈòüÂàó‰∏≠„ÄÇ</p>
<p>Áõ∏ÂèçÔºå<strong>Áîü‰∫ßËÄÖÂè™ËÉΩÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞‰∫§Êç¢Êú∫ÔºàexchangeÔºâ</strong>Ôºå‰∫§Êç¢Êú∫Â∑•‰ΩúÁöÑÂÜÖÂÆπÈùûÂ∏∏ÁÆÄÂçïÔºå‰∏ÄÊñπÈù¢ÂÆÉÊé•Êî∂Êù•Ëá™Áîü‰∫ßËÄÖÁöÑÊ∂àÊÅØÔºåÂè¶‰∏ÄÊñπÈù¢Â∞ÜÂÆÉ‰ª¨Êé®ÂÖ•ÈòüÂàó„ÄÇ<strong>‰∫§Êç¢Êú∫ÂøÖÈ°ªÁ°ÆÂàáÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÊî∂Âà∞ÁöÑÊ∂àÊÅØ„ÄÇÊòØÂ∫îËØ•ÊääËøô‰∫õÊ∂àÊÅØÊîæÂà∞ÁâπÂÆöÈòüÂàóËøòÊòØËØ¥Êää‰ªñ‰ª¨Âà∞ËÆ∏Â§öÈòüÂàó‰∏≠ËøòÊòØËØ¥Â∫îËØ•‰∏¢ÂºÉÂÆÉ‰ª¨„ÄÇ</strong>ËøôÂ∞±ÊòØÁî±‰∫§Êç¢Êú∫ÁöÑÁ±ªÂûãÊù•ÂÜ≥ÂÆö„ÄÇ</p>
<p>ÊÄªÂÖ±Êúâ‰ª•‰∏ãÁ±ªÂûãÔºö</p>
<ul>
<li><strong>Áõ¥Êé•(direct)Ôºö</strong>Ê∂àÊÅØÂè™ÂéªÂà∞‰∏é‰∫§Êç¢Êú∫ÁªëÂÆöÁöÑÈòüÂàó‰∏≠ÂéªÔºåÈÄöËøá BingdingKey</li>
<li><strong>‰∏ªÈ¢ò(topic)Ôºö</strong>ÂèØ‰ª•ËÆ©ÈòüÂàóÂú®ÁªëÂÆö <code>Routing key</code> ÁöÑÊó∂ÂÄô‰ΩøÁî®ÈÄöÈÖçÁ¨¶Ôºö
<ul>
<li><code>#</code>ÔºöÂåπÈÖç‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËØçÔºåÂ¶ÇÔºö<code>audit.#</code>ÔºöËÉΩÂ§üÂåπÈÖç<code>audit.irs.corporate</code> ÊàñËÄÖ <code>audit.irs</code></li>
<li><code>*</code>ÔºöÂåπÈÖç‰∏çÂ§ö‰∏çÂ∞ëÊÅ∞Â•Ω1‰∏™ËØçÔºåÂ¶ÇÔºö<code>audit.*</code>ÔºöÂè™ËÉΩÂåπÈÖç<code>audit.irs</code></li>
</ul></li>
<li><strong>Ê†áÈ¢ò(headers)Ôºö</strong>‰∏ç‰æùËµñË∑ØÁî±ÈîÆÂåπÈÖçËßÑÂàôË∑ØÁî±Ê∂àÊÅØ„ÄÇÊòØÊ†πÊçÆÂèëÈÄÅÊ∂àÊÅØÂÜÖÂÆπ‰∏≠ÁöÑ <code>headers</code> Â±ûÊÄßËøõË°åÂåπÈÖçÔºåÊÄßËÉΩÂ∑ÆÔºåÂü∫Êú¨Áî®‰∏çÂà∞„ÄÇ</li>
<li><strong>ÊâáÂá∫(fanout)</strong>ÔºöÂÆÉÊòØÂ∞ÜÊé•Êî∂Âà∞ÁöÑÊâÄÊúâÊ∂àÊÅØÂπøÊí≠Âà∞ÂÆÉÁü•ÈÅìÁöÑÊâÄÊúâÈòüÂàó‰∏≠„ÄÇ</li>
</ul>
<h3 id="‰∫îÁßçÊ∂àÊÅØÊ®°Âûã">‰∫îÁßçÊ∂àÊÅØÊ®°Âûã <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><img src="/2021/10/10/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A11-%E4%B8%AD%E9%97%B4%E4%BB%B6/‰∫îÁßçÊ∂àÊÅØÊ®°Âûã.png" alt="‰∫îÁßçÊ∂àÊÅØÊ®°Âûã"></p>
<p><strong>Á¨¨‰∏ÄÁßçÔºöÂü∫Êú¨Ê∂àÊÅØÊ®°Âûã</strong></p>
<ul>
<li><p>ÂÆòÊñπÊñáÊ°£‰ªãÁªçÔºöRabbitMQ ÊòØ‰∏Ä‰∏™Ê∂àÊÅØ‰ª£ÁêÜÔºöÂÆÉÊé•ÂèóÂíåËΩ¨ÂèëÊ∂àÊÅØ„ÄÇ ‰Ω†ÂèØ‰ª•ÊääÂÆÉÊÉ≥Ë±°Êàê‰∏Ä‰∏™ÈÇÆÂ±ÄÔºöÂΩì‰Ω†ÊääÈÇÆ‰ª∂ÊîæÂú®ÈÇÆÁÆ±ÈáåÊó∂Ôºå‰Ω†ÂèØ‰ª•Á°ÆÂÆöÈÇÆÂ∑ÆÂÖàÁîüÊúÄÁªà‰ºöÊääÈÇÆ‰ª∂ÂèëÈÄÅÁªô‰Ω†ÁöÑÊî∂‰ª∂‰∫∫„ÄÇ Âú®Ëøô‰∏™ÊØîÂñª‰∏≠ÔºåRabbitMQ ÊòØÈÇÆÊîø‰ø°ÁÆ±ÔºåÈÇÆÂ±ÄÂíåÈÇÆÈÄíÂëò„ÄÇ</p>
<p>RabbitMQ ‰∏éÈÇÆÂ±ÄÁöÑ‰∏ªË¶ÅÂå∫Âà´ÊòØÂÆÉ‰∏çÂ§ÑÁêÜÁ∫∏Âº†ÔºåËÄåÊòØÊé•ÂèóÔºåÂ≠òÂÇ®ÂíåËΩ¨ÂèëÊï∞ÊçÆÊ∂àÊÅØÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÂùó„ÄÇ</p></li>
<li><p>ÊÄª‰πãÔºö<strong>Áîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÈòüÂàóÔºåÊ∂àË¥πËÄÖ‰ªéÈòüÂàó‰∏≠Ëé∑ÂèñÊ∂àÊÅØÔºåÈòüÂàóÊòØÂ≠òÂÇ®Ê∂àÊÅØÁöÑÁºìÂÜ≤Âå∫„ÄÇ</strong></p></li>
</ul>
<p><strong>Á¨¨‰∫åÁßçÔºöÂ∑•‰ΩúÈòüÂàó</strong></p>
<ul>
<li>Â∑•‰ΩúÈòüÂàóÔºåÂèàÁß∞‰ªªÂä°ÈòüÂàó„ÄÇ</li>
<li>‰∏ªË¶ÅÊÄùÊÉ≥Â∞±ÊòØÈÅøÂÖçÊâßË°åËµÑÊ∫êÂØÜÈõÜÂûã‰ªªÂä°Êó∂ÔºåÂøÖÈ°ªÁ≠âÂæÖÂÆÉÊâßË°åÂÆåÊàê„ÄÇÁõ∏ÂèçÊàë‰ª¨Á®çÂêéÂÆåÊàê‰ªªÂä°ÔºåÊàë‰ª¨Â∞Ü‰ªªÂä°Â∞ÅË£Ö‰∏∫Ê∂àÊÅØÂπ∂Â∞ÜÂÖ∂ÂèëÈÄÅÂà∞ÈòüÂàó„ÄÇ</li>
<li>Âú®ÂêéÂè∞ËøêË°åÁöÑÂ∑•‰ΩúËøõÁ®ãÂ∞ÜËé∑Âèñ‰ªªÂä°Âπ∂ÊúÄÁªàÊâßË°å‰Ωú‰∏ö„ÄÇÂΩì‰Ω†ËøêË°åËÆ∏Â§öÊ∂àË¥πËÄÖÊó∂Ôºå‰ªªÂä°Â∞ÜÂú®‰ªñ‰ª¨‰πãÈó¥ÂÖ±‰∫´Ôºå‰ΩÜÊòØ<strong>‰∏Ä‰∏™Ê∂àÊÅØÂè™ËÉΩË¢´‰∏Ä‰∏™Ê∂àË¥πËÄÖËé∑Âèñ</strong>„ÄÇ</li>
</ul>
<blockquote>
<p>ÈÅøÂÖçÊ∂àÊÅØÂ†ÜÁßØÔºü</p>
<ol type="1">
<li>ÈááÁî® WorkQueueÔºåÂ§ö‰∏™Ê∂àË¥πËÄÖÁõëÂê¨Âêå‰∏ÄÈòüÂàóÔºõ
<ol type="1">
<li>WorkQueue ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊ∂àÊÅØÊòØËΩÆËÆ≠ÂàÜÂèëÁöÑÔºõ</li>
<li>ÈÄöËøáËÆæÁΩÆÔºö<code>channel.basicQos(1);</code>ÂèØ‰ª•ÂÆûÁé∞Ê∂àÊÅØÁöÑ‰∏çÂÖ¨Âπ≥ÂàÜÂèëÔºõ</li>
<li>Ëøõ‰∏ÄÊ≠•Ôºå‰∏äËø∞ <code>channel.basicQos(x);</code> ËÆæÁΩÆ‰∫ÜÈòüÂàóÁöÑÈ¢ÑÂèñÂÄºÔºåÂç≥ÂÆö‰πâÈÄöÈÅì‰∏äÂÖÅËÆ∏ÁöÑÊú™Á°ÆËÆ§Ê∂àÊÅØÁöÑÊúÄÂ§ßÊï∞Èáè</li>
</ol></li>
<li>Êé•Êî∂Âà∞Ê∂àÊÅØ‰ª•ÂêéÔºåËÄåÊòØÈÄöËøáÁ∫øÁ®ãÊ±†ÔºåÂºÇÊ≠•Ê∂àË¥πÔºõ</li>
</ol>
</blockquote>
<p><strong>ÂêéÈù¢Âá†ÁßçÔºö</strong></p>
<ul>
<li>3„ÄÅ4„ÄÅ5 Ëøô‰∏âÁßçÈÉΩÂ±û‰∫éËÆ¢ÈòÖÊ®°ÂûãÔºå<strong>Âè™‰∏çËøáËøõË°åË∑ØÁî±ÁöÑÊñπÂºè‰∏çÂêå</strong>„ÄÇ</li>
<li>Â∑•‰ΩúÈòüÂàóËÉåÂêéÁöÑÂÅáËÆæÊòØÔºöÊØè‰∏™‰ªªÂä°Âè™Ë¢´‰º†ÈÄíÁªô‰∏Ä‰∏™Â∑•‰Ωú‰∫∫Âëò„ÄÇ</li>
<li><strong>ËÆ¢ÈòÖÊ®°Âûã‰∏≠ÔºöÊàë‰ª¨Â∞Ü‰ºö‰º†ÈÄí‰∏Ä‰∏™‰ø°ÊÅØÁªôÂ§ö‰∏™Ê∂àË¥πËÄÖ„ÄÇ ËøôÁßçÊ®°ÂºèË¢´Áß∞‰∏∫‚ÄúÂèëÂ∏É/ËÆ¢ÈòÖ‚Äù„ÄÇ</strong></li>
</ul>
<h3 id="‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑÁîü‰∫ßÊ∂àË¥π">‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑÁîü‰∫ßÊ∂àË¥π</h3>
<p><strong>Áîü‰∫ßËÄÖ</strong></p>
<ol type="1">
<li><code>Producer</code>ÂÖàËøûÊé•Âà∞ BrokerÔºåÂª∫Á´ãËøûÊé• ConnectionÔºåÂºÄÂêØ‰∏Ä‰∏™‰ø°ÈÅì Channel</li>
<li><code>Producer</code>Â£∞Êòé‰∏Ä‰∏™‰∫§Êç¢Âô® exchange Âπ∂ËÆæÁΩÆÂ•ΩÁõ∏ÂÖ≥Â±ûÊÄß</li>
<li><code>Producer</code>Â£∞Êòé‰∏Ä‰∏™ÈòüÂàó queue Âπ∂ËÆæÁΩÆÂ•ΩÁõ∏ÂÖ≥Â±ûÊÄß</li>
<li><code>Producer</code>ÈÄöËøáË∑ØÁî±ÈîÆ routing key Â∞Ü‰∫§Êç¢Âô®ÂíåÈòüÂàóÁªëÂÆö binding Ëµ∑Êù•</li>
<li><code>Producer</code>ÂèëÈÄÅÊ∂àÊÅØÂà∞<code>Broker</code>ÔºåÂÖ∂‰∏≠ÂåÖÂê´Ë∑ØÁî±ÈîÆ„ÄÅ‰∫§Êç¢Âô®Á≠â‰ø°ÊÅØ</li>
<li>Áõ∏Â∫îÁöÑ‰∫§Êç¢Âô®Ê†πÊçÆÊé•Êî∂Âà∞ÁöÑË∑ØÁî±ÈîÆÊü•ÊâæÂåπÈÖçÁöÑÈòüÂàó</li>
<li>Â¶ÇÊûúÊâæÂà∞ÔºåÂ∞ÜÊ∂àÊÅØÂ≠òÂÖ•ÂØπÂ∫îÁöÑÈòüÂàóÔºåÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞Ôºå‰ºöÊ†πÊçÆÁîü‰∫ßËÄÖÁöÑÈÖçÁΩÆ‰∏¢ÂºÉÊàñËÄÖÈÄÄÂõûÁªôÁîü‰∫ßËÄÖ</li>
<li>ÂÖ≥Èó≠‰ø°ÈÅì</li>
<li>ÂÖ≥Èó≠ËøûÊé•</li>
</ol>
<p><strong>Ê∂àË¥πËÄÖ</strong></p>
<ol type="1">
<li><code>Producer</code>ÂÖàËøûÊé•Âà∞<code>Broker</code>ÔºåÂª∫Á´ãËøûÊé•<code>Connection</code>ÔºåÂºÄÂêØ‰∏Ä‰∏™‰ø°ÈÅì<code>Channel</code></li>
<li>Âêë<code>Broker</code>ËØ∑Ê±ÇÊ∂àË¥πÂìçÂ∫îÁöÑÈòüÂàó‰∏≠Ê∂àÊÅØÔºåÂèØËÉΩ‰ºöËÆæÁΩÆÂìçÂ∫îÁöÑÂõûË∞ÉÂáΩÊï∞</li>
<li>Á≠âÂæÖ<code>Broker</code>ÂõûÂ∫îÂπ∂ÊäïÈÄíÁõ∏Â∫îÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØÔºåÊé•Êî∂Ê∂àÊÅØ</li>
<li>Ê∂àË¥πËÄÖÁ°ÆËÆ§Êî∂Âà∞ÁöÑÊ∂àÊÅØÔºå<code>ack</code></li>
<li><code>RabbitMq</code>‰ªéÈòüÂàó‰∏≠Âà†Èô§Â∑≤ÁªèÁ°ÆÂÆöÁöÑÊ∂àÊÅØ</li>
<li>ÂÖ≥Èó≠‰ø°ÈÅì</li>
<li>ÂÖ≥Èó≠ËøûÊé•</li>
</ol>
<h3 id="Â¶Ç‰Ωï‰øùËØÅÊ∂àÊÅØÁöÑÂèØÈù†ÊÄß">Â¶Ç‰Ωï‰øùËØÅÊ∂àÊÅØÁöÑÂèØÈù†ÊÄß <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>‰∏çÂèØÈù†ÁöÑÂú∞ÊñπÔºöÊ∂àÊÅØÂà∞ MQ ÁöÑËøáÁ®ã‰∏≠Êêû‰∏¢ÔºåMQËá™Â∑±Êêû‰∏¢ÔºåMQÂà∞Ê∂àË¥πËøáÁ®ã‰∏≠Êêû‰∏¢„ÄÇ</p>
<p><strong>Ê∂àÊÅØÂà∞ MQ ÁöÑËøáÁ®ã‰∏≠Êêû‰∏¢Ëß£ÂÜ≥ÊñπÊ°àÔºö</strong></p>
<ul>
<li><p><strong>‰∫ãÁâ©</strong>Ôºö</p>
<ul>
<li>ÂèëÈÄÅÊ∂àÊÅØÂâçÔºåÂºÄÂêØ‰∫ãÂä°Ôºà<code>channel.txSelect()</code>ÔºâÔºåÁÑ∂ÂêéÂèëÈÄÅÊ∂àÊÅØÔºåÂ¶ÇÊûúÂèëÈÄÅËøáÁ®ã‰∏≠Âá∫Áé∞‰ªÄ‰πàÂºÇÂ∏∏Ôºå‰∫ãÂä°Â∞±‰ºöÂõûÊªöÔºà<code>channel.txRollback()</code>ÔºâÔºåÂ¶ÇÊûúÂèëÈÄÅÊàêÂäüÂàôÊèê‰∫§‰∫ãÂä°Ôºà<code>channel.txCommit()</code>Ôºâ„ÄÇÁÑ∂ËÄåÔºåËøôÁßçÊñπÂºèÊúâ‰∏™Áº∫ÁÇπÔºöÂêûÂêêÈáè‰∏ãÈôçÔºõ</li>
<li>‰∫ãÂä°Êú∫Âà∂Âíå Confirm Êú∫Âà∂ÊòØ‰∫íÊñ•ÁöÑÔºå‰∏§ËÄÖ‰∏çËÉΩÂÖ±Â≠òÔºå‰ºöÂØºËá¥ RabbitMQ Êä•Èîô„ÄÇ</li>
</ul></li>
<li><p><strong>ÂèëÂ∏ÉÁ°ÆËÆ§</strong>Ôºö</p>
<ul>
<li><p>Áîü‰∫ßËÄÖÂ∞Ü‰ø°ÈÅìËÆæÁΩÆÊàê confirm Ê®°ÂºèÔºå‰∏ÄÊó¶‰ø°ÈÅìËøõÂÖ• confirm Ê®°ÂºèÔºå ÊâÄÊúâÂú®ËØ•‰ø°ÈÅì‰∏äÈù¢ÂèëÂ∏ÉÁöÑÊ∂àÊÅØÈÉΩÂ∞Ü‰ºöË¢´ÊåáÊ¥æ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ IDÔºà‰ªé 1 ÂºÄÂßãÔºâÔºõ</p>
<blockquote>
<p>SpringBoot ‰∏≠ÁöÑÈÖçÁΩÆÔºöspring.rabbitmq.publisher-confirm-type=correlated</p>
</blockquote></li>
<li><p>‰∏ÄÊó¶Ê∂àÊÅØË¢´ÊäïÈÄíÂà∞ÊâÄÊúâÂåπÈÖçÁöÑÈòüÂàó‰πãÂêéÔºå broker Â∞±‰ºöÂèëÈÄÅ‰∏Ä‰∏™Á°ÆËÆ§ÁªôÁîü‰∫ßËÄÖÔºàÂåÖÂê´Ê∂àÊÅØÁöÑÂîØ‰∏Ä IDÔºâÔºåËøôÂ∞±‰ΩøÂæóÁîü‰∫ßËÄÖÁü•ÈÅìÊ∂àÊÅØÂ∑≤ÁªèÊ≠£Á°ÆÂà∞ËææÁõÆÁöÑÈòüÂàó‰∫ÜÔºõ</p></li>
</ul>
<blockquote>
<ul>
<li>Â¶ÇÊûúÊ∂àÊÅØÂíåÈòüÂàóÊòØÂèØÊåÅ‰πÖÂåñÁöÑÔºåÈÇ£‰πàÁ°ÆËÆ§Ê∂àÊÅØ‰ºöÂú®Â∞ÜÊ∂àÊÅØÂÜôÂÖ•Á£ÅÁõò‰πãÂêéÂèëÂá∫Ôºõ</li>
<li>broker Âõû‰º†ÁªôÁîü‰∫ßËÄÖÁöÑÁ°ÆËÆ§Ê∂àÊÅØ‰∏≠ delivery-tag ÂüüÂåÖÂê´‰∫ÜÁ°ÆËÆ§Ê∂àÊÅØÁöÑÂ∫èÂàóÂè∑ÔºåÊ≠§Â§ñ broker ‰πüÂèØ‰ª•ËÆæÁΩÆ basic.ack ÁöÑ multiple ÂüüÔºåË°®Á§∫Âà∞Ëøô‰∏™Â∫èÂàóÂè∑‰πãÂâçÁöÑÊâÄÊúâÊ∂àÊÅØÈÉΩÂ∑≤ÁªèÂæóÂà∞‰∫ÜÂ§ÑÁêÜ„ÄÇ</li>
</ul>
</blockquote>
<ul>
<li>confirm Ê®°ÂºèÊúÄÂ§ßÁöÑÂ•ΩÂ§ÑÂú®‰∫é‰ªñÊòØ<strong>ÂºÇÊ≠•ÁöÑ</strong>Ôºå‰∏ÄÊó¶ÂèëÂ∏É‰∏ÄÊù°Ê∂àÊÅØÔºåÁîü‰∫ßËÄÖÂ∫îÁî®Á®ãÂ∫èÂ∞±ÂèØ‰ª•Âú®Á≠â‰ø°ÈÅìËøîÂõûÁ°ÆËÆ§ÁöÑÂêåÊó∂ÁªßÁª≠ÂèëÈÄÅ‰∏ã‰∏ÄÊù°Ê∂àÊÅØÔºåÂΩìÊ∂àÊÅØÊúÄÁªàÂæóÂà∞Á°ÆËÆ§‰πãÂêéÔºåÁîü‰∫ßËÄÖÂ∫îÁî®‰æøÂèØ‰ª•ÈÄöËøáÂõûË∞ÉÊñπÊ≥ïÊù•Â§ÑÁêÜËØ•Á°ÆËÆ§Ê∂àÊÅØÔºåÂ¶ÇÊûú RabbitMQ Âõ†‰∏∫Ëá™Ë∫´ÂÜÖÈÉ®ÈîôËØØÂØºËá¥Ê∂àÊÅØ‰∏¢Â§±ÔºåÂ∞±‰ºöÂèëÈÄÅ‰∏ÄÊù° nack Ê∂àÊÅØÔºåÁîü‰∫ßËÄÖÂ∫îÁî®Á®ãÂ∫èÂêåÊ†∑ÂèØ‰ª•Âú®ÂõûË∞ÉÊñπÊ≥ï‰∏≠Â§ÑÁêÜËØ• nack Ê∂àÊÅØ„ÄÇ</li>
</ul></li>
<li><p><strong>ÂõûÈÄÄÊ∂àÊÅØ</strong>Ôºö</p>
<ul>
<li>Âú®‰ªÖÂºÄÂêØ‰∫ÜÁîü‰∫ßËÄÖÁ°ÆËÆ§Êú∫Âà∂ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∫§Êç¢Êú∫Êé•Êî∂Âà∞Ê∂àÊÅØÂêéÔºå‰ºöÁõ¥Êé•ÁªôÊ∂àÊÅØÁîü‰∫ßËÄÖÂèëÈÄÅÁ°ÆËÆ§Ê∂àÊÅØÔºå<strong>Â¶ÇÊûúÂèëÁé∞ËØ•Ê∂àÊÅØ‰∏çÂèØË∑ØÁî±ÔºåÈÇ£‰πàÊ∂àÊÅØ‰ºöË¢´Áõ¥Êé•‰∏¢ÂºÉÔºåÊ≠§Êó∂Áîü‰∫ßËÄÖÊòØ‰∏çÁü•ÈÅìÊ∂àÊÅØË¢´‰∏¢ÂºÉËøô‰∏™‰∫ã‰ª∂ÁöÑ</strong></li>
<li>ÈÄöËøáËÆæÁΩÆ mandatory ÂèÇÊï∞ÂèØ‰ª•Âú®ÂΩìÊ∂àÊÅØ‰º†ÈÄíËøáÁ®ã‰∏≠‰∏çÂèØËææÁõÆÁöÑÂú∞Êó∂Â∞ÜÊ∂àÊÅØËøîÂõûÁªôÁîü‰∫ßËÄÖÔºö<code>spring.rabbitmq.template.mandatory=true</code></li>
</ul></li>
<li><p><strong>Â§á‰ªΩ‰∫§Êç¢Êú∫</strong>ÔºöÂ§á‰ªΩ‰∫§Êç¢Êú∫ÂèØ‰ª•ÁêÜËß£‰∏∫ RabbitMQ ‰∏≠‰∫§Êç¢Êú∫ÁöÑ‚ÄúÂ§áËÉé‚Äù ÔºåÂΩìÊàë‰ª¨‰∏∫Êüê‰∏Ä‰∏™‰∫§Êç¢Êú∫Â£∞Êòé‰∏Ä‰∏™ÂØπÂ∫îÁöÑÂ§á‰ªΩ‰∫§Êç¢Êú∫Êó∂ÔºåÂ∞±ÊòØ‰∏∫ÂÆÉÂàõÂª∫‰∏Ä‰∏™Â§áËÉéÔºå<strong>ÂΩì‰∫§Êç¢Êú∫Êé•Êî∂Âà∞‰∏ÄÊù°‰∏çÂèØË∑ØÁî±Ê∂àÊÅØÊó∂ÔºåÂ∞Ü‰ºöÊääËøôÊù°Ê∂àÊÅØËΩ¨ÂèëÂà∞Â§á‰ªΩ‰∫§Êç¢Êú∫‰∏≠</strong>ÔºåÁî±Â§á‰ªΩ‰∫§Êç¢Êú∫Êù•ËøõË°åËΩ¨ÂèëÂíåÂ§ÑÁêÜ„ÄÇ</p></li>
</ul>
<p><strong>MQËá™Â∑±Êêû‰∏¢Ëß£ÂÜ≥ÊñπÊ°àÔºö</strong></p>
<ul>
<li><p><strong>ÊåÅ‰πÖÂåñ</strong>ÔºöÂ∞ÜÈòüÂàóÂíåÊ∂àÊÅØÈÉΩÊ†áËÆ∞‰∏∫ÊåÅ‰πÖÂåñÔºõ</p>
<blockquote>
<p>Â∞ΩÁÆ°ÂÆÉÂëäËØâ RabbitMQ Â∞ÜÊ∂àÊÅØ‰øùÂ≠òÂà∞Á£ÅÁõòÔºå‰ΩÜÊòØËøôÈáå‰æùÁÑ∂Â≠òÂú®ÂΩìÊ∂àÊÅØÂàöÂáÜÂ§áÂ≠òÂÇ®Âú®Á£ÅÁõòÁöÑÊó∂ÂÄôÔºå‰ΩÜÊòØËøòÊ≤°ÊúâÂ≠òÂÇ®ÂÆåÔºåÊ∂àÊÅØËøòÂú®ÁºìÂ≠òÁöÑ‰∏Ä‰∏™<strong>Èó¥ÈöîÁÇπ</strong>„ÄÇÊ≠§Êó∂Âπ∂Ê≤°ÊúâÁúüÊ≠£ÂÜôÂÖ•Á£ÅÁõò„ÄÇÊåÅ‰πÖÊÄß‰øùËØÅÂπ∂‰∏çÂº∫Ôºå‰ΩÜÊòØÂØπ‰∫éÊàë‰ª¨ÁöÑÁÆÄÂçï‰ªªÂä°ÈòüÂàóËÄåË®ÄÔºåËøôÂ∑≤ÁªèÁª∞Áª∞Êúâ‰Ωô‰∫Ü„ÄÇ</p>
</blockquote></li>
<li><p><strong>Êê≠Âª∫ÈõÜÁæ§</strong>ÔºöÊôÆÈÄöÈõÜÁæ§Ê®°Âºè„ÄÅÈïúÂÉèÈõÜÁæ§Ê®°ÂºèÔºàÈ´òÂèØÁî®Ê®°ÂºèÔºâ</p></li>
<li><p><strong>ÈïúÂÉèÈòüÂàó</strong>ÔºöÂºïÂÖ•ÈïúÂÉèÈòüÂàóÔºàMirror QueueÔºâÁöÑÊú∫Âà∂ÔºåÂèØ‰ª•Â∞ÜÈòüÂàóÈïúÂÉèÂà∞ÈõÜÁæ§‰∏≠ÁöÑÂÖ∂‰ªñ Broker ËäÇÁÇπ‰πã‰∏äÔºåÂ¶ÇÊûúÈõÜÁæ§‰∏≠ÁöÑ‰∏Ä‰∏™ËäÇÁÇπÂ§±Êïà‰∫ÜÔºåÈòüÂàóËÉΩËá™Âä®Âú∞ÂàáÊç¢Âà∞ÈïúÂÉè‰∏≠ÁöÑÂè¶‰∏Ä‰∏™ËäÇÁÇπ‰∏ä‰ª•‰øùËØÅÊúçÂä°ÁöÑÂèØÁî®ÊÄß„ÄÇ</p></li>
</ul>
<p><strong>MQ Âà∞Ê∂àË¥πËøáÁ®ã‰∏≠Êêû‰∏¢Ëß£ÂÜ≥ÊñπÊ°àÔºö</strong></p>
<ul>
<li><strong>Ê∂àÊÅØÂ∫îÁ≠î</strong>ÔºöÊ∂àË¥πËÄÖÂú®Êé•Êî∂Âà∞Ê∂àÊÅØÂπ∂‰∏îÂ§ÑÁêÜËØ•Ê∂àÊÅØ‰πãÂêéÔºåÂëäËØâ RabbitMQ ÂÆÉÂ∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÔºåRabbitMQ ÂèØ‰ª•ÊääËØ•Ê∂àÊÅØÂà†Èô§‰∫ÜÔºõÂàÜ‰∏∫ÔºöËá™Âä®Â∫îÁ≠î„ÄÅÊâãÂä®Â∫îÁ≠î</li>
<li><strong>Ê∂àÊÅØË°•ÂÅøÊú∫Âà∂ÔºöÊ∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü</strong>ÔºöÂ¶ÇÊûúÊ∂àË¥πËÄÖÁî±‰∫éÊüê‰∫õÂéüÂõ†Â§±ÂéªËøûÊé•ÔºàÂÖ∂ÈÄöÈÅìÂ∑≤ÂÖ≥Èó≠ÔºåËøûÊé•Â∑≤ÂÖ≥Èó≠Êàñ TCP ËøûÊé•‰∏¢Â§±ÔºâÔºåÂØºËá¥Ê∂àÊÅØÊú™ÂèëÈÄÅ ACK Á°ÆËÆ§ÔºåRabbitMQ Â∞Ü‰∫ÜËß£Âà∞Ê∂àÊÅØÊú™ÂÆåÂÖ®Â§ÑÁêÜÔºåÂπ∂Â∞ÜÂØπÂÖ∂ÈáçÊñ∞ÊéíÈòü„ÄÇ</li>
<li><strong>Ê≠ª‰ø°ÈòüÂàó</strong>ÔºöËßÅÂêéÁª≠ÂàÜÊûê</li>
</ul>
<h3 id="Ê∂àÊÅØÂπÇÁ≠âÊÄß">Ê∂àÊÅØÂπÇÁ≠âÊÄß <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÂπÇÁ≠âÊ¶ÇÂøµ</strong>ÔºöÁî®Êà∑ÂØπ‰∫éÂêå‰∏ÄÊìç‰ΩúÂèëËµ∑ÁöÑ‰∏ÄÊ¨°ËØ∑Ê±ÇÊàñËÄÖÂ§öÊ¨°ËØ∑Ê±ÇÁöÑÁªìÊûúÊòØ‰∏ÄËá¥ÁöÑÔºå‰∏ç‰ºöÂõ†‰∏∫Â§öÊ¨°ÁÇπÂáªËÄå‰∫ßÁîü‰∫ÜÂâØ‰ΩúÁî®„ÄÇ</p>
<p><strong>MQ ‰∏≠ÈáçÂ§çÊ∂àË¥π</strong>ÔºöÊ∂àË¥πËÄÖÂú®Ê∂àË¥π MQ ‰∏≠ÁöÑÊ∂àÊÅØÊó∂Ôºå MQ Â∑≤ÊääÊ∂àÊÅØÂèëÈÄÅÁªôÊ∂àË¥πËÄÖÔºåÊ∂àË¥πËÄÖÂú®Áªô MQ ËøîÂõû ack Êó∂ÁΩëÁªú‰∏≠Êñ≠ÔºåÊïÖ MQ Êú™Êî∂Âà∞Á°ÆËÆ§‰ø°ÊÅØÔºåËØ•Êù°Ê∂àÊÅØ‰ºöÈáçÊñ∞ÂèëÁªôÂÖ∂‰ªñÁöÑÊ∂àË¥πËÄÖÔºåÊàñËÄÖÂú®ÁΩëÁªúÈáçËøûÂêéÂÜçÊ¨°ÂèëÈÄÅÁªôËØ•Ê∂àË¥πËÄÖÔºå‰ΩÜÂÆûÈôÖ‰∏äËØ•Ê∂àË¥πËÄÖÂ∑≤ÊàêÂäüÊ∂àË¥π‰∫ÜËØ•Êù°Ê∂àÊÅØÔºåÈÄ†ÊàêÊ∂àË¥πËÄÖÊ∂àË¥π‰∫ÜÈáçÂ§çÁöÑÊ∂àÊÅØ„ÄÇ</p>
<p><strong>Ëß£ÂÜ≥ÊÄùË∑Ø</strong>Ôºö</p>
<ol type="1">
<li><strong>ÂîØ‰∏ÄID+ÊåáÁ∫πÁ†ÅÊú∫Âà∂ÔºåÂà©Áî®Êï∞ÊçÆÂ∫ì‰∏ªÈîÆÂéªÈáçÔºõ</strong></li>
<li><strong>Âà©Áî® redis ÁöÑÂéüÂ≠êÊÄßÂéªÂÆûÁé∞</strong>ÔºöÂà©Áî® redis ÊâßË°å setnx ÂëΩ‰ª§ÔºåÂ§©ÁÑ∂ÂÖ∑ÊúâÂπÇÁ≠âÊÄß„ÄÇ‰ªéËÄåÂÆûÁé∞‰∏çÈáçÂ§çÊ∂àË¥π„ÄÇ</li>
</ol>
<h3 id="Ê≠ª‰ø°ÈòüÂàó">Ê≠ª‰ø°ÈòüÂàó</h3>
<p><strong>Ê¶ÇÂøµ</strong>Ôºö</p>
<p>Ê≠ª‰ø°ÔºåÈ°æÂêçÊÄù‰πâÂ∞±ÊòØÊó†Ê≥ïË¢´Ê∂àË¥πÁöÑÊ∂àÊÅØÔºõ‰∏ÄËà¨Êù•ËØ¥Ôºå producer Â∞ÜÊ∂àÊÅØÊäïÈÄíÂà∞ broker ÊàñËÄÖÁõ¥Êé•Âà∞ queue ÈáåÔºå consumer ‰ªé queue ÂèñÂá∫Ê∂àÊÅØËøõË°åÊ∂àË¥πÔºå‰ΩÜÊüê‰∫õÊó∂ÂÄôÁî±‰∫éÁâπÂÆöÁöÑÂéüÂõ†<strong>ÂØºËá¥ queue ‰∏≠ÁöÑÊüê‰∫õÊ∂àÊÅØÊó†Ê≥ïË¢´Ê∂àË¥π</strong>ÔºåËøôÊ†∑ÁöÑÊ∂àÊÅØÂ¶ÇÊûúÊ≤°ÊúâÂêéÁª≠ÁöÑÂ§ÑÁêÜÔºåÂ∞±ÂèòÊàê‰∫ÜÊ≠ª‰ø°ÔºåÊúâÊ≠ª‰ø°Ëá™ÁÑ∂Â∞±Êúâ‰∫ÜÊ≠ª‰ø°ÈòüÂàó„ÄÇ</p>
<p><strong>ÂØºËá¥ÁöÑÊ≠ª‰ø°ÁöÑÂá†ÁßçÂéüÂõ†</strong></p>
<ol type="1">
<li>Ê∂àÊÅØ TTL ËøáÊúü</li>
<li>ÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶ÔºàÈòüÂàóÊª°‰∫ÜÔºåÊó†Ê≥ïÂÜçÊ∑ªÂä†Êï∞ÊçÆÂà∞ MQ ‰∏≠Ôºâ</li>
<li>Ê∂àÊÅØË¢´ÊãíÁªùÔºàbasic.reject Êàñ basic.nackÔºâÂπ∂‰∏î requeue=falseÔºåÂç≥‰∏çÈáçÊñ∞ÊîæÂÖ•ÈòüÂàó</li>
</ol>
<h3 id="Âª∂ËøüÈòüÂàó">Âª∂ËøüÈòüÂàó</h3>
<p><strong>Ê¶ÇÂøµ</strong>Ôºö</p>
<p>Â≠òÂÇ®ÂØπÂ∫îÁöÑÂª∂ËøüÊ∂àÊÅØÔºåÊåáÂΩìÊ∂àÊÅØË¢´ÂèëÈÄÅ‰ª•ÂêéÔºåÂπ∂‰∏çÊÉ≥ËÆ©Ê∂àË¥πËÄÖÁ´ãÂàªÊãøÂà∞Ê∂àÊÅØÔºåËÄåÊòØÁ≠âÂæÖÁâπÂÆöÊó∂Èó¥ÂêéÔºåÊ∂àË¥πËÄÖÊâçËÉΩÊãøÂà∞Ëøô‰∏™Ê∂àÊÅØËøõË°åÊ∂àË¥π„ÄÇ</p>
<p><strong>TTLÔºàTime TO LiveÔºâ</strong>Ôºö</p>
<p><strong>TTL ÊòØ RabbitMQ ‰∏≠‰∏Ä‰∏™Ê∂àÊÅØÊàñËÄÖÈòüÂàóÁöÑÂ±ûÊÄßÔºåË°®Êòé‰∏ÄÊù°Ê∂àÊÅØÊàñËÄÖËØ•ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâÊ∂àÊÅØÁöÑÊúÄÂ§ßÂ≠òÊ¥ªÊó∂Èó¥</strong>ÔºåÂçï‰ΩçÊòØÊØ´Áßí„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂ¶ÇÊûú‰∏ÄÊù°Ê∂àÊÅØËÆæÁΩÆ‰∫Ü TTL Â±ûÊÄßÊàñËÄÖÊ∂àÊÅØËøõÂÖ•‰∫ÜËÆæÁΩÆ‰∫Ü TTL Â±ûÊÄßÁöÑÈòüÂàóÔºå<strong>ÈÇ£‰πàËøôÊù°Ê∂àÊÅØÂ¶ÇÊûúÂú® TTL ËÆæÁΩÆÁöÑÊó∂Èó¥ÂÜÖÊ≤°ÊúâË¢´Ê∂àË¥πÔºåÂàô‰ºöÊàê‰∏∫&quot;Ê≠ª‰ø°&quot;</strong>„ÄÇÂ¶ÇÊûúÂêåÊó∂ÈÖçÁΩÆ‰∫ÜÈòüÂàóÁöÑ TTL ÂíåÊ∂àÊÅØÁöÑ TTLÔºåÈÇ£‰πàËæÉÂ∞èÁöÑÈÇ£‰∏™ÂÄºÂ∞Ü‰ºöË¢´‰ΩøÁî®„ÄÇ</p>
<p><strong>Êúâ‰∏§ÁßçÊñπÂºèËÆæÁΩÆ TTL</strong>Ôºö</p>
<ul>
<li><p>Ê∂àÊÅØËÆæÁΩÆ TTL</p></li>
<li><p>ÈòüÂàóËÆæÁΩÆ TTL</p></li>
<li><p>‰∏§ËÄÖÁöÑÂå∫Âà´Ôºö</p>
<p>Â¶ÇÊûúËÆæÁΩÆ‰∫ÜÈòüÂàóÁöÑ TTL Â±ûÊÄßÔºåÈÇ£‰πà‰∏ÄÊó¶Ê∂àÊÅØËøáÊúüÔºåÂ∞±‰ºöË¢´ÈòüÂàó‰∏¢ÂºÉÔºàÂ¶ÇÊûúÈÖçÁΩÆ‰∫ÜÊ≠ª‰ø°ÈòüÂàóË¢´‰∏¢Âà∞Ê≠ª‰ø°ÈòüÂàó‰∏≠ÔºâÔºõ</p>
<p>ËÆæÁΩÆ‰∫ÜÊ∂àÊÅØÁöÑ TTLÔºåÊ∂àÊÅØÂç≥‰ΩøËøáÊúüÔºå‰πü‰∏ç‰∏ÄÂÆö‰ºöË¢´È©¨‰∏ä‰∏¢ÂºÉÔºåÂõ†‰∏∫<strong>Ê∂àÊÅØÊòØÂê¶ËøáÊúüÊòØÂú®Âç≥Â∞ÜÊäïÈÄíÂà∞Ê∂àË¥πËÄÖ‰πãÂâçÂà§ÂÆöÁöÑ</strong></p></li>
</ul>
<h3 id="‰ºòÂÖàÈòüÂàó">‰ºòÂÖàÈòüÂàó</h3>
<p>‰ΩøÂæóÊ∂àÊÅØÂÖ∑Êúâ‰ºòÂÖàÁ∫ßÔºåË¶ÅËÆ©ÈòüÂàóÂÆûÁé∞‰ºòÂÖàÁ∫ßÈúÄË¶ÅÂÅöÂ¶Ç‰∏ã‰∫ãÊÉÖÔºõ</p>
<ol type="1">
<li>ÈòüÂàóÈúÄË¶ÅËÆæÁΩÆ‰∏∫‰ºòÂÖàÁ∫ßÈòüÂàóÔºåÂèÇÊï∞Ôºöx-max-priority</li>
<li>Ê∂àÊÅØÈúÄË¶ÅËÆæÁΩÆÊ∂àÊÅØÁöÑ‰ºòÂÖàÁ∫ßÔºåÊ∂àË¥πËÄÖÈúÄË¶ÅÁ≠âÂæÖÊ∂àÊÅØÂ∑≤ÁªèÂèëÈÄÅÂà∞ÈòüÂàó‰∏≠ÊâçÂéªÊ∂àË¥πÂõ†‰∏∫ÔºåËøôÊ†∑ÊâçÊúâÊú∫‰ºöÂØπÊ∂àÊÅØËøõË°åÊéíÂ∫èÔºõ</li>
</ol>
<blockquote>
<p>Âç≥ÔºöÂΩìÊ∂àË¥πÈÄüÂ∫¶Â§ß‰∫éÁîü‰∫ßÈÄüÂ∫¶‰∏î Broker Ê≤°ÊúâÂ†ÜÁßØÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºòÂÖàÁ∫ßÊòæÂæóÊ≤°ÊúâÊÑè‰πâ</p>
</blockquote>
<h3 id="‰∫ãÂä°Êú∫Âà∂">‰∫ãÂä°Êú∫Âà∂</h3>
<p>RabbitMQ ÂÆ¢Êà∑Á´Ø‰∏≠‰∏é‰∫ãÂä°Êú∫Âà∂Áõ∏ÂÖ≥ÁöÑÊñπÊ≥ïÊúâ‰∏â‰∏™Ôºö</p>
<ul>
<li><code>channel.txSelect</code> Áî®‰∫éÂ∞ÜÂΩìÂâçÁöÑ‰ø°ÈÅìËÆæÁΩÆÊàê‰∫ãÂä°Ê®°Âºè„ÄÇ</li>
<li><code>channel.txCommit</code> Áî®‰∫éÊèê‰∫§‰∫ãÂä°„ÄÇ</li>
<li><code>channel.txRollback</code> Áî®‰∫é‰∫ãÂä°ÂõûÊªöÔºåÂ¶ÇÊûúÂú®‰∫ãÂä°Êèê‰∫§ÊâßË°å‰πãÂâçÁî±‰∫é RabbitMQ ÂºÇÂ∏∏Â¥©Ê∫ÉÊàñËÄÖÂÖ∂‰ªñÂéüÂõ†ÊäõÂá∫ÂºÇÂ∏∏ÔºåÈÄöËøá <code>channel.txRollback</code> Êù•ÂõûÊªö„ÄÇ</li>
</ul>
<h2 id="catÂæÖÂÆåÂñÑ">CAT(ÂæÖÂÆåÂñÑ<span class="emoji" data-emoji="stuck_out_tongue_winking_eye">üòú</span>)</h2>
<h3 id="Ë∞ÉÁî®ÈìæÁõëÊéß">Ë∞ÉÁî®ÈìæÁõëÊéß</h3>
<p>È¶ñÂÖàÔºåÂºÄÂßãÂæÆÊúçÂä°Êû∂ÊûÑ‰πãÂêéÔºå<strong>ÊúçÂä°ÂèòÊàêÂàÜÂ∏ÉÂºè</strong>ÁöÑ‰∫ÜÔºåÂØπÊúçÂä°ËøõË°å‰∫ÜÊãÜÂàÜ„ÄÇÂΩìÁî®Êà∑ÁöÑ‰∏Ä‰∏™ËØ∑Ê±ÇËøõÊù•Ôºå‰ºö‰æùÊ¨°ÁªèËøá‰∏çÂêåÁöÑÊúçÂä°ËäÇÁÇπËøõË°åÂ§ÑÁêÜÔºåÂ§ÑÁêÜÂÆåÊàêÂêéÂÜçËøîÂõûÁªìÊûúÁªôÁî®Êà∑„ÄÇÈÇ£‰πàÂú®Êï¥‰∏™Â§ÑÁêÜÁöÑÈìæÊù°‰∏≠ÔºåÂ¶ÇÊûúÊúâ‰ªª‰Ωï‰∏Ä‰∏™ËäÇÁÇπÂá∫Áé∞‰∫ÜÂª∂ËøüÊàñËÄÖÈóÆÈ¢òÔºåÈÉΩÊúâÂèØËÉΩÂØºËá¥ÊúÄÁªàÁöÑÁªìÊûúÂá∫Áé∞ÂºÇÂ∏∏ÔºåÊúâÁöÑÊó∂ÂÄô‰∏çÂêåÁöÑÊúçÂä°ËäÇÁÇπÁîöËá≥ÊòØÁî±‰∏çÂêåÁöÑÂõ¢ÈòüÂºÄÂèëÁöÑ„ÄÅÈÉ®ÁΩ≤Âú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÔºåÈÇ£‰πàÂú®Ëøô‰πàÈîôÁªºÂ§çÊùÇÁöÑÁéØÂ¢É‰∏ãÔºåÊàë‰ª¨ÊÉ≥Ë¶ÅÊéíÊü•Âá∫ÊòØÈìæÊù°‰∏≠ÁöÑÂÖ∑‰ΩìÂì™‰∏™ÊúçÂä°ËäÇÁÇπÂá∫‰∫ÜÈóÆÈ¢òÔºåÂÖ∂ÂÆûÂπ∂‰∏çÂÆπÊòì„ÄÇ</p>
<p>Âõ†ËÄåÊèêÂá∫‰∫Ü<strong>Ë∞ÉÁî®ÈìæÁõëÊéß</strong>ÔºåÈô§‰∫ÜËÉΩÂ∏ÆÂä©Êàë‰ª¨ÂÆö‰ΩçÈóÆÈ¢ò‰ª•Â§ñÔºåËøòËÉΩÂ∏ÆÂä©È°πÁõÆÊàêÂëòÊ∏ÖÊô∞ÁöÑÂéª‰∫ÜËß£È°πÁõÆÈÉ®ÁΩ≤ÁªìÊûÑ„ÄÇ</p>
<p>ÊúâËøô‰∫õÈúÄÊ±ÇÔºö</p>
<ol type="1">
<li>Á∫ø‰∏äÁöÑÊúçÂä°ÊòØÂê¶ËøêË°åÊ≠£Â∏∏„ÄÇÊòØ‰∏çÊòØÊúâ‰∏Ä‰∫õÊúçÂä°Â∑≤ÁªèÂÆïÊú∫‰∫ÜÔºå‰ΩÜÊòØÊàë‰ª¨Ê≤°ÊúâÂèëÁé∞Âë¢ÔºüÂ¶Ç‰ΩïÂø´ÈÄüÂèëÁé∞Â∑≤ÁªèÂÆïÊú∫ÁöÑÊúçÂä°Ôºü</li>
<li>Êù•Ëá™Áî®Êà∑ÁöÑ‰∏ÄÁ¨îË∞ÉÁî®Â§±Ë¥•‰∫ÜÔºåÂà∞Â∫ïÊòØÂì™‰∏™ÊúçÂä°ÂØºËá¥ÁöÑÈîôËØØÔºåÊàë‰ª¨ÈúÄË¶ÅËÉΩÂ§üÂø´ÈÄüÂÆö‰ΩçÂà∞ÊâçËÉΩÂÅöÂà∞‰øÆÂ§ç„ÄÇ</li>
<li>Áî®Êà∑ÂèçÊò†ÔºåÊàë‰ª¨ÁöÑÁ≥ªÁªüÂæà‚ÄúÊÖ¢‚Äù„ÄÇÂ¶Ç‰ΩïÁü•ÈÅìÁ©∂Á´üÊÖ¢Âú®‰ΩïÂ§ÑÔºü</li>
</ol>
<p>Ëã•Ê≤°Êúâ<strong>Ë∞ÉÁî®ÈìæÁõëÊéß</strong>Ôºå‰ºöÂ≠òÂú®Â¶Ç‰∏ãÈóÆÈ¢òÔºö</p>
<ol type="1">
<li>ÈóÆÈ¢òÂ§ÑÁêÜ‰∏çÂèäÊó∂ÔºåÂΩ±ÂìçÁî®Êà∑ÁöÑ‰ΩìÈ™å</li>
<li>‰∏çÂêåÂ∫îÁî®ÁöÑË¥üË¥£‰∫∫‰∏çÊâøËÆ§ÊòØËá™Â∑±ÁöÑÈóÆÈ¢òÂØºËá¥Â§±Ë¥•ÔºåÂÆπÊòìÂá∫Áé∞‚ÄúÊâØÁöÆ‚Äù</li>
<li>ÊúçÂä°‰πãÈó¥ÁöÑË∞ÉÁî®ÂÖ≥Á≥ªÈöæ‰ª•Ê¢≥ÁêÜÔºåÂèØËÉΩ‰ºöÂ≠òÂú®ÂæàÂ§öÈîôËØØÁöÑË∞ÉÁî®ÂÖ≥Á≥ª</li>
<li>Áî±‰∫éÊ≤°ÊúâÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÔºåÂõ¢ÈòüÊàêÂëòÂØπËá™Â∑±ÁöÑÂ∫îÁî®ÊÄßËÉΩ‰∏çÂú®ÊÑè</li>
</ol>
<h3 id="Ë∞ÉÁî®ÈìæÁõëÊéßÁöÑÂéüÁêÜ">Ë∞ÉÁî®ÈìæÁõëÊéßÁöÑÂéüÁêÜ</h3>
<blockquote>
<p>Google ÂèëË°®Ëøá‰∏ÄÁØáËÆ∫ÊñáÔºå‰ªãÁªçËøáÂÖ∂Áîü‰∫ßÁéØÂ¢É‰∏≠Â§ßËßÑÊ®°ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏ãÁöÑË∑üË∏™Á≥ªÁªüDapperÁöÑËÆæËÆ°Âíå‰ΩøÁî®ÁªèÈ™åÔºå‰∏ªË¶ÅÊòØ‰∏§‰∏™Ê¶ÇÂøµ„ÄÇ</p>
</blockquote>
<p><strong>Trace</strong>:</p>
<ul>
<li>Trace ÊòØÊåá<strong>‰∏ÄÊ¨°ËØ∑Ê±ÇË∞ÉÁî®ÁöÑÈìæË∑ØËøáÁ®ã</strong>ÔºåTrace ID ÊòØÊåáËøôÊ¨°ËØ∑Ê±ÇË∞ÉÁî®ÁöÑ ID„ÄÇ</li>
<li>Âú®‰∏ÄÊ¨°ËØ∑Ê±Ç‰∏≠Ôºå‰ºöÂú®ÁΩëÁªúÁöÑÊúÄÂºÄÂßãÁîüÊàê‰∏Ä‰∏™ÂÖ®Â±ÄÂîØ‰∏ÄÁöÑÁî®‰∫éÊ†áËØÜÊ≠§Ê¨°ËØ∑Ê±ÇÁöÑ Trace IDÔºåËøô‰∏™ Trace ID Âú®ËøôÊ¨°ËØ∑Ê±ÇË∞ÉÁî®ËøáÁ®ã‰∏≠Êó†ËÆ∫ÁªèËøáÂ§öÂ∞ë‰∏™ËäÇÁÇπÈÉΩ‰ºö‰øùÊåÅ‰∏çÂèòÔºåÂπ∂‰∏îÂú®ÈöèÁùÄÊØè‰∏ÄÂ±ÇÁöÑË∞ÉÁî®‰∏çÂÅúÁöÑ‰º†ÈÄí„ÄÇ</li>
<li>ÊúÄÁªàÔºåÂèØ‰ª•ÈÄöËøá Trace ID Â∞ÜËøô‰∏ÄÊ¨°Áî®Êà∑ËØ∑Ê±ÇÂú®Á≥ªÁªü‰∏≠ÁöÑË∑ØÂæÑÂÖ®ÈÉ®‰∏≤Ëµ∑Êù•„ÄÇ</li>
</ul>
<p><strong>Span</strong>:</p>
<ul>
<li>Span ÊòØÊåá‰∏Ä‰∏™Ê®°ÂùóÁöÑË∞ÉÁî®ËøáÁ®ãÔºå‰∏ÄËà¨Áî® Span ID Êù•Ê†áËØÜ„ÄÇ</li>
<li>Âú®‰∏ÄÊ¨°ËØ∑Ê±ÇÁöÑËøáÁ®ã‰∏≠‰ºöË∞ÉÁî®‰∏çÂêåÁöÑËäÇÁÇπ/Ê®°Âùó/ÊúçÂä°ÔºåÊØè‰∏ÄÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ Span ID Êù•ËÆ∞ÂΩï„ÄÇ</li>
<li>ËøôÊ†∑ÔºåÂ∞±ÂèØ‰ª•ÈÄöËøá Span ID Êù•ÂÆö‰ΩçÂΩìÂâçËØ∑Ê±ÇÂú®Êï¥‰∏™Á≥ªÁªüË∞ÉÁî®Èìæ‰∏≠ÊâÄÂ§ÑÁöÑ‰ΩçÁΩÆÔºå‰ª•ÂèäÂÆÉÁöÑ‰∏ä‰∏ãÊ∏∏ËäÇÁÇπÂàÜÂà´ÊòØ‰ªÄ‰πà„ÄÇ</li>
</ul>
<blockquote>
<p>ÊØîÂ¶ÇÔºö</p>
<ol type="1">
<li>ÂâçÁ´ØÊµèËßàÂô®ÂèëËµ∑ËØ∑Ê±ÇÂà∞ËÆ¢ÂçïÊúçÂä°ÔºåËÆ¢ÂçïÊúçÂä°‰ºö‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Êü•ËØ¢Âá∫ÂØπÂ∫îÁöÑËÆ¢ÂçïÊï∞ÊçÆ„ÄÇËÆ¢ÂçïÊï∞ÊçÆ‰∏≠ÂåÖÂê´‰∫ÜÂïÜÂìÅÁöÑIDÔºåÊâÄ‰ª•ËøòÈúÄË¶ÅÊü•ËØ¢ÂïÜÂìÅ‰ø°ÊÅØ„ÄÇ</li>
<li>ËÆ¢ÂçïÊúçÂä°ÂèëËµ∑‰∏ÄÁ¨îË∞ÉÁî®ÔºåÈÄöËøá RPC ÁöÑÊñπÂºèÔºåËøúÁ®ãË∞ÉÁî®ÂïÜÂìÅÊúçÂä°ÁöÑÊü•ËØ¢ÂïÜÂìÅ‰ø°ÊÅØÊé•Âè£„ÄÇ</li>
<li>ËÆ¢ÂçïÊúçÂä°ÁªÑË£ÖÊï∞ÊçÆÔºåËøîÂõûÁªôÂâçÁ´Ø„ÄÇ</li>
</ol>
<p>Êü•ËØ¢ËÆ¢ÂçïÊï∞ÊçÆÂíåÊü•ËØ¢ÂïÜÂìÅÊï∞ÊçÆËøô‰∏§‰∏™ËøáÁ®ãÔºåÂ∞±ÂàÜÂà´ÊòØ‰∏§‰∏™ SpanÔºåÊàë‰ª¨ËÆ∞‰∏∫ SpanA Âíå SpanB„ÄÇSpanB ÁöÑparent ‰πüÂ∞±ÊòØÁà∂SpanÂ∞±ÊòØ SpanA„ÄÇËøô‰∏§‰∏™SpanÈÉΩÊã•ÊúâÂêå‰∏Ä‰∏™Trace IdÔºö1</p>
</blockquote>
<h3 id="cat-Ê¶ÇËø∞">CAT Ê¶ÇËø∞</h3>
<p>CAT ÊòØ‰∏Ä‰∏™<strong>ÁõëÊéßË∞ÉÁî®ÈìæÁ≥ªÁªü</strong>ÔºåÊòØÁî±Â§ß‰ºóÁÇπËØÑÂºÄÊ∫êÁöÑ‰∏ÄÊ¨æË∞ÉÁî®ÈìæÁõëÊéßÁ≥ªÁªüÔºåÂü∫‰∫é JAVA ÂºÄÂèëÁöÑ„ÄÇÊúâ‰∏Ä‰∏™<strong>ÈùûÂ∏∏Âº∫Â§ßÂíå‰∏∞ÂØåÁöÑÂèØËßÜÂåñÊä•Ë°®ÁïåÈù¢</strong>„ÄÇ</p>
<p><strong>CAT ÊîØÊåÅÂ¶Ç‰∏ãÊä•Ë°®</strong>Ôºö</p>
<table>
<thead>
<tr class="header">
<th>Êä•Ë°®ÂêçÁß∞</th>
<th>Êä•Ë°®ÂÜÖÂÆπ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Transaction Êä•Ë°®</td>
<td>‰∏ÄÊÆµ‰ª£Á†ÅÁöÑËøêË°åÊó∂Èó¥„ÄÅÊ¨°Êï∞„ÄÅÊØîÂ¶Ç URL/cache/sql ÊâßË°åÊ¨°Êï∞Áõ∏Â∫îÊó∂Èó¥Ôºå95/99Á∫ø</td>
</tr>
<tr class="even">
<td>Event Êä•Ë°®</td>
<td>‰∏ÄÊÆµ‰ª£Á†ÅËøêË°åÊ¨°Êï∞ÔºåÊØîÂ¶ÇÂá∫Áé∞‰∏ÄÊ¨°ÂºÇÂ∏∏</td>
</tr>
<tr class="odd">
<td>Problem Êä•Ë°®</td>
<td>Ê†πÊçÆ Transaction/Event Êï∞ÊçÆÂàÜÊûêÂá∫Á≥ªÁªüÂèØËÉΩÂá∫Áé∞ÁöÑ‰∏ÄÊ¨°ÊÖ¢Á®ãÂ∫è</td>
</tr>
<tr class="even">
<td>Heartbeat Êä•Ë°®</td>
<td>JVM Áä∂ÊÄÅ‰ø°ÊÅØ</td>
</tr>
<tr class="odd">
<td>Business Êä•Ë°®</td>
<td>‰∏öÂä°ÊåáÊ†áÁ≠âÔºåÁî®Êà∑ÂèØ‰ª•Ëá™Â∑±ÂÆöÂà∂</td>
</tr>
</tbody>
</table>
<h3 id="transaction">Transaction</h3>
<p><strong>TransactionÔºöÈÄÇÂêàËÆ∞ÂΩïË∑®Ë∂äÁ≥ªÁªüËæπÁïåÁöÑÁ®ãÂ∫èËÆøÈóÆË°å‰∏∫ÔºåÊØîÂ¶ÇËøúÁ®ãË∞ÉÁî®„ÄÅÊï∞ÊçÆÂ∫ìË∞ÉÁî®Ôºå‰πüÈÄÇÂêàÊâßË°åÊó∂Èó¥ËæÉÈïøÁöÑ‰∏öÂä°ÈÄªËæëÁõëÊéßÔºåTransaction Áî®Êù•ËÆ∞ÂΩï‰∏ÄÊÆµ‰ª£Á†ÅÁöÑÊâßË°åÊó∂Èó¥ÂíåÊ¨°Êï∞</strong></p>
<p><strong>‰ΩøÁî®Ôºö</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">api</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Transaction t = Cat.newTransaction(<span class="string">&quot;URL&quot;</span>, <span class="string">&quot;pageName&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÊâßË°åÊó∂Èó¥1Áßí</span></span><br><span class="line">        t.setDurationInMillis(<span class="number">1000</span>);</span><br><span class="line">        t.setTimestamp(System.currentTimeMillis());</span><br><span class="line">        <span class="comment">// Ê∑ªÂä†È¢ùÂ§ñÊï∞ÊçÆ</span></span><br><span class="line">        t.addData(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÁä∂ÊÄÅÔºåÊàêÂäüÁä∂ÊÄÅ</span></span><br><span class="line">        t.setStatus(Transaction.SUCCESS);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÁä∂ÊÄÅÔºåÂ§±Ë¥•Áä∂ÊÄÅ</span></span><br><span class="line">        t.setStatus(e);</span><br><span class="line">        Cat.logError(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// ÁªìÊùüTransaction </span></span><br><span class="line">        t.complete();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;api&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>APIÔºö</strong>CAT Êèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàó API Êù•ÂØπ Transaction ËøõË°å‰øÆÊîπ„ÄÇ</p>
<ul>
<li><code>addData</code>ÔºöÊ∑ªÂä†È¢ùÂ§ñÁöÑÊï∞ÊçÆÊòæÁ§∫</li>
<li><code>setStatus</code>ÔºöËÆæÁΩÆÁä∂ÊÄÅÔºåÊàêÂäüÂèØ‰ª•ËÆæÁΩÆ SUCCESSÔºåÂ§±Ë¥•ÂèØ‰ª•ËÆæÁΩÆÂºÇÂ∏∏</li>
<li><code>setDurationInMillis</code>ÔºöËÆæÁΩÆÊâßË°åËÄóÊó∂ÔºàÊØ´ÁßíÔºâ</li>
<li><code>setTimestamp</code>ÔºöËÆæÁΩÆÊâßË°åÊó∂Èó¥</li>
<li><code>complete</code>ÔºöÁªìÊùü Transaction</li>
</ul>
<h3 id="event">Event</h3>
<p><strong>Event Áî®Êù•ËÆ∞ÂΩï‰∏Ä‰ª∂‰∫ãÂèëÁîüÁöÑÊ¨°Êï∞ÔºåÊØîÂ¶ÇËÆ∞ÂΩïÁ≥ªÁªüÂºÇÂ∏∏ÔºåÂÆÉÂíå Transaction Áõ∏ÊØîÁº∫Â∞ë‰∫ÜÊó∂Èó¥ÁöÑÁªüËÆ°ÔºåÂºÄÈîÄÊØî Transaction Ë¶ÅÂ∞è</strong></p>
<p><strong>Cat.logEvent</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ËÆ∞ÂΩï‰∏Ä‰∏™‰∫ã‰ª∂ </span></span><br><span class="line">Cat.logEvent(<span class="string">&quot;URL.Server&quot;</span>, <span class="string">&quot;serverIp&quot;</span>, Event.SUCCESS, <span class="string">&quot;ip=$&#123;serverIp&#125;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// public static void logEvent(String type, String name)&#123;&#125;</span></span><br><span class="line"><span class="comment">// public static void logEvent(String type, String name, String status, String nameValuePairs)&#123;&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>Cat.logError</strong></p>
<p>ËÆ∞ÂΩï‰∏Ä‰∏™Â∏¶ÊúâÈîôËØØÂ†ÜÊ†à‰ø°ÊÅØÁöÑ Error</p>
<ul>
<li><code>public static void logError(String message, Throwable cause)&#123;&#125;</code></li>
<li><code>public static void logError(Throwable cause)&#123;&#125;</code></li>
</ul>
<h3 id="metric">Metric</h3>
<p><strong>Metric Áî®‰∫éËÆ∞ÂΩï‰∏öÂä°ÊåáÊ†á„ÄÅÊåáÊ†áÂèØËÉΩÂåÖÂê´ÂØπ‰∏Ä‰∏™ÊåáÊ†áËÆ∞ÂΩïÊ¨°Êï∞„ÄÅËÆ∞ÂΩïÂπ≥ÂùáÂÄº„ÄÅËÆ∞ÂΩïÊÄªÂíåÔºå‰∏öÂä°ÊåáÊ†áÊúÄ‰ΩéÁªüËÆ°Á≤íÂ∫¶‰∏∫1ÂàÜÈíü</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CounterÔºåÁ¥ØÂä†</span></span><br><span class="line">Cat.logMetricForCount(<span class="string">&quot;metric.key&quot;</span>);  <span class="comment">// Ë∞ÉÁî®‰∏ÄÊ¨°+1</span></span><br><span class="line">Cat.logMetricForCount(<span class="string">&quot;metric.key&quot;</span>, <span class="number">3</span>);  <span class="comment">// Ë∞ÉÁî®‰∏ÄÊ¨°+3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DurationÔºåÁ¥ØÂä†ÂèñÂπ≥Âùá	</span></span><br><span class="line">Cat.logMetricForDuration(<span class="string">&quot;metric.key&quot;</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ÂæÖÂÆåÂñÑ...<span class="emoji" data-emoji="stuck_out_tongue_winking_eye">üòú</span></p>
</blockquote>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- Êú¨ÊñáÁªìÊùü </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> ÊÑüË∞¢ÈòÖËØª ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Â≠¶‰π†Á¨îËÆ∞</a>
              <a href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Èù¢ËØïÁ¨îËÆ∞</a>
              <a href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Èù¢Áªè</a>
              <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> ‰∏≠Èó¥‰ª∂</a>
              <a href="/tags/CAT/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> CAT</a>
              <a href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Ë∞ÉÁî®ÈìæÁõëÊéß</a>
              <a href="/tags/ELK/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> ELK</a>
              <a href="/tags/Elasticsearch/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Elasticsearch</a>
              <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Ê∂àÊÅØÈòüÂàó</a>
              <a href="/tags/RabbitMQ/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> RabbitMQ</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/09/26/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A10-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="prev" title="Èù¢ÁªèÔºö10-Êï∞ÊçÆÁªìÊûÑ">
      <i class="fa fa-chevron-left"></i> Èù¢ÁªèÔºö10-Êï∞ÊçÆÁªìÊûÑ
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/10/24/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A%E9%9D%A2%E7%BB%8F%E6%80%BB%E7%BB%93(%E5%BA%94%E5%B1%8A)/" rel="next" title="Èù¢ÁªèÔºöÈù¢ÁªèÊÄªÁªì(Â∫îÂ±ä)">
      Èù¢ÁªèÔºöÈù¢ÁªèÊÄªÁªì(Â∫îÂ±ä) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          ÊñáÁ´†ÁõÆÂΩï
        </li>
        <li class="sidebar-nav-overview">
          Á´ôÁÇπÊ¶ÇËßà
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9D%A2%E7%BB%8F11-%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-text">Èù¢ÁªèÔºö11-‰∏≠Èó¥‰ª∂</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#elk"><span class="nav-text">ELK</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-es-%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-text">‰ΩøÁî® ES ÁöÑÂéüÂõ†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95"><span class="nav-text">ÂÄíÊéíÁ¥¢Âºï ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-text">ESÔºöÊ†∏ÂøÉÊ¶ÇÂøµ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E7%9A%84-master-%E7%9B%B8%E5%85%B3"><span class="nav-text">ES ÁöÑ master Áõ∏ÂÖ≥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E7%B4%A2%E5%BC%95-index"><span class="nav-text">ES Á¥¢Âºï-Index ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="nav-text">Á¥¢ÂºïÁöÑËøáÁ®ã</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3%E6%B5%81%E7%A8%8B"><span class="nav-text">ES Êü•ËØ¢ÊñáÊ°£ÊµÅÁ®ã</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E5%A2%9E%E5%88%A0%E6%94%B9%E6%96%87%E6%A1%A3"><span class="nav-text">ES Â¢ûÂà†ÊîπÊñáÊ°£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E8%AF%BB%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="nav-text">ES ËØªÂÜô‰∏ÄËá¥ÊÄß &#x2F; Âπ∂ÂèëÊéßÂà∂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E5%88%86%E6%9E%90-analyzer"><span class="nav-text">ES ÂàÜÊûê analyzer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#es-%E5%AD%97%E5%85%B8%E6%A0%91"><span class="nav-text">ES Â≠óÂÖ∏Ê†ë</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#logstash"><span class="nav-text">Logstash</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rabbitmq"><span class="nav-text">RabbitMQ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E6%A6%82%E8%BF%B0"><span class="nav-text">Ê∂àÊÅØÈòüÂàóÊ¶ÇËø∞ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#amqp-%E9%AB%98%E7%BA%A7%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%8D%8F%E8%AE%AE"><span class="nav-text">AMQP È´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rabbitmq-%E6%A6%82%E8%BF%B0"><span class="nav-text">RabbitMQ Ê¶ÇËø∞ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rabbitmq-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">RabbitMQ Â∑•‰ΩúÂéüÁêÜ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#routingkey-binding"><span class="nav-text">RoutingKey &amp; Binding</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%A4%E6%8D%A2%E5%99%A84%E7%A7%8D%E7%B1%BB%E5%9E%8B"><span class="nav-text">‰∫§Êç¢Âô®4ÁßçÁ±ªÂûã ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%94%E7%A7%8D%E6%B6%88%E6%81%AF%E6%A8%A1%E5%9E%8B"><span class="nav-text">‰∫îÁßçÊ∂àÊÅØÊ®°Âûã ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E6%AC%A1%E5%AE%8C%E6%95%B4%E7%9A%84%E7%94%9F%E4%BA%A7%E6%B6%88%E8%B4%B9"><span class="nav-text">‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑÁîü‰∫ßÊ∂àË¥π</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="nav-text">Â¶Ç‰Ωï‰øùËØÅÊ∂àÊÅØÁöÑÂèØÈù†ÊÄß ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E5%B9%82%E7%AD%89%E6%80%A7"><span class="nav-text">Ê∂àÊÅØÂπÇÁ≠âÊÄß ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97"><span class="nav-text">Ê≠ª‰ø°ÈòüÂàó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97"><span class="nav-text">Âª∂ËøüÈòüÂàó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97"><span class="nav-text">‰ºòÂÖàÈòüÂàó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6"><span class="nav-text">‰∫ãÂä°Êú∫Âà∂</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cat%E5%BE%85%E5%AE%8C%E5%96%84"><span class="nav-text">CAT(ÂæÖÂÆåÂñÑüòú)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7"><span class="nav-text">Ë∞ÉÁî®ÈìæÁõëÊéß</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7%E7%9A%84%E5%8E%9F%E7%90%86"><span class="nav-text">Ë∞ÉÁî®ÈìæÁõëÊéßÁöÑÂéüÁêÜ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cat-%E6%A6%82%E8%BF%B0"><span class="nav-text">CAT Ê¶ÇËø∞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#transaction"><span class="nav-text">Transaction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#event"><span class="nav-text">Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#metric"><span class="nav-text">Metric</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">‰∏çÊÄ•‰∏çË∫Å„ÄÇ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">206</span>
          <span class="site-state-item-name">Êó•Âøó</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">ÂàÜÁ±ª</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">100</span>
        <span class="site-state-item-name">Ê†áÁ≠æ</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arthas/" rel="tag">Arthas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CompletableFuture/" rel="tag">CompletableFuture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Groovy/" rel="tag">Groovy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">76</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">JavaÂü∫Á°Ä</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">JavaËØ≠Ê≥ï</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">KËøëÈÇª</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Optional/" rel="tag">Optional</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stream/" rel="tag">Stream</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TransmittableThreadLocal/" rel="tag">TransmittableThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">lambdaË°®ËææÂºè</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E7%BB%8F%E5%8E%86/" rel="tag">‰∏™‰∫∫ÁªèÂéÜ</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">‰∏≠Èó¥‰ª∂</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">ÂÖ®ÊñáÊ£ÄÁ¥¢</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">ÂÜ≥Á≠ñÊ†ë</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">ÂàÜÁ±ªÈóÆÈ¢ò</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">Âà∑È¢ò</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">Âà∑È¢òÁ¨îËÆ∞</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/" rel="tag">Âä†ÂØÜÊñáÁ´†</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">ÂçöÂÆ¢Êê≠Âª∫</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">ÂèÇËÄÉÊñá‰ª∂</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">Âü∫Á°ÄÁü•ËØÜ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">Â≠¶‰π†Á¨îËÆ∞</a><span class="tag-list-count">104</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">Âπ∂ÂèëÁºñÁ®ã</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">ÂºÄÂèëÊ°ÜÊû∂</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%90%E9%95%BF%E5%8F%B2/" rel="tag">ÊàêÈïøÂè≤</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">ÊéíÂ∫èÁÆóÊ≥ï</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">Êìç‰ΩúÁ≥ªÁªü</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">ÊîØÊåÅÂêëÈáèÊú∫</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">Êï∞Â≠¶Êé®ÂØº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">Êï∞ÊçÆÂ∫ì</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">Êï∞ÊçÆÊ∏ÖÊ¥ó</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">Êï∞ÊçÆÁªìÊûÑ</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8/" rel="tag">Êó•Â∏∏</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">Êó•ÂøóÊ°ÜÊû∂</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">Êú∫Âô®Â≠¶‰π†</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">Ê†ëÁªìÊûÑ</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">Ê†ëËéìÊ¥æ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag">ÊµãËØïÂ∑•ÂÖ∑</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">Ê∂àÊÅØÈòüÂàó</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">Ê∑±Â∫¶Â≠¶‰π†</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">ÁâπÂæÅÈÄâÊã©</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">ÁéØÂ¢ÉÈÖçÁΩÆ</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">ÁõÆÊ†áÊ£ÄÊµã</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ÁÆóÊ≥ï</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">Á∫øÊÄßÂõûÂΩí</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">ËÅöÁ±ª</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">Ë°®Á§∫Â±Ç</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">ËÆ°ÁÆóÊú∫ÁΩëË∑Ø</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">ËØª‰π¶Á¨îËÆ∞</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">Ë∞ÉÁî®ÈìæÁõëÊéß</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">Ë¥ùÂè∂ÊñØ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">ËΩØ‰ª∂‰ΩøÁî®</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">ÈÄªËæëÂõûÂΩí</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">ÈõÜÂêàÁ±ª</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">ÈõÜÊàêÂ≠¶‰π†</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">Èù¢Áªè</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">Èù¢ËØïÁ¨îËÆ∞</a><span class="tag-list-count">61</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Á´ôÁÇπÊÄªÂ≠óÊï∞">3.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Á´ôÁÇπÈòÖËØªÊó∂Èïø">55:16</span>
</div>

<!--
  <div class="powered-by">Áî± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> Âº∫ÂäõÈ©±Âä®
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "ËØ∑Â§öÂ§öÊåáÊïô~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
