<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="‰∏™‰∫∫Êï¥ÁêÜ üí™ ‰∏™‰∫∫‰∏ìÁî® üí™ ÊöëÊúüÂÆû‰π† üí™ ÁßãÊãõ üí™ ÂêéÁ´ØÂºÄÂèë üí™ ÂÖ´ËÇ°Êñá üò∂">
<meta property="og:type" content="article">
<meta property="og:title" content="Èù¢ÁªèÔºö5-Âπ∂ÂèëÁºñÁ®ã">
<meta property="og:url" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="Ë¥§‰ΩôË∂Ö">
<meta property="og:description" content="‰∏™‰∫∫Êï¥ÁêÜ üí™ ‰∏™‰∫∫‰∏ìÁî® üí™ ÊöëÊúüÂÆû‰π† üí™ ÁßãÊãõ üí™ ÂêéÁ´ØÂºÄÂèë üí™ ÂÖ´ËÇ°Êñá üò∂">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/JVMËßíÂ∫¶ÂàÜÊûêÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂÖ≥Á≥ª.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÁöÑ5ÁßçÁä∂ÊÄÅ.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÁöÑ6ÁßçÁä∂ÊÄÅ.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÁöÑ6ÁßçÁä∂ÊÄÅ.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ÂÜÖÂ≠òÂ±èÈöú.png">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Áé∞Âú®ThreadLocalËÆæËÆ°.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ThreadLocalMapÂü∫Êú¨ÁªìÊûÑ.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Ëã•key‰ΩøÁî®Âº∫ÂºïÁî®.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Ëã•key‰ΩøÁî®Âº±ÂºïÁî®.PNG">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÊ±†ËøêË°åÊû∂ÊûÑÂõæ.png">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÊ±†.png">
<meta property="og:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/AQSÂéüÁêÜÂõæ.PNG">
<meta property="article:published_time" content="2021-07-11T02:24:00.000Z">
<meta property="article:modified_time" content="2021-07-11T02:24:00.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Èù¢ËØïÁ¨îËÆ∞">
<meta property="article:tag" content="Âπ∂ÂèëÁºñÁ®ã">
<meta property="article:tag" content="Èù¢Áªè">
<meta property="article:tag" content="Â≠¶‰π†Á¨îËÆ∞">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/JVMËßíÂ∫¶ÂàÜÊûêÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂÖ≥Á≥ª.PNG">

<link rel="canonical" href="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Èù¢ÁªèÔºö5-Âπ∂ÂèëÁºñÁ®ã | Ë¥§‰ΩôË∂Ö</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="ÂàáÊç¢ÂØºËà™Ê†è">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ë¥§‰ΩôË∂Ö</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">‰∏Ä‰ΩçÂ∫ïÂ±ÇÁ†ÅÂÜú :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>È¶ñÈ°µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>ÂÖ≥‰∫é</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Ê†áÁ≠æ<span class="badge">89</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>ÂàÜÁ±ª<span class="badge">16</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ÂΩíÊ°£<span class="badge">198</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>ÊêúÁ¥¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="ÊêúÁ¥¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="‰∏çÊÄ•‰∏çË∫Å„ÄÇ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ë¥§‰ΩôË∂Ö">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Èù¢ÁªèÔºö5-Âπ∂ÂèëÁºñÁ®ã
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ÂèëË°®‰∫é</span>

              <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2021-07-11 10:24:00" itemprop="dateCreated datePublished" datetime="2021-07-11T10:24:00+08:00">2021-07-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Âπ∂ÂèëÁºñÁ®ã</span></a>
                </span>
                  Ôºå
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">Èù¢Áªè</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">ValineÔºö</span>
    
    <a title="valine" href="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="Êú¨ÊñáÂ≠óÊï∞">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Êú¨ÊñáÂ≠óÊï∞Ôºö</span>
              <span>44k</span>
            </span>
            <span class="post-meta-item" title="ÈòÖËØªÊó∂Èïø">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">ÈòÖËØªÊó∂Èïø &asymp;</span>
              <span>40 ÂàÜÈíü</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>‰∏™‰∫∫Êï¥ÁêÜ <span class="emoji" data-emoji="muscle">üí™</span> ‰∏™‰∫∫‰∏ìÁî® <span class="emoji" data-emoji="muscle">üí™</span> ÊöëÊúüÂÆû‰π† <span class="emoji" data-emoji="muscle">üí™</span> ÁßãÊãõ <span class="emoji" data-emoji="muscle">üí™</span> ÂêéÁ´ØÂºÄÂèë <span class="emoji" data-emoji="muscle">üí™</span> ÂÖ´ËÇ°Êñá <span class="emoji" data-emoji="no_mouth">üò∂</span></p>
<span id="more"></span>
<h3 id="Á∫øÁ®ã‰∏éËøõÁ®ãÊ¶ÇËø∞">Á∫øÁ®ã‰∏éËøõÁ®ãÊ¶ÇËø∞ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÊÄªÁªì</strong>Ôºö<strong>ËøõÁ®ãÊòØÊìç‰ΩúÁ≥ªÁªüËøõË°åËµÑÊ∫êÂàÜÈÖçÂíåË∞ÉÂ∫¶ÁöÑÊúÄÂ∞èÂçï‰ΩçÔºåËÄåÁ∫øÁ®ãÊòØ CPU ÂàÜÊ¥æÂíåË∞ÉÂ∫¶ÁöÑÊúÄÂ∞èÂçï‰Ωç</strong>Ôºõ</p>
<p><strong>ËøõÁ®ã</strong>Ôºö</p>
<ul>
<li>ËøõÁ®ãÊòØÁ®ãÂ∫èÁöÑ‚ºÄÊ¨°ÊâßË°åËøáÁ®ãÔºåÊòØÁ≥ªÁªüËøêË°åÁ®ãÂ∫èÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÂõ†Ê≠§ËøõÁ®ãÊòØÂä®ÊÄÅÁöÑ„ÄÇÁ≥ªÁªüËøêË°å‚ºÄ‰∏™Á®ãÂ∫èÂç≥ÊòØ‚ºÄ‰∏™ËøõÁ®ã‰ªéÂàõÂª∫ÔºåËøêË°åÂà∞Ê∂à‰∫°ÁöÑËøáÁ®ã„ÄÇ</li>
<li>Âú® Java ‰∏≠ÔºåÂΩìÊàë‰ª¨ÂêØÂä® main ÂáΩÊï∞Êó∂ÂÖ∂ÂÆûÂ∞±ÊòØÂêØÂä®‰∫Ü‚ºÄ‰∏™ JVM ÁöÑËøõÁ®ãÔºåËÄå main ÂáΩÊï∞ÊâÄÂú®ÁöÑÁ∫øÁ®ãÂ∞±ÊòØËøô‰∏™ËøõÁ®ã‰∏≠ÁöÑ‚ºÄ‰∏™Á∫øÁ®ãÔºå‰πüÁß∞‰∏ªÁ∫øÁ®ã„ÄÇ</li>
</ul>
<p><strong>Á∫øÁ®ãÔºö</strong></p>
<p>Á∫øÁ®ãÊòØËøõÁ®ãÁöÑ‰∏Ä‰∏™ÂÆû‰ΩìÔºå‰πüÊòØ <strong>CPU Ë∞ÉÂ∫¶ÂíåÂàÜÊ¥æÁöÑÂü∫Êú¨Âçï‰Ωç</strong>ÔºåÂÆÉÊòØÊØîËøõÁ®ãÊõ¥Â∞èÁöÑËÉΩÁã¨Á´ãËøêË°åÁöÑÂü∫Êú¨Âçï‰ΩçÔºåÊúâÊó∂ÂèàË¢´Áß∞‰∏∫ËΩªÊùÉËøõÁ®ãÊàñËΩªÈáèÁ∫ßËøõÁ®ã„ÄÇ</p>
<blockquote>
<p>‰∏éËøõÁ®ã‰∏çÂêåÁöÑÊòØÂêåÁ±ªÁöÑÂ§ö‰∏™Á∫øÁ®ãÂÖ±‰∫´ËøõÁ®ãÁöÑÂ†ÜÂíåÊñπÊ≥ïÂå∫ËµÑÊ∫êÔºå‰ΩÜ<strong>ÊØè‰∏™Á∫øÁ®ãÊúâËá™Â∑±ÁöÑÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅ ËôöÊãüÊú∫Ê†àÂíåÊú¨Âú∞ÊñπÊ≥ïÊ†à</strong>ÔºåÊâÄ‰ª•Á≥ªÁªüÂú®‰∫ßÁîü‚ºÄ‰∏™Á∫øÁ®ãÔºåÊàñÊòØÂú®ÂêÑ‰∏™Á∫øÁ®ã‰πãÈó¥‰ΩúÂàáÊç¢Â∑•‰ΩúÊó∂ÔºåË¥üÊãÖË¶ÅÊØîËøõÁ®ãÂ∞èÂæóÂ§öÔºå‰πüÊ≠£Âõ†‰∏∫Â¶ÇÊ≠§ÔºåÁ∫øÁ®ã‰πüË¢´Áß∞‰∏∫ËΩªÈáèÁ∫ßËøõÁ®ã„ÄÇ</p>
</blockquote>
<p><strong>‰∫åËÄÖÂØπÊØî</strong></p>
<ul>
<li><p><strong>ËøõÁ®ãÊòØÊìç‰ΩúÁ≥ªÁªüËøõË°åËµÑÊ∫êÂàÜÈÖçÂíåË∞ÉÂ∫¶ÁöÑÊúÄÂ∞èÂçï‰ΩçÔºåËÄåÁ∫øÁ®ãÊòØ CPU ÂàÜÊ¥æÂíåË∞ÉÂ∫¶ÁöÑÊúÄÂ∞èÂçï‰Ωç</strong>Ôºõ</p></li>
<li>ËøõÁ®ãÂü∫Êú¨‰∏äÁõ∏‰∫íÁã¨Á´ãÁöÑÔºåËøõÁ®ãÈó¥‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºõËÄåÁ∫øÁ®ãÂ≠òÂú®‰∫éËøõÁ®ãÂÜÖÔºåÊòØËøõÁ®ãÁöÑ‰∏Ä‰∏™Â≠êÈõÜÔºå‰∏Ä‰∏™Á∫øÁ®ãÊåÇÊéâÂ∞ÜÂèØËÉΩÂØºËá¥Êï¥‰∏™ËøõÁ®ãÊåÇÊéâÔºõ</li>
<li>‰∏çÂêåËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥Áõ∏‰∫íÁã¨Á´ãÔºõËÄåÂêå‰∏ÄËøõÁ®ãÂÜÖÁöÑÁ∫øÁ®ãÂÖ±‰∫´ËøõÁ®ãÂÜÖÈÉ®ÁöÑÂú∞ÂùÄÁ©∫Èó¥„ÄÇ</li>
<li>ËøõÁ®ãÈó¥ÈÄö‰ø°ËæÉ‰∏∫Â§çÊùÇÔºõÁ∫øÁ®ãÈÄö‰ø°Áõ∏ÂØπÁÆÄÂçïÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÂÖ±‰∫´ËøõÁ®ãÂÜÖÁöÑÂÜÖÂ≠òÔºå‰∏Ä‰∏™‰æãÂ≠êÊòØÂ§ö‰∏™Á∫øÁ®ãÂèØ‰ª•ËÆøÈóÆÂêå‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáè
<ul>
<li>Âêå‰∏ÄÂè∞ËÆ°ÁÆóÊú∫ÁöÑËøõÁ®ãÈÄö‰ø°Áß∞‰∏∫ IPCÔºàInter-process communicationÔºâ</li>
<li>‰∏çÂêåËÆ°ÁÆóÊú∫‰πãÈó¥ÁöÑËøõÁ®ãÈÄö‰ø°ÔºåÈúÄË¶ÅÈÄöËøáÁΩëÁªúÔºåÂπ∂ÈÅµÂÆàÂÖ±ÂêåÁöÑÂçèËÆÆÔºå‰æãÂ¶Ç HTTP</li>
</ul></li>
<li>ÂàõÂª∫ËøõÁ®ãÊàñÊí§ÈîÄËøõÁ®ãÔºåÁ≥ªÁªüÈÉΩË¶Å‰∏∫‰πãÂàÜÈÖçÊàñÂõûÊî∂ËµÑÊ∫êÔºåÊìç‰ΩúÁ≥ªÁªüÂºÄÈîÄËøúÂ§ß‰∫éÂàõÂª∫ÊàñÊí§ÈîÄÁ∫øÁ®ãÊó∂ÁöÑÂºÄÈîÄÔºõ</li>
<li><p>Á∫øÁ®ãÊõ¥ËΩªÈáèÔºåÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÊàêÊú¨‰∏ÄËà¨‰∏äË¶ÅÊØîËøõÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢‰Ωé</p></li>
</ul>
<h3 id="Á∫øÁ®ã‰∏éËøõÁ®ãÁöÑÂºÇÂêå">Á∫øÁ®ã‰∏éËøõÁ®ãÁöÑÂºÇÂêå <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>‰ªé JVM ËßíÂ∫¶ËØ¥ËøõÁ®ãÂíåÁ∫øÁ®ã‰πãÈó¥ÁöÑÂÖ≥Á≥ª</strong></p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/JVMËßíÂ∫¶ÂàÜÊûêÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂÖ≥Á≥ª.PNG" alt="JVMËßíÂ∫¶ÂàÜÊûêÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂÖ≥Á≥ª" style="zoom: 67%;"></p>
<p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫Ôºö</p>
<ul>
<li>‚ºÄ‰∏™ËøõÁ®ã‰∏≠ÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÔºõ</li>
<li>Â§ö‰∏™Á∫øÁ®ãÂÖ±‰∫´ËøõÁ®ãÁöÑÂ†ÜÂíåÊñπÊ≥ïÂå∫ÔºàJDK1.8 ‰πãÂêéÁöÑÂÖÉÁ©∫Èó¥ÔºâËµÑÊ∫êÔºõ</li>
<li>‰ΩÜÊòØÊØè‰∏™Á∫øÁ®ãÊúâËá™Â∑±ÁöÑÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅ ËôöÊãüÊú∫Ê†à Âíå Êú¨Âú∞ÊñπÊ≥ïÊ†à„ÄÇ</li>
</ul>
<p><strong>ÊÄªÁªì</strong>Ôºö</p>
<p><strong>Á∫øÁ®ãÊòØËøõÁ®ãÂàíÂàÜÊàêÁöÑÊõ¥Â∞èÁöÑËøêË°åÂçï‰Ωç„ÄÇ</strong>Á∫øÁ®ãÂíåËøõÁ®ãÊúÄÂ§ßÁöÑ‰∏çÂêåÂú®‰∫éÂü∫Êú¨‰∏äÂêÑËøõÁ®ãÊòØÁã¨Á´ãÁöÑÔºåËÄåÂêÑÁ∫øÁ®ãÂàô‰∏ç‚ºÄÂÆöÔºåÂõ†‰∏∫Âêå‚ºÄËøõÁ®ã‰∏≠ÁöÑÁ∫øÁ®ãÊûÅÊúâÂèØËÉΩ‰ºöÁõ∏‰∫íÂΩ±Âìç„ÄÇÁ∫øÁ®ãÊâßË°åÂºÄÈîÄÂ∞èÔºå‰ΩÜ‰∏çÂà©‰∫éËµÑÊ∫êÁöÑÁÆ°ÁêÜÂíå‰øùÊä§ÔºõËÄåËøõÁ®ãÊ≠£Áõ∏Âèç„ÄÇ</p>
<h3 id="Á®ãÂ∫èËÆ°Êï∞Âô®-ËôöÊãüÊú∫Ê†à-Êú¨Âú∞ÊñπÊ≥ïÊ†à">Á®ãÂ∫èËÆ°Êï∞Âô® &amp; ËôöÊãüÊú∫Ê†à &amp; Êú¨Âú∞ÊñπÊ≥ïÊ†à</h3>
<p><strong>Á®ãÂ∫èËÆ°Êï∞Âô®‰∏∫‰ªÄ‰πàÊòØÁßÅÊúâÁöÑ?</strong></p>
<p>Á®ãÂ∫èËÆ°Êï∞Âô®‰∏ªË¶ÅÊúâ‰∏ãÈù¢‰∏§‰∏™‰ΩúÁî®Ôºö</p>
<ol type="1">
<li>Â≠óËäÇÁ†ÅËß£ÈáäÂô®ÈÄöËøáÊîπÂèòÁ®ãÂ∫èËÆ°Êï∞Âô®Êù•‰æùÊ¨°ËØªÂèñÊåá‰ª§Ôºå‰ªéËÄåÂÆûÁé∞‰ª£Á†ÅÁöÑÊµÅÁ®ãÊéßÂà∂ÔºåÂ¶ÇÔºöÈ°∫Â∫èÊâßË°å„ÄÅÈÄâÊã©„ÄÅÂæ™ÁéØ„ÄÅÂºÇÂ∏∏Â§ÑÁêÜ„ÄÇ</li>
<li>Âú®Â§öÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®Áî®‰∫éËÆ∞ÂΩïÂΩìÂâçÁ∫øÁ®ãÊâßË°åÁöÑ‰ΩçÁΩÆÔºå‰ªéËÄåÂΩìÁ∫øÁ®ãË¢´ÂàáÊç¢ÂõûÊù•ÁöÑÊó∂ÂÄôËÉΩÂ§üÁü•ÈÅìËØ•Á∫øÁ®ã‰∏äÊ¨°ËøêË°åÂà∞Âì™ÂÑø‰∫Ü„ÄÇ</li>
</ol>
<blockquote>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúÊâßË°åÁöÑÊòØ native ÊñπÊ≥ïÔºåÈÇ£‰πàÁ®ãÂ∫èËÆ°Êï∞Âô®ËÆ∞ÂΩïÁöÑÊòØ undefined Âú∞ÂùÄÔºåÂè™ÊúâÊâßË°åÁöÑÊòØ Java ‰ª£Á†ÅÊó∂Á®ãÂ∫èËÆ°Êï∞Âô®ËÆ∞ÂΩïÁöÑÊâçÊòØ‰∏ã‚ºÄÊù°Êåá‰ª§ÁöÑÂú∞ÂùÄ„ÄÇ</p>
</blockquote>
<p>ÊâÄ‰ª•ÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®ÁßÅÊúâ‰∏ªË¶ÅÊòØ‰∏∫‰∫Ü<strong>Á∫øÁ®ãÂàáÊç¢ÂêéËÉΩÊÅ¢Â§çÂà∞Ê≠£Á°ÆÁöÑÊâßË°å‰ΩçÁΩÆ</strong>„ÄÇ</p>
<p><strong>ËôöÊãüÊú∫Ê†àÂíåÊú¨Âú∞ÊñπÊ≥ïÊ†à‰∏∫‰ªÄ‰πàÊòØÁßÅÊúâÁöÑ?</strong></p>
<ul>
<li><strong>ËôöÊãüÊú∫Ê†à</strong>Ôºö ÊØè‰∏™ Java ÊñπÊ≥ïÂú®ÊâßË°åÁöÑÂêåÊó∂‰ºöÂàõÂª∫‚ºÄ‰∏™<strong>Ê†àÂ∏ß</strong>Áî®‰∫éÂ≠òÂÇ®Â±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂ∏∏ÈáèÊ±†ÂºïÁî®Á≠â‰ø°ÊÅØ„ÄÇ‰ªéÊñπÊ≥ïË∞ÉÁî®Áõ¥Ëá≥ÊâßË°åÂÆåÊàêÁöÑËøáÁ®ãÔºåÂ∞±ÂØπÂ∫îÁùÄ‚ºÄ‰∏™Ê†àÂ∏ßÂú® Java ËôöÊãüÊú∫Ê†à‰∏≠ÂÖ•Ê†àÂíåÂá∫Ê†àÁöÑËøáÁ®ã„ÄÇ</li>
<li><strong>Êú¨Âú∞ÊñπÊ≥ïÊ†à</strong>Ôºö ÂíåËôöÊãüÊú∫Ê†àÊâÄÂèëÊå•ÁöÑ‰ΩúÁî®ÈùûÂ∏∏Áõ∏‰ººÔºåÂå∫Âà´ÊòØÔºö <strong>ËôöÊãüÊú∫Ê†à‰∏∫ËôöÊãüÊú∫ÊâßË°å Java ÊñπÊ≥ïÔºà‰πüÂ∞±ÊòØÂ≠óËäÇÁ†ÅÔºâÊúçÂä°ÔºåËÄåÊú¨Âú∞ÊñπÊ≥ïÊ†àÂàô‰∏∫ËôöÊãüÊú∫‰ΩøÁî®Âà∞ÁöÑ Native ÊñπÊ≥ïÊúçÂä°</strong>„ÄÇ Âú® HotSpot ËôöÊãüÊú∫‰∏≠Âíå Java ËôöÊãüÊú∫Ê†àÂêà‚ºÜ‰∏∫‚ºÄ„ÄÇ</li>
</ul>
<p>ÊâÄ‰ª•Ôºå‰∏∫‰∫Ü<strong>‰øùËØÅÁ∫øÁ®ã‰∏≠ÁöÑÂ±ÄÈÉ®ÂèòÈáè‰∏çË¢´Âà´ÁöÑÁ∫øÁ®ãËÆøÈóÆÂà∞</strong>ÔºåËôöÊãüÊú∫Ê†àÂíåÊú¨Âú∞ÊñπÊ≥ïÊ†àÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑ„ÄÇ</p>
<p><strong>‚ºÄÂè•ËØùÁÆÄÂçï‰∫ÜËß£Â†ÜÂíåÊñπÊ≥ïÂå∫</strong></p>
<p>Â†ÜÂíåÊñπÊ≥ïÂå∫ÊòØÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ÁöÑËµÑÊ∫êÔºõ</p>
<ul>
<li>ÂÖ∂‰∏≠Â†ÜÊòØËøõÁ®ã‰∏≠ÊúÄÂ§ßÁöÑ‚ºÄÂùóÂÜÖÂ≠òÔºå‰∏ªË¶ÅÁî®‰∫éÂ≠òÊîæÊñ∞ÂàõÂª∫ÁöÑÂØπË±° (ÊâÄÊúâÂØπË±°ÈÉΩÂú®ËøôÈáåÂàÜÈÖçÂÜÖÂ≠ò)Ôºõ</li>
<li>ÊñπÊ≥ïÂå∫‰∏ªË¶ÅÁî®‰∫éÂ≠òÊîæÂ∑≤Ë¢´Âä†ËΩΩÁöÑÁ±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáè„ÄÅÂç≥Êó∂ÁºñËØëÂô®ÁºñËØëÂêéÁöÑ‰ª£Á†ÅÁ≠âÊï∞ÊçÆ„ÄÇ</li>
</ul>
<h3 id="Âπ∂Âèë‰∏éÂπ∂Ë°åÁöÑÂå∫Âà´">Âπ∂Âèë‰∏éÂπ∂Ë°åÁöÑÂå∫Âà´</h3>
<p><strong>Âπ∂Âèë</strong>Ôºö</p>
<ul>
<li>ÊòØÂêå‰∏ÄÊó∂Èó¥Â∫îÂØπÔºàdealing withÔºâÂ§ö‰ª∂‰∫ãÊÉÖÁöÑËÉΩÂäõ</li>
<li>Âêå‚ºÄÊó∂Èó¥ÊÆµÔºåÂ§ö‰∏™‰ªªÂä°ÈÉΩÂú®ÊâßË°å (Âçï‰ΩçÊó∂Èó¥ÂÜÖ‰∏ç‚ºÄÂÆöÂêåÊó∂ÊâßË°å)Ôºõ</li>
</ul>
<p><strong>Âπ∂Ë°å</strong>Ôºö</p>
<ul>
<li>Âπ∂Ë°åÔºàparallelÔºâÊòØÂêå‰∏ÄÊó∂Èó¥Âä®ÊâãÂÅöÔºàdoingÔºâÂ§ö‰ª∂‰∫ãÊÉÖÁöÑËÉΩÂäõ</li>
<li>Âçï‰ΩçÊó∂Èó¥ÂÜÖÔºåÂ§ö‰∏™‰ªªÂä°ÂêåÊó∂ÊâßË°å„ÄÇ</li>
</ul>
<p>ÂçïÊ†∏ CPU ‰∏ãÔºöÁ∫øÁ®ãÂÆûÈôÖËøòÊòØ <strong>‰∏≤Ë°åÊâßË°å</strong> ÁöÑ„ÄÇ</p>
<p>Êìç‰ΩúÁ≥ªÁªü‰∏≠Êúâ‰∏Ä‰∏™ÁªÑ‰ª∂Âè´ÂÅö<strong>‰ªªÂä°Ë∞ÉÂ∫¶Âô®</strong>ÔºåÂ∞Ü CPU ÁöÑÊó∂Èó¥ÁâáÔºàwindows‰∏ãÊó∂Èó¥ÁâáÊúÄÂ∞èÁ∫¶‰∏∫ 15 ÊØ´ÁßíÔºâÂàÜÁªô‰∏çÂêåÁöÑÁ®ãÂ∫è‰ΩøÁî®ÔºåÂè™ÊòØÁî±‰∫é CPU Âú®Á∫øÁ®ãÈó¥ÔºàÊó∂Èó¥ÁâáÂæàÁü≠ÔºâÁöÑÂàáÊç¢ÈùûÂ∏∏Âø´Ôºå‰∫∫Á±ªÊÑüËßâÊòØÂêåÊó∂ËøêË°åÁöÑ„ÄÇÊÄªÁªì‰∏∫‰∏ÄÂè•ËØùÂ∞±ÊòØÔºö <strong>ÂæÆËßÇ‰∏≤Ë°åÔºåÂÆèËßÇÂπ∂Ë°å</strong>„ÄÇ</p>
<p>‰∏ÄËà¨‰ºöÂ∞ÜËøôÁßçÁ∫øÁ®ãËΩÆÊµÅ‰ΩøÁî® CPU ÁöÑÂÅöÊ≥ïÁß∞‰∏∫<strong>Âπ∂ÂèëÔºöconcurrent</strong></p>
<p><strong>Â§öÊ†∏CPU‰∏ã</strong>ÔºöÊØè‰∏™Ê†∏ÔºàcoreÔºâÈÉΩÂèØ‰ª•Ë∞ÉÂ∫¶ËøêË°åÁ∫øÁ®ãÔºåËøôÊó∂ÂÄôÁ∫øÁ®ãÂèØ‰ª•ÊòØÂπ∂Ë°åÁöÑ„ÄÇ</p>
<h3 id="ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´">ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´</h3>
<p>Java ‰∏≠ÁöÑÁ∫øÁ®ãÂàÜ‰∏∫‰∏§ÁßçÔºö</p>
<ul>
<li>ÂÆàÊä§Á∫øÁ®ãÔºàDeamonÔºâ</li>
<li>Áî®Êà∑Á∫øÁ®ãÔºàUserÔºâ</li>
</ul>
<p>‰ªª‰ΩïÁ∫øÁ®ãÈÉΩÂèØ‰ª•ËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÔºåÈÄöËøáÊñπÊ≥ïÔºö</p>
<p><code>Thread.setDeamon(boolean);</code> ‰∏∫ <code>true</code> ÂàôÊääËØ•Á∫øÁ®ãËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÔºåÂèç‰πãÂàô‰∏∫Áî®Êà∑Á∫øÁ®ã„ÄÇ</p>
<p><code>Thread.setDeamon()</code>ÂøÖÈ°ªÂú® <code>Thread.start()</code> ‰πãÂâçË∞ÉÁî®ÔºåÂê¶ÂàôËøêË°åÊó∂‰ºöÊäõÂá∫ÂºÇÂ∏∏Ôºö<code>IllegalThreadStateException</code>„ÄÇ</p>
<p><strong>‰∏§ËÄÖÁöÑÂå∫Âà´</strong>Ôºö</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåJava ËøõÁ®ãÈúÄË¶ÅÁ≠âÂæÖÊâÄÊúâÁ∫øÁ®ãÈÉΩËøêË°åÁªìÊùüÔºåÊâç‰ºöÁªìÊùü„ÄÇÊúâ‰∏ÄÁßçÁâπÊÆäÁöÑÁ∫øÁ®ãÂè´ÂÅö<strong>ÂÆàÊä§Á∫øÁ®ãÔºåÂè™Ë¶ÅÂÖ∂ÂÆÉÈùûÂÆàÊä§Á∫øÁ®ãËøêË°åÁªìÊùü‰∫ÜÔºåÂç≥‰ΩøÂÆàÊä§Á∫øÁ®ãÁöÑ‰ª£Á†ÅÊ≤°ÊúâÊâßË°åÂÆåÔºå‰πü‰ºöÂº∫Âà∂ÁªìÊùü</strong>„ÄÇ</p>
<p>ÊØîÂ¶ÇÔºöJVM ÁöÑÂûÉÂúæÂõûÊî∂Á∫øÁ®ãÂ∞±ÊòØÂÆàÊä§Á∫øÁ®ãÔºåFinalizer ‰πüÊòØÂÆàÊä§Á∫øÁ®ã„ÄÇ</p>
<h3 id="java-‰∏≠Áî®Âà∞ÁöÑÁ∫øÁ®ãË∞ÉÂ∫¶ÁÆóÊ≥ï">Java ‰∏≠Áî®Âà∞ÁöÑÁ∫øÁ®ãË∞ÉÂ∫¶ÁÆóÊ≥ï</h3>
<p>ËÆ°ÁÆóÊú∫ÈÄöÂ∏∏Âè™ÊúâÂõ∫ÂÆöÂá†‰∏™ CPU Ê†∏ÂøÉÊï∞ÔºåÂú®‰ªªÊÑèÊó∂ÂàªÂè™ËÉΩÊâßË°å‰∏ÄÊù°Êú∫Âô®Êåá‰ª§ÔºåÊØè‰∏™Á∫øÁ®ãÂè™ÊúâËé∑Âæó CPU ÁöÑ‰ΩøÁî®ÊùÉÊâçËÉΩÊâßË°åÊåá‰ª§„ÄÇÊâÄË∞ìÂ§öÁ∫øÁ®ãÁöÑÂπ∂ÂèëËøêË°åÔºåÂÖ∂ÂÆûÊòØÊåá‰ªéÂÆèËßÇ‰∏äÁúãÔºåÂêÑ‰∏™Á∫øÁ®ãËΩÆÊµÅËé∑Âæó CPU ÁöÑ‰ΩøÁî®ÊùÉÔºåÂàÜÂà´ÊâßË°åÂêÑËá™ÁöÑ‰ªªÂä°„ÄÇÂú®ËøêË°åÊ±†‰∏≠Ôºå‰ºöÊúâÂ§ö‰∏™Â§Ñ‰∫éÂ∞±Áª™Áä∂ÊÄÅÁöÑÁ∫øÁ®ãÂú®Á≠âÂæÖ CPUÔºå<strong>JAVA ËôöÊãüÊú∫ÁöÑ‰∏ÄÈ°π‰ªªÂä°Â∞±ÊòØË¥üË¥£Á∫øÁ®ãÁöÑË∞ÉÂ∫¶</strong>ÔºåÁ∫øÁ®ãË∞ÉÂ∫¶ÊòØÊåáÊåâÁÖßÁâπÂÆöÊú∫Âà∂‰∏∫Â§ö‰∏™Á∫øÁ®ãÂàÜÈÖç CPU ÁöÑ‰ΩøÁî®ÊùÉ„ÄÇ</p>
<p>Êúâ‰∏§ÁßçË∞ÉÂ∫¶Ê®°ÂûãÔºö<strong>ÂàÜÊó∂Ë∞ÉÂ∫¶Ê®°Âûã</strong>Âíå<strong>Êä¢Âç†ÂºèË∞ÉÂ∫¶Ê®°Âûã</strong>„ÄÇ</p>
<p><strong>ÂàÜÊó∂Ë∞ÉÂ∫¶Ê®°Âûã</strong>ÔºöÊòØÊåáËÆ©ÊâÄÊúâÁöÑÁ∫øÁ®ã<strong>ËΩÆÊµÅËé∑Âæó CPU ÁöÑ‰ΩøÁî®ÊùÉ</strong>ÔºåÂπ∂‰∏îÂπ≥ÂùáÂàÜÈÖçÊØè‰∏™Á∫øÁ®ãÂç†Áî®ÁöÑ CPU ÁöÑÊó∂Èó¥Áâá„ÄÇ</p>
<p><strong>Êä¢Âç†ÂºèË∞ÉÂ∫¶Ê®°Âûã</strong>ÔºöÊòØÊåá‰ºòÂÖàËÆ©ÂèØËøêË°åÊ±†‰∏≠‰ºòÂÖàÁ∫ßÈ´òÁöÑÁ∫øÁ®ãÂç†Áî® CPUÔºåÂ¶ÇÊûúÂèØËøêË°åÊ±†‰∏≠ÁöÑÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÁõ∏ÂêåÔºåÈÇ£‰πàÂ∞±ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™Á∫øÁ®ãÔºå‰ΩøÂÖ∂Âç†Áî® CPU„ÄÇÂ§Ñ‰∫éËøêË°åÁä∂ÊÄÅÁöÑÁ∫øÁ®ã‰ºö‰∏ÄÁõ¥ËøêË°åÔºåÁõ¥Ëá≥ÂÆÉ‰∏çÂæó‰∏çÊîæÂºÉ CPU„ÄÇ</p>
<h3 id="ÂàõÂª∫Á∫øÁ®ãÁöÑÊñπÂºè">ÂàõÂª∫Á∫øÁ®ãÁöÑÊñπÂºè <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÊñπÂºèÊÄªÁªìÔºö</strong></p>
<ol type="1">
<li>ÁªßÊâø Thread Á±ª / Áõ¥Êé•Áî® Thread Á±ªËøõË°åÂàõÂª∫</li>
<li>‰ΩøÁî® Runnable Êé•Âè£ ÈÖçÂêà Thread</li>
<li>FutureTask ÈÖçÂêà Thread</li>
<li>ÈÄöËøáÁ∫øÁ®ãÊ±†ÂàõÂª∫</li>
</ol>
<p><strong>ÊñπÂºè1ÔºöÁõ¥Êé•‰ΩøÁî® Thread Á±ªÂàõÂª∫</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂàõÂª∫Á∫øÁ®ãÂØπË±°</span></span><br><span class="line">Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">    <span class="comment">// ÈáçÂÜôrunÊñπÊ≥ï   </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// Ë¶ÅÊâßË°åÁöÑ‰ªªÂä°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure>
<p><strong>ÊñπÂºè2Ôºö‰ΩøÁî® Runnable Êé•Âè£ + Thread</strong></p>
<p>Êää „ÄéÁ∫øÁ®ã„ÄèÂíå„Äé‰ªªÂä°„ÄèÔºàË¶ÅÊâßË°åÁöÑ‰ª£Á†ÅÔºâÂàÜÂºÄ</p>
<ul>
<li>Thread ‰ª£Ë°®Á∫øÁ®ã</li>
<li>Runnable ÂèØËøêË°åÁöÑ‰ªªÂä°ÔºàÁ∫øÁ®ãË¶ÅÊâßË°åÁöÑ‰ª£Á†ÅÔºâ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Ë¶ÅÊâßË°åÁöÑ‰ªªÂä°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ÂàõÂª∫Á∫øÁ®ãÂØπË±°</span></span><br><span class="line">Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line"><span class="comment">// ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">thread.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Áî®lambda Á≤æÁÆÄ‰ª£Á†Å </span></span><br><span class="line">Runnable runnable = () -&gt; &#123;</span><br><span class="line">    <span class="comment">// Ë¶ÅÊâßË°åÁöÑ‰ªªÂä°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Thread ‰∏é Runnable ÁöÑÂÖ≥Á≥ªÔºö</strong>ÂàÜÊûê Thread ÁöÑÊ∫êÁ†Å:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">// Á∫øÁ®ãthreadÁ±ª‰∏≠Êúâ‰∏Ä‰∏™ÊàêÂëòÂ±ûÊÄß</span></span><br><span class="line"><span class="keyword">private</span> Runnable target;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1,ÊûÑÈÄ†ÂáΩÊï∞</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Thread</span><span class="params">(Runnable target)</span> </span>&#123;</span><br><span class="line">    init(<span class="keyword">null</span>, target, <span class="string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">// 2 initÊñπÊ≥ï‰∏≠ÁªßÁª≠‰º†ÈÄíRunnable</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ThreadGroup g, Runnable target, String name, <span class="keyword">long</span> stackSize)</span> </span>&#123;</span><br><span class="line">    init(g, target, name, stackSize, <span class="keyword">null</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ThreadGroup g, Runnable target, String name, <span class="keyword">long</span> stackSize, AccessControlContext acc, <span class="keyword">boolean</span> inheritThreadLocals)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// threadÁ±ª‰∏≠ÁöÑÊàêÂëòÂ±ûÊÄßtargetÊåáÂêë‰∫ÜRunnableÂØπË±°</span></span><br><span class="line">       <span class="keyword">this</span>.target = target;</span><br><span class="line">       <span class="comment">// ...</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">// ÊúÄÁªàÁöÑrunÊñπÊ≥ïÔºåÂç≥Ë∞ÉÁî®‰∫ÜrunÊñπÊ≥ï</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (target != <span class="keyword">null</span>) &#123;</span><br><span class="line">        target.run();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>ÊñπÂºè1ÂíåÊñπÂºè2ÁöÑÂ∞èÁªì</strong>Ôºö</p>
<ul>
<li>ÊñπÊ≥ï1 ÊòØÊääÁ∫øÁ®ãÂíå‰ªªÂä°ÂêàÂπ∂Âú®‰∫Ü‰∏ÄËµ∑ÔºåÊñπÊ≥ï2 ÊòØÊääÁ∫øÁ®ãÂíå‰ªªÂä°ÂàÜÂºÄ‰∫Ü</li>
<li>Áî® Runnable Êõ¥ÂÆπÊòì‰∏éÁ∫øÁ®ãÊ±†Á≠âÈ´òÁ∫ß API ÈÖçÂêà</li>
<li>Áî® Runnable ËÆ©‰ªªÂä°Á±ªËÑ±Á¶ª‰∫Ü Thread ÁªßÊâø‰ΩìÁ≥ªÔºåÊõ¥ÁÅµÊ¥ª</li>
</ul>
<p><strong>ÊñπÂºè3ÔºöFutureTask ÈÖçÂêà Thread</strong></p>
<p>FutureTask ËÉΩÂ§üÊé•Êî∂ Callable Á±ªÂûãÁöÑÂèÇÊï∞ÔºåÁî®Êù•Â§ÑÁêÜÊúâËøîÂõûÁªìÊûúÁöÑÊÉÖÂÜµ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂàõÂª∫‰ªªÂä°ÂØπË±°</span></span><br><span class="line">FutureTask&lt;Integer&gt; task = <span class="keyword">new</span> FutureTask&lt;&gt;(<span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LoggerUtils.LOGGER.debug(<span class="string">&quot;FutureTask+Callable&quot;</span>);</span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂèÇÊï∞1Ôºö‰ªªÂä°ÂØπË±°; ÂèÇÊï∞2ÔºöÁ∫øÁ®ãÂêçÂ≠óÔºåÊé®Ëçê</span></span><br><span class="line"><span class="keyword">new</span> Thread(task, <span class="string">&quot;t3&quot;</span>).start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ‰∏ªÁ∫øÁ®ãÈòªÂ°ûÔºåÂêåÊ≠•Á≠âÂæÖ task ÊâßË°åÂÆåÊØïÁöÑÁªìÊûú</span></span><br><span class="line">Integer result = task.get();</span><br><span class="line">LoggerUtils.LOGGER.debug(<span class="string">&quot;result:&#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ËæìÂá∫ÁªìÊûúÔºö</span></span><br><span class="line"><span class="comment">// 11:24:55.097 cn.util.LoggerUtils [t3] - FutureTask+Callable</span></span><br><span class="line"><span class="comment">// 11:24:57.102 cn.util.LoggerUtils [main] - result:100</span></span><br></pre></td></tr></table></figure>
<p><strong>RunnableÂíåCallableÁöÑÂå∫Âà´</strong>Ôºö</p>
<ul>
<li><strong>ÈáçÂÜôÊñπÊ≥ï‰∏çÂêå</strong>ÔºöCallableËßÑÂÆöÔºàÈáçÂÜôÔºâÁöÑÊñπÊ≥ïÊòØ<code>call()</code>ÔºåRunnableËßÑÂÆöÔºàÈáçÂÜôÔºâÁöÑÊñπÊ≥ïÊòØ<code>run()</code>„ÄÇ</li>
<li><strong>ËøîÂõûÂÄº</strong>ÔºöCallableÁöÑ‰ªªÂä°ÊâßË°åÂêéÂèØËøîÂõûÂÄºÔºåËÄåRunnableÁöÑ‰ªªÂä°ÊòØ‰∏çËÉΩËøîÂõûÂÄºÁöÑ„ÄÇ</li>
<li><strong>ÂºÇÂ∏∏</strong>ÔºöcallÊñπÊ≥ïÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏ÔºõrunÊñπÊ≥ï‰∏çÂèØ‰ª•ÔºåÂè™ËÉΩÂú®ÂÜÖÈÉ®Ê∂àÂåñÔºàÂØºËá¥Á∫øÁ®ã‰ºöÂêûÊéâÂºÇÂ∏∏Ôºâ„ÄÇ</li>
<li>ËøêË°åCallable‰ªªÂä°ÂèØ‰ª•ÊãøÂà∞‰∏Ä‰∏™FutureÂØπË±°ÔºåË°®Á§∫ÂºÇÊ≠•ËÆ°ÁÆóÁöÑÁªìÊûú„ÄÇÂÆÉÊèê‰æõ‰∫ÜÊ£ÄÊü•ËÆ°ÁÆóÊòØÂê¶ÂÆåÊàêÁöÑÊñπÊ≥ïÔºå‰ª•Á≠âÂæÖËÆ°ÁÆóÁöÑÂÆåÊàêÔºåÂπ∂Ê£ÄÁ¥¢ËÆ°ÁÆóÁöÑÁªìÊûú„ÄÇÈÄöËøáFutureÂØπË±°ÂèØ‰ª•‰∫ÜËß£‰ªªÂä°ÊâßË°åÊÉÖÂÜµÔºåÂèØÂèñÊ∂à‰ªªÂä°ÁöÑÊâßË°åÔºåËøòÂèØËé∑ÂèñÊâßË°åÁªìÊûú„ÄÇ</li>
</ul>
<p><strong>ÊñπÊ≥ï4ÔºöÈÄöËøáÁ∫øÁ®ãÊ±†ÂàõÂª∫</strong></p>
<blockquote>
<p>‰∏çÂú®Ê≠§Â±ïÂºÄ</p>
</blockquote>
<h3 id="threadÁ±ª‰∏≠ÁöÑÂ∏∏ËßÅÊñπÊ≥ï">ThreadÁ±ª‰∏≠ÁöÑÂ∏∏ËßÅÊñπÊ≥ï<span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<table>
<colgroup>
<col style="width: 13%">
<col style="width: 43%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>ÊñπÊ≥ïÂêç</th>
<th>ÂäüËÉΩËØ¥Êòé</th>
<th>Ê≥®ÊÑè</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>start()</code></td>
<td>ÂêØÂä®‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÔºåÂú®Êñ∞ÁöÑÁ∫øÁ®ãËøêË°å run ÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†Å</td>
<td>start ÊñπÊ≥ïÂè™ÊòØËÆ©Á∫øÁ®ãËøõÂÖ•Â∞±Áª™ÔºåÈáåÈù¢‰ª£Á†Å‰∏ç‰∏ÄÂÆöÁ´ãÂàªËøêË°å(CPUÁöÑÊó∂Èó¥ÁâáËøòÊ≤°ÂàÜÁªôÂÆÉ)<br>ÊØè‰∏™Á∫øÁ®ãÂØπË±°ÁöÑ start ÊñπÊ≥ïÂè™ËÉΩË∞ÉÁî®‰∏ÄÊ¨°ÔºåÂ¶ÇÊûúË∞ÉÁî®‰∫ÜÂ§öÊ¨°‰ºöÂá∫Áé∞ <code>IllegalThreadStateException</code>ÂºÇÂ∏∏</td>
</tr>
<tr class="even">
<td><code>run()</code></td>
<td>Êñ∞Á∫øÁ®ãÂêØÂä®Âêé‰ºöË∞ÉÁî®ÁöÑÊñπÊ≥ï</td>
<td>Â¶ÇÊûúÂú®ÊûÑÈÄ† Thread ÂØπË±°Êó∂‰º†ÈÄí‰∫Ü Runnable ÂèÇÊï∞ÔºåÂàôÁ∫øÁ®ãÂêØÂä®Âêé‰ºöË∞ÉÁî® Runnable ‰∏≠ÁöÑ run ÊñπÊ≥ïÔºåÂê¶ÂàôÈªòËÆ§‰∏çÊâßË°å‰ªª‰ΩïÊìç‰ΩúÔºõ<br>‰ΩÜÂèØ‰ª•ÂàõÂª∫ Thread ÁöÑÂ≠êÁ±ªÂØπË±°Ôºå Êù•Ë¶ÜÁõñÈªòËÆ§Ë°å‰∏∫</td>
</tr>
<tr class="odd">
<td><code>join()</code></td>
<td>Á≠âÂæÖÁ∫øÁ®ãËøêË°åÁªìÊùü</td>
<td>Âú®Ë∞ÉÁî®ÁöÑÁ∫øÁ®ã‰∏≠ÔºåÁ≠âÂæÖË∞ÉÁî®joinÁöÑÁ∫øÁ®ãÁªìÊùüÂêéÔºåÁªßÁª≠ÊâßË°åÂêéÈù¢ÁöÑËØ≠Âè•Ôºõ <br>Âç≥AÁ∫øÁ®ã‰∏≠Ë∞ÉÁî® <code>B.join()</code>ÔºåÂàôAÁ∫øÁ®ãÈòªÂ°ûÂà∞BÁ∫øÁ®ãÊâßË°åÂÆåÊØïÊó∂ÁªßÁª≠ÊâßË°å</td>
</tr>
<tr class="even">
<td><code>join(long n)</code></td>
<td>Á≠âÂæÖÁ∫øÁ®ãËøêË°åÁªìÊùüÔºåÊúÄÂ§öÁ≠âÂæÖ n ÊØ´Áßí</td>
<td></td>
</tr>
<tr class="odd">
<td><code>getId()</code></td>
<td>Ëé∑ÂèñÁ∫øÁ®ãÈïøÊï¥ÂûãÁöÑ id</td>
<td>id ÂîØ‰∏Ä</td>
</tr>
<tr class="even">
<td><code>getName()</code></td>
<td>Ëé∑ÂèñÁ∫øÁ®ãÂêç</td>
<td></td>
</tr>
<tr class="odd">
<td><code>setName(String)</code></td>
<td>‰øÆÊîπÁ∫øÁ®ãÂêç</td>
<td></td>
</tr>
<tr class="even">
<td><code>getPriority()</code></td>
<td>Ëé∑ÂèñÁ∫øÁ®ã‰ºòÂÖàÁ∫ß</td>
<td></td>
</tr>
<tr class="odd">
<td><code>setPriority(int)</code></td>
<td>‰øÆÊîπÁ∫øÁ®ã‰ºòÂÖàÁ∫ß</td>
<td>Java ‰∏≠ËßÑÂÆöÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÊòØ1~10 ÁöÑÊï¥Êï∞ÔºåËæÉÂ§ßÁöÑ‰ºòÂÖàÁ∫ßËÉΩÊèêÈ´òËØ•Á∫øÁ®ãË¢´ CPU Ë∞ÉÂ∫¶ÁöÑÊú∫Áéá</td>
</tr>
<tr class="even">
<td><code>getState()</code></td>
<td>Ëé∑ÂèñÁ∫øÁ®ãÁä∂ÊÄÅ</td>
<td>Java ‰∏≠Á∫øÁ®ãÁä∂ÊÄÅÊòØÁî® 6 ‰∏™ enum Ë°®Á§∫ÔºåÂàÜÂà´‰∏∫Ôºö <br>NEW, RUNNABLE, BLOCKED, <br>WAITING, TIMED_WAITING, TERMINATED</td>
</tr>
<tr class="odd">
<td><code>isAlive()</code></td>
<td>Á∫øÁ®ãÊòØÂê¶Â≠òÊ¥ª(ËøòÊ≤°ÊúâËøêË°åÂÆåÊØï)</td>
<td></td>
</tr>
<tr class="even">
<td><code>interrupt()</code></td>
<td>ÊâìÊñ≠Á∫øÁ®ã<br>Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ‰∏∫Â∞ÜË¢´ÁΩÆ‰∏∫‚Äù‰∏≠Êñ≠‚ÄùÁä∂ÊÄÅ<br><strong>Ê≥®ÊÑèÔºöÁ∫øÁ®ã‰∏≠Êñ≠‰ªÖ‰ªÖÊòØËÆæÁΩÆÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅ‰ΩçÔºå‰∏ç‰ºöÂÅúÊ≠¢Á∫øÁ®ã</strong></td>
<td>Â¶ÇÊûúË¢´ÊâìÊñ≠Á∫øÁ®ãÊ≠£Âú® sleepÔºåwaitÔºåjoin ‰ºöÂØºËá¥Ë¢´ÊâìÊñ≠ÁöÑÁ∫øÁ®ãÊäõÂá∫ InterruptedExceptionÔºå<strong>Âπ∂Ê∏ÖÈô§ÊâìÊñ≠Ê†áËÆ∞</strong>Ôºõ <br>Â¶ÇÊûúÊâìÊñ≠ÁöÑÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÔºåÂàô<strong>‰ºöËÆæÁΩÆÊâìÊñ≠Ê†áËÆ∞</strong>Ôºõ <br>park ÁöÑÁ∫øÁ®ãË¢´ÊâìÊñ≠Ôºå‰πü<strong>‰ºöËÆæÁΩÆÊâìÊñ≠Ê†áËÆ∞</strong></td>
</tr>
<tr class="odd">
<td><code>isInterrupted()</code></td>
<td>Âà§Êñ≠ÊòØÂê¶Ë¢´ÊâìÊñ≠</td>
<td><strong>‰∏ç‰ºöÊ∏ÖÈô§ÊâìÊñ≠Ê†áËÆ∞</strong></td>
</tr>
<tr class="even">
<td><code>interrupted()</code></td>
<td>Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Ë¢´ÊâìÊñ≠</td>
<td><strong>Ë∞ÉÁî®Âêé‰ºöÊ∏ÖÈô§ÊâìÊñ≠Ê†áËÆ∞</strong><br><strong>static ÊñπÊ≥ï</strong></td>
</tr>
<tr class="odd">
<td><code>currentThread()</code></td>
<td>Ëé∑ÂèñÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÁ∫øÁ®ã</td>
<td><strong>static ÊñπÊ≥ï</strong>Ôºö<code>Thread.currentThread().getName()</code></td>
</tr>
<tr class="even">
<td><code>sleep(long n)</code></td>
<td>ËÆ©ÂΩìÂâçÊâßË°åÁöÑÁ∫øÁ®ã‰ºëÁú†nÊØ´ÁßíÔºå‰ºëÁú†Êó∂ËÆ©Âá∫ CPUÁöÑÊó∂Èó¥ÁâáÁªôÂÖ∂ÂÆÉÁ∫øÁ®ã</td>
<td><strong>static ÊñπÊ≥ï</strong></td>
</tr>
<tr class="odd">
<td><code>yield()</code></td>
<td>ÊèêÁ§∫Á∫øÁ®ãË∞ÉÂ∫¶Âô®ËÆ©Âá∫ÂΩìÂâçÁ∫øÁ®ãÂØπCPUÁöÑ‰ΩøÁî®</td>
<td>‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÊµãËØïÂíåË∞ÉËØï<br>Ë∞ÉÁî® yield ‰ºöËÆ©ÂΩìÂâçÁ∫øÁ®ã‰ªé Running ËøõÂÖ• Runnable Â∞±Áª™Áä∂ÊÄÅÔºåÁÑ∂ÂêéË∞ÉÂ∫¶ÊâßË°åÂÖ∂ÂÆÉÁ∫øÁ®ã<br>ÂÖ∑‰ΩìÁöÑÂÆûÁé∞‰æùËµñ‰∫éÊìç‰ΩúÁ≥ªÁªüÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶Âô®<br><strong>static ÊñπÊ≥ï</strong></td>
</tr>
<tr class="even">
<td><code>holdsLock()</code></td>
<td>Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ã‰∏≠ÊòØÂê¶ÊúâÊüê‰∏™ÂØπË±°ÁöÑÈîÅ</td>
<td><code>public static native boolean holdsLock(Object obj);</code><br><strong>static ÊñπÊ≥ï</strong></td>
</tr>
</tbody>
</table>
<p><strong>ÈóÆÈ¢ò1Ôºö‰∏∫‰ªÄ‰πà <code>sleep(long n)</code> Âíå <code>yield()</code>ÊòØÈùôÊÄÅÁöÑÔºü</strong></p>
<p>Thread Á±ªÁöÑ <code>sleep()</code> Âíå <code>yield()</code> ÊñπÊ≥ïÂ∞ÜÂú®ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÁ∫øÁ®ã‰∏äËøêË°å„ÄÇÊâÄ‰ª•Âú®ÂÖ∂‰ªñÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÁöÑÁ∫øÁ®ã‰∏äË∞ÉÁî®Ëøô‰∫õÊñπÊ≥ïÊòØÊ≤°ÊúâÊÑè‰πâÁöÑ„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàËøô‰∫õÊñπÊ≥ïÊòØÈùôÊÄÅÁöÑ„ÄÇÂÆÉ‰ª¨ÂèØ‰ª•Âú®ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÁ∫øÁ®ã‰∏≠Â∑•‰ΩúÔºåÂπ∂ÈÅøÂÖçÁ®ãÂ∫èÂëòÈîôËØØÁöÑËÆ§‰∏∫ÂèØ‰ª•Âú®ÂÖ∂‰ªñÈùûËøêË°åÁ∫øÁ®ãË∞ÉÁî®Ëøô‰∫õÊñπÊ≥ï„ÄÇ</p>
<p><strong>ÈóÆÈ¢ò2ÔºöÂÖ≥‰∫é <code>interrupt</code> &amp; <code>isInterrupted()</code> &amp; <code>interrupted()</code> Â∞èÊÄªÁªì</strong></p>
<ul>
<li><code>interrupt()</code>
<ul>
<li>Áî®‰∫éÊâìÊñ≠Á∫øÁ®ãÔºåË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ‰∏∫Â∞ÜË¢´ÁΩÆ‰∏∫‚Äù‰∏≠Êñ≠‚ÄùÁä∂ÊÄÅÔºå<strong>‰ΩÜÊòØÔºöÁ∫øÁ®ã‰∏≠Êñ≠‰ªÖ‰ªÖÊòØÁΩÆÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅ‰ΩçÔºå‰∏ç‰ºöÂÅúÊ≠¢Á∫øÁ®ã</strong></li>
<li>ÈúÄË¶ÅÁî®Êà∑Ëá™Â∑±ÂéªÁõëËßÜÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ‰∏∫Âπ∂ÂÅöÂ§ÑÁêÜÔºåÈÄöËøá isInterrupted / interrupted ÊñπÊ≥ï</li>
<li>Â¶ÇÊûúË¢´ÊâìÊñ≠Á∫øÁ®ãÊ≠£Âú® sleepÔºåwaitÔºåjoin ‰ºöÂØºËá¥Ë¢´ÊâìÊñ≠ÁöÑÁ∫øÁ®ãÊäõÂá∫ InterruptedExceptionÔºå<strong>Âπ∂Ê∏ÖÈô§ÊâìÊñ≠Ê†áËÆ∞</strong>Ôºõ</li>
<li>Â¶ÇÊûúÊâìÊñ≠ÁöÑÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÔºåÂàô<strong>‰ºöËÆæÁΩÆÊâìÊñ≠Ê†áËÆ∞</strong>Ôºõ</li>
<li>park ÁöÑÁ∫øÁ®ãË¢´ÊâìÊñ≠Ôºå‰πü<strong>‰ºöËÆæÁΩÆÊâìÊñ≠Ê†áËÆ∞</strong></li>
</ul></li>
<li><code>isInterrupted()</code>ÔºöÂà§Êñ≠ÊòØÂê¶Ë¢´ÊâìÊñ≠Ôºå<strong>‰∏ç‰ºöÊ∏ÖÈô§ÊâìÊñ≠Ê†áËÆ∞</strong></li>
<li><code>interrupted()</code>ÔºöÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Ë¢´ÊâìÊñ≠Ôºå<strong>Ë∞ÉÁî®Âêé‰ºöÊ∏ÖÈô§ÊâìÊñ≠Ê†áËÆ∞</strong></li>
</ul>
<h3 id="Â§öÁ∫øÁ®ãÁöÑ‰ºòÁÇπ‰∏éÁº∫ÁÇπ">Â§öÁ∫øÁ®ãÁöÑ‰ºòÁÇπ‰∏éÁº∫ÁÇπ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>Â§öÁ∫øÁ®ãÁöÑ‰ºòÁÇπÔºö</strong></p>
<ol type="1">
<li><p><strong>ÂèëÊå•Â§öÊ†∏CPUÁöÑ‰ºòÂäø</strong></p>
<p>Â§öÁ∫øÁ®ãÔºåÂèØ‰ª•ÁúüÊ≠£ÂèëÊå•Âá∫Â§öÊ†∏CPUÁöÑ‰ºòÂäøÊù•Ôºå<strong>ËææÂà∞ÂÖÖÂàÜÂà©Áî®CPUÁöÑÁõÆÁöÑ</strong>ÔºåÈááÁî®Â§öÁ∫øÁ®ãÁöÑÊñπÂºèÂéªÂêåÊó∂ÂÆåÊàêÂá†‰ª∂‰∫ãÊÉÖËÄå‰∏ç‰∫íÁõ∏Âπ≤Êâ∞„ÄÇ</p>
<blockquote>
<p>Â§öÊ†∏ CPU ÂèØ‰ª•Âπ∂Ë°åË∑ëÂ§ö‰∏™Á∫øÁ®ãÔºå‰ΩÜËÉΩÂê¶ÊèêÈ´òÁ®ãÂ∫èËøêË°åÊïàÁéáËøòÊòØË¶ÅÂàÜÊÉÖÂÜµÁöÑ:</p>
<ol type="1">
<li>Êúâ‰∫õ‰ªªÂä°ÔºåÁªèËøáÁ≤æÂøÉËÆæËÆ°ÔºåÂ∞Ü‰ªªÂä°ÊãÜÂàÜÔºåÂπ∂Ë°åÊâßË°åÔºåÂΩìÁÑ∂ÂèØ‰ª•ÊèêÈ´òÁ®ãÂ∫èÁöÑËøêË°åÊïàÁéá„ÄÇ</li>
<li>‰πü‰∏çÊòØÊâÄÊúâËÆ°ÁÆó‰ªªÂä°ÈÉΩËÉΩÊãÜÂàÜÔºåÈÉΩÈúÄË¶ÅÊãÜÂàÜÔºå‰ªªÂä°ÁöÑÁõÆÁöÑÂ¶ÇÊûú‰∏çÂêåÔºåË∞àÊãÜÂàÜÂíåÊïàÁéáÊ≤°Âï•ÊÑè‰πâ„ÄÇ</li>
</ol>
</blockquote></li>
<li><p><strong>Èò≤Ê≠¢ÈòªÂ°û</strong></p>
<p>‰ªéÁ®ãÂ∫èËøêË°åÊïàÁéáÁöÑËßíÂ∫¶Êù•ÁúãÔºåÂçïÊ†∏CPU‰∏ç‰ΩÜ‰∏ç‰ºöÂèëÊå•Âá∫Â§öÁ∫øÁ®ãÁöÑ‰ºòÂäøÔºåÂèçËÄå‰ºöÂõ†‰∏∫Âú®ÂçïÊ†∏CPU‰∏äËøêË°åÂ§öÁ∫øÁ®ãÂØºËá¥Á∫øÁ®ã‰∏ä‰∏ãÊñáÁöÑÂàáÊç¢ÔºåËÄåÈôç‰ΩéÁ®ãÂ∫èÊï¥‰ΩìÁöÑÊïàÁéá„ÄÇ</p>
<p><strong>‰ΩÜÊòØÂçïÊ†∏CPUÊàë‰ª¨ËøòÊòØË¶ÅÂ∫îÁî®Â§öÁ∫øÁ®ãÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢ÈòªÂ°û„ÄÇ</strong>ËØïÊÉ≥ÔºåÂ¶ÇÊûúÂçïÊ†∏CPU‰ΩøÁî®ÂçïÁ∫øÁ®ãÔºåÈÇ£‰πàÂè™Ë¶ÅËøô‰∏™Á∫øÁ®ãÈòªÂ°û‰∫ÜÔºåÊØîÊñπËØ¥ËøúÁ®ãËØªÂèñÊüê‰∏™Êï∞ÊçÆÂêßÔºåÂØπÁ´ØËøüËøüÊú™ËøîÂõûÂèàÊ≤°ÊúâËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥ÔºåÈÇ£‰πà‰Ω†ÁöÑÊï¥‰∏™Á®ãÂ∫èÂú®Êï∞ÊçÆËøîÂõûÂõûÊù•‰πãÂâçÂ∞±ÂÅúÊ≠¢ËøêË°å‰∫Ü„ÄÇÂ§öÁ∫øÁ®ãÂèØ‰ª•Èò≤Ê≠¢Ëøô‰∏™ÈóÆÈ¢òÔºåÂ§öÊù°Á∫øÁ®ãÂêåÊó∂ËøêË°åÔºåÂì™ÊÄï‰∏ÄÊù°Á∫øÁ®ãÁöÑ‰ª£Á†ÅÊâßË°åËØªÂèñÊï∞ÊçÆÈòªÂ°ûÔºå‰πü‰∏ç‰ºöÂΩ±ÂìçÂÖ∂ÂÆÉ‰ªªÂä°ÁöÑÊâßË°å„ÄÇ</p></li>
<li><p><strong>‰æø‰∫éÂª∫Ê®°</strong></p>
<p>ËøôÊòØÂè¶Â§ñ‰∏Ä‰∏™Ê≤°ÊúâËøô‰πàÊòéÊòæÁöÑ‰ºòÁÇπ‰∫Ü„ÄÇÂÅáËÆæÊúâ‰∏Ä‰∏™Â§ßÁöÑ‰ªªÂä°AÔºåÂçïÁ∫øÁ®ãÁºñÁ®ãÔºåÈÇ£‰πàÂ∞±Ë¶ÅËÄÉËôëÂæàÂ§öÔºåÂª∫Á´ãÊï¥‰∏™Á®ãÂ∫èÊ®°ÂûãÊØîËæÉÈ∫ªÁÉ¶„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÊääËøô‰∏™Â§ßÁöÑ‰ªªÂä°AÂàÜËß£ÊàêÂá†‰∏™Â∞è‰ªªÂä°Ôºå‰ªªÂä°B„ÄÅ‰ªªÂä°C„ÄÅ‰ªªÂä°DÔºåÂàÜÂà´Âª∫Á´ãÁ®ãÂ∫èÊ®°ÂûãÔºåÂπ∂ÈÄöËøáÂ§öÁ∫øÁ®ãÂàÜÂà´ËøêË°åËøôÂá†‰∏™‰ªªÂä°ÔºåÈÇ£Â∞±ÁÆÄÂçïÂæàÂ§ö‰∫Ü„ÄÇ</p></li>
</ol>
<p><strong>Â§öÁ∫øÁ®ãÁöÑÁº∫ÁÇπÔºö</strong></p>
<ol type="1">
<li>Â§ßÈáèÁöÑÁ∫øÁ®ãÈôç‰Ωé‰ª£Á†ÅÁöÑÂèØËØªÊÄßÔºõ</li>
<li>Êõ¥Â§öÁöÑÁ∫øÁ®ãÈúÄË¶ÅÊõ¥Â§öÁöÑÂÜÖÂ≠òÁ©∫Èó¥Ôºõ</li>
<li>ÂΩìÂ§ö‰∏™Á∫øÁ®ãÂØπÂêå‰∏Ä‰∏™ËµÑÊ∫êÂá∫Áé∞‰∫âÂ§∫Êó∂ÂÄôË¶ÅÊ≥®ÊÑèÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈóÆÈ¢ò„ÄÇ</li>
</ol>
<h3 id="Á∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ®">Á∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ® <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÈÄö‰øóÁöÑËØ¥ÔºöÂä†ÈîÅÁöÑÂ∞±ÊòØÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏çÂä†ÈîÅÁöÑÂ∞±ÊòØÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ</strong></p>
<p><strong>Á∫øÁ®ãÂÆâÂÖ®</strong>: Â∞±ÊòØÂ§öÁ∫øÁ®ãËÆøÈóÆÊó∂ÔºåÈááÁî®‰∫ÜÂä†ÈîÅÊú∫Âà∂ÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆËØ•Á±ªÁöÑÊüê‰∏™Êï∞ÊçÆÊó∂ÔºåËøõË°å‰øùÊä§ÔºåÂÖ∂‰ªñÁ∫øÁ®ã‰∏çËÉΩËøõË°åËÆøÈóÆÔºåÁõ¥Âà∞ËØ•Á∫øÁ®ãËØªÂèñÂÆåÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊâçÂèØ‰ΩøÁî®„ÄÇ‰∏ç‰ºöÂá∫Áé∞Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÊàñËÄÖÊï∞ÊçÆÊ±°Êüì„ÄÇ</p>
<blockquote>
<p>‰æãÂ¶ÇÔºö‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑËÆ°Êï∞Âô®Á±ªÁöÑÂêå‰∏Ä‰∏™ÂÆû‰æãÂØπË±°ÔºåÂú®Ë¢´Â§ö‰∏™Á∫øÁ®ã‰ΩøÁî®ÁöÑÊÉÖÂÜµ‰∏ã‰πü‰∏ç‰ºöÂá∫Áé∞ËÆ°ÁÆóÂ§±ËØØ„ÄÇ</p>
<p>ÂæàÊòæÁÑ∂‰Ω†ÂèØ‰ª•Â∞Ü<strong>ÈõÜÂêàÁ±ªÂàÜÊàê‰∏§ÁªÑÔºåÁ∫øÁ®ãÂÆâÂÖ®ÂíåÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ</strong>„ÄÇVector ÊòØÁî®ÂêåÊ≠•ÊñπÊ≥ïÊù•ÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÁöÑ, ËÄåÂíåÂÆÉÁõ∏‰ººÁöÑArrayList‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ</p>
</blockquote>
<p><strong>Á∫øÁ®ã‰∏çÂÆâÂÖ®</strong>ÔºöÂ∞±ÊòØ‰∏çÊèê‰æõÊï∞ÊçÆËÆøÈóÆ‰øùÊä§ÔºåÊúâÂèØËÉΩÂá∫Áé∞Â§ö‰∏™Á∫øÁ®ãÂÖàÂêéÊõ¥ÊîπÊï∞ÊçÆÈÄ†ÊàêÊâÄÂæóÂà∞ÁöÑÊï∞ÊçÆÊòØËÑèÊï∞ÊçÆ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÁöÑ‰ª£Á†ÅÊâÄÂú®ÁöÑËøõÁ®ã‰∏≠ÊúâÂ§ö‰∏™Á∫øÁ®ãÂú®ÂêåÊó∂ËøêË°åÔºåËÄåËøô‰∫õÁ∫øÁ®ãÂèØËÉΩ‰ºöÂêåÊó∂ËøêË°åËøôÊÆµ‰ª£Á†Å„ÄÇÂ¶ÇÊûúÊØèÊ¨°ËøêË°åÁªìÊûúÂíåÂçïÁ∫øÁ®ãËøêË°åÁöÑÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºåËÄå‰∏îÂÖ∂‰ªñÁöÑÂèòÈáèÁöÑÂÄº‰πüÂíåÈ¢ÑÊúüÁöÑÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂ∞±ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<p><strong>Á∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÈÉΩÊòØÁî±ÂÖ®Â±ÄÂèòÈáèÂèäÈùôÊÄÅÂèòÈáèÂºïËµ∑ÁöÑ„ÄÇ</strong>Ëã•ÊØè‰∏™Á∫øÁ®ã‰∏≠ÂØπÂÖ®Â±ÄÂèòÈáè„ÄÅÈùôÊÄÅÂèòÈáèÂè™ÊúâËØªÊìç‰ΩúÔºåËÄåÊó†ÂÜôÊìç‰ΩúÔºå‰∏ÄËà¨Êù•ËØ¥ÔºåËøô‰∏™ÂÖ®Â±ÄÂèòÈáèÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºõËã•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÊâßË°åÂÜôÊìç‰ΩúÔºå‰∏ÄËà¨ÈÉΩÈúÄË¶ÅËÄÉËôëÁ∫øÁ®ãÂêåÊ≠•ÔºåÂê¶ÂàôÁöÑËØùÂ∞±ÂèØËÉΩÂΩ±ÂìçÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ</p>
<p><strong>Java‰∏≠‰øùÈöúÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊñπÂºèÊúâ</strong>ÔºöÂêåÊ≠•Êú∫Âà∂ÔºàJoin„ÄÅFutureÁ≠âÔºâ„ÄÅ‰ΩøÁî®ÂéüÂ≠êÁ±ª„ÄÅÂä†ÈîÅ„ÄÅ‰ΩøÁî® volatile„ÄÅ‰ΩøÁî®‰∏çÂèØÂèòÁ±ª„ÄÅ‰ΩøÁî®Á∫øÁ®ãÂÆâÂÖ®Á±ª„ÄÇ</p>
<p><strong>ÊàêÂëòÂèòÈáèÂíåÈùôÊÄÅÂèòÈáèÊòØÂê¶Á∫øÁ®ãÂÆâÂÖ®Ôºü</strong></p>
<ul>
<li>Â¶ÇÊûúÂÆÉ‰ª¨Ê≤°ÊúâÂÖ±‰∫´ÔºåÂàôÁ∫øÁ®ãÂÆâÂÖ®</li>
<li>Â¶ÇÊûúÂÆÉ‰ª¨Ë¢´ÂÖ±‰∫´‰∫ÜÔºåÊ†πÊçÆÂÆÉ‰ª¨ÁöÑÁä∂ÊÄÅÊòØÂê¶ËÉΩÂ§üÊîπÂèòÔºåÂèàÂàÜ‰∏§ÁßçÊÉÖÂÜµ
<ul>
<li>Â¶ÇÊûúÂè™ÊúâËØªÊìç‰ΩúÔºåÂàôÁ∫øÁ®ãÂÆâÂÖ®</li>
<li>Â¶ÇÊûúÊúâËØªÂÜôÊìç‰ΩúÔºåÂàôËøôÊÆµ‰ª£Á†ÅÊòØ‰∏¥ÁïåÂå∫ÔºåÈúÄË¶ÅËÄÉËôëÁ∫øÁ®ãÂÆâÂÖ®</li>
</ul></li>
</ul>
<p><strong>Â±ÄÈÉ®ÂèòÈáèÊòØÂê¶Á∫øÁ®ãÂÆâÂÖ®Ôºü</strong></p>
<ul>
<li>Â±ÄÈÉ®ÂèòÈáèÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ</li>
<li>‰ΩÜÂ±ÄÈÉ®ÂèòÈáèÂºïÁî®ÁöÑÂØπË±°ÂàôÊú™ÂøÖÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ
<ul>
<li>Â¶ÇÊûúËØ•ÂØπË±°Ê≤°ÊúâÈÄÉÁ¶ªÊñπÊ≥ïÁöÑ‰ΩúÁî®ËÆøÈóÆÔºåÂÆÉÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ</li>
<li>Â¶ÇÊûúËØ•ÂØπË±°ÈÄÉÁ¶ªÊñπÊ≥ïÁöÑ‰ΩúÁî®ËåÉÂõ¥ÔºåÈúÄË¶ÅËÄÉËôëÁ∫øÁ®ãÂÆâÂÖ®</li>
</ul></li>
</ul>
<h3 id="‰∏¥ÁïåÂå∫Á´ûÊÄÅÊù°‰ª∂">‰∏¥ÁïåÂå∫&amp;Á´ûÊÄÅÊù°‰ª∂</h3>
<p><strong>‰∏¥ÁïåÂå∫ Critical Section</strong></p>
<ul>
<li>‰∏Ä‰∏™Á®ãÂ∫èËøêË°åÂ§ö‰∏™Á∫øÁ®ãÊú¨Ë∫´ÊòØÊ≤°ÊúâÈóÆÈ¢òÁöÑ</li>
<li>ÈóÆÈ¢òÂá∫Âú®Â§ö‰∏™Á∫øÁ®ãËÆøÈóÆ<strong>ÂÖ±‰∫´ËµÑÊ∫ê</strong>
<ul>
<li>Â§ö‰∏™Á∫øÁ®ãËØªÂÖ±‰∫´ËµÑÊ∫êÂÖ∂ÂÆû‰πüÊ≤°ÊúâÈóÆÈ¢ò</li>
<li>Âú®Â§ö‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´ËµÑÊ∫êËØªÂÜôÊìç‰ΩúÊó∂ÂèëÁîü<strong>Êåá‰ª§‰∫§Èîô</strong>ÔºåÂ∞±‰ºöÂá∫Áé∞ÈóÆÈ¢ò</li>
</ul></li>
<li>‰∏ÄÊÆµ‰ª£Á†ÅÂùóÂÜÖÂ¶ÇÊûúÂ≠òÂú®ÂØπÂÖ±‰∫´ËµÑÊ∫êÁöÑÂ§öÁ∫øÁ®ãËØªÂÜôÊìç‰ΩúÔºåÁß∞ËøôÊÆµ‰ª£Á†ÅÂùó‰∏∫<strong>‰∏¥ÁïåÂå∫</strong></li>
</ul>
<p>‰æãÂ¶ÇÔºå‰∏ãÈù¢‰ª£Á†Å‰∏≠ÁöÑ‰∏¥ÁïåÂå∫</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span></span>&#123;</span><br><span class="line">    counter ++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">decrement</span><span class="params">()</span></span>&#123;</span><br><span class="line">    counter --;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Á´ûÊÄÅÊù°‰ª∂ÔºàRace ConditionÔºâ</strong></p>
<p>Â§ö‰∏™Á∫øÁ®ãÂú®‰∏¥ÁïåÂå∫ÂÜÖÊâßË°åÔºåÁî±‰∫é‰ª£Á†ÅÁöÑ<strong>ÊâßË°åÂ∫èÂàó‰∏çÂêå</strong>ËÄåÂØºËá¥ÁªìÊûúÊó†Ê≥ïÈ¢ÑÊµãÔºåÁß∞‰πã‰∏∫ÂèëÁîü‰∫Ü<strong>Á´ûÊÄÅÊù°‰ª∂</strong></p>
<h3 id="Â§öÁ∫øÁ®ãÂêåÊ≠•Âíå‰∫íÊñ•">Â§öÁ∫øÁ®ãÂêåÊ≠•Âíå‰∫íÊñ•</h3>
<p><strong>Á∫øÁ®ãÂêåÊ≠•</strong>ÔºöÊòØÊåáÁ∫øÁ®ã‰πãÈó¥ÊâÄÂÖ∑ÊúâÁöÑ‰∏ÄÁßçÂà∂Á∫¶ÂÖ≥Á≥ªÔºå‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊâßË°å‰æùËµñÂè¶‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊ∂àÊÅØÔºåÂΩìÂÆÉÊ≤°ÊúâÂæóÂà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊ∂àÊÅØÊó∂Â∫îÁ≠âÂæÖÔºåÁõ¥Âà∞Ê∂àÊÅØÂà∞ËææÊó∂ÊâçË¢´Âî§ÈÜí„ÄÇ</p>
<blockquote>
<p>Á∫øÁ®ãÂêåÊ≠•ÂèØ‰ª•ÈÄöËøáÔºö</p>
<ol type="1">
<li>join ÂÆûÁé∞</li>
<li>Future ÂÆûÁé∞</li>
<li>BlockingQueue ÂÆûÁé∞</li>
</ol>
</blockquote>
<p><strong>Á∫øÁ®ã‰∫íÊñ•</strong>ÔºöÊòØÊåáÂØπ‰∫éÂÖ±‰∫´ÁöÑËøõÁ®ãÁ≥ªÁªüËµÑÊ∫êÔºåÂú®ÂêÑÂçï‰∏™Á∫øÁ®ãËÆøÈóÆÊó∂ÁöÑ<strong>ÊéíÂÆÉÊÄß</strong>„ÄÇÂΩìÊúâËã•Âπ≤‰∏™Á∫øÁ®ãÈÉΩË¶Å‰ΩøÁî®Êüê‰∏ÄÂÖ±‰∫´ËµÑÊ∫êÊó∂Ôºå<strong>‰ªª‰ΩïÊó∂ÂàªÊúÄÂ§öÂè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÂéª‰ΩøÁî®</strong>ÔºåÂÖ∂ÂÆÉË¶Å‰ΩøÁî®ËØ•ËµÑÊ∫êÁöÑÁ∫øÁ®ãÂøÖÈ°ªÁ≠âÂæÖÔºåÁõ¥Âà∞Âç†Áî®ËµÑÊ∫êËÄÖÈáäÊîæËØ•ËµÑÊ∫ê„ÄÇÁ∫øÁ®ã‰∫íÊñ•ÂèØ‰ª•ÁúãÊàêÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÁ∫øÁ®ãÂêåÊ≠•„ÄÇ</p>
<blockquote>
<p>ÊÇ≤ËßÇ‰∫íÊñ•ÔºöÈÄöËøáÈîÅ</p>
<p>‰πêËßÇÈáçËØïÔºöÈÄöËøáCAS</p>
</blockquote>
<h3 id="Á∫øÁ®ãÁöÑÁä∂ÊÄÅ">Á∫øÁ®ãÁöÑÁä∂ÊÄÅ<span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<blockquote>
<p><strong>‰∫îÁßçÁä∂ÊÄÅ</strong>ÔºöËøôÊòØ‰ªé <strong>Êìç‰ΩúÁ≥ªÁªü</strong> Â±ÇÈù¢Êù•ÊèèËø∞ÁöÑ</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÁöÑ5ÁßçÁä∂ÊÄÅ.PNG" alt="Á∫øÁ®ãÁöÑ5ÁßçÁä∂ÊÄÅ"></p>
<ul>
<li>„ÄéÂàùÂßãÁä∂ÊÄÅ„Äè‰ªÖÊòØÂú®ËØ≠Ë®ÄÂ±ÇÈù¢ÂàõÂª∫‰∫ÜÁ∫øÁ®ãÂØπË±°ÔºåËøòÊú™‰∏éÊìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÂÖ≥ËÅî</li>
<li>„ÄéÂèØËøêË°åÁä∂ÊÄÅ„ÄèÔºàÂ∞±Áª™Áä∂ÊÄÅÔºâÊåáËØ•Á∫øÁ®ãÂ∑≤ÁªèË¢´ÂàõÂª∫Ôºà‰∏éÊìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÂÖ≥ËÅîÔºâÔºåÂèØ‰ª•Áî± CPU Ë∞ÉÂ∫¶ÊâßË°å</li>
<li>„ÄéËøêË°åÁä∂ÊÄÅ„ÄèÊåáËé∑Âèñ‰∫Ü CPU Êó∂Èó¥ÁâáËøêË°å‰∏≠ÁöÑÁä∂ÊÄÅ
<ul>
<li>ËÄåÂΩì CPU Êó∂Èó¥ÁâáÁî®ÂÆåÔºå‰ºö‰ªé„ÄéËøêË°åÁä∂ÊÄÅ„ÄèËΩ¨Êç¢Ëá≥„ÄéÂèØËøêË°åÁä∂ÊÄÅ„ÄèÔºå‰ºöÂØºËá¥Á∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢</li>
</ul></li>
<li>„ÄéÈòªÂ°ûÁä∂ÊÄÅ„Äè
<ul>
<li>Â¶ÇÊûúË∞ÉÁî®‰∫ÜÈòªÂ°û APIÔºåÂ¶Ç BIO ËØªÂÜôÊñá‰ª∂ÔºåËøôÊó∂ËØ•Á∫øÁ®ãÂÆûÈôÖ‰∏ç‰ºöÁî®Âà∞ CPUÔºå‰ºöÂØºËá¥Á∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåËøõÂÖ•„ÄéÈòªÂ°ûÁä∂ÊÄÅ„Äè</li>
<li>Á≠â BIO Êìç‰ΩúÂÆåÊØïÔºå‰ºöÁî±Êìç‰ΩúÁ≥ªÁªüÂî§ÈÜíÈòªÂ°ûÁöÑÁ∫øÁ®ãÔºåËΩ¨Êç¢Ëá≥„ÄéÂèØËøêË°åÁä∂ÊÄÅ„Äè</li>
<li>‰∏é„ÄéÂèØËøêË°åÁä∂ÊÄÅ„ÄèÁöÑÂå∫Âà´ÊòØÔºåÂØπ„ÄéÈòªÂ°ûÁä∂ÊÄÅ„ÄèÁöÑÁ∫øÁ®ãÊù•ËØ¥Âè™Ë¶ÅÂÆÉ‰ª¨‰∏ÄÁõ¥‰∏çÂî§ÈÜíÔºåË∞ÉÂ∫¶Âô®Â∞±‰∏ÄÁõ¥‰∏ç‰ºöËÄÉËôëË∞ÉÂ∫¶ÂÆÉ‰ª¨</li>
</ul></li>
<li>„ÄéÁªàÊ≠¢Áä∂ÊÄÅ„ÄèË°®Á§∫Á∫øÁ®ãÂ∑≤ÁªèÊâßË°åÂÆåÊØïÔºåÁîüÂëΩÂë®ÊúüÂ∑≤ÁªèÁªìÊùüÔºå‰∏ç‰ºöÂÜçËΩ¨Êç¢‰∏∫ÂÖ∂ÂÆÉÁä∂ÊÄÅ</li>
</ul>
</blockquote>
<p><strong>ÂÖ≠ÁßçÁä∂ÊÄÅ</strong>Ôºö<strong>ËøôÊòØ‰ªé Java API Â±ÇÈù¢Êù•ÊèèËø∞ÁöÑ</strong></p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÁöÑ6ÁßçÁä∂ÊÄÅ.PNG" alt="Á∫øÁ®ãÁöÑ6ÁßçÁä∂ÊÄÅ"></p>
<p>Ê†πÊçÆ <code>Thread.State</code> Êûö‰∏æÔºåÂàÜ‰∏∫ÂÖ≠ÁßçÁä∂ÊÄÅ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Thread.State.NEW;</span><br><span class="line">Thread.State.RUNNABLE;</span><br><span class="line">Thread.State.WAITING;</span><br><span class="line">Thread.State.TIMED_WAITING;</span><br><span class="line">Thread.State.BLOCKED;</span><br><span class="line">Thread.State.TERMINATED;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>NEW</code> Á∫øÁ®ãÂàöË¢´ÂàõÂª∫Ôºå‰ΩÜÊòØËøòÊ≤°ÊúâË∞ÉÁî® <code>start()</code> ÊñπÊ≥ï</p></li>
<li><p><code>RUNNABLE</code> ÂΩìË∞ÉÁî®‰∫Ü <code>start()</code> ÊñπÊ≥ï‰πãÂêéÔºåÁ∫øÁ®ãÂç≥ËøõÂÖ•<code>RUNNABLE</code>Áä∂ÊÄÅ„ÄÇ</p>
<blockquote>
<p>Ê≥®ÊÑèÔºåJava API Â±ÇÈù¢ÁöÑ <code>RUNNABLE</code> Áä∂ÊÄÅÊ∂µÁõñ‰∫ÜÊìç‰ΩúÁ≥ªÁªüÂ±ÇÈù¢ÁöÑ„ÄéÂèØËøêË°åÁä∂ÊÄÅ„Äè„ÄÅ„ÄéËøêË°åÁä∂ÊÄÅ„ÄèÂíå„ÄéÈòªÂ°ûÁä∂ÊÄÅ„ÄèÔºàÁî±‰∫é <strong>BIO ÂØºËá¥ÁöÑÁ∫øÁ®ãÈòªÂ°û</strong>ÔºåÂú® Java ÈáåÊó†Ê≥ïÂå∫ÂàÜÔºå‰ªçÁÑ∂ËÆ§‰∏∫ÊòØÂèØËøêË°åÔºâ</p>
</blockquote></li>
<li><p><code>BLOCKED</code> Ôºå <code>WAITING</code> Ôºå <code>TIMED_WAITING</code> ÈÉΩÊòØ Java API Â±ÇÈù¢ÂØπ„ÄéÈòªÂ°ûÁä∂ÊÄÅ„ÄèÁöÑÁªÜÂàÜ</p>
<ul>
<li><code>BLOCKED</code>ÔºöÈòªÂ°ûÁä∂ÊÄÅÔºå<strong>Ë°®Á§∫Á∫øÁ®ãÈòªÂ°û‰∫éÈîÅ</strong></li>
<li><code>WAITING</code>ÔºöÁ≠âÂæÖÁä∂ÊÄÅÔºåË°®Á§∫Á∫øÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÈúÄË¶ÅÁ≠âÂæÖÂÖ∂‰ªñÁ∫øÁ®ãÂÅöÂá∫‰∏Ä‰∫õÁâπÂÆöÂä®‰ΩúÔºàÈÄöÁü•Êàñ‰∏≠Êñ≠Ôºâ</li>
<li><code>TIMED_WAITING</code>ÔºöË∂ÖÊó∂Á≠âÂæÖÁä∂ÊÄÅÔºåËØ•Áä∂ÊÄÅ‰∏çÂêå‰∫é<code>WAITING</code>ÔºåÂÆÉÊòØÂèØ‰ª•Âú®ÊåáÂÆöÁöÑÊó∂Èó¥Ëá™Ë°åËøîÂõûÁöÑ</li>
</ul></li>
<li><p><code>TERMINATED</code> ÁªàÊ≠¢Áä∂ÊÄÅÔºåË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèÊâßË°åÂÆåÊØï</p></li>
</ul>
<h3 id="Á∫øÁ®ãÁä∂ÊÄÅËΩ¨Êç¢">Á∫øÁ®ãÁä∂ÊÄÅËΩ¨Êç¢ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÁöÑ6ÁßçÁä∂ÊÄÅ.PNG" alt="Á∫øÁ®ãÁöÑ6ÁßçÁä∂ÊÄÅ"></p>
<p><strong>ÂÅáËÆæÊúâÁ∫øÁ®ã Thread t</strong></p>
<p>Áî±‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºöÁ∫øÁ®ãÂàõÂª∫‰πãÂêéÂÆÉÂ∞ÜÂ§Ñ‰∫é NEW Áä∂ÊÄÅÔºåË∞ÉÁî® <code>start()</code> ÊñπÊ≥ïÂêéÂºÄÂßãËøêË°åÔºåÁ∫øÁ®ãËøôÊó∂ÂÄôÂ§Ñ‰∫é RUNABLE Áä∂ÊÄÅ„ÄÇÂèØËøêË°åÁä∂ÊÄÅÁöÑÁ∫øÁ®ãËé∑Âæó‰∫Ü CPU Êó∂Èó¥ÁâáÂêéÂ∞±Â§Ñ‰∫é RUNNING Áä∂ÊÄÅ„ÄÇ</p>
<p>ÂΩìÁ∫øÁ®ãÊâßË°å <code>wait()</code> ÊñπÊ≥ï‰πãÂêéÔºåÁ∫øÁ®ãËøõÂÖ• WAITING Áä∂ÊÄÅ„ÄÇËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÁöÑÁ∫øÁ®ãÈúÄË¶Å‰æùÈù†ÂÖ∂‰ªñÁ∫øÁ®ãÁöÑÈÄöÁü•ÊâçËÉΩÂ§üËøîÂõûÂà∞ËøêË°åÁä∂ÊÄÅÔºåËÄå TIME_WAITING Áä∂ÊÄÅÁõ∏ÂΩì‰∫éÂú®Á≠âÂæÖÁä∂ÊÄÅÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†‰∫ÜË∂ÖÊó∂ÈôêÂà∂ÔºåÊØîÂ¶ÇÈÄöËøá <code>sleep(long millis)</code>ÊñπÊ≥ïÊàñ <code>wait(long millis)</code>ÊñπÊ≥ïÂèØ‰ª•Â∞Ü Java Á∫øÁ®ãÁΩÆ‰∫é TIMED_WAITING Áä∂ÊÄÅ„ÄÇÂΩìË∂ÖÊó∂Êó∂Èó¥Âà∞ËææÂêé Java Á∫øÁ®ãÂ∞Ü‰ºöËøîÂõûÂà∞ RUNNABLE Áä∂ÊÄÅ„ÄÇÂΩìÁ∫øÁ®ãË∞ÉÁî®ÂêåÊ≠•ÊñπÊ≥ïÊó∂ÔºåÂú®Ê≤°ÊúâËé∑ÂèñÂà∞ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ∫øÁ®ãÂ∞Ü‰ºöËøõÂÖ•Âà∞ BLOCKED Áä∂ÊÄÅ„ÄÇÁ∫øÁ®ãÂú®ÊâßË°å Runnable ÁöÑ <code>run()</code> ÊñπÊ≥ï‰πãÂêéÂ∞Ü‰ºöËøõÂÖ•Âà∞ TERMINATED Áä∂ÊÄÅ„ÄÇ</p>
<p><strong>ÂÖ∑‰ΩìËØ¥ÊòéÔºö</strong></p>
<p><strong>ÊÉÖÂÜµ 1 <code>NEW --&gt; RUNNABLE</code></strong></p>
<p>ÂΩìË∞ÉÁî® <code>t.start()</code> ÊñπÊ≥ïÊó∂ÔºåÁî± <code>NEW --&gt; RUNNABLE</code></p>
<p><strong>ÊÉÖÂÜµ 2 <code>RUNNABLE &lt;--&gt; WAITING</code></strong></p>
<p>t Á∫øÁ®ãÁî® <code>synchronized(obj)</code> Ëé∑Âèñ‰∫ÜÂØπË±°ÈîÅÂêé</p>
<ul>
<li>Ë∞ÉÁî® <code>obj.wait()</code> ÊñπÊ≥ïÊó∂Ôºåt Á∫øÁ®ã‰ªé <code>RUNNABLE --&gt; WAITING</code></li>
<li>Ë∞ÉÁî® <code>obj.notify()</code> Ôºå <code>obj.notifyAll()</code> Ôºå <code>t.interrupt()</code> Êó∂
<ul>
<li>Á´û‰∫âÈîÅÊàêÂäüÔºåt Á∫øÁ®ã‰ªé <code>WAITING --&gt; RUNNABLE</code></li>
<li>Á´û‰∫âÈîÅÂ§±Ë¥•Ôºåt Á∫øÁ®ã‰ªé <code>WAITING --&gt; BLOCKED</code></li>
</ul></li>
</ul>
<blockquote>
<p>Ëøô‰∫õ wait / notify / notifyAll ÈÉΩÊòØË¶ÅËé∑ÂæóÈîÅÊâçËÉΩÊìç‰ΩúÁöÑÔºåÂç≥ÈúÄË¶ÅÂú® synchronize ‰ª£Á†ÅÂùóÂÜÖÊìç‰Ωú</p>
</blockquote>
<p><strong>ÊÉÖÂÜµ 3 <code>RUNNABLE &lt;--&gt; WAITING</code></strong></p>
<ul>
<li>ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî® <code>t.join()</code> ÊñπÊ≥ïÊó∂ÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé <code>RUNNABLE --&gt; WAITING</code>
<ul>
<li>Ê≥®ÊÑèÊòØÂΩìÂâçÁ∫øÁ®ãÂú® t Á∫øÁ®ãÂØπË±°ÁöÑÁõëËßÜÂô®‰∏äÁ≠âÂæÖÔºåÂç≥ÔºöË∞ÉÁî® join ÁöÑÁ∫øÁ®ãÁ≠âÂæÖ tÁ∫øÁ®ã ÊâßË°åÂÆåÊàê</li>
</ul></li>
<li>t Á∫øÁ®ãËøêË°åÁªìÊùüÔºåÊàñË∞ÉÁî®‰∫ÜÂΩìÂâçÁ∫øÁ®ãÁöÑ <code>interrupt()</code> Êó∂ÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé <code>WAITING --&gt; RUNNABLE</code></li>
</ul>
<p><strong>ÊÉÖÂÜµ 4 <code>RUNNABLE &lt;--&gt; WAITING</code></strong></p>
<ul>
<li>ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî® <code>LockSupport.park()</code> ÊñπÊ≥ï‰ºöËÆ©ÂΩìÂâçÁ∫øÁ®ã‰ªé <code>RUNNABLE --&gt; WAITING</code></li>
<li>Ë∞ÉÁî® <code>LockSupport.unpark(ÁõÆÊ†áÁ∫øÁ®ã)</code> ÊàñË∞ÉÁî®‰∫ÜÁ∫øÁ®ãÁöÑ <code>interrupt()</code> Ôºå‰ºöËÆ©ÁõÆÊ†áÁ∫øÁ®ã‰ªé <code>WAITING --&gt;RUNNABLE</code></li>
</ul>
<p><strong>ÊÉÖÂÜµ 5 <code>RUNNABLE &lt;--&gt; TIMED_WAITING</code></strong></p>
<p>t Á∫øÁ®ãÁî® <code>synchronized(obj)</code> Ëé∑Âèñ‰∫ÜÂØπË±°ÈîÅÂêé</p>
<ul>
<li>Ë∞ÉÁî® <code>obj.wait(long n)</code> ÊñπÊ≥ïÊó∂Ôºåt Á∫øÁ®ã‰ªé <code>RUNNABLE --&gt; TIMED_WAITING</code></li>
<li>t Á∫øÁ®ãÁ≠âÂæÖÊó∂Èó¥Ë∂ÖËøá‰∫Ü n ÊØ´ÁßíÔºåÊàñË∞ÉÁî® <code>obj.notify()</code> Ôºå <code>obj.notifyAll()</code> Ôºå <code>t.interrupt()</code> Êó∂
<ul>
<li>Á´û‰∫âÈîÅÊàêÂäüÔºåt Á∫øÁ®ã‰ªé <code>TIMED_WAITING --&gt; RUNNABLE</code></li>
<li>Á´û‰∫âÈîÅÂ§±Ë¥•Ôºåt Á∫øÁ®ã‰ªé <code>TIMED_WAITING --&gt; BLOCKED</code></li>
</ul></li>
</ul>
<p><strong>ÊÉÖÂÜµ 6 <code>RUNNABLE &lt;--&gt; TIMED_WAITING</code></strong></p>
<ul>
<li>ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî® <code>t.join(long n)</code> ÊñπÊ≥ïÊó∂ÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé <code>RUNNABLE --&gt; TIMED_WAITING</code>
<ul>
<li>Ê≥®ÊÑèÊòØÂΩìÂâçÁ∫øÁ®ãÂú® t Á∫øÁ®ãÂØπË±°ÁöÑÁõëËßÜÂô®‰∏äÁ≠âÂæÖÔºåÂç≥ÔºöË∞ÉÁî®joinÁöÑÁ∫øÁ®ãÁ≠âÂæÖtÁ∫øÁ®ãÊâßË°åÂÆåÊàê</li>
</ul></li>
<li>ÂΩìÂâçÁ∫øÁ®ãÁ≠âÂæÖÊó∂Èó¥Ë∂ÖËøá‰∫Ü n ÊØ´ÁßíÔºåÊàñ tÁ∫øÁ®ãËøêË°åÁªìÊùüÔºåÊàñË∞ÉÁî®‰∫ÜÂΩìÂâçÁ∫øÁ®ãÁöÑ <code>interrupt()</code> Êó∂ÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé<code>TIMED_WAITING --&gt; RUNNABLE</code></li>
</ul>
<p><strong>ÊÉÖÂÜµ 7 <code>RUNNABLE &lt;--&gt; TIMED_WAITING</code></strong></p>
<ul>
<li>ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî® <code>Thread.sleep(long n)</code> ÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé <code>RUNNABLE --&gt; TIMED_WAITING</code></li>
<li>ÂΩìÂâçÁ∫øÁ®ãÁ≠âÂæÖÊó∂Èó¥Ë∂ÖËøá‰∫Ü n ÊØ´ÁßíÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé <code>TIMED_WAITING --&gt; RUNNABLE</code></li>
</ul>
<p><strong>ÊÉÖÂÜµ 8 <code>RUNNABLE &lt;--&gt; TIMED_WAITING</code></strong></p>
<ul>
<li>ÂΩìÂâçÁ∫øÁ®ãË∞ÉÁî® <code>LockSupport.parkNanos(long nanos)</code> Êàñ <code>LockSupport.parkUntil(long millis)</code> Êó∂ÔºåÂΩìÂâçÁ∫øÁ®ã‰ªé <code>RUNNABLE --&gt; TIMED_WAITING</code></li>
<li>Ë∞ÉÁî® <code>LockSupport.unpark(ÁõÆÊ†áÁ∫øÁ®ã)</code> ÊàñË∞ÉÁî®‰∫ÜÁ∫øÁ®ãÁöÑ <code>interrupt()</code>ÔºåÊàñÊòØÁ≠âÂæÖË∂ÖÊó∂Ôºå‰ºöËÆ©ÁõÆÊ†áÁ∫øÁ®ã‰ªé<code>TIMED_WAITING--&gt; RUNNABLE</code></li>
</ul>
<p><strong>ÊÉÖÂÜµ 9 <code>RUNNABLE &lt;--&gt; BLOCKED</code></strong></p>
<ul>
<li>t Á∫øÁ®ãÁî® <code>synchronized(obj)</code> Ëé∑Âèñ‰∫ÜÂØπË±°ÈîÅÊó∂Â¶ÇÊûúÁ´û‰∫âÂ§±Ë¥•Ôºå‰ªé <code>RUNNABLE --&gt; BLOCKED</code></li>
<li>ÊåÅ obj ÈîÅÁ∫øÁ®ãÁöÑÂêåÊ≠•‰ª£Á†ÅÂùóÊâßË°åÂÆåÊØïÔºå‰ºöÂî§ÈÜíËØ•ÂØπË±°‰∏äÊâÄÊúâ <code>BLOCKED</code> ÁöÑÁ∫øÁ®ãÈáçÊñ∞Á´û‰∫âÔºåÂ¶ÇÊûúÂÖ∂‰∏≠ t Á∫øÁ®ãÁ´û‰∫âÊàêÂäüÔºå‰ªé <code>BLOCKED --&gt; RUNNABLE</code> ÔºåÂÖ∂ÂÆÉÂ§±Ë¥•ÁöÑÁ∫øÁ®ã‰ªçÁÑ∂ <code>BLOCKED</code></li>
</ul>
<p><strong>ÊÉÖÂÜµ 10 <code>RUNNABLE &lt;--&gt; TERMINATED</code></strong></p>
<p>ÂΩìÂâçÁ∫øÁ®ãÊâÄÊúâ‰ª£Á†ÅËøêË°åÂÆåÊØïÔºåËøõÂÖ• <code>TERMINATED</code></p>
<h3 id="Â§öÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢">Â§öÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>Á∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÔºàThread Context SwitchÔºâ</strong></p>
<p>Âõ†‰∏∫‰ª•‰∏ã‰∏Ä‰∫õÂéüÂõ†ÂØºËá¥ CPU ‰∏çÂÜçÊâßË°åÂΩìÂâçÁöÑÁ∫øÁ®ãÔºåËΩ¨ËÄåÊâßË°åÂè¶‰∏Ä‰∏™Á∫øÁ®ãÁöÑ‰ª£Á†Å</p>
<ul>
<li>Á∫øÁ®ãÁöÑ CPU Êó∂Èó¥ÁâáÁî®ÂÆå</li>
<li>ÂûÉÂúæÂõûÊî∂</li>
<li>ÊúâÊõ¥È´ò‰ºòÂÖàÁ∫ßÁöÑÁ∫øÁ®ãÈúÄË¶ÅËøêË°å</li>
<li>Á∫øÁ®ãËá™Â∑±Ë∞ÉÁî®‰∫Ü sleep„ÄÅyield„ÄÅwait„ÄÅjoin„ÄÅpark„ÄÅsynchronized„ÄÅlock Á≠âÊñπÊ≥ï</li>
</ul>
<p>ÂΩìÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÂèëÁîüÊó∂ÔºåÈúÄË¶ÅÁî±Êìç‰ΩúÁ≥ªÁªü‰øùÂ≠òÂΩìÂâçÁ∫øÁ®ãÁöÑÁä∂ÊÄÅÔºåÂπ∂ÊÅ¢Â§çÂè¶‰∏Ä‰∏™Á∫øÁ®ãÁöÑÁä∂ÊÄÅÔºåJava ‰∏≠ÂØπÂ∫îÁöÑÊ¶ÇÂøµÂ∞±ÊòØÁ®ãÂ∫èËÆ°Êï∞Âô®ÔºàProgram Counter RegisterÔºâÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØËÆ∞‰Ωè‰∏ã‰∏ÄÊù° JVM Êåá‰ª§ÁöÑÊâßË°åÂú∞ÂùÄÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®ÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑ</p>
<ul>
<li>Áä∂ÊÄÅÂåÖÊã¨ÔºöÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅËôöÊãüÊú∫Ê†à‰∏≠ÊØè‰∏™Ê†àÂ∏ßÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÂ±ÄÈÉ®ÂèòÈáè„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅËøîÂõûÂú∞ÂùÄÁ≠â</li>
</ul>
<p>‰∏ä‰∏ãÊñáÂàáÊç¢È¢ëÁπÅÂèëÁîü‰ºöÂΩ±ÂìçÊÄßËÉΩ</p>
<h3 id="Ê≠ªÈîÅÊ¥ªÈîÅÈ••È•øÁöÑÂå∫Âà´">Ê≠ªÈîÅ&amp;Ê¥ªÈîÅ&amp;È••È•øÁöÑÂå∫Âà´ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>Ê≠ªÈîÅ</strong>ÔºöÊòØÊåá‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑËøõÁ®ãÔºàÊàñÁ∫øÁ®ãÔºâÂú®ÊâßË°åËøáÁ®ã‰∏≠ÔºåÂõ†‰∫âÂ§∫ËµÑÊ∫êËÄåÈÄ†ÊàêÁöÑ‰∏ÄÁßç‰∫íÁõ∏Á≠âÂæÖÁöÑÁé∞Ë±°ÔºåËã•Êó†Â§ñÂäõ‰ΩúÁî®ÔºåÂÆÉ‰ª¨ÈÉΩÂ∞ÜÊó†Ê≥ïÊé®Ëøõ‰∏ãÂéª„ÄÇ</p>
<p><strong>‰∫ßÁîüÊ≠ªÈîÅÁöÑÂøÖË¶ÅÊù°‰ª∂</strong>Ôºö</p>
<ol type="1">
<li><strong>‰∫íÊñ•Êù°‰ª∂</strong>ÔºöÊâÄË∞ì‰∫íÊñ•Â∞±ÊòØËøõÁ®ãÂú®Êüê‰∏ÄÊó∂Èó¥ÂÜÖÁã¨Âç†ËµÑÊ∫ê„ÄÇ</li>
<li><strong>ËØ∑Ê±Ç‰∏é‰øùÊåÅÊù°‰ª∂</strong>Ôºö‰∏Ä‰∏™ËøõÁ®ãÂõ†ËØ∑Ê±ÇËµÑÊ∫êËÄåÈòªÂ°ûÊó∂ÔºåÂØπÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫ê‰øùÊåÅ‰∏çÊîæ„ÄÇ</li>
<li><strong>‰∏çÂèØÂâ•Â§∫Êù°‰ª∂</strong>ÔºöÁ∫øÁ®ãÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫êÂú®Êú´‰ΩøÁî®ÂÆå‰πãÂâç‰∏çËÉΩË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂº∫Ë°åÂâ•Â§∫ÔºåÂè™ÊúâËá™Â∑±‰ΩøÁî®ÂÆåÊØïÂêéÊâçÈáäÊîæËµÑÊ∫ê„ÄÇ</li>
<li><strong>Âæ™ÁéØÁ≠âÂæÖÊù°‰ª∂</strong>ÔºöËã•Âπ≤ËøõÁ®ã‰πãÈó¥ÂΩ¢Êàê‰∏ÄÁßçÂ§¥Â∞æÁõ∏Êé•ÁöÑÂæ™ÁéØÁ≠âÂæÖËµÑÊ∫êÂÖ≥Á≥ª„ÄÇ</li>
</ol>
<blockquote>
<p><strong>Â¶Ç‰ΩïÈÅøÂÖçÊ≠ªÈîÅ</strong>Ôºö</p>
<p>Êàë‰∏äÈù¢ËØ¥‰∫Ü‰∫ßÁîüÊ≠ªÈîÅÁöÑÂõõ‰∏™ÂøÖË¶ÅÊù°‰ª∂Ôºå‰∏∫‰∫ÜÈÅøÂÖçÊ≠ªÈîÅÔºåÊàë‰ª¨Âè™Ë¶ÅÁ†¥Âùè‰∫ßÁîüÊ≠ªÈîÅÁöÑÂõõ‰∏™Êù°‰ª∂‰∏≠ÁöÑÂÖ∂‰∏≠‚ºÄ‰∏™Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÁé∞Âú®Êàë‰ª¨Êù•Êå®‰∏™ÂàÜÊûê‚ºÄ‰∏ãÔºö</p>
<ol type="1">
<li><p>Á†¥Âùè‰∫íÊñ•Êù°‰ª∂ ÔºöËøô‰∏™Êù°‰ª∂Êàë‰ª¨Ê≤°ÊúâÂäûÊ≥ïÁ†¥ÂùèÔºåÂõ†‰∏∫Êàë‰ª¨Áî®ÈîÅÊú¨Êù•Â∞±ÊòØÊÉ≥ËÆ©‰ªñ‰ª¨‰∫íÊñ•ÁöÑÔºà‰∏¥ÁïåËµÑÊ∫êÈúÄË¶Å‰∫íÊñ•ËÆøÈóÆÔºâ„ÄÇ</p></li>
<li><p>Á†¥ÂùèËØ∑Ê±Ç‰∏é‰øùÊåÅÊù°‰ª∂ Ôºö‚ºÄÊ¨°ÊÄßÁî≥ËØ∑ÊâÄÊúâÁöÑËµÑÊ∫ê„ÄÇ</p></li>
<li><p>Á†¥Âùè‰∏çÂèØÂâ•Â§∫Êù°‰ª∂ ÔºöÂç†Áî®ÈÉ®ÂàÜËµÑÊ∫êÁöÑÁ∫øÁ®ãËøõ‚ºÄÊ≠•Áî≥ËØ∑ÂÖ∂‰ªñËµÑÊ∫êÊó∂ÔºåÂ¶ÇÊûúÁî≥ËØ∑‰∏çÂà∞ÔºåÂèØ‰ª•‰∏ªÂä®ÈáäÊîæÂÆÉÂç†ÊúâÁöÑËµÑÊ∫ê„ÄÇ</p></li>
<li><p>Á†¥ÂùèÂæ™ÁéØÁ≠âÂæÖÊù°‰ª∂ ÔºöÈù†ÊåâÂ∫èÁî≥ËØ∑ËµÑÊ∫êÊù•È¢ÑÈò≤„ÄÇÊåâÊüê‚ºÄÈ°∫Â∫èÁî≥ËØ∑ËµÑÊ∫êÔºåÈáäÊîæËµÑÊ∫êÂàôÂèçÂ∫èÈáäÊîæ„ÄÇ</p></li>
</ol>
</blockquote>
<p><strong>Ê¥ªÈîÅ</strong>Ôºö‰ªªÂä°ÊàñËÄÖÊâßË°åËÄÖÊ≤°ÊúâË¢´ÈòªÂ°ûÔºåÁî±‰∫éÊüê‰∫õÊù°‰ª∂Ê≤°ÊúâÊª°Ë∂≥ÔºåÂØºËá¥‰∏ÄÁõ¥ÈáçÂ§çÂ∞ùËØïÔºåÂ§±Ë¥•ÔºåÂ∞ùËØïÔºåÂ§±Ë¥•„ÄÇ</p>
<p><strong>Ê¥ªÈîÅÂíåÊ≠ªÈîÅÁöÑÂå∫Âà´</strong>Ôºö</p>
<ul>
<li>Â§Ñ‰∫éÊ¥ªÈîÅÁöÑÂÆû‰ΩìÊòØÂú®‰∏çÊñ≠ÁöÑÊîπÂèòÁä∂ÊÄÅÔºåÊâÄË∞ìÁöÑ‚ÄúÊ¥ª‚ÄùÔºõ</li>
<li>ËÄåÂ§Ñ‰∫éÊ≠ªÈîÅÁöÑÂÆû‰ΩìË°®Áé∞‰∏∫Á≠âÂæÖÔºõ</li>
<li><strong>Ê¥ªÈîÅÊúâÂèØËÉΩËá™Ë°åËß£ÂºÄÔºåÊ≠ªÈîÅÂàô‰∏çËÉΩ</strong>„ÄÇ</li>
</ul>
<p><strong>È••È•ø</strong>Ôºö‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á∫øÁ®ãÂõ†‰∏∫ÁßçÁßçÂéüÂõ†Êó†Ê≥ïËé∑ÂæóÊâÄÈúÄË¶ÅÁöÑËµÑÊ∫êÔºåÂØºËá¥‰∏ÄÁõ¥Êó†Ê≥ïÊâßË°åÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p><strong>Java ‰∏≠ÂØºËá¥È••È•øÁöÑÂéüÂõ†</strong>Ôºö</p>
<ol type="1">
<li>È´ò‰ºòÂÖàÁ∫ßÁ∫øÁ®ãÂêûÂô¨ÊâÄÊúâÁöÑ‰Ωé‰ºòÂÖàÁ∫ßÁ∫øÁ®ãÁöÑ CPU Êó∂Èó¥„ÄÇ</li>
<li>Á∫øÁ®ãË¢´Ê∞∏‰πÖÂ†µÂ°ûÂú®‰∏Ä‰∏™Á≠âÂæÖËøõÂÖ•ÂêåÊ≠•ÂùóÁöÑÁä∂ÊÄÅÔºåÂõ†‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÊÄªÊòØËÉΩÂú®ÂÆÉ‰πãÂâçÊåÅÁª≠Âú∞ÂØπËØ•ÂêåÊ≠•ÂùóËøõË°åËÆøÈóÆÔºàÂ∞±ÊòØÊãø‰∏çÂà∞ÈîÅÔºâ„ÄÇ</li>
<li>Á∫øÁ®ãÂú®Á≠âÂæÖ‰∏Ä‰∏™Êú¨Ë∫´‰πüÂ§Ñ‰∫éÊ∞∏‰πÖÁ≠âÂæÖÂÆåÊàêÁöÑÂØπË±°(ÊØîÂ¶ÇË∞ÉÁî®Ëøô‰∏™ÂØπË±°ÁöÑ wait ÊñπÊ≥ï)ÔºåÂõ†‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ãÊÄªÊòØË¢´ÊåÅÁª≠Âú∞Ëé∑ÂæóÂî§ÈÜí„ÄÇ</li>
</ol>
<h3 id="sleep-Âíå-wait-ÁöÑÂºÇÂêå"><code>sleep()</code> Âíå <code>wait()</code> ÁöÑÂºÇÂêå</h3>
<ul>
<li>‰∏§ËÄÖÊúÄ‰∏ªË¶ÅÁöÑÂå∫Âà´Âú®‰∫éÔºö<strong>sleep ÊñπÊ≥ïÊ≤°ÊúâÈáäÊîæÈîÅÔºåËÄå wait ÊñπÊ≥ïÈáäÊîæ‰∫ÜÈîÅ</strong> „ÄÇ</li>
<li>‰∏§ËÄÖÈÉΩÂèØ‰ª•ÊöÇÂÅúÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ</li>
<li>wait ÈÄöÂ∏∏Ë¢´Áî®‰∫éÁ∫øÁ®ãÈó¥‰∫§‰∫í/ÈÄö‰ø°Ôºå sleep ÈÄöÂ∏∏Ë¢´Áî®‰∫éÊöÇÂÅúÊâßË°å„ÄÇ</li>
<li>wait ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÂêéÔºåÁ∫øÁ®ã‰∏ç‰ºöËá™Âä®ËãèÈÜíÔºåÈúÄË¶ÅÂà´ÁöÑÁ∫øÁ®ãË∞ÉÁî®Âêå‚ºÄ‰∏™ÂØπË±°‰∏äÁöÑ <code>notify()</code> ÊàñËÄÖ <code>notifyAll()</code> ÊñπÊ≥ï„ÄÇ sleep ÊñπÊ≥ïÊâßË°åÂÆåÊàêÂêéÔºåÁ∫øÁ®ã‰ºöËá™Âä®ËãèÈÜí„ÄÇÂΩìÁÑ∂ÂâçËÄÖÂèØ‰ª•‰ΩøÁî® <code>wait(long timeout)</code> Ë∂ÖÊó∂ÂêéÁ∫øÁ®ã‰ºöËá™Âä®ËãèÈÜí„ÄÇ</li>
</ul>
<h3 id="start-Âíå-run-ÁöÑÂå∫Âà´"><code>start()</code> Âíå <code>run()</code> ÁöÑÂå∫Âà´</h3>
<ul>
<li>Áõ¥Êé•Ë∞ÉÁî® run ÊòØÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÊâßË°å‰∫Ü runÔºå<strong>Ê≤°ÊúâÂêØÂä®Êñ∞ÁöÑÁ∫øÁ®ã</strong></li>
<li>‰ΩøÁî® start ÊòØÂêØÂä®Êñ∞ÁöÑÁ∫øÁ®ãÔºåÈÄöËøáÊñ∞ÁöÑÁ∫øÁ®ãÈó¥Êé•ÊâßË°å run ‰∏≠ÁöÑ‰ª£Á†Å</li>
</ul>
<h3 id="synchronized-ÂÖ≥ÈîÆÂ≠óÊ¶ÇËø∞">synchronized ÂÖ≥ÈîÆÂ≠óÊ¶ÇËø∞ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>synchronized ÂÖ≥ÈîÆÂ≠óËß£ÂÜ≥ÁöÑÊòØ<strong>Â§ö‰∏™Á∫øÁ®ã‰πãÈó¥ËÆøÈóÆËµÑÊ∫êÁöÑÂêåÊ≠•ÊÄß</strong>Ôºõ</p>
<p>synchronized ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•<strong>‰øùËØÅË¢´ÂÆÉ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÊàñËÄÖ‰ª£Á†ÅÂùóÂú®‰ªªÊÑèÊó∂ÂàªÂè™ËÉΩÊúâ‚ºÄ‰∏™Á∫øÁ®ãÂú®ÊâßË°å</strong>„ÄÇ</p>
<blockquote>
<p>Âè¶Â§ñÔºåÂú® Java Êó©ÊúüÁâàÊú¨‰∏≠Ôºå synchronized Â±û‰∫éÈáçÈáèÁ∫ßÈîÅÔºåÊïàÁéá‰Ωé‰∏ãÔºåÂõ†‰∏∫ÁõëËßÜÂô®ÈîÅÔºàmonitorÔºâÊòØ‰æùËµñ‰∫éÂ∫ïÂ±ÇÁöÑÊìç‰ΩúÁ≥ªÁªüÁöÑ Mutex Lock Êù•ÂÆûÁé∞ÁöÑÔºå Java ÁöÑÁ∫øÁ®ãÊòØÊò†Â∞ÑÂà∞Êìç‰ΩúÁ≥ªÁªüÁöÑÂéüÁîüÁ∫øÁ®ã‰πã‰∏äÁöÑ„ÄÇÂ¶ÇÊûúË¶ÅÊåÇËµ∑ÊàñËÄÖÂî§ÈÜí‚ºÄ‰∏™Á∫øÁ®ãÔºåÈÉΩÈúÄË¶ÅÊìç‰ΩúÁ≥ªÁªüÂ∏ÆÂøôÂÆåÊàêÔºåËÄåÊìç‰ΩúÁ≥ªÁªüÂÆûÁé∞Á∫øÁ®ã‰πãÈó¥ÁöÑÂàáÊç¢Êó∂ÈúÄË¶Å‰ªéÁî®Êà∑ÊÄÅËΩ¨Êç¢Âà∞ÂÜÖÊ†∏ÊÄÅÔºåËøô‰∏™Áä∂ÊÄÅ‰πãÈó¥ÁöÑËΩ¨Êç¢ÈúÄË¶ÅÁõ∏ÂØπÊØîËæÉ‚ªìÁöÑÊó∂Èó¥ÔºåÊó∂Èó¥ÊàêÊú¨Áõ∏ÂØπËæÉÈ´òÔºåËøô‰πüÊòØ‰∏∫‰ªÄ‰πàÊó©ÊúüÁöÑ synchronized ÊïàÁéá‰ΩéÁöÑÂéüÂõ†„ÄÇ</p>
<p>Â∫ÜÂπ∏ÁöÑÊòØÂú® JDK 6 ‰πãÂêé Java ÂÆòÊñπÂØπ‰ªé JVM Â±ÇÈù¢ÂØπ synchronized ËæÉÂ§ß‰ºòÂåñÔºåÊâÄ‰ª•Áé∞Âú®ÁöÑ synchronized ÈîÅÊïàÁéá‰πü‰ºòÂåñÂæóÂæà‰∏çÈîô‰∫Ü„ÄÇ JDK1.6 ÂØπÈîÅÁöÑÂÆûÁé∞ÂºïÂÖ•‰∫ÜÂ§ßÈáèÁöÑ‰ºòÂåñÔºåÂ¶Ç<strong>Ëá™ÊóãÈîÅ„ÄÅÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ„ÄÅÈîÅÊ∂àÈô§„ÄÅÈîÅÁ≤óÂåñ„ÄÅÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ</strong>Á≠âÊäÄÊúØÊù•ÂáèÂ∞ëÈîÅÊìç‰ΩúÁöÑÂºÄÈîÄ„ÄÇ ÔºàÂêéÁª≠ÊúâËÆ≤Ôºâ</p>
</blockquote>
<p><strong>synchronized ÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩøÁî®ÊñπÂºè</strong></p>
<ul>
<li><p><strong>‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ï</strong>Ôºö‰ΩúÁî®‰∫éÂΩìÂâçÂØπË±°ÂÆû‰æãÂä†ÈîÅÔºåËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂâçË¶ÅËé∑ÂæóÂΩìÂâçÂØπË±°ÂÆû‰æãÁöÑÈîÅ</p></li>
<li><p><strong>‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï</strong>Ôºö‰πüÂ∞±ÊòØÁªôÂΩìÂâçÁ±ªÂä†ÈîÅÔºå‰ºö‰ΩúÁî®‰∫éÁ±ªÁöÑÊâÄÊúâÂØπË±°ÂÆû‰æãÔºåÂõ†‰∏∫ÈùôÊÄÅÊàêÂëò‰∏çÂ±û‰∫é‰ªª‰Ωï‚ºÄ‰∏™ÂÆû‰æãÂØπË±°ÔºåÊòØÁ±ªÊàêÂëòÔºà static Ë°®ÊòéËøôÊòØËØ•Á±ªÁöÑ‚ºÄ‰∏™ÈùôÊÄÅËµÑÊ∫êÔºå‰∏çÁÆ° new ‰∫ÜÂ§öÂ∞ë‰∏™ÂØπË±°ÔºåÂè™Êúâ‚ºÄ‰ªΩÔºâ„ÄÇ</p>
<blockquote>
<p>ÊâÄ‰ª•Â¶ÇÊûú‚ºÄ‰∏™ Á∫øÁ®ãA Ë∞ÉÁî®‚ºÄ‰∏™ÂÆû‰æãÂØπË±°ÁöÑÈùûÈùôÊÄÅ synchronized ÊñπÊ≥ïÔºåËÄå Á∫øÁ®ãB ÈúÄË¶ÅË∞ÉÁî®Ëøô‰∏™ÂÆû‰æãÂØπË±°ÊâÄÂ±ûÁ±ªÁöÑÈùôÊÄÅ synchronized ÊñπÊ≥ïÔºåÊòØÂÖÅËÆ∏ÁöÑÔºå‰∏ç‰ºöÂèëÁîü‰∫íÊñ•Áé∞Ë±°Ôºå Âõ†‰∏∫ËÆøÈóÆÈùôÊÄÅ synchronized ÊñπÊ≥ïÂç†Áî®ÁöÑÈîÅÊòØÂΩìÂâçÁ±ªÁöÑÈîÅÔºåËÄåËÆøÈóÆÈùûÈùôÊÄÅ synchronized ÊñπÊ≥ïÂç†Áî®ÁöÑÈîÅÊòØÂΩìÂâçÂÆû‰æãÂØπË±°ÈîÅ„ÄÇ</p>
</blockquote></li>
<li><p><strong>‰øÆÈ•∞‰ª£Á†ÅÂùó</strong>ÔºöÊåáÂÆöÂä†ÈîÅÂØπË±°ÔºåÂØπÁªôÂÆöÂØπË±°Âä†ÈîÅÔºåËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂ∫ìÂâçË¶ÅËé∑ÂæóÁªôÂÆöÂØπË±°ÁöÑÈîÅ„ÄÇ</p></li>
</ul>
<p><strong>ÊÄªÁªì</strong>Ôºö</p>
<ul>
<li>Á±ªÈîÅÔºösynchronized ÂÖ≥ÈîÆÂ≠óÂä†Âà∞ <strong>static ÈùôÊÄÅÊñπÊ≥ï</strong> Âíå <strong>synchronized(xxx.class)</strong> ‰ª£Á†ÅÂùó‰∏äÈÉΩÊòØÊòØÁªô Class Á±ª‰∏äÈîÅ„ÄÇ</li>
<li>ÂØπË±°ÈîÅÔºösynchronized ÂÖ≥ÈîÆÂ≠óÂä†Âà∞ÂÆû‰æãÊñπÊ≥ï‰∏äÊòØÁªôÂØπË±°ÂÆû‰æã‰∏äÈîÅ„ÄÇ</li>
</ul>
<blockquote>
<p>Â∞ΩÈáè‰∏çË¶Å‰ΩøÁî® <code>synchronized(StringÂØπË±°)</code> Âõ†‰∏∫ JVM ‰∏≠ÔºåÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†ÂÖ∑ÊúâÁºìÂ≠òÂäüËÉΩÔºÅ</p>
</blockquote>
<h3 id="synchronized-ÂÖ≥ÈîÆÂ≠óÁöÑÂ∫ïÂ±ÇÂéüÁêÜ">synchronized ÂÖ≥ÈîÆÂ≠óÁöÑÂ∫ïÂ±ÇÂéüÁêÜ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>synchronized ÂÖ≥ÈîÆÂ≠óÂ∫ïÂ±ÇÂéüÁêÜÂ±û‰∫é JVM Â±ÇÈù¢</p>
<p><strong>synchronized ÂêåÊ≠•ËØ≠Âè•ÂùóÁöÑÊÉÖÂÜµÔºö</strong></p>
<ul>
<li><p>‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DemoÁ±ª‰∏≠ÁöÑ‰ª£Á†Å</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ‰ª£Á†ÅÂùóÂä†ÈîÅ</span></span><br><span class="line">    <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">        counter++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ÈÄöËøá JDK Ëá™Â∏¶ÁöÑ javap ÂëΩ‰ª§Êü•Áúã Demo Á±ªÁöÑÁõ∏ÂÖ≥Â≠óËäÇÁ†Å‰ø°ÊÅØÔºöÈ¶ñÂÖàÂàáÊç¢Âà∞Á±ªÁöÑÂØπÂ∫îÁõÆÂΩïÊâßË°å <code>javac Demo.java</code> ÂëΩ‰ª§ÁîüÊàêÁºñËØëÂêéÁöÑ <code>Demo.class</code> ‚ΩÇ‰ª∂ÔºåÁÑ∂ÂêéÊâßË°å <code>javap -c -s -v -l Demo.class</code></p>
</blockquote></li>
<li><p>ÂØπÂ∫îÁöÑÂ≠óËäÇÁ†Å‰∏∫Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">    	stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">            <span class="number">0</span>: getstatic #<span class="number">2</span> 		 <span class="comment">// &lt;- lockÂºïÁî® ÔºàsynchronizedÂºÄÂßãÔºâ</span></span><br><span class="line">            <span class="number">3</span>: dup</span><br><span class="line">            <span class="number">4</span>: astore_1 			 <span class="comment">// lockÂºïÁî® -&gt; slot 1</span></span><br><span class="line">            <span class="number">5</span>: monitorenter 		 <span class="comment">// Â∞ÜlockÂØπË±° MarkWord ÁΩÆ‰∏∫ Monitor ÊåáÈíà‚òÜ</span></span><br><span class="line">            <span class="number">6</span>: getstatic #<span class="number">3</span>			 <span class="comment">// &lt;- i</span></span><br><span class="line">            <span class="number">9</span>: iconst_1				 <span class="comment">// ÂáÜÂ§áÂ∏∏Êï∞ 1</span></span><br><span class="line">            <span class="number">10</span>: iadd 			     <span class="comment">// +1</span></span><br><span class="line">            <span class="number">11</span>: putstatic #<span class="number">3</span>  	     <span class="comment">// -&gt; i</span></span><br><span class="line">            <span class="number">14</span>: aload_1 		   	 <span class="comment">// &lt;- lockÂºïÁî®</span></span><br><span class="line">            <span class="number">15</span>: monitorexit          <span class="comment">// Â∞ÜlockÂØπË±° MarkWord ÈáçÁΩÆ, Âî§ÈÜí EntryList‚òÜ</span></span><br><span class="line">            <span class="number">16</span>: goto <span class="number">24</span></span><br><span class="line">            <span class="number">19</span>: astore_2 			 <span class="comment">// e -&gt; slot 2</span></span><br><span class="line">            <span class="number">20</span>: aload_1              <span class="comment">// &lt;- lockÂºïÁî®</span></span><br><span class="line">            <span class="number">21</span>: monitorexit          <span class="comment">// Â∞Ü lockÂØπË±° MarkWord ÈáçÁΩÆ, Âî§ÈÜí EntryList</span></span><br><span class="line">            <span class="number">22</span>: aload_2              <span class="comment">// &lt;- slot 2 (e)</span></span><br><span class="line">            <span class="number">23</span>: athrow               <span class="comment">// throw e</span></span><br><span class="line">            <span class="number">24</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure></li>
<li>ÊÄªÁªìÔºö<strong>synchronized ÂêåÊ≠•ËØ≠Âè•ÂùóÁöÑÂÆûÁé∞‰ΩøÁî®ÁöÑÊòØ monitorenter Âíå monitorexit Êåá‰ª§</strong>Ôºå‰æùËµñÊìç‰ΩúÁ≥ªÁªüÂ∫ïÂ±ÇÁöÑ‰∫íÊñ•ÈîÅÊù•ÂÆûÁé∞
<ul>
<li>ÂÖ∂‰∏≠ monitorenter Êåá‰ª§ÊåáÂêëÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÂºÄÂßã‰ΩçÁΩÆ</li>
<li>ÂÖ∂‰∏≠ monitorexit Êåá‰ª§ÂàôÊåáÊòéÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÁªìÊùü‰ΩçÁΩÆ</li>
</ul>
<p>ÂΩìÊâßË°å monitorenter Êåá‰ª§Êó∂ÔºåÁ∫øÁ®ãËØïÂõæËé∑ÂèñÈîÅ‰πüÂ∞±ÊòØËé∑Âèñ monitor ÁöÑÊåÅÊúâÊùÉ„ÄÇÂΩìËÆ°Êï∞Âô®‰∏∫0ÂàôÂèØ‰ª•ÊàêÂäüËé∑ÂèñÔºåËé∑ÂèñÂêéÂ∞ÜÈîÅËÆ°Êï∞Âô®ËÆæ‰∏∫1‰πüÂ∞±ÊòØ+1„ÄÇÁõ∏Â∫îÁöÑÂú®ÊâßË°å monitorexit Êåá‰ª§ÂêéÔºåÂ∞ÜÈîÅËÆ°Êï∞Âô®ËÆæ‰∏∫0ÔºåË°®ÊòéÈîÅË¢´ÈáäÊîæ„ÄÇÂ¶ÇÊûúËé∑ÂèñÂØπË±°ÈîÅÂ§±Ë¥•ÔºåÈÇ£ÂΩìÂâçÁ∫øÁ®ãÂ∞±Ë¶ÅÈòªÂ°ûÁ≠âÂæÖÔºåÁõ¥Âà∞ÈîÅË¢´Âè¶Â§ñ‚ºÄ‰∏™Á∫øÁ®ãÈáäÊîæ‰∏∫Ê≠¢„ÄÇ</p>
<blockquote>
<p>monitor ÂØπË±°Â≠òÂú®‰∫éÊØè‰∏™ Java ÂØπË±°ÁöÑÂØπË±°Â§¥‰∏≠Ôºå synchronized ÈîÅ‰æøÊòØÈÄöËøáËøôÁßçÊñπÂºèËé∑ÂèñÈîÅÁöÑÔºå‰πüÊòØ‰∏∫‰ªÄ‰πà Java ‰∏≠‰ªªÊÑèÂØπË±°ÂèØ‰ª•‰Ωú‰∏∫ÈîÅÁöÑÂéüÂõ†</p>
</blockquote></li>
</ul>
<p><strong>synchronized ‰øÆÈ•∞ÊñπÊ≥ïÁöÑÁöÑÊÉÖÂÜµ</strong></p>
<ul>
<li><p>‰ª£Á†Å‰∏∫Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DemoÁ±ª‰∏≠ÁöÑ‰ª£Á†Å</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;synchronized ÊñπÊ≥ï&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ÂØπÂ∫îÁöÑÂ≠óËäÇÁ†Å‰∏∫Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()V</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SYNCHRONIZED       <span class="comment">// ‚òÜËøôÈáåÂ§ö‰∫Ü‰∏Ä‰∏™ÂêåÊ≠•Ê†áËØÜ‚òÜ</span></span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: getstatic     #<span class="number">2</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">       <span class="number">3</span>: ldc           #<span class="number">3</span>                  <span class="comment">// String synchronized ?Ê≥ï</span></span><br><span class="line">       <span class="number">5</span>: invokevirtual #<span class="number">4</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">       <span class="number">8</span>: <span class="keyword">return</span></span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">10</span>: <span class="number">0</span></span><br><span class="line">      line <span class="number">11</span>: <span class="number">8</span></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>       <span class="number">9</span>     <span class="number">0</span>  <span class="keyword">this</span>   LDemo;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>ÊÄªÁªì</strong>Ôºösynchronized ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÂπ∂Ê≤°Êúâ monitorenter Êåá‰ª§Âíå monitorexit Êåá‰ª§ÔºåÂèñÂæó‰ª£‰πãÁöÑÁ°ÆÊòØ <strong>ACC_SYNCHRONIZED Ê†áËØÜ</strong>ÔºåËØ•Ê†áËØÜÊåáÊòé‰∫ÜËØ•ÊñπÊ≥ïÊòØ‚ºÄ‰∏™ÂêåÊ≠•ÊñπÊ≥ïÔºå JVM ÈÄöËøáËØ• ACC_SYNCHRONIZED ËÆøÈóÆÊ†áÂøóÊù•Ëæ®Âà´‚ºÄ‰∏™ÊñπÊ≥ïÊòØÂê¶Â£∞Êòé‰∏∫ÂêåÊ≠•ÊñπÊ≥ïÔºå‰ªéËÄåÊâßË°åÁõ∏Â∫îÁöÑÂêåÊ≠•Ë∞ÉÁî®„ÄÇ</p></li>
</ul>
<blockquote>
<p>ÂÜçËøõ‰∏ÄÊ≠•ËØ¥Êòé synchronize ÂéüÁêÜÔºöÔºàÂÖ≥‰∫é Monitor Ôºâ</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14491216.html">JavaÔºöÂπ∂ÂèëÁ¨îËÆ∞-03ÔºöMonitor Ê¶ÇÂøµ„ÄÅsynchronizeÂéüÁêÜ</a></p>
</blockquote>
<h3 id="synchronized-‰ºòÂåñ-ÈîÅ‰ºòÂåñ">synchronized ‰ºòÂåñ &amp; ÈîÅ‰ºòÂåñ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>JDK1.6 ÂØπÈîÅÁöÑÂÆûÁé∞ÂºïÂÖ•‰∫ÜÂ§ßÈáèÁöÑ‰ºòÂåñÔºåÂ¶Ç<strong>ÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅËá™ÊóãÈîÅ„ÄÅÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ„ÄÅÈîÅÊ∂àÈô§„ÄÅÈîÅÁ≤óÂåñ</strong>Á≠âÊäÄÊúØÊù•ÂáèÂ∞ëÈîÅÊìç‰ΩúÁöÑÂºÄÈîÄ„ÄÇ</p>
<p>ÈîÅ‰∏ªË¶ÅÂ≠òÂú®ÂõõÁßçÁä∂ÊÄÅ‰ªé‰ΩéÂà∞È´ò‰æùÊ¨°ÊòØÔºö<strong>Êó†ÈîÅÁä∂ÊÄÅ‚ÜíÂÅèÂêëÈîÅÁä∂ÊÄÅ‚ÜíËΩªÈáèÁ∫ßÈîÅÁä∂ÊÄÅ‚ÜíÈáçÈáèÁ∫ßÈîÅÁä∂ÊÄÅ</strong>Ôºå‰ªñ‰ª¨‰ºöÈöèÁùÄÁ´û‰∫âÁöÑÊøÄÁÉàËÄåÈÄêÊ∏êÂçáÁ∫ß„ÄÇ</p>
<ul>
<li><strong>Ëá™ÊóãÈîÅ</strong>ÔºöÁî±‰∫éÂ§ßÈÉ®ÂàÜÊó∂ÂÄôÔºåÈîÅË¢´Âç†Áî®ÁöÑÊó∂Èó¥ÂæàÁü≠ÔºåÂÖ±‰∫´ÂèòÈáèÁöÑÈîÅÂÆöÊó∂Èó¥‰πüÂæàÁü≠ÔºåÊâÄÊúâÊ≤°ÊúâÂøÖË¶ÅÊåÇËµ∑Á∫øÁ®ãÔºå<strong>Áî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅÁöÑÊù•Âõû‰∏ä‰∏ãÊñáÂàáÊç¢‰∏•ÈáçÂΩ±ÂìçÊÄßËÉΩ„ÄÇËá™ÊóãÁöÑÊ¶ÇÂøµÂ∞±ÊòØËÆ©Á∫øÁ®ãÊâßË°å‰∏Ä‰∏™ÂøôÂæ™ÁéØ</strong>ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Â∞±ÊòØÂï•‰πü‰∏çÂπ≤ÔºåÈò≤Ê≠¢‰ªéÁî®Êà∑ÊÄÅËΩ¨ÂÖ•ÂÜÖÊ†∏ÊÄÅÔºåËá™ÊóãÈîÅÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ <code>-XX:+UseSpining</code> Êù•ÂºÄÂêØÔºåËá™ÊóãÁöÑÈªòËÆ§Ê¨°Êï∞ÊòØ10Ê¨°ÔºåÂèØ‰ª•‰ΩøÁî® <code>-XX:PreBlockSpin</code> ËÆæÁΩÆ„ÄÇ</li>
<li><strong>Ëá™ÈÄÇÂ∫îÈîÅ</strong>ÔºöËá™ÈÄÇÂ∫îÈîÅÂ∞±ÊòØ<strong>Ëá™ÈÄÇÂ∫îÁöÑËá™ÊóãÈîÅ</strong>ÔºåËá™ÊóãÁöÑÊó∂Èó¥‰∏çÊòØÂõ∫ÂÆöÊó∂Èó¥ÔºåËÄåÊòØÁî±Ââç‰∏ÄÊ¨°Âú®Âêå‰∏Ä‰∏™ÈîÅ‰∏äÁöÑËá™ÊóãÊó∂Èó¥ÂíåÈîÅÁöÑÊåÅÊúâËÄÖÁä∂ÊÄÅÊù•ÂÜ≥ÂÆö„ÄÇ</li>
<li><strong>ÈîÅÊ∂àÈô§</strong>ÔºöÈîÅÊ∂àÈô§ÊåáÁöÑÊòØ JVM Ê£ÄÊµãÂà∞‰∏Ä‰∫õÂêåÊ≠•ÁöÑ‰ª£Á†ÅÂùóÔºåÂÆåÂÖ®‰∏çÂ≠òÂú®Êï∞ÊçÆÁ´û‰∫âÁöÑÂú∫ÊôØÔºå‰πüÂ∞±ÊòØ‰∏çÈúÄË¶ÅÂä†ÈîÅÔºåÂ∞±‰ºöËøõË°åÈîÅÊ∂àÈô§„ÄÇ</li>
<li><strong>ÈîÅÁ≤óÂåñ</strong>ÔºöÈîÅÁ≤óÂåñÊåáÁöÑÊòØÊúâÂæàÂ§öÊìç‰ΩúÈÉΩÊòØÂØπÂêå‰∏Ä‰∏™ÂØπË±°ËøõË°åÂä†ÈîÅÔºåÂ∞±‰ºöÊääÈîÅÁöÑÂêåÊ≠•ËåÉÂõ¥Êâ©Â±ïÂà∞Êï¥‰∏™Êìç‰ΩúÂ∫èÂàó‰πãÂ§ñ„ÄÇ</li>
<li><strong>ËΩªÈáèÁ∫ßÈîÅ</strong>ÔºöJVM ÁöÑÂØπË±°ÁöÑÂØπË±°Â§¥‰∏≠ÂåÖÂê´Êúâ‰∏Ä‰∫õÈîÅÁöÑÊ†áÂøó‰ΩçÔºå‰ª£Á†ÅËøõÂÖ•ÂêåÊ≠•ÂùóÁöÑÊó∂ÂÄôÔºå<strong>JVM Â∞Ü‰ºö‰ΩøÁî® CAS ÊñπÂºèÊù•Â∞ùËØïËé∑ÂèñÈîÅ</strong>ÔºåÂ¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÂàô‰ºöÊääÂØπË±°Â§¥‰∏≠ÁöÑÁä∂ÊÄÅ‰ΩçÊ†áËÆ∞‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºåÂ¶ÇÊûúÊõ¥Êñ∞Â§±Ë¥•ÔºåË°®ÊòéÂ≠òÂú®Á´û‰∫âÊÉÖÂÜµÔºåËøõÂÖ•ÈîÅËÜ®ËÉÄÔºåÂ∞ÜËΩªÈáèÁ∫ßÈîÅÂèò‰∏∫ÈáçÈáèÁ∫ßÈîÅÁöÑÁä∂ÊÄÅ„ÄÇ</li>
<li><strong>ÂÅèÂêëÈîÅ</strong>ÔºöÂΩìÁ∫øÁ®ãËÆøÈóÆÂêåÊ≠•ÂùóËé∑ÂèñÈîÅÊó∂Ôºå‰ºöÂú®<strong>ÂØπË±°Â§¥ÂíåÊ†àÂ∏ß‰∏≠ÁöÑÈîÅËÆ∞ÂΩïÈáåÂ≠òÂÇ®ÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãIDÔºå‰πãÂêéËøô‰∏™Á∫øÁ®ãÂÜçÊ¨°ËøõÂÖ•ÂêåÊ≠•ÂùóÊó∂ÈÉΩ‰∏çÈúÄË¶ÅCASÊù•Âä†ÈîÅÂíåËß£ÈîÅ</strong>‰∫ÜÔºåÂÅèÂêëÈîÅ‰ºöÊ∞∏ËøúÂÅèÂêëÁ¨¨‰∏Ä‰∏™Ëé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãÔºåÂ¶ÇÊûúÂêéÁª≠Ê≤°ÊúâÂÖ∂‰ªñÁ∫øÁ®ãËé∑ÂæóËøáËøô‰∏™ÈîÅÔºåÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂ∞±Ê∞∏Ëøú‰∏çÈúÄË¶ÅËøõË°åÂêåÊ≠•ÔºåÂèç‰πãÔºåÂΩìÊúâÂÖ∂‰ªñÁ∫øÁ®ãÁ´û‰∫âÂÅèÂêëÈîÅÊó∂ÔºåÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÂ∞±‰ºöÈáäÊîæÂÅèÂêëÈîÅ„ÄÇÂèØ‰ª•Áî®ËøáËÆæÁΩÆ <code>-XX:+UseBiasedLocking</code> ÂºÄÂêØÂÅèÂêëÈîÅ„ÄÇ</li>
</ul>
<blockquote>
<p>Ê≥®ÊÑèÈîÅÂèØ‰ª•ÂçáÁ∫ß‰∏çÂèØÈôçÁ∫ßÔºåËøôÁßçÁ≠ñÁï•ÊòØ‰∏∫‰∫ÜÊèêÈ´òËé∑ÂæóÈîÅÂíåÈáäÊîæÈîÅÁöÑÊïàÁéá„ÄÇ</p>
<p>Ëøõ‰∏ÄÊ≠•‰∫ÜËß£ÂèØËßÅÔºö<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14491216.html">JavaÔºöÂπ∂ÂèëÁ¨îËÆ∞-03ÔºösynchronizeÂéüÁêÜËøõÈò∂</a></p>
</blockquote>
<h3 id="synchronized-Âíå-reentrantlock-ÁöÑÂå∫Âà´">synchronized Âíå ReentrantLock ÁöÑÂå∫Âà´ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<ol type="1">
<li><p>Áõ∏ÂêåÁÇπÔºö<strong>‰∏§ËÄÖÈÉΩÊòØÂèØÈáçÂÖ•ÈîÅ</strong></p>
<ul>
<li>ÂèØÈáçÂÖ•ÈîÅÂ∞±ÊòØ<strong>ÈÄíÂΩíÈîÅ</strong>ÔºöÊåáÁöÑÊòØÂêå‰∏ÄÁ∫øÁ®ãÂ§ñÂ±ÇÂáΩÊï∞Ëé∑ÂæóÈîÅ‰πãÂêéÔºåÂÜÖÂ±ÇÈÄíÂΩíÂáΩÊï∞‰ªçÁÑ∂ËÉΩËé∑ÂèñÂà∞ËØ•ÈîÅÁöÑ‰ª£Á†ÅÔºåÂç≥Âú®Âêå‰∏ÄÁ∫øÁ®ãÂú®Â§ñÂ±ÇÊñπÊ≥ïËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÔºåÂú®ËøõÂÖ•ÂÜÖÂ±ÇÊñπÊ≥ï‰ºöËá™Âä®Ëé∑ÂèñÈîÅ</li>
<li>‰πüÂ∞±ÊòØËØ¥Ôºö<strong>Á∫øÁ®ãÂèØ‰ª•ËøõÂÖ•‰ªª‰Ωï‰∏Ä‰∏™ÂÆÉÂ∑≤ÁªèÊã•ÊúâÁöÑÈîÅÊâÄÂêåÊ≠•ÁöÑ‰ª£Á†ÅÂùó</strong></li>
</ul></li>
<li><p>synchronized Â±û‰∫é <strong>JVM Â±ÇÈù¢</strong>ÔºåÂ±û‰∫é Java ÁöÑÂÖ≥ÈîÆÂ≠ó / ËÄå ReentrantLock ‰æùËµñ‰∫é <strong>Java API</strong></p>
<ul>
<li><p>synchronized ÊòØ‰æùËµñ‰∫é JVM ÂÆûÁé∞ÁöÑÔºömonitorenter</p>
<blockquote>
<p>Â∫ïÂ±ÇÊòØÈÄöËøá monitor ÂØπË±°Êù•ÂÆåÊàêÔºåÂÖ∂ÂÆû wait/notify Á≠âÊñπÊ≥ï‰πü‰æùËµñ‰∫é monitor ÂØπË±° Âè™ËÉΩÂú®ÂêåÊ≠•ÂùóÊàñËÄÖÊñπÊ≥ï‰∏≠ÊâçËÉΩË∞ÉÁî® wait/notify Á≠âÊñπÊ≥ï</p>
</blockquote></li>
<li><p>ReentrantLock ÊòØÂÖ∑‰ΩìÁ±ªÔºà<code>java.util.concurrent.locks.ReentrantLock</code>ÔºâÊòØ <strong>API Â±ÇÈù¢</strong>ÁöÑÈîÅÔºåÈúÄË¶Å <code>lock()</code> Âíå <code>unlock()</code> ÊñπÊ≥ïÈÖçÂêà <code>try catch finally</code> ËØ≠Âè•Êù•ÂÆåÊàê</p></li>
</ul></li>
<li><p><strong>‰ΩøÁî®ÊñπÂºè‰∏äÔºö</strong></p>
<ul>
<li>synchronizedÔºö‰∏çÈúÄË¶ÅÁî®Êà∑ÂéªÊâãÂä®ÈáäÊîæÈîÅÔºåÂΩì synchronized ‰ª£Á†ÅÊâßË°åÂêéÔºå<strong>Á≥ªÁªü‰ºöËá™Âä®ËÆ©Á∫øÁ®ãÈáäÊîæÂØπÈîÅ</strong>ÁöÑÂç†Áî®</li>
<li>ReentrantLockÔºöÂàôÈúÄË¶ÅÁî®Êà∑Âéª<strong>ÊâãÂä®ÈáäÊîæÈîÅ</strong>ÔºåËã•Ê≤°Êúâ‰∏ªÂä®ÈáäÊîæÈîÅÔºåÂ∞±ÊúâÂèØËÉΩÂá∫Áé∞Ê≠ªÈîÅÁöÑÁé∞Ë±°ÔºåÈúÄË¶Å<code>lock()</code> Âíå <code>unlock()</code> ÈÖçÁΩÆ <code>try catch finally</code> ËØ≠Âè•Êù•ÂÆåÊàê</li>
</ul></li>
<li><p><strong>Á≠âÂæÖÊòØÂê¶ÂèØ‰∏≠Êñ≠</strong></p>
<ul>
<li>synchronizedÔºö<strong>‰∏çÂèØ‰∏≠Êñ≠</strong>ÔºåÈô§ÈùûÊäõÂá∫ÂºÇÂ∏∏ÊàñËÄÖÊ≠£Â∏∏ËøêË°åÂÆåÊàê</li>
<li>ReentrantLockÔºö<strong>ÂèØ‰∏≠Êñ≠Ôºå‰πüÂèØ‰ª•ËÆæÁΩÆË∂ÖÊó∂ÊñπÊ≥ï</strong>
<ul>
<li><code>lock.lockInterruptibly()</code> Êîæ‰ª£Á†ÅÂùó‰∏≠ÔºåË∞ÉÁî®<code>Á∫øÁ®ã.interrupt()</code>ÊñπÊ≥ï<strong>ÂèØ‰ª•‰∏≠Êñ≠</strong></li>
<li>ËÆæÁΩÆ<strong>Ë∂ÖÊó∂ÊñπÊ≥ï</strong>Ôºå<code>lock.trylock(long timeout, TimeUnit unit)</code></li>
</ul></li>
</ul></li>
<li><p><strong>Âä†ÈîÅÊòØÂê¶ÂÖ¨Âπ≥</strong></p>
<ul>
<li>synchronizedÔºöÈùûÂÖ¨Âπ≥ÈîÅ</li>
<li>ReentrantLockÔºöÈªòËÆ§ÈùûÂÖ¨Âπ≥ÈîÅÔºåÊûÑÈÄ†ÂáΩÊï∞ÂèØ‰ª•‰º†ÈÄí boolean ÂÄºÔºå‰∏∫ true Âàô‰∏∫ÂÖ¨Âπ≥ÈîÅÔºåfalse ‰∏∫ÈùûÂÖ¨Âπ≥ÈîÅ</li>
</ul></li>
<li><p><strong>ÈîÅÊòØÂê¶ÂèØ‰ª•ÂÆöÂ§ö‰∏™Êù°‰ª∂ Condition</strong></p>
<ul>
<li>synchronizedÔºöÊ≤°ÊúâÔºåË¶Å‰πàÈöèÊú∫Âî§ÈÜíÔºåË¶Å‰πàÂÖ®ÈÉ®Âî§ÈÜí</li>
<li>ReentrantLockÔºöÁî®Êù•ÂÆûÁé∞ÂàÜÁªÑÂî§ÈÜíÈúÄË¶ÅÂî§ÈÜíÁöÑÁ∫øÁ®ãÔºå<strong>ÂèØ‰ª•Á≤æÁ°ÆÂî§ÈÜí</strong>ÔºåËÄå‰∏çÊòØÂÉè synchronized ÈÇ£Ê†∑ÔºåË¶Å‰πàÈöèÊú∫Âî§ÈÜíÔºåË¶Å‰πàÂÖ®ÈÉ®Âî§ÈÜí</li>
</ul></li>
</ol>
<blockquote>
<p>Ëøõ‰∏ÄÊ≠•ÔºöReentrantLock Âü∫‰∫éAQS(<strong>AbstractQueuedSynchronizer ÊäΩË±°ÈòüÂàóÂêåÊ≠•Âô®</strong>)ÂÆûÁé∞</p>
<p>AQS ÂÜÖÈÉ®Áª¥Êä§‰∏Ä‰∏™ state Áä∂ÊÄÅ‰ΩçÔºåÂ∞ùËØïÂä†ÈîÅÁöÑÊó∂ÂÄôÈÄöËøá CAS(CompareAndSwap) ‰øÆÊîπÂÄºÔºåÂ¶ÇÊûúÊàêÂäüËÆæÁΩÆ‰∏∫1ÔºåÂπ∂‰∏îÊääÂΩìÂâçÁ∫øÁ®ãËµãÂÄºÁªôÁõ∏Â∫îÂèòÈáèÔºå‰ª£Ë°®Âä†ÈîÅÊàêÂäüÔºåËÄåÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÂ∞Ü‰ºöË¢´ÈòªÂ°ûËøõÂÖ•ÈòªÂ°ûÈòüÂàóÔºåÂΩìËé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãÈáäÊîæÈîÅÁöÑÊó∂ÂÄôÂ∞Ü‰ºöÂî§ÈÜíÈòªÂ°ûÈòüÂàó‰∏≠ÁöÑÁ∫øÁ®ãÔºåÈáäÊîæÈîÅÁöÑÊó∂ÂÄôÂàô‰ºöÊää state ÈáçÊñ∞ÁΩÆ‰∏∫ 0ÔºåÂêåÊó∂ÈáäÊîæÂΩìÂâçÁ∫øÁ®ãÁöÑÂç†Áî®„ÄÇ</p>
<p>‰º†ÈÄÅÈó®Ôºö<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14800883.html">JavaÔºöAQS Â∞èËÆ∞-2(ReentrantLock)</a></p>
</blockquote>
<h3 id="‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅ">‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÊÇ≤ËßÇÈîÅ</strong></p>
<ul>
<li>ÊÇ≤ËßÇÁöÑ‰º∞ËÆ°ÔºåÂæóÈò≤ÁùÄÂÖ∂ÂÆÉÁ∫øÁ®ãÊù•‰øÆÊîπÂÖ±‰∫´ÂèòÈáèÔºåÊàë‰∏ä‰∫ÜÈîÅ‰Ω†‰ª¨ÈÉΩÂà´ÊÉ≥ÊîπÔºåÊàëÊîπÂÆå‰∫ÜËß£ÂºÄÈîÅÔºå‰Ω†‰ª¨ÊâçÊúâÊú∫‰ºö„ÄÇ</li>
<li>synchronize/ReentrantLock ÊòØÂü∫‰∫é<strong>ÊÇ≤ËßÇÈîÅ</strong>ÁöÑÊÄùÊÉ≥</li>
</ul>
<p><strong>‰πêËßÇÈîÅ</strong></p>
<ul>
<li>ÊúÄ‰πêËßÇÁöÑ‰º∞ËÆ°Ôºå‰∏çÊÄïÂà´ÁöÑÁ∫øÁ®ãÊù•‰øÆÊîπÂÖ±‰∫´ÂèòÈáèÔºåÂ∞±ÁÆóÊîπ‰∫Ü‰πüÊ≤°ÂÖ≥Á≥ªÔºåÊàëÂêÉ‰∫èÁÇπÂÜç<strong>ÈáçËØï</strong>Âëó„ÄÇ</li>
<li>CAS ÊòØÂü∫‰∫é<strong>‰πêËßÇÈîÅ</strong>ÁöÑÊÄùÊÉ≥ÔºåCAS ‰ΩìÁé∞ÁöÑÊòØÊó†ÈîÅÂπ∂Âèë„ÄÅÊó†ÈòªÂ°ûÂπ∂ÂèëÔºåËØ∑‰ªîÁªÜ‰Ωì‰ºöËøô‰∏§Âè•ËØùÁöÑÊÑèÊÄù
<ul>
<li>Âõ†‰∏∫Ê≤°Êúâ‰ΩøÁî® synchronizeÔºåÊâÄ‰ª•Á∫øÁ®ã‰∏ç‰ºöÈô∑ÂÖ•ÈòªÂ°ûÔºåËøôÊòØÊïàÁéáÊèêÂçáÁöÑÂõ†Á¥†‰πã‰∏Ä</li>
<li>‰ΩÜÂ¶ÇÊûúÁ´û‰∫âÊøÄÁÉàÔºåÂèØ‰ª•ÊÉ≥Âà∞ÈáçËØïÂøÖÁÑ∂È¢ëÁπÅÂèëÁîüÔºåÂèçËÄåÊïàÁéá‰ºöÂèóÂΩ±Âìç</li>
</ul></li>
</ul>
<blockquote>
<p>Âú® Java‰∏≠ <code>java.util.concurrent.atomic</code> ÂåÖ‰∏ãÈù¢ÁöÑÂéüÂ≠êÂèòÈáèÁ±ªÂ∞±ÊòØ‰ΩøÁî®‰∫Ü‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÔºåÂç≥ÈÄöËøá CAS ÂÆûÁé∞Êó†ÈîÅ/Êó†ÈòªÂ°ûÂπ∂ÂèëÊù•‰øùÈöúÁ∫øÁ®ãÂÆâÂÖ®</p>
</blockquote>
<h3 id="Âπ∂ÂèëÁºñÁ®ã‰∏âË¶ÅÁ¥†">Âπ∂ÂèëÁºñÁ®ã‰∏âË¶ÅÁ¥†</h3>
<ol type="1">
<li><p><strong>ÂéüÂ≠êÊÄßÔºö</strong></p>
<p>ÂéüÂ≠êÊÄßÊåáÁöÑÊòØ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Êìç‰ΩúÔºåË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÂπ∂‰∏îÂú®ÊâßË°åÁöÑËøáÁ®ã‰∏≠‰∏çË¢´ÂÖ∂‰ªñÊìç‰ΩúÊâìÊñ≠ÔºåË¶Å‰πàÂ∞±ÂÖ®ÈÉ®ÈÉΩ‰∏çÊâßË°åÔºõ</p>
<p>ÂÖ∂‰øùËØÅÊåá‰ª§‰∏ç‰ºöÂèóÂà∞Á∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÂΩ±Âìç„ÄÇ</p></li>
<li><p><strong>ÂèØËßÅÊÄßÔºö</strong></p>
<p>ÂèØËßÅÊÄßÊåáÂ§ö‰∏™Á∫øÁ®ãÊìç‰Ωú‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÊó∂ÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Á∫øÁ®ãÂØπÂèòÈáèËøõË°å‰øÆÊîπÂêéÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂèØ‰ª•Á´ãÂç≥ÁúãÂà∞‰øÆÊîπÁöÑÁªìÊûúÔºõ</p>
<p>‰øùËØÅÊåá‰ª§‰∏ç‰ºöÂèó CPU ÁºìÂ≠òÁöÑÂΩ±Âìç„ÄÇ</p></li>
<li><p><strong>ÊúâÂ∫èÊÄßÔºö</strong></p>
<p>Âç≥Á®ãÂ∫èÁöÑÊâßË°åÈ°∫Â∫èÊåâÁÖß‰ª£Á†ÅÁöÑÂÖàÂêéÈ°∫Â∫èÊù•ÊâßË°åÔºõ</p>
<p>‰øùËØÅÊåá‰ª§‰∏ç‰ºöÂèó CPU Êåá‰ª§Âπ∂Ë°å‰ºòÂåñÁöÑÂΩ±Âìç„ÄÇ</p></li>
</ol>
<h3 id="volatile-ÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩúÁî®">volatile ÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩúÁî® <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>volatile ‰øùËØÅ<strong>ÂÜÖÂ≠òÂèØËßÅÊÄß</strong>Âíå<strong>Á¶ÅÊ≠¢Êåá‰ª§ÈáçÊéí</strong>Ôºå‰ΩÜÂÖ∂<strong>‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß</strong></p>
<blockquote>
<p>Âú® JDK1.2 ‰πãÂâçÔºå Java ÁöÑÂÜÖÂ≠òÊ®°ÂûãÂÆûÁé∞ÊÄªÊòØ‰ªé‰∏ªÂ≠òÔºàÂç≥ÂÖ±‰∫´ÂÜÖÂ≠òÔºâËØªÂèñÂèòÈáèÔºåÊòØ‰∏çÈúÄË¶ÅËøõË°åÁâπÂà´ÁöÑÊ≥®ÊÑèÁöÑ„ÄÇ</p>
<p>ËÄåÂú®ÂΩìÂâçÁöÑ Java ÂÜÖÂ≠òÊ®°Âûã‰∏ãÔºå<strong>Á∫øÁ®ãÂèØ‰ª•ÊääÂèòÈáè‰øùÂ≠òÂú®Êú¨Âú∞ÂÜÖÂ≠òÔºàÊØîÂ¶ÇÊú∫Âô®ÁöÑÂØÑÂ≠òÂô®Ôºâ‰∏≠ÔºåËÄå‰∏çÊòØÁõ¥Êé•Âú®‰∏ªÂ≠ò‰∏≠ËøõË°åËØªÂÜô</strong>„ÄÇËøôÂ∞±ÂèØËÉΩÈÄ†Êàê‚ºÄ‰∏™Á∫øÁ®ãÂú®‰∏ªÂ≠ò‰∏≠‰øÆÊîπ‰∫Ü‚ºÄ‰∏™ÂèòÈáèÁöÑÂÄºÔºåËÄåÂè¶Â§ñ‚ºÄ‰∏™Á∫øÁ®ãËøòÁªßÁª≠‰ΩøÁî®ÂÆÉÂú®ÂØÑÂ≠òÂô®‰∏≠ÁöÑÂèòÈáèÂÄºÁöÑÊã∑Ë¥ùÔºåÈÄ†Êàê<strong>Êï∞ÊçÆÁöÑ‰∏ç‚ºÄËá¥</strong>„ÄÇ</p>
<p>Ë¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂ∞±ÈúÄË¶ÅÊääÂèòÈáè<strong>Â£∞Êòé‰∏∫ volatile</strong>ÔºåËøôÂ∞±ÊåáÁ§∫ JVMÔºåËøô‰∏™ÂèòÈáèÊòØ‰∏çÁ®≥ÂÆöÁöÑÔºåÊØèÊ¨°<strong>‰ΩøÁî®ÂÆÉÈÉΩÂà∞‰∏ªÂ≠ò‰∏≠ËøõË°åËØªÂèñ</strong>„ÄÇ</p>
</blockquote>
<p><strong>ÂÜÖÂ≠òÂèØËßÅÊÄß</strong>ÔºöJMM ÂÜÖÂ≠òÊ®°ÂûãÁöÑÂèØËßÅÊÄßÔºåÊåáÁöÑÊòØÂΩì‰∏ªÂÜÖÂ≠òÂå∫Âüü‰∏≠ÁöÑÂÄºË¢´Êüê‰∏™Á∫øÁ®ãÂÜôÂÖ•Êõ¥ÊîπÂêéÔºå<strong>ÂÖ∂ÂÆÉÁ∫øÁ®ã‰ºöÈ©¨‰∏äÁü•ÊôìÊõ¥ÊîπÂêéÁöÑÂÄº</strong>ÔºåÂπ∂ÈáçÊñ∞ÂæóÂà∞Êõ¥ÊîπÂêéÁöÑÂÄº„ÄÇ</p>
<p><strong>Êåá‰ª§ÈáçÊéí</strong>ÔºöÂÖ≥‰∫éËøõË°åÊåá‰ª§ÈáçÊéíÂ∫èÔºåÈúÄË¶ÅÊª°Ë∂≥‰ª•‰∏ã‰∏§‰∏™Êù°‰ª∂Ôºö</p>
<ol type="1">
<li>Âú®ÂçïÁ∫øÁ®ãÁéØÂ¢É‰∏ã‰∏çËÉΩÊîπÂèòÁ®ãÂ∫èËøêË°åÁöÑÁªìÊûúÔºõ</li>
<li>Â≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÁöÑ‰∏çÂÖÅËÆ∏ÈáçÊéíÂ∫è</li>
</ol>
<blockquote>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöÈáçÊéíÂ∫è‰∏ç‰ºöÂΩ±ÂìçÂçïÁ∫øÁ®ãÁéØÂ¢ÉÁöÑÊâßË°åÁªìÊûúÔºå‰ΩÜÊòØ‰ºöÁ†¥ÂùèÂ§öÁ∫øÁ®ãÁöÑÊâßË°åËØ≠‰πâ</p>
</blockquote>
<p><strong>volatile ÈÄöËøáÂÜÖÂ≠òÂ±èÈöú‰øùËØÅ‰∫ÜÂÜÖÂ≠òÁöÑÂèØËßÅÊÄß‰∏éÁ¶ÅÊ≠¢‰∫ÜÊåá‰ª§ÈáçÊéíÂ∫èÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÂ§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÁ®ãÂ∫èÂá∫Áé∞‰π±Â∫èÊâßË°åÁöÑÁé∞Ë±°</strong></p>
<p>È¶ñÂÖà‰∫ÜËß£‰∏Ä‰∏™Ê¶ÇÂøµÔºå<strong>ÂÜÖÂ≠òÂ±èÈöú</strong>ÔºàMemory BarrierÔºâÂèàÁß∞ÂÜÖÂ≠òÊ†ÖÊ†èÔºåÊòØ‰∏Ä‰∏™ CPU Êåá‰ª§ÔºåÂÆÉÁöÑ‰ΩúÁî®Êúâ‰∏§‰∏™Ôºö</p>
<ul>
<li><strong>‰øùËØÅÁâπÂÆöÊìç‰ΩúÁöÑÈ°∫Â∫èÔºöÁ¶ÅÊ≠¢‰∫ÜÊåá‰ª§ÈáçÊéí</strong></li>
<li><strong>‰øùËØÅÊüê‰∫õÂèòÈáèÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß</strong>ÔºàÂà©Áî®ËØ•ÁâπÊÄßÂÆûÁé∞ volatile ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄßÔºâ</li>
</ul>
<p><strong>ËÄå volatile ÁöÑÂ∫ïÂ±ÇÂÆûÁé∞Â∞±ÊòØÂÜÖÂ≠òÂ±èÈöú</strong>Ôºö</p>
<ul>
<li>ÂØπ volatile ÂèòÈáèÁöÑÂÜôÊåá‰ª§<strong>Âêé</strong>‰ºö<strong>Âä†ÂÖ•ÂÜôÂ±èÈöú</strong>Ôºö
<ul>
<li>ÂÜôÂ±èÈöúÔºàsfenceÔºâ‰øùËØÅÂú®ËØ•Â±èÈöú‰πãÂâçÁöÑÔºåÂØπÂÖ±‰∫´ÂèòÈáèÁöÑÊîπÂä®ÔºåÈÉΩÂêåÊ≠•Âà∞‰∏ªÂ≠òÂΩì‰∏≠</li>
<li>Â±èÈöú‰ºöÁ°Æ‰øùÊåá‰ª§ÈáçÊéíÂ∫èÊó∂Ôºå‰∏ç‰ºöÂ∞ÜÂÜôÂ±èÈöú‰πãÂâçÁöÑ‰ª£Á†ÅÊéíÂú®ÂÜôÂ±èÈöú‰πãÂêé</li>
</ul></li>
<li>ÂØπ volatile ÂèòÈáèÁöÑËØªÊåá‰ª§<strong>Ââç</strong>‰ºö<strong>Âä†ÂÖ•ËØªÂ±èÈöú</strong>Ôºö
<ul>
<li>ËØªÂ±èÈöúÔºàlfenceÔºâ‰øùËØÅÂú®ËØ•Â±èÈöú‰πãÂêéÔºåÂØπÂÖ±‰∫´ÂèòÈáèÁöÑËØªÂèñÔºåÂä†ËΩΩÁöÑÊòØ‰∏ªÂ≠ò‰∏≠ÊúÄÊñ∞Êï∞ÊçÆ</li>
<li>ËØªÂ±èÈöú‰ºöÁ°Æ‰øùÊåá‰ª§ÈáçÊéíÂ∫èÊó∂Ôºå‰∏ç‰ºöÂ∞ÜËØªÂ±èÈöú‰πãÂêéÁöÑ‰ª£Á†ÅÊéíÂú®ËØªÂ±èÈöú‰πãÂâç</li>
</ul></li>
<li>‰ΩÜÊòØ<strong>‰∏çËÉΩËß£ÂÜ≥Êåá‰ª§‰∫§ÈîôÈóÆÈ¢ò</strong>
<ul>
<li>ÂÜôÂ±èÈöú‰ªÖ‰ªÖÊòØ‰øùËØÅ‰πãÂêéÁöÑËØªËÉΩÂ§üËØªÂà∞ÊúÄÊñ∞ÁöÑÁªìÊûúÔºå‰ΩÜ‰∏çËÉΩ‰øùËØÅËØªË∑ëÂà∞ÂÆÉÂâçÈù¢Âéª</li>
<li>ËÄåÊúâÂ∫èÊÄßÁöÑ‰øùËØÅ‰πüÂè™ÊòØ‰øùËØÅ‰∫ÜÊú¨Á∫øÁ®ãÂÜÖÁõ∏ÂÖ≥‰ª£Á†Å‰∏çË¢´ÈáçÊéíÂ∫è</li>
</ul></li>
</ul>
<blockquote>
<p><strong>Ëøõ‰∏ÄÊ≠•ËØ¥Êòé</strong>Ôºö</p>
<p>Áî±‰∫éÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÈÉΩËÉΩÊâßË°åÊåá‰ª§ÈáçÊéíÁöÑ‰ºòÂåñÔºåÂ¶ÇÊûúÂú®Êåá‰ª§Èó¥ÊèíÂÖ•‰∏ÄÊù° Memory Barrier Âàô‰ºöÂëäËØâÁºñËØëÂô®ÂíåCPUÔºå‰∏çÁÆ°‰ªÄ‰πàÊåá‰ª§ÈÉΩ‰∏çËÉΩÂíåËøôÊù° Memory Barrier Êåá‰ª§ÈáçÊéíÂ∫èÔºå‰πüÂ∞±ÊòØËØ¥<strong>ÈÄöËøáÊèíÂÖ•ÂÜÖÂ≠òÂ±èÈöúÁ¶ÅÊ≠¢Âú®ÂÜÖÂ≠òÂ±èÈöúÂâçÂêéÁöÑÊåá‰ª§ÊâßË°åÈáçÊéíÂ∫è‰ºòÂåñ</strong>„ÄÇ ÂÜÖÂ≠òÂ±èÈöú<strong>Âè¶Â§ñ‰∏Ä‰∏™‰ΩúÁî®ÊòØÂà∑Êñ∞Âá∫ÂêÑÁßç CPU ÁöÑÁºìÂ≠òÊï∞</strong>ÔºåÂõ†Ê≠§‰ªª‰Ωï CPU ‰∏äÁöÑÁ∫øÁ®ãÈÉΩËÉΩËØªÂèñÂà∞Ëøô‰∫õÊï∞ÊçÆÁöÑÊúÄÊñ∞ÁâàÊú¨„ÄÇ</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ÂÜÖÂ≠òÂ±èÈöú.png" alt="ÂÜÖÂ≠òÂ±èÈöú"></p>
</blockquote>
<h3 id="synchronized-Âíå-volatile-ÁöÑÂå∫Âà´">synchronized Âíå volatile ÁöÑÂå∫Âà´ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>synchronizedÂÖ≥ÈîÆÂ≠óÂíåvolatileÂÖ≥ÈîÆÂ≠óÊØîËæÉ</p>
<ul>
<li><strong>ÊÄßËÉΩÊñπÈù¢</strong>Ôºö<strong>volatileÂÖ≥ÈîÆÂ≠óÊòØÁ∫øÁ®ãÂêåÊ≠•ÁöÑËΩªÈáèÁ∫ßÂÆûÁé∞</strong>ÔºåÊâÄ‰ª•volatileÊÄßËÉΩËÇØÂÆöÊØîsynchronizedÂÖ≥ÈîÆÂ≠óË¶ÅÂ•ΩÔºõÂõ†‰∏∫ÔºöÂ§öÁ∫øÁ®ãËÆøÈóÆvolatileÂÖ≥ÈîÆÂ≠ó‰∏ç‰ºöÂèëÁîüÈòªÂ°ûÔºåËÄåsynchronizedÂÖ≥ÈîÆÂ≠óÂèØËÉΩ‰ºöÂèëÁîüÈòªÂ°û</li>
<li><strong>‰ΩúÁî®ËåÉÂõ¥</strong>Ôºövolatile ÂÖ≥ÈîÆÂ≠óÂè™ËÉΩÁî®‰∫éÂèòÈáèËÄå synchronized ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•‰øÆÈ•∞ÊñπÊ≥ï‰ª•Âèä‰ª£Á†ÅÂùó„ÄÇ</li>
<li>synchronized ÂÖ≥ÈîÆÂ≠óÂú® Java 1.6 ‰πãÂêéËøõË°å‰∫Ü‰∏Ä‰∫õ‰ºòÂåñÔºåÂ¶ÇÔºöÂºïÂÖ•ÁöÑÂÅèÂêëÈîÅÂíåËΩªÈáèÁ∫ßÈîÅÁ≠âÔºå‰ªéËÄåÂáèÂ∞ëËé∑ÂæóÈîÅÂíåÈáäÊîæÈîÅÂ∏¶Êù•ÁöÑÊÄßËÉΩÊ∂àËÄóÔºåÂÆûÈôÖÂºÄÂèë‰∏≠‰ΩøÁî® synchronized ÂÖ≥ÈîÆÂ≠óÁöÑÂú∫ÊôØËøòÊòØÊõ¥Â§ö‚ºÄ‰∫õ„ÄÇ</li>
<li>volatileÂÖ≥ÈîÆÂ≠óËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÔºå‰ΩÜ<strong>‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂéüÂ≠êÊÄß</strong>„ÄÇ synchronizedÂÖ≥ÈîÆÂ≠ó‰∏§ËÄÖÈÉΩËÉΩ‰øùËØÅ„ÄÇ</li>
<li><strong>‰ΩúÁî®ÊñπÈù¢</strong>ÔºövolatileÂÖ≥ÈîÆÂ≠ó‰∏ªË¶ÅÁî®‰∫éËß£ÂÜ≥ÂèòÈáèÂú®Â§ö‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑ<strong>ÂèØËßÅÊÄß</strong>ÔºåËÄå synchronized ÂÖ≥ÈîÆÂ≠óËß£ÂÜ≥ÁöÑÊòØÂ§ö‰∏™Á∫øÁ®ã‰πãÈó¥ËÆøÈóÆËµÑÊ∫êÁöÑ<strong>ÂêåÊ≠•ÊÄß</strong></li>
</ul>
<h3 id="Âçï‰æãÊ®°ÂºèÂèåÈáçÊ£ÄÊü•ÈîÅdcl">Âçï‰æãÊ®°ÂºèÔºöÂèåÈáçÊ£ÄÊü•ÈîÅDCL <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>DCLÔºöDouble Check Lock</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SingletonDemoÔºàÂçï‰æãÊ®°ÂºèÔºâ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ËøôÈáåÂøÖÈ°ªÂä†‰∏ävolatileÂÖ≥ÈîÆÂ≠ó</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton INSTANCE = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Âçï‰æãÊ®°ÂºèËé∑ÂèñÂØπË±°‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (INSTANCE != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> INSTANCE;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ÂèåÈáçÊ£ÄÊü•Âä†ÈîÅÂ§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ã‰ºöÂá∫Áé∞ÔºöÁ∫øÁ®ãAÂ∑≤ÁªèÊâßË°åÂà∞‚òÜÂ§ÑÔºåÊ≤°ÊúâÂÆåÊàêÂàùÂßãÂåñÔºõÂàôÁ∫øÁ®ãBËøòÊòØËÉΩÂà∞ËøôÈáå</span></span><br><span class="line">        <span class="comment">// ÁÑ∂ÂêéÂú®Á∫øÁ®ãAÂÆåÊàêÂàùÂßãÂåñÂêéÔºåBËøòÊòØËÉΩÊãøÂà∞ËøôÊääÈîÅÔºåÂõ†Ê≠§ÂêéÁª≠Ë¶ÅÂú®ËøõË°å‰∏ÄÊ¨°nullÁöÑÂà§Êñ≠</span></span><br><span class="line">        <span class="keyword">synchronized</span> (Singleton.class)&#123; 	</span><br><span class="line">            <span class="keyword">if</span> (INSTANCE != <span class="keyword">null</span>) &#123; <span class="comment">// t2</span></span><br><span class="line">                <span class="keyword">return</span> INSTANCE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ‚òÜÊ≠§Êó∂ÊâçÂºÄÂßãÂàùÂßãÂåñ</span></span><br><span class="line">            INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">            <span class="keyword">return</span> INSTANCE;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºö<strong>instance ÂøÖÈ°ª‰ΩøÁî® volatile ÂÖ≥ÈîÆËØçËøõË°å‰øÆÈ•∞</strong>ÔºåÁêÜÁî±Â¶Ç‰∏ãÔºöÂõ†‰∏∫<strong>Êåá‰ª§ÈáçÊéí</strong>ÁöÑÂ≠òÂú®ÔºåËÄåÂä†ÂÖ• volatile ÂèØ‰ª•Á¶ÅÊ≠¢Êåá‰ª§ÈáçÊéí</p>
<p>ÂéüÂõ†ÊòØÂú®Êüê‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÂà∞Á¨¨‰∏ÄÊ¨°Ê£ÄÊµãÁöÑÊó∂ÂÄôÔºåËØªÂèñÂà∞ instance ‰∏ç‰∏∫ nullÔºåËÄåÁî±‰∫éÊåá‰ª§ÈáçÊéíÊìç‰ΩúÔºåÊ≠§Êó∂ instance ÁöÑÂºïÁî®ÂØπË±°ÂèØËÉΩ<strong>Ê≤°ÊúâÂÆåÊàêÂÆû‰æãÂåñ</strong>„ÄÇ</p>
<blockquote>
<p>Ëøõ‰∏ÄÊ≠•ËØ¥ÊòéÔºö</p>
<p>Âõ†‰∏∫ <code>instance = new Singleton()</code>ÔºõÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ã‰∏âÊ≠•ËøõË°åÂÆåÊàêÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">memory = allocate(); 	<span class="comment">// 1„ÄÅÂàÜÈÖçÂØπË±°ÂÜÖÂ≠òÁ©∫Èó¥</span></span><br><span class="line">instance(memory); 		<span class="comment">// 2„ÄÅÂàùÂßãÂåñÂØπË±°</span></span><br><span class="line">instance = memory; 		<span class="comment">// 3„ÄÅËÆæÁΩÆinstanceÊåáÂêëÂàöÂàöÂàÜÈÖçÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåÊ≠§Êó∂instance != null</span></span><br></pre></td></tr></table></figure>
<p>‰ΩÜÊòØÊàë‰ª¨ÈÄöËøá‰∏äÈù¢ÁöÑ‰∏â‰∏™Ê≠•È™§ÔºåËÉΩÂ§üÂèëÁé∞ÔºåÊ≠•È™§2 Âíå Ê≠•È™§3‰πãÈó¥<strong>‰∏çÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ª</strong>ÔºåËÄå‰∏îÊó†ËÆ∫ÈáçÊéíÂâçËøòÊòØÈáçÊéíÂêéÔºåÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûúÂú®ÂçïÁ∫øÁ®ã‰∏≠Âπ∂Ê≤°ÊúâÊîπÂèòÔºåÂõ†Ê≠§ËøôÁßçÈáçÊéí‰ºòÂåñÊòØÂÖÅËÆ∏ÁöÑ„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">memory = allocate(); 	<span class="comment">// 1„ÄÅÂàÜÈÖçÂØπË±°ÂÜÖÂ≠òÁ©∫Èó¥</span></span><br><span class="line">instance = memory; 		<span class="comment">// 3„ÄÅËÆæÁΩÆinstanceÊåáÂêëÂàöÂàöÂàÜÈÖçÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåÊ≠§Êó∂instance != nullÔºå‰ΩÜÊòØÂØπË±°ËøòÊ≤°ÊúâÂàùÂßãÂåñÂÆåÊàê</span></span><br><span class="line">instance(memory); 		<span class="comment">// 2„ÄÅÂàùÂßãÂåñÂØπË±°</span></span><br></pre></td></tr></table></figure>
<p>ËøôÊ†∑Â∞±‰ºöÈÄ†Êàê‰ªÄ‰πàÈóÆÈ¢òÂë¢Ôºü<strong>Âá∫Áé∞‰∫ÜÂÖàËµãÂÄºÂÜçËøõË°åÊûÑÈÄ†ÁöÑÊÉÖÂÜµ</strong></p>
<p><strong>ÊâÄ‰ª•ÂΩì‰∏ÄÊù°Á∫øÁ®ãËÆøÈóÆinstance‰∏ç‰∏∫nullÊó∂ÔºåÁî±‰∫éinstanceÂÆû‰æãÊú™ÂøÖÂ∑≤ÂàùÂßãÂåñÂÆåÊàêÔºåËøôÂ∞±ÈÄ†Êàê‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈóÆÈ¢ò</strong></p>
<p>ÊâÄ‰ª•ÈúÄË¶ÅÂºïÂÖ• volatileÔºåÊù•‰øùËØÅÂá∫Áé∞Êåá‰ª§ÈáçÊéíÁöÑÈóÆÈ¢òÔºå‰ªéËÄå‰øùËØÅÂçï‰æãÊ®°ÂºèÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÊÄßÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton INSTANCE = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="threadlocal-ÁÆÄ‰ªã">ThreadLocal ÁÆÄ‰ªã <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂàõÂª∫ÁöÑÂèòÈáèÊòØÂèØ‰ª•Ë¢´‰ªª‰Ωï‚ºÄ‰∏™Á∫øÁ®ãËÆøÈóÆÂπ∂‰øÆÊîπÁöÑ„ÄÇ Â¶ÇÊûúÊÉ≥<strong>ÂÆûÁé∞ÊØè‚ºÄ‰∏™Á∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑ‰∏ìÂ±ûÊú¨Âú∞ÂèòÈáè</strong>ËØ•Â¶Ç‰ΩïËß£ÂÜ≥Âë¢Ôºü</p>
<p>JDK ‰∏≠Êèê‰æõÁöÑ ThreadLocal Á±ªÊ≠£ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p><strong>ThreadLocal Á±ª‰∏ªË¶ÅËß£ÂÜ≥ÁöÑÂ∞±ÊòØËÆ©ÊØè‰∏™Á∫øÁ®ãÁªëÂÆöËá™Â∑±ÁöÑÂÄº</strong>„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÂàõÂª∫‰∫Ü‚ºÄ‰∏™ ThreadLocal ÂèòÈáèÔºåÈÇ£‰πàËÆøÈóÆËøô‰∏™ÂèòÈáèÁöÑÊØè‰∏™Á∫øÁ®ãÈÉΩ‰ºöÊúâËøô‰∏™ÂèòÈáèÁöÑÊú¨Âú∞ÂâØÊú¨ÔºåËøô‰πüÊòØ ThreadLocal ÂèòÈáèÂêçÁöÑÁî±Êù•„ÄÇ‰ªñ‰ª¨ÂèØ‰ª•‰ΩøÁî® <code>get()</code> Âíå <code>set()</code> ÊñπÊ≥ïÊù•Ëé∑ÂèñÈªòËÆ§ÂÄºÊàñÂ∞ÜÂÖ∂ÂÄºÊõ¥Êîπ‰∏∫ÂΩìÂâçÁ∫øÁ®ãÊâÄÂ≠òÁöÑÂâØÊú¨ÁöÑÂÄºÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ</p>
<blockquote>
<p>ÂÜç‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºöÊØîÂ¶ÇÊúâ‰∏§‰∏™‰∫∫ÂéªÂÆùÂ±ãÊî∂ÈõÜÂÆùÁâ©ÔºåËøô‰∏§‰∏™ÂÖ±Áî®‚ºÄ‰∏™Ë¢ãÂ≠êÁöÑËØùËÇØÂÆö‰ºö‰∫ßÁîü‰∫âÊâßÔºå‰ΩÜÊòØÁªô‰ªñ‰ª¨‰∏§‰∏™‰∫∫ÊØè‰∏™‰∫∫ÂàÜÈÖç‚ºÄ‰∏™Ë¢ãÂ≠êÁöÑËØùÂ∞±‰∏ç‰ºöÂá∫Áé∞ËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇÂ¶ÇÊûúÊääËøô‰∏§‰∏™‰∫∫ÊØî‰ΩúÁ∫øÁ®ãÁöÑËØùÔºåÈÇ£‰πà ThreadLocal Â∞±ÊòØÁî®Êù•ÈÅøÂÖçËøô‰∏§‰∏™Á∫øÁ®ãÁ´û‰∫âÁöÑ„ÄÇ</p>
</blockquote>
<h3 id="threadlocal-‰ΩøÁî®">ThreadLocal ‰ΩøÁî®</h3>
<blockquote>
<p>‰º†ÈÄÅÈó®Ôºö<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14437915.html">JavaÔºöThreadLocalÂ∞èËÆ∞Ôºö4. ThreadLocalÁöÑÊ†∏ÂøÉÊñπÊ≥ïÊ∫êÁ†Å</a></p>
</blockquote>
<p>Âú®‰ΩøÁî®‰πãÂâç,Êàë‰ª¨ÂÖàÊù•ËÆ§ËØÜÂá†‰∏™ThreadLocalÁöÑÂ∏∏Áî®ÊñπÊ≥ï</p>
<table>
<thead>
<tr class="header">
<th>ÊñπÊ≥ïÂ£∞Êòé</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ThreadLocal()</code></td>
<td>ÂàõÂª∫ThreadLocalÂØπË±°</td>
</tr>
<tr class="even">
<td><code>public void set( T value)</code></td>
<td>ËÆæÁΩÆÂΩìÂâçÁ∫øÁ®ãÁªëÂÆöÁöÑÂ±ÄÈÉ®ÂèòÈáè</td>
</tr>
<tr class="odd">
<td><code>public T get()</code></td>
<td>Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁªëÂÆöÁöÑÂ±ÄÈÉ®ÂèòÈáè</td>
</tr>
<tr class="even">
<td><code>public void remove()</code></td>
<td>ÁßªÈô§ÂΩìÂâçÁ∫øÁ®ãÁªëÂÆöÁöÑÂ±ÄÈÉ®ÂèòÈáè</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ÂêéÁª≠ÁöÑÊñπÊ≥ïËøôÈáåÈÉΩ‰∏ç‰∏äÊ∫êÁ†ÅÔºåËØ¶ËßÅ‰∏ìÈó®ÁöÑÁ¨îËÆ∞</p>
</blockquote>
<p><strong>setÊñπÊ≥ï</strong></p>
<p>‰ª£Á†ÅÊâßË°åÊµÅÁ®ãÔºö</p>
<ol type="1">
<li>È¶ñÂÖàËé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÔºåÂπ∂Ê†πÊçÆÂΩìÂâçÁ∫øÁ®ãËé∑Âèñ‰∏Ä‰∏™ ThreadLocalMap</li>
<li>Â¶ÇÊûúËé∑ÂèñÁöÑ ThreadLocalMap ‰∏ç‰∏∫Á©∫ÔºåÂàôÂ∞ÜÂèÇÊï∞ËÆæÁΩÆÂà∞ ThreadLocalMap ‰∏≠ÔºàÂΩìÂâç ThreadLocal ÁöÑÂºïÁî®‰Ωú‰∏∫keyÔºâ</li>
<li>Â¶ÇÊûú ThreadLocalMap ‰∏∫Á©∫ÔºåÂàôÁªôËØ•Á∫øÁ®ãÂàõÂª∫ ThreadLocalMapÔºåÂπ∂ËÆæÁΩÆÂàùÂßãÂÄº</li>
</ol>
<p><strong>getÊñπÊ≥ï</strong></p>
<ol type="1">
<li>È¶ñÂÖàËé∑ÂèñÂΩìÂâçÁ∫øÁ®ã</li>
<li>Ê†πÊçÆÂΩìÂâçÁ∫øÁ®ãËé∑Âèñ‰∏Ä‰∏™Map</li>
<li>Â¶ÇÊûúËé∑ÂèñÁöÑMap‰∏ç‰∏∫Á©∫ÔºåÂàôÂú®Map‰∏≠‰ª•ThreadLocalÁöÑÂºïÁî®‰Ωú‰∏∫keyÊù•Âú®Map‰∏≠Ëé∑ÂèñÂØπÂ∫îÁöÑvalue eÔºåÂê¶ÂàôËΩ¨Âà∞5</li>
<li>Â¶ÇÊûúe‰∏ç‰∏∫nullÔºåÂàôËøîÂõû e.valueÔºåÂê¶ÂàôËΩ¨Âà∞ 5</li>
<li>Map‰∏∫Á©∫ÊàñËÄÖe‰∏∫Á©∫ÔºåÂàôÈÄöËøá initialValue ÂáΩÊï∞Ëé∑ÂèñÂàùÂßãÂÄº valueÔºåÁÑ∂ÂêéÁî® ThreadLocal ÁöÑÂºïÁî®Âíå value ‰Ωú‰∏∫firstKey Âíå firstValue ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑMap</li>
</ol>
<p>ÊÄªÁªì: <strong>ÂÖàËé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁöÑ ThreadLocalMap ÂèòÈáèÔºåÂ¶ÇÊûúÂ≠òÂú®ÂàôËøîÂõûÂÄºÔºå‰∏çÂ≠òÂú®ÂàôÂàõÂª∫Âπ∂ËøîÂõûÂàùÂßãÂÄº„ÄÇ</strong></p>
<p><strong>removeÊñπÊ≥ï</strong></p>
<ol type="1">
<li>È¶ñÂÖàËé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÔºåÂπ∂Ê†πÊçÆÂΩìÂâçÁ∫øÁ®ãËé∑Âèñ‰∏Ä‰∏™Map</li>
<li>Â¶ÇÊûúËé∑ÂèñÁöÑMap‰∏ç‰∏∫Á©∫ÔºåÂàôÁßªÈô§ÂΩìÂâçThreadLocalÂØπË±°ÂØπÂ∫îÁöÑentry</li>
</ol>
<p><strong>initialValueÊñπÊ≥ï</strong></p>
<blockquote>
<p>ËøôÈáåÂ∞±‰∏ç‰∏äÊ∫êÁ†ÅÔºåËØ¶ËßÅ‰∏ìÈó®ÁöÑÁ¨îËÆ∞</p>
</blockquote>
<p>Ê≠§ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØ ËøîÂõûËØ•Á∫øÁ®ãÂ±ÄÈÉ®ÂèòÈáèÁöÑÂàùÂßãÂÄº„ÄÇ</p>
<ol type="1">
<li>Ëøô‰∏™ÊñπÊ≥ïÊòØ‰∏Ä‰∏™Âª∂ËøüË∞ÉÁî®ÊñπÊ≥ïÔºå‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†ÅÊàë‰ª¨ÂæóÁü•ÔºåÂú®setÊñπÊ≥ïËøòÊú™Ë∞ÉÁî®ËÄåÂÖàË∞ÉÁî®‰∫ÜgetÊñπÊ≥ïÊó∂ÊâçÊâßË°åÔºåÂπ∂‰∏î‰ªÖÊâßË°å1Ê¨°„ÄÇ</li>
<li>Ëøô‰∏™ÊñπÊ≥ïÁº∫ÂÆûÁé∞Áõ¥Êé•ËøîÂõû‰∏Ä‰∏™<code>null</code>„ÄÇ</li>
<li>Â¶ÇÊûúÊÉ≥Ë¶Å‰∏Ä‰∏™Èô§null‰πãÂ§ñÁöÑÂàùÂßãÂÄºÔºåÂèØ‰ª•ÈáçÂÜôÊ≠§ÊñπÊ≥ï„ÄÇÔºàÂ§áÊ≥®Ôºö ËØ•ÊñπÊ≥ïÊòØ‰∏Ä‰∏™<code>protected</code>ÁöÑÊñπÊ≥ïÔºåÊòæÁÑ∂ÊòØ‰∏∫‰∫ÜËÆ©Â≠êÁ±ªË¶ÜÁõñËÄåËÆæËÆ°ÁöÑÔºâ</li>
</ol>
<p><strong>ÂÆû‰æã‰ª£Á†Å</strong>Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ ThreadLocal ÂØπË±°</span></span><br><span class="line">    ThreadLocal&lt;String&gt; tl = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tl.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Â∞ÜÂèòÈáèÁªëÂÆöÂà∞ThreadLocal‰∏≠</span></span><br><span class="line">        tl.set(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Demo01 demo = <span class="keyword">new</span> Demo01();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                <span class="comment">// ÊØè‰∏™Á∫øÁ®ãÔºöÂ≠ò‰∏Ä‰∏™ÂèòÈáèÔºåËøá‰∏Ä‰ºöÂÑøÂèñÂá∫Ëøô‰∏™ÂèòÈáè</span></span><br><span class="line">                String name = Thread.currentThread().getName();</span><br><span class="line">                demo.setContent(name + <span class="string">&quot;ÁöÑÊï∞ÊçÆ&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;------&quot;</span>);</span><br><span class="line">                System.out.println(name + <span class="string">&quot;---&gt;&quot;</span> + demo.getContent());</span><br><span class="line">            &#125;);</span><br><span class="line">            thread.setName(<span class="string">&quot;Á∫øÁ®ã&quot;</span> + i);</span><br><span class="line">            thread.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="threadlocal-ÁªìÊûÑ">ThreadLocal ÁªìÊûÑ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ‰∏éÊ≠§Á∫øÁ®ãÊúâÂÖ≥ÁöÑThreadLocalÂÄºÔºåÁî±ThreadLocalÁ±ªÁª¥Êä§</span></span><br><span class="line">    ThreadLocal.ThreadLocalMap threadLocals = <span class="keyword">null</span>;</span><br><span class="line">    ThreadLocal.ThreadLocalMap inheritableThreadLocals = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JDK8 ThreadLocal ÁöÑËÆæËÆ°ÊòØÔºö<strong>ÊØè‰∏™ Thread Áª¥Êä§‰∏Ä‰∏™ ThreadLocalMap ÂìàÂ∏åË°®ÔºåËøô‰∏™ÂìàÂ∏åË°®ÁöÑ key ÊòØ ThreadLocal ÂÆû‰æãÊú¨Ë∫´Ôºå value ÊâçÊòØÁúüÊ≠£Ë¶ÅÂ≠òÂÇ®ÁöÑÂÄº Object</strong>„ÄÇ</p>
<ol type="1">
<li>ÊØè‰∏™ Thread Á∫øÁ®ãÂÜÖÈÉ®ÈÉΩÊúâ‰∏Ä‰∏™ ThreadLocalMap</li>
<li>Map ÈáåÈù¢Â≠òÂÇ® ThreadLocal ÂØπË±°ÔºàkeyÔºâÂíåÁ∫øÁ®ãÁöÑÂèòÈáèÂâØÊú¨ÔºàvalueÔºâ</li>
<li>Thread ÂÜÖÈÉ®ÁöÑ Map ÊòØÁî± ThreadLocal Áª¥Êä§ÁöÑÔºåÁî± ThreadLocal Ë¥üË¥£Âêë map Ëé∑ÂèñÂíåËÆæÁΩÆÁ∫øÁ®ãÁöÑÂèòÈáèÂÄº„ÄÇ</li>
<li>ÂØπ‰∫é‰∏çÂêåÁöÑÁ∫øÁ®ãÔºåÊØèÊ¨°Ëé∑ÂèñÂâØÊú¨ÂÄºÊó∂ÔºåÂà´ÁöÑÁ∫øÁ®ãÂπ∂‰∏çËÉΩËé∑ÂèñÂà∞ÂΩìÂâçÁ∫øÁ®ãÁöÑÂâØÊú¨ÂÄºÔºåÂΩ¢Êàê‰∫ÜÂâØÊú¨ÁöÑÈöîÁ¶ªÔºå‰∫í‰∏çÂπ≤Êâ∞„ÄÇ</li>
</ol>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Áé∞Âú®ThreadLocalËÆæËÆ°.PNG" alt="Áé∞Âú®ThreadLocalËÆæËÆ°"></p>
<p><strong>ËøôÊ†∑ËÆæËÆ°ÁöÑÂ•ΩÂ§Ñ</strong>ÔºöËøô‰∏™ËÆæËÆ°‰∏éÊàë‰ª¨‰∏ÄÂºÄÂßãËØ¥ÁöÑËÆæËÆ°ÔºàÂØπÊØè‰∏™ ThreadLocal Á±ªÂàõÂª∫‰∏Ä‰∏™ MapÔºåThread‰Ωú‰∏∫KeyÔºåÂ≠òÂÇ®ÁöÑÂèòÈáè‰Ωú‰∏∫valueÔºâÂàöÂ•ΩÁõ∏ÂèçÔºåËøôÊ†∑ËÆæËÆ°ÊúâÂ¶Ç‰∏ã‰∏§‰∏™‰ºòÂäøÔºö</p>
<ol type="1">
<li>ËøôÊ†∑ËÆæËÆ°‰πãÂêéÊØè‰∏™<code>Map</code>Â≠òÂÇ®ÁöÑ<code>Entry</code>Êï∞ÈáèÂ∞±‰ºöÂèòÂ∞ëÔºåÂõ†‰∏∫‰πãÂâçÁöÑÂ≠òÂÇ®Êï∞ÈáèÁî±<code>Thread</code>ÁöÑÊï∞ÈáèÂÜ≥ÂÆöÔºåÁé∞Âú®ÊòØÁî±<code>ThreadLocal</code>ÁöÑÊï∞ÈáèÂÜ≥ÂÆöÔºåÂÆûÈôÖÂºÄÂèë‰∏≠Ôºå<code>ThreadLocal</code>ÁöÑÊï∞ÈáèÂæÄÂæÄÂ∞ë‰∫é<code>Thread</code>ÁöÑÊï∞ÈáèÔºõ</li>
<li>ÂΩì<code>Thread</code>ÈîÄÊØÅ‰πãÂêéÔºåÂØπÂ∫îÁöÑ<code>ThreadLocalMap</code>‰πü‰ºöÈöè‰πãÈîÄÊØÅÔºåËÉΩÂáèÂ∞ëÂÜÖÂ≠òÁöÑ‰ΩøÁî®„ÄÇ</li>
</ol>
<blockquote>
<p>Ëøõ‰∏ÄÊ≠•ÂØπ ThreadLocal ÁöÑÁªìÊûÑËøõË°åÂàÜÊûêÔºö</p>
<p>ThreadLocalMap ÊòØ ThreadLocal ÁöÑÈùôÊÄÅÂÜÖÈÉ®Á±ªÔºåÊ≤°ÊúâÂÆûÁé∞ Map Êé•Âè£ÔºåÁî®Áã¨Á´ãÁöÑÊñπÂºèÂÆûÁé∞‰∫Ü Map ÁöÑÂäüËÉΩÔºåÂÖ∂ÂÜÖÈÉ®ÁöÑ Entry ‰πüÊòØÁã¨Á´ãÂÆûÁé∞„ÄÇ</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ThreadLocalMapÂü∫Êú¨ÁªìÊûÑ.PNG" alt="ThreadLocalMapÂü∫Êú¨ÁªìÊûÑ"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLocalMap</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">// ÂàùÂßãÂÆπÈáè:ÂøÖÈ°ªÊòØ2ÁöÑÊï¥Ê¨°ÂπÇ</span></span><br><span class="line">    	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INITIAL_CAPACITY = <span class="number">16</span>;</span><br><span class="line">       <span class="comment">// Â≠òÊîæÊï∞ÊçÆÁöÑtableÔºåEntryÁ±ªÁöÑÂÆö‰πâÂú®‰∏ãÈù¢ÂàÜÊûê,ÂêåÊ†∑ÔºåÊï∞ÁªÑÈïøÂ∫¶ÂøÖÈ°ªÊòØ2ÁöÑÂÜ•„ÄÇ</span></span><br><span class="line">       <span class="keyword">private</span> Entry[] table;</span><br><span class="line">       <span class="comment">// Êï∞ÁªÑÈáåÈù¢entrysÁöÑ‰∏™Êï∞ÔºåÂèØ‰ª•Áî®‰∫éÂà§Êñ≠tableÂΩìÂâç‰ΩøÁî®ÈáèÊòØÂê¶Ë∂ÖËøáË¥üËΩΩÂõ†Â≠ê„ÄÇ</span></span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">       <span class="comment">// ËøõË°åÊâ©ÂÆπÁöÑÈòàÂÄºÔºåË°®‰ΩøÁî®ÈáèÂ§ß‰∫éÂÆÉÁöÑÊó∂ÂÄôËøõË°åÊâ©ÂÆπ„ÄÇ</span></span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">int</span> threshold; <span class="comment">// Default to 0</span></span><br><span class="line">       <span class="comment">// ÈòàÂÄºËÆæÁΩÆ‰∏∫ÈïøÂ∫¶ÁöÑ2/3</span></span><br><span class="line">       <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setThreshold</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">           threshold = len * <span class="number">2</span> / <span class="number">3</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * EntryÁªßÊâø WeakReferenceÔºåÂπ∂‰∏îÁî®ThreadLocal‰Ωú‰∏∫keyÔºå</span></span><br><span class="line"><span class="comment">      * Â¶ÇÊûúkey‰∏∫null(entry.get()==null)ÔºåÊÑèÂë≥ÁùÄkey‰∏çÂÜçË¢´ÂºïÁî®Ôºå</span></span><br><span class="line"><span class="comment">      * Âõ†Ê≠§ËøôÊó∂ÂÄôentry‰πüÂèØ‰ª•‰ªétable‰∏≠Âà†Èô§</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">       <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span> <span class="keyword">extends</span> <span class="title">WeakReference</span>&lt;<span class="title">ThreadLocal</span>&gt; </span>&#123;</span><br><span class="line">           <span class="comment">/** The value associated with this ThreadLocal. */</span></span><br><span class="line">           Object value;</span><br><span class="line"></span><br><span class="line">           Entry(ThreadLocal k, Object v) &#123;</span><br><span class="line">               <span class="keyword">super</span>(k);</span><br><span class="line">               value = v;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âú® ThreadLocalMap ‰∏≠Ôºå‰πüÊòØÁî® Entry Êù•‰øùÂ≠ò K-V ÁªìÊûÑÊï∞ÊçÆÁöÑ„ÄÇ<strong>‰ΩÜÊòØEntry‰∏≠keyÂè™ËÉΩÊòØThreadLocalÂØπË±°</strong>ÔºåËøôÁÇπË¢´EntryÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂ∑≤ÁªèÈôêÂÆöÊ≠ª‰∫ÜÔºõ</p>
<p>Âè¶Â§ñÔºåEntryÁªßÊâøWeakReferenceÔºå<strong>‰πüÂ∞±ÊòØkeyÔºàThreadLocalÔºâÊòØÂº±ÂºïÁî®ÔºåÂÖ∂ÁõÆÁöÑÊòØÂ∞ÜThreadLocalÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÂíåÁ∫øÁ®ãÁöÑÁîüÂëΩÂë®ÊúüËß£Áªë</strong>ÔºåÂèØ‰ª•‰ΩøÂæó ThreadLocal Âú®Ê≤°ÊúâÂÖ∂‰ªñÂº∫ÂºïÁî®ÁöÑÊó∂ÂÄôË¢´ÂõûÊî∂ÊéâÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂõ†‰∏∫Á∫øÁ®ãÂæó‰∏çÂà∞ÈîÄÊØÅÂØºËá¥ThreadLocalÂØπË±°Êó†Ê≥ïË¢´ÂõûÊî∂ÁöÑÊÉÖÂÜµ„ÄÇ</p>
</blockquote>
<h3 id="threadlocal-ÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢ò">ThreadLocal ÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢ò <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>Êúâ‰∫õÁ®ãÂ∫èÂëòÂú®‰ΩøÁî® ThreadLocal ÁöÑËøáÁ®ã‰∏≠‰ºöÂèëÁé∞ÊúâÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÊÉÖÂÜµÂèëÁîüÔºåÂ∞±ÁåúÊµãËøô‰∏™ÂÜÖÂ≠òÊ≥ÑÊºèË∑ü Entry ‰∏≠‰ΩøÁî®‰∫ÜÂº±ÂºïÁî®ÁöÑ key ÊúâÂÖ≥Á≥ª„ÄÇËøô‰∏™ÁêÜËß£ÂÖ∂ÂÆûÊòØ‰∏çÂØπÁöÑ„ÄÇ</p>
<blockquote>
<p>Êàë‰ª¨ÂÖàÊù•ÂõûÈ°æËøô‰∏™ÈóÆÈ¢ò‰∏≠Ê∂âÂèäÁöÑÂá†‰∏™ÂêçËØçÊ¶ÇÂøµ,ÂÜçÊù•ÂàÜÊûêÈóÆÈ¢ò„ÄÇ</p>
<ol type="1">
<li><p><strong>ÂÜÖÂ≠òÊ≥ÑÊºèÁõ∏ÂÖ≥Ê¶ÇÂøµ</strong></p>
<p><strong>Memory overflow</strong>ÔºöÂÜÖÂ≠òÊ∫¢Âá∫ÔºåÊ≤°ÊúâË∂≥Â§üÁöÑÂÜÖÂ≠òÊèê‰æõÁî≥ËØ∑ËÄÖ‰ΩøÁî®„ÄÇ</p>
<p><strong>Memory leak</strong>ÔºöÂÜÖÂ≠òÊ≥ÑÊºèÊòØÊåáÁ®ãÂ∫è‰∏≠Â∑±Âä®ÊÄÅÂàÜÈÖçÁöÑÂ†ÜÂÜÖÂ≠òÁî±‰∫éÊüêÁßçÂéüÂõ†Á®ãÂ∫èÊú™ÈáäÊîæÊàñÊó†Ê≥ïÈáäÊîæÔºåÈÄ†ÊàêÁ≥ªÁªüÂÜÖÂ≠òÁöÑÊµ™Ë¥πÔºåÂØºËá¥Á®ãÂ∫èËøêË°åÈÄüÂ∫¶ÂáèÊÖ¢ÁîöËá≥Á≥ªÁªüÂ¥©Ê∫ÉÁ≠â‰∏•ÈáçÂêéÊûúÔºåÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂ†ÜÁßØÁªàÂ∞ÜÂØºËá¥ÂÜÖÂ≠òÊ∫¢Âá∫„ÄÇ</p></li>
<li><p><strong>Âº±ÂºïÁî®Áõ∏ÂÖ≥Ê¶ÇÂøµ</strong></p>
<p>Java‰∏≠ÁöÑÂºïÁî®Êúâ4ÁßçÁ±ªÂûã: Âº∫„ÄÅËΩØ„ÄÅÂº±„ÄÅËôö„ÄÇÂΩìÂâçËøô‰∏™ÈóÆÈ¢ò‰∏ªË¶ÅÊ∂âÂèäÂà∞Âº∫ÂºïÁî®ÂíåÂº±ÂºïÁî®:</p>
<p><strong>Âº∫ÂºïÁî®( ‚ÄúStrong‚Äù Reference)</strong> ÔºåÂ∞±ÊòØÊàë‰ª¨ÊúÄÂ∏∏ËßÅÁöÑÊôÆÈÄöÂØπË±°ÂºïÁî®ÔºåÂè™Ë¶ÅËøòÊúâÂº∫ÂºïÁî®ÊåáÂêë‰∏Ä‰∏™ÂØπË±°ÔºåÂ∞±ËÉΩË°®ÊòéÂØπË±°Ëøò‚ÄúÊ¥ªÁùÄ‚ÄùÔºåÂûÉÂúæÂõûÊî∂Âô®Â∞±‰∏ç‰ºöÂõûÊî∂ËøôÁßçÂØπË±°„ÄÇ</p>
<p><strong>Âº±ÂºïÁî®( WeakReference)</strong>ÔºåÂûÉÂúæÂõûÊî∂Âô®‰∏ÄÊó¶ÂèëÁé∞‰∫ÜÂè™ÂÖ∑ÊúâÂº±ÂºïÁî®ÁöÑÂØπË±°Ôºå‰∏çÁÆ°ÂΩìÂâçÂÜÖÂ≠òÁ©∫Èó¥Ë∂≥Â§ü‰∏éÂê¶ÔºåÈÉΩ‰ºöÂõûÊî∂ÂÆÉÁöÑÂÜÖÂ≠ò„ÄÇ</p></li>
<li><p><strong>Â¶ÇÊûúkey‰ΩøÁî®Âº∫ÂºïÁî®</strong></p>
<p>ÂÅáËÆæ ThreadLocalMap ‰∏≠ÁöÑ key ‰ΩøÁî®‰∫ÜÂº∫ÂºïÁî®ÔºåÈÇ£‰πà‰ºöÂá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÊºèÂêóÔºü</p>
<p>Ê≠§Êó∂ ThreadLocal ÁöÑÂÜÖÂ≠òÂõæ(ÂÆûÁ∫øË°®Á§∫Âº∫ÂºïÁî®)Â¶Ç‰∏ã:</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Ëã•key‰ΩøÁî®Âº∫ÂºïÁî®.PNG" alt="Ëã•key‰ΩøÁî®Âº∫ÂºïÁî®"></p>
<ol type="1">
<li>ÂÅáËÆæÂú®‰∏öÂä°‰ª£Á†Å‰∏≠‰ΩøÁî®ÂÆå ThreadLocalÔºåThreadLocal Ref Ë¢´ÂõûÊî∂‰∫ÜÔºõ</li>
<li>‰ΩÜÊòØÂõ†‰∏∫ ThreadLocalMap ÁöÑ Entry Âº∫ÂºïÁî® ThreadLocalÔºå<strong>ÈÄ†Êàê ThreadLocal Êó†Ê≥ïË¢´ÂõûÊî∂</strong>Ôºõ</li>
<li>Âú®Ê≤°ÊúâÊâãÂä®Âà†Èô§Ëøô‰∏™ Entry ‰ª•Âèä CurrentThread ‰æùÁÑ∂ËøêË°åÁöÑÂâçÊèê‰∏ãÔºåÂßãÁªàÊúâÂº∫ÂºïÁî®Èìæ<code>Current threadRef-&gt;currentThread-&gt;threadLocalMap-&gt;entry</code>ÔºåEntry Â∞±‰∏ç‰ºöË¢´ÂõûÊî∂ÔºàEntry ‰∏≠ÂåÖÊã¨‰∫Ü ThreadLocal ÂÆû‰æãÂíå valueÔºâÔºå<strong>ÂØºËá¥ Entry ÂÜÖÂ≠òÊ≥ÑÈú≤</strong>„ÄÇ</li>
</ol>
<p>‰πüÂ∞±ÊòØËØ¥ÔºåThreadLocalMap ‰∏≠ÁöÑ key ‰ΩøÁî®‰∫ÜÂº∫ÂºïÁî®ÔºåÊòØÊó†Ê≥ïÂÆåÂÖ®ÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑ„ÄÇ</p></li>
<li><p><strong>Â¶ÇÊûúkey‰ΩøÁî®Âº±ÂºïÁî®</strong></p>
<p>ÈÇ£‰πà ThreadLocalMap ‰∏≠ÁöÑ key ‰ΩøÁî®‰∫ÜÂº±ÂºïÁî®ÔºåÈÇ£‰πà‰ºöÂá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÊºèÂêó?</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Ëã•key‰ΩøÁî®Âº±ÂºïÁî®.PNG" alt="Ëã•key‰ΩøÁî®Âº±ÂºïÁî®"></p>
<ol type="1">
<li>ÂêåÊ†∑ÂÅáËÆæÂú®‰∏öÂä°‰ª£Á†Å‰∏≠‰ΩøÁî®ÂÆå ThreadLocalÔºåThreadLocal Ref Ë¢´ÂõûÊî∂‰∫ÜÔºõ</li>
<li>Áî±‰∫é ThreadLocalMap Âè™ÊåÅÊúâ ThreadLocal ÁöÑÂº±ÂºïÁî®ÔºåÊ≤°Êúâ‰ªª‰ΩïÂº∫ÂºïÁî®ÊåáÂêë ThreadLocal ÂÆû‰æãÔºå<strong>ÊâÄ‰ª• ThreadLocal Â∞±ÂèØ‰ª•È°∫Âà©Ë¢´GCÂõûÊî∂‰∫Ü</strong>ÔºåÊ≠§Êó∂ Entry ‰∏≠ÁöÑkey=nullÔºõ</li>
<li>‰ΩÜÊòØÂú®Ê≤°ÊúâÊâãÂä®Âà†Èô§Ëøô‰∏™ Entry ‰ª•Âèä CurrentThread ‰æùÁÑ∂ËøêË°åÁöÑÂâçÊèê‰∏ãÔºå‰πüÂ≠òÂú®ÊúâÂº∫ÂºïÁî®Èìæ<code>Current threadRef-&gt;currentThread-&gt;threadLocalMap-&gt;entry-&gt;value</code>Ôºåvalue ‰∏ç‰ºöË¢´ÂõûÊî∂ÔºåËÄåËøôÂùóvalueÊ∞∏Ëøú‰∏ç‰ºöË¢´ËÆøÈóÆÂà∞‰∫ÜÔºå<strong>ÂØºËá¥valueÂÜÖÂ≠òÊ≥ÑÈú≤</strong>„ÄÇ</li>
</ol>
<p>‰πüÂ∞±ÊòØËØ¥ÔºåThreadLocalMap ‰∏≠ÁöÑ key ‰ΩøÁî®‰∫ÜÂº±ÂºïÁî®Ôºå‰πüÂèØËÉΩÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ</p></li>
</ol>
</blockquote>
<p><strong>Âá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÂéüÂõ†</strong></p>
<p>ÊØîËæÉ‰ª•‰∏ä‰∏§ÁßçÊÉÖÂÜµÔºåÊàë‰ª¨ÂèëÁé∞ÔºåÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÂèëÁîüË∑ü ThreadLocalMap ‰∏≠ÁöÑ key ÊòØÂê¶‰ΩøÁî®Âº±ÂºïÁî®ÊòØÊ≤°ÊúâÂÖ≥Á≥ªÁöÑÔºåÈÇ£‰πàÂÜÖÂ≠òÊ≥ÑÈú≤ÁúüÊ≠£ÁöÑÂéüÂõ†ÊòØ‰ªÄ‰πàÂë¢Ôºü</p>
<p>ÂèàÂèØ‰ª•ÂèëÁé∞Ôºå‰ª•‰∏ä‰∏§ÁßçÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÊÉÖÂÜµ‰∏≠ÔºåÈÉΩÊúâ‰∏§‰∏™ÂâçÊèêÔºö</p>
<ol type="1">
<li><strong>Ê≤°ÊúâÊâãÂä®Âà†Èô§Ëøô‰∏™EntryÔºõ</strong></li>
<li><strong>CurrentThread ‰æùÁÑ∂Âú®ËøêË°å„ÄÇ</strong></li>
</ol>
<p>Á¨¨1ÁÇπÂæàÂ•ΩÁêÜËß£ÔºåÂè™Ë¶ÅÂú®‰ΩøÁî®ÂÆå ThreadLocalÔºåË∞ÉÁî®ÂÖ∂ remove ÊñπÊ≥ïÂà†Èô§ÂØπÂ∫îÁöÑ EntryÔºåÂ∞±ËÉΩÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÈú≤Ôºõ</p>
<p>Á¨¨2ÁÇπÁ®çÂæÆÂ§çÊùÇ‰∏ÄÁÇπÔºåÁî±‰∫é ThreadLocalMap ÊòØ Thread ÁöÑ‰∏Ä‰∏™Â±ûÊÄßÔºåË¢´ÂΩìÂâçÁ∫øÁ®ãÊâÄÂºïÁî®ÔºåÊâÄ‰ª•ÂÆÉÁöÑÁîüÂëΩÂë®ÊúüË∑ü Thread ‰∏ÄÊ†∑Èïø„ÄÇÈÇ£‰πàÂú®‰ΩøÁî®ÂÆå ThreadLocal ÂêéÔºåÂ¶ÇÊûúÂΩìÂâç Thread ‰πüÈöè‰πãÁªìÊùüÔºåThreadLocalMapËá™ÁÑ∂‰πü‰ºöË¢´ GC ÂõûÊî∂Ôºå‰ªéÊ†πÊ∫ê‰∏äÈÅøÂÖç‰∫ÜÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ</p>
<p>ÂØπ‰∫éÁ¨¨2ÁÇπÔºåÂÆûÁé∞‰ΩøÁî®ÂÆå ThreadLocalÔºåÂ∞ÜÂΩìÂâçÁöÑ Thread ÁªìÊùü‰∏çÂ•ΩÊéßÂà∂ÔºåÁâπÂà´ÊòØ‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÊó∂ÂÄôÔºåÁ∫øÁ®ãÁªìÊùüÊòØ‰∏ç‰ºöË¢´ÈîÄÊØÅÁöÑ„ÄÇ</p>
<p>Áªº‰∏äÔºåThreadLocal ÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÊ†πÊ∫êÊòØÔºö<strong>Áî±‰∫éThreadLocalMapÁöÑÁîüÂëΩÂë®ÊúüË∑üThread‰∏ÄÊ†∑ÈïøÔºåÂ¶ÇÊûúÊ≤°ÊúâÊâãÂä®Âà†Èô§ÂØπÂ∫îEntryÂ∞±‰ºöÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ</strong></p>
<p>‰πüÂ∞±ÊòØËØ¥ÔºåÂè™Ë¶ÅËÆ∞ÂæóÂú®‰ΩøÁî®ÂÆå ThreadLocal ÂèäÊó∂ÁöÑË∞ÉÁî® removeÔºåÊó†ËÆ∫ key ÊòØÂº∫ÂºïÁî®ËøòÊòØÂº±ÂºïÁî®ÈÉΩ‰∏ç‰ºöÊúâÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢ò„ÄÇ</p>
<p><strong>ÈÇ£‰πà‰∏∫‰ªÄ‰πàkeyË¶ÅÁî®Âº±ÂºïÁî®Âë¢?</strong></p>
<p>‰∫ãÂÆû‰∏äÔºåÂú® ThreadLocalMap ‰∏≠ÁöÑ set/getEntry ÊñπÊ≥ï‰∏≠Ôºå‰ºöÂØπ key ‰∏∫ null (‰πüÂç≥ÊòØ ThreadLocal ‰∏∫ null )ËøõË°åÂà§Êñ≠ÔºåÂ¶ÇÊûú‰∏∫ null ÁöÑËØùÔºåÈÇ£‰πàÊòØ‰ºöÂØπ value ÁΩÆ‰∏∫ null ÁöÑ„ÄÇ</p>
<p>ËøôÂ∞±ÊÑèÂë≥ÁùÄ‰ΩøÁî®ÂÆå ThreadLocalÔºåCurrentThread ‰æùÁÑ∂ËøêË°åÁöÑÂâçÊèê‰∏ãÔºå<strong>Â∞±ÁÆóÂøòËÆ∞Ë∞ÉÁî® remove ÊñπÊ≥ïÔºåÂº±ÂºïÁî®ÊØîÂº∫ÂºïÁî®ÂèØ‰ª•Â§ö‰∏ÄÂ±Ç‰øùÈöú</strong>ÔºöÂº±ÂºïÁî®ÁöÑ ThreadLocal ‰ºöË¢´ÂõûÊî∂ÔºåÂØπÂ∫îÁöÑ value Âú®‰∏ã‰∏ÄÊ¨° ThreadLocalMap Ë∞ÉÁî® setÔºågetÔºåremove ‰∏≠ÁöÑ‰ªª‰∏ÄÊñπÊ≥ïÁöÑÊó∂ÂÄô‰ºöË¢´Ê∏ÖÈô§Ôºå‰ªéËÄåÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ</p>
<h3 id="threadlocal-‰∏é-synchronized-ÁöÑÂå∫Âà´">ThreadLocal ‰∏é synchronized ÁöÑÂå∫Âà´ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>ËôΩÁÑ∂ ThreadLocal Ê®°Âºè‰∏é synchronized ÂÖ≥ÈîÆÂ≠óÈÉΩÁî®‰∫éÂ§ÑÁêÜ<strong>Â§öÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÂèòÈáè</strong>ÁöÑÈóÆÈ¢òÔºå‰∏çËøá‰∏§ËÄÖÂ§ÑÁêÜÈóÆÈ¢òÁöÑËßíÂ∫¶ÂíåÊÄùË∑Ø‰∏çÂêå„ÄÇ</p>
<table style="width:100%;">
<colgroup>
<col style="width: 4%">
<col style="width: 47%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>synchronized</th>
<th>ThreadLocal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ÂéüÁêÜ</td>
<td>ÂêåÊ≠•Êú∫Âà∂ÈááÁî®<strong>‰ª•Êó∂Èó¥Êç¢Á©∫Èó¥</strong>ÁöÑÊñπÂºè, <strong>Âè™Êèê‰æõ‰∫Ü‰∏Ä‰ªΩÂèòÈáè,ËÆ©‰∏çÂêåÁöÑÁ∫øÁ®ãÊéíÈòüËÆøÈóÆ</strong></td>
<td>ThreadLocalÈááÁî®<strong>‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥</strong>ÁöÑÊñπÂºè, <strong>‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊèê‰æõ‰∫Ü‰∏Ä‰ªΩÂèòÈáèÁöÑÂâØÊú¨</strong>,‰ªéËÄåÂÆûÁé∞ÂêåÊó∂ËÆøÈóÆËÄåÁõ∏‰∏çÂπ≤Êâ∞</td>
</tr>
<tr class="even">
<td>‰æßÈáçÁÇπ</td>
<td>Â§ö‰∏™Á∫øÁ®ã‰πãÈó¥ËÆøÈóÆËµÑÊ∫êÁöÑ<strong>ÂêåÊ≠•ÊÄß</strong></td>
<td>Â§öÁ∫øÁ®ã‰∏≠ËÆ©ÊØè‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÊï∞ÊçÆ<strong>Áõ∏‰∫íÈöîÁ¶ª</strong></td>
</tr>
</tbody>
</table>
<p>ÊÄªÁªìÔºö ËôΩÁÑ∂‰ΩøÁî® ThreadLocal Âíå synchronized ÈÉΩËÉΩËß£ÂÜ≥ÈóÆÈ¢ò,‰ΩÜÊòØ<strong>‰ΩøÁî® ThreadLocal ÂèØ‰ª•‰ΩøÁ®ãÂ∫èÊã•ÊúâÊõ¥È´òÁöÑÂπ∂ÂèëÊÄß„ÄÇ</strong></p>
<h3 id="‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÂéüÂõ†-Á∫øÁ®ãÁªÑ">‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÂéüÂõ† &amp; Á∫øÁ®ãÁªÑ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<blockquote>
<p><strong>‰ªÄ‰πàÊòØÁ∫øÁ®ãÁªÑÔºü</strong></p>
<ul>
<li>ThreadGroup Á±ªÔºåÂèØ‰ª•ÊääÁ∫øÁ®ãÂΩíÂ±ûÂà∞Êüê‰∏Ä‰∏™Á∫øÁ®ãÁªÑ‰∏≠ÔºåÁ∫øÁ®ãÁªÑ‰∏≠ÂèØ‰ª•ÊúâÁ∫øÁ®ãÂØπË±°Ôºå‰πüÂèØ‰ª•ÊúâÁ∫øÁ®ãÁªÑÔºåÁªÑ‰∏≠ËøòÂèØ‰ª•ÊúâÁ∫øÁ®ãÔºåËøôÊ†∑ÁöÑÁªÑÁªáÁªìÊûÑÊúâÁÇπÁ±ª‰ºº‰∫éÊ†ëÁöÑÂΩ¢Âºè„ÄÇ</li>
</ul>
<p><strong>‰∏∫‰ªÄ‰πà‰∏çÊé®Ëçê‰ΩøÁî®Á∫øÁ®ãÁªÑÔºü</strong></p>
<ul>
<li>Âõ†‰∏∫‰ΩøÁî®ÊúâÂæàÂ§öÁöÑÂÆâÂÖ®ÈöêÊÇ£ÂêßÔºåÊ≤°ÊúâÂÖ∑‰ΩìËøΩÁ©∂Ôºå<strong>Â¶ÇÊûúÈúÄË¶Å‰ΩøÁî®ÔºåÊé®Ëçê‰ΩøÁî®Á∫øÁ®ãÊ±†</strong>„ÄÇ</li>
</ul>
<p><strong>Á∫øÁ®ãÊ±†ÂíåÁ∫øÁ®ãÁªÑ</strong></p>
<ul>
<li>Á∫øÁ®ãÁªÑÂíåÁ∫øÁ®ãÊ±†ÊòØ‰∏§‰∏™‰∏çÂêåÁöÑÊ¶ÇÂøµÔºå‰ªñ‰ª¨ÁöÑ‰ΩúÁî®ÂÆåÂÖ®‰∏çÂêåÔºö</li>
<li><strong>Á∫øÁ®ãÁªÑÔºö‰∏∫‰∫ÜÊñπ‰æøÁ∫øÁ®ãÁöÑÁÆ°ÁêÜ</strong>Ôºõ</li>
<li><strong>Á∫øÁ®ãÊ±†Ôºö‰∏∫‰∫ÜÁÆ°ÁêÜÁ∫øÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÔºåÂ§çÁî®Á∫øÁ®ãÔºåÂáèÂ∞ëÂàõÂª∫ÈîÄÊØÅÁ∫øÁ®ãÁöÑÂºÄÈîÄ</strong>„ÄÇ</li>
</ul>
</blockquote>
<p><strong>‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÂ•ΩÂ§ÑÔºö</strong></p>
<ul>
<li><strong>Èôç‰ΩéËµÑÊ∫êÊ∂àËÄó</strong>ÔºöÈÄöËøáÈáçÂ§çÂà©Áî®Â∑≤ÂàõÂª∫ÁöÑÁ∫øÁ®ãÈôç‰ΩéÁ∫øÁ®ãÂàõÂª∫ÂíåÈîÄÊØÅÈÄ†ÊàêÁöÑÊ∂àËÄó„ÄÇ</li>
<li><strong>ÊèêÈ´òÂìçÂ∫îÈÄüÂ∫¶</strong>ÔºöÂΩì‰ªªÂä°Âà∞ËææÊó∂Ôºå‰ªªÂä°ÂèØ‰ª•‰∏çÈúÄË¶ÅÂÜçÁ≠âÂà∞Á∫øÁ®ãÂàõÂª∫Â∞±ËÉΩÁ´ãÂç≥ÊâßË°å„ÄÇ</li>
<li><strong>ÊèêÈ´òÁ∫øÁ®ãÁöÑÂèØÁÆ°ÁêÜÊÄß</strong>ÔºöÁ∫øÁ®ãÊòØÁ®ÄÁº∫ËµÑÊ∫êÔºåÂ¶ÇÊûúÊó†ÈôêÂà∂ÁöÑÂàõÂª∫Ôºå‰∏ç‰ªÖ‰ºöÊ∂àËÄóÁ≥ªÁªüËµÑÊ∫êÔºåËøò‰ºöÈôç‰ΩéÁ≥ªÁªüÁöÑÁ®≥ÂÆöÊÄßÔºå‰ΩøÁî®Á∫øÁ®ãÊ±†ÂèØ‰ª•ËøõË°åÁªü‚ºÄÁöÑÂàÜÈÖçÔºåË∞É‰ºòÂíåÁõëÊéß„ÄÇ</li>
</ul>
<h3 id="runnable-callable-future-futuretask">Runnable &amp; Callable &amp; Future &amp; FutureTask</h3>
<p><strong>Runnable Êé•Âè£</strong></p>
<p>ÂÆûÁé∞ Runnable Êé•Âè£ÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÈáçÂÜô run ÊñπÊ≥ïÔºå‰πüÂ∞±ÊòØÁ∫øÁ®ãÂú®ÂêØÂä®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®Ë∞ÉÁî®ÁöÑÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ê≤°ÊúâËøîÂõûÂÄºÔºå‰∏î‰∏çËÉΩÊäõÂá∫ÂºÇÂ∏∏‰ø°ÊÅØ</p>
<p><strong>Callable Êé•Âè£</strong></p>
<p>Callable Êé•Âè£ÔºåÊòØ‰∏ÄÁßçËÆ©Á∫øÁ®ãÊâßË°åÂÆåÊàêÂêéÔºå<strong>ËÉΩÂ§üËøîÂõûÁªìÊûúÁöÑ</strong>ÔºåÂú®ÂÆûÁé∞ Callable Êé•Âè£ÔºåÈúÄË¶Å<strong>ÂÆûÁé∞ call ÊñπÊ≥ï</strong>Ôºå‰ΩÜÊòØËøô‰∏™Êó∂ÂÄôÊàë‰ª¨ËøòÈúÄË¶ÅÊúâËøîÂõûÂÄºÔºå</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callable</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">V <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Runnable ‰∏é Callable ÁöÑÂå∫Âà´Ôºö</strong></p>
<ol type="1">
<li><p><code>Runnable(java.lang.Runnable)</code>ÊòØËá™‰ªé java1.1 Â∞±Êúâ‰∫ÜÔºåËÄå<code>Callable(java.util.concurrent...)</code>ÊòØ1.5‰πãÂêéÊâçÂä†‰∏äÂéªÁöÑ„ÄÇ</p></li>
<li><p>CallableËßÑÂÆöÁöÑÊñπÊ≥ïÊòØ<code>call()</code>ÔºåRunnableËßÑÂÆöÁöÑÊñπÊ≥ïÊòØ<code>run()</code></p></li>
<li><p><strong>CallableÁöÑ‰ªªÂä°ÊâßË°åÂêéÂèØËøîÂõûÂÄºÔºåËÄåRunnableÁöÑ‰ªªÂä°ÊòØ‰∏çËÉΩËøîÂõûÂÄº(ÊòØvoid)</strong></p></li>
<li><p><strong>callÊñπÊ≥ïÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏ÔºårunÊñπÊ≥ï‰∏çÂèØ‰ª•</strong></p></li>
<li><p>ËøêË°åCallable‰ªªÂä°ÂèØ‰ª•ÊãøÂà∞‰∏Ä‰∏™ Future ÂØπË±°ÔºåË°®Á§∫ÂºÇÊ≠•ËÆ°ÁÆóÁöÑÁªìÊûú„ÄÇÂÆÉÊèê‰æõ‰∫ÜÊ£ÄÊü•ËÆ°ÁÆóÊòØÂê¶ÂÆåÊàêÁöÑÊñπÊ≥ïÔºå‰ª•Á≠âÂæÖËÆ°ÁÆóÁöÑÂÆåÊàêÔºåÂπ∂Ê£ÄÁ¥¢ËÆ°ÁÆóÁöÑÁªìÊûú„ÄÇÈÄöËøáFutureÂØπË±°ÂèØ‰ª•‰∫ÜËß£‰ªªÂä°ÊâßË°åÊÉÖÂÜµÔºåÂèØÂèñÊ∂à‰ªªÂä°ÁöÑÊâßË°åÔºåËøòÂèØËé∑ÂèñÊâßË°åÁªìÊûú</p></li>
<li><p>Âä†ÂÖ•Á∫øÁ®ãÊ±†ËøêË°åÔºåRunnable ‰ΩøÁî® ExecutorService ÁöÑ<code>execute()</code>ÊñπÊ≥ïÔºåCallable ‰ΩøÁî®<code>submit()</code>ÊñπÊ≥ï</p>
<blockquote>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöExecutorService ‰∏≠ÁöÑ<code>execute()</code>ÊñπÊ≥ïÊòØÁªßÊâøËá™ExecutorÁ±ªÁöÑÔºåËÄå<code>submit()</code>ÂÖ∂Êú¨Ë∫´Â∞±ÊúâÁöÑ</p>
</blockquote></li>
</ol>
<p><strong>Future Êé•Âè£</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Future</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isCancelled</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isDone</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">V <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ÊúâÊó∂Èó¥ÁöÑÁ≠âÂæÖ</span></span><br><span class="line">    <span class="function">V <span class="title">get</span><span class="params">(<span class="keyword">long</span> timeout, TimeUnit unit)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> InterruptedException, ExecutionException, TimeoutException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Future ÊòØ‰∏Ä‰∏™Êé•Âè£„ÄÇÁõ∏ÂΩì‰∫éÂ≠òÂÇ®Âô®ÔºåÈÄöËøáÂ∞Ü Future ÂØπË±°‰º†ÈÄíÁªô ThreadÔºåËÆ©ÂÖ∂Ëé∑ÂèñÁ∫øÁ®ãÊâßË°åÁöÑËøîÂõûÂÄºÁªìÊûúÂπ∂ËøõË°åÂ§ÑÁêÜ„ÄÇ</p>
<p>Future ÂèØ‰ª•ÈÄöËøá <code>get()</code> ÊñπÊ≥ïÊù•Ëé∑Âèñ Callable ÁöÑ call ÊñπÊ≥ïÁöÑ‰ªªÂä°ÁªìÊûú„ÄÇËøòÂèØ‰ª•ÈÄöËøá<code>isDone()</code> Êù•Âà§Êñ≠‰ªªÂä°ÊòØÂê¶Â∑≤ÁªèÊâßË°åÂÆåÊØïÔºåËøòÂèØ‰ª•ÈÄöËøá<code>cancel()</code>Êù•ÂèñÊ∂àËøô‰∏™‰ªªÂä°ÔºåÊàñËÄÖÈôêÊó∂Ëé∑Âèñ‰ªªÂä°ÁöÑÊâßË°åÁªìÊûú</p>
<p><strong>FutureTask Á±ª</strong></p>
<p>FutureTask ÊòØ Future ÁöÑÂîØ‰∏ÄÁöÑ‰∏ÄÁßçÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÔºåÂêåÊ†∑ÂÆûÁé∞‰∫Ü<code>get()</code>„ÄÅ<code>cancel()</code>„ÄÅ<code>isCancel()</code>„ÄÅ<code>isDone()</code>ÊñπÊ≥ï„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FutureTask</span>&lt;<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">RunnableFuture</span>&lt;<span class="title">V</span>&gt; </span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RunnableFuture</span>&lt;<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">Runnable</span>, <span class="title">Future</span>&lt;<span class="title">V</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>‰ªñÂÆûÁé∞‰∫Ü Runnable Êé•Âè£ÔºåÂπ∂‰∏îËøòÈúÄË¶Å‰º†ÈÄí‰∏Ä‰∏™ÂÆûÁé∞ Callable Êé•Âè£ÁöÑÁ±ª‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞</p>
<ol type="1">
<li>Thread ÂÆûÁé∞‰∫Ü Runable Êé•Âè£ÔºåÂõ†Ê≠§ Thread ‰∏≠ÂèØ‰ª•‰º†ÂÖ• Runable Êé•Âè£ÔºåÂèäÂÖ∂Â≠êÊé•Âè£Ôºõ</li>
<li>FutureTask ÂÆûÁé∞‰∫Ü RunnableFuture Êé•Âè£ÔºåËÄå RunnableFuture Êé•Âè£ÁªßÊâø‰∫Ü Runable Êé•Âè£Ôºõ</li>
<li>Âú® FutureTask ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÔºåÂèØ‰ª•‰º†ÂÖ• Callable Êé•Âè£Ôºö<code>public FutureTask(Callable&lt;V&gt; callable)</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread2</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;come in Callable&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1024</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ËøôÈáåÈÄöËøá‰∫Ü FutureTask Êé•Ëß¶‰∫Ü Callable Êé•Âè£</span></span><br><span class="line">FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;&gt;(<span class="keyword">new</span> MyThread2());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÁÑ∂ÂêéÂú®Áî® Thread ËøõË°åÂÆû‰æãÂåñÔºå‰º†ÂÖ•ÂÆûÁé∞ Runnabnle Êé•Âè£ÁöÑ FutureTask ÁöÑÁ±ª</span></span><br><span class="line">Thread t1 = <span class="keyword">new</span> Thread(futureTask, <span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">t1.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÊúÄÂêéÈÄöËøá `FutureTask.get()` Ëé∑ÂèñÂà∞ËøîÂõûÂÄº</span></span><br><span class="line"><span class="comment">// ËæìÂá∫ FutureTask ÁöÑËøîÂõûÂÄº</span></span><br><span class="line">System.out.println(<span class="string">&quot;result FutureTask &quot;</span> + futureTask.get());</span><br></pre></td></tr></table></figure>
<p>ËøôÂ∞±Áõ∏ÂΩì‰∫éÂéüÊù•Êàë‰ª¨ÁöÑÊñπÂºèÊòØ main ÊñπÊ≥ï‰∏ÄÊù°ÈæôÊâßË°åÔºåÂêéÈù¢Âú®ÂºïÂÖ• Callable ÂêéÔºåÂØπ‰∫éÊâßË°åÊØîËæÉ‰πÖÁöÑÁ∫øÁ®ãÔºåÂèØ‰ª•ÂçïÁã¨Êñ∞ÂºÄ‰∏Ä‰∏™Á∫øÁ®ãËøõË°åÊâßË°åÔºåÊúÄÂêéÂÜçËøõË°åÊ±áÊÄªËæìÂá∫Ôºõ</p>
<p>ÊúÄÂêéÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØË¶ÅÊ±ÇËé∑Âæó Callable Á∫øÁ®ãÁöÑËÆ°ÁÆóÁªìÊûúÔºåÂ¶ÇÊûúÊ≤°ÊúâËÆ°ÁÆóÂÆåÊàêÂ∞±Ë¶ÅÂéªÂº∫Ê±ÇÔºå‰ºöÂØºËá¥ÈòªÂ°ûÔºåÁõ¥Âà∞ËÆ°ÁÆóÂÆåÊàê</p>
<p>‰πüÂ∞±ÊòØËØ¥ <code>futureTask.get()</code> ÈúÄË¶ÅÊîæÂú®ÊúÄÂêéÊâßË°åÔºåËøôÊ†∑‰∏ç‰ºöÂØºËá¥‰∏ªÁ∫øÁ®ãÈòªÂ°û</p>
<p>‰πüÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁÆóÊ≥ïÔºå‰ΩøÁî®Á±ª‰ºº‰∫éËá™ÊóãÈîÅÁöÑÊñπÂºèÊù•ËøõË°åÂà§Êñ≠ÊòØÂê¶ËøêË°åÂÆåÊØï</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Âà§Êñ≠ futureTask ÊòØÂê¶ËÆ°ÁÆóÂÆåÊàê</span></span><br><span class="line"><span class="keyword">while</span>(!futureTask.isDone()) &#123; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="execute-Âíå-submit-ÁöÑÂå∫Âà´"><code>execute()</code> Âíå <code>submit()</code> ÁöÑÂå∫Âà´</h3>
<p><code>execute()</code> Áî®‰∫éÊèê‰∫§‰∏çÈúÄË¶ÅËøîÂõûÂÄºÁöÑ‰ªªÂä°ÔºåÊâÄ‰ª•Êó†Ê≥ïÂà§Êñ≠‰ªªÂä°ÊòØÂê¶Ë¢´Á∫øÁ®ãÊ±†ÊâßË°åÊàêÂäü‰∏éÂê¶Ôºõ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ‰º†ÂÖ•ÁöÑÊòØRunnableÊé•Âè£</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p><code>submit()</code> Áî®‰∫éÊèê‰∫§ÈúÄË¶ÅËøîÂõûÂÄºÁöÑ‰ªªÂä°„ÄÇÁ∫øÁ®ãÊ±†‰ºöËøîÂõû‚ºÄ‰∏™ Future Á±ªÂûãÁöÑÂØπË±°ÔºåÈÄöËøáËøô‰∏™ Future ÂØπË±°ÂèØ‰ª•Âà§Êñ≠‰ªªÂä°ÊòØÂê¶ÊâßË°åÊàêÂäüÔºåÂπ∂‰∏îÂèØ‰ª•ÈÄöËøá Future ÁöÑ <code>get()</code> ÊñπÊ≥ïÊù•Ëé∑ÂèñËøîÂõûÂÄºÔºå <code>get()</code> ÊñπÊ≥ï‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÁõ¥Âà∞‰ªªÂä°ÂÆåÊàêÔºåËÄå‰ΩøÁî® <code>get(long timeoutÔºåTimeUnit unit)</code> ÊñπÊ≥ïÂàô‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ã‚ºÄÊÆµÊó∂Èó¥ÂêéÁ´ãÂç≥ËøîÂõûÔºåËøôÊó∂ÂÄôÊúâÂèØËÉΩ‰ªªÂä°Ê≤°ÊúâÊâßË°åÂÆå„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; <span class="function">Future&lt;T&gt; <span class="title">submit</span><span class="params">(Callable&lt;T&gt; task)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException</span>;</span><br><span class="line"><span class="function">V <span class="title">get</span><span class="params">(<span class="keyword">long</span> timeout, TimeUnit unit)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> InterruptedException, ExecutionException, TimeoutException</span>;</span><br></pre></td></tr></table></figure>
<h3 id="executors-executor-executorÊ°ÜÊû∂">Executors &amp; Executor &amp; ExecutorÊ°ÜÊû∂ <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>Executors</strong>Ôºö</p>
<ul>
<li>Executors ‰∏∫Â∑•ÂÖ∑Á±ªÔºåÂÖ∂Êèê‰æõ‰∫Ü‰∏çÂêåÊñπÊ≥ïÊåâÁÖßÊàë‰ª¨ÁöÑÈúÄÊ±ÇÊù•ÂàõÂª∫‰∏çÂêåÁöÑÁ∫øÁ®ãÊ±†ÔºåÊù•Êª°Ë∂≥‰∏öÂä°ÁöÑÈúÄÊ±Ç</li>
</ul>
<p><strong>ExecutorÔºö</strong></p>
<ul>
<li><p>Executor Êé•Âè£ÂØπË±°ËÉΩÊâßË°åÊàë‰ª¨ÁöÑÁ∫øÁ®ã‰ªªÂä°„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ExecutorService Êé•Âè£ÁªßÊâø‰∫Ü Executor Êé•Âè£Âπ∂ËøõË°å‰∫ÜÊâ©Â±ïÔºåÊèê‰æõ‰∫ÜÊõ¥Â§öÁöÑÊñπÊ≥ïÊàë‰ª¨ËÉΩËé∑Âæó‰ªªÂä°ÊâßË°åÁöÑÁä∂ÊÄÅÂπ∂‰∏îÂèØ‰ª•Ëé∑Âèñ‰ªªÂä°ÁöÑËøîÂõûÂÄº„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ExecutorService</span> <span class="keyword">extends</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ÊâßË°å‰ªªÂä°</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span></span>;</span><br><span class="line">    <span class="comment">// Êèê‰∫§‰ªªÂä° taskÔºåÁî®ËøîÂõûÂÄº Future Ëé∑Âæó‰ªªÂä°ÊâßË°åÁªìÊûú</span></span><br><span class="line">    &lt;T&gt; <span class="function">Future&lt;T&gt; <span class="title">submit</span><span class="params">(Callable&lt;T&gt; task)</span></span>;</span><br><span class="line">    <span class="comment">// Êèê‰∫§ tasks ‰∏≠ÊâÄÊúâ‰ªªÂä°</span></span><br><span class="line">	<span class="keyword">public</span> &lt;T&gt; List&lt;Future&lt;T&gt;&gt; invokeAll(Collection&lt;? extends Callable&lt;T&gt;&gt; tasks) <span class="keyword">throws</span> InterruptedException;</span><br><span class="line">    <span class="comment">// ÂÖ≥Èó≠Á∫øÁ®ãÊ±†</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>Executor Ê°ÜÊû∂</strong>Ôºö</p>
<ul>
<li><p>Executor Ê°ÜÊû∂ÊòØ‰∏Ä‰∏™Ê†πÊçÆ‰∏ÄÁªÑÊâßË°åÁ≠ñÁï•Ë∞ÉÁî®ÔºåË∞ÉÂ∫¶ÔºåÊâßË°åÂíåÊéßÂà∂ÁöÑÂºÇÊ≠•‰ªªÂä°ÁöÑÊ°ÜÊû∂„ÄÇ</p></li>
<li><strong>‰∏ç‰ΩøÁî® Executor Ê°ÜÊû∂Â≠òÂú®ÁöÑÈóÆÈ¢òÔºö</strong>
<ol type="1">
<li>È¶ñÂÖàËã•‰∏ç‰ΩøÁî®ËØ•Ê°ÜÊû∂ÔºåËÄåÊòØÊØèÊ¨°ÊâßË°å‰ªªÂä°ÂàõÂª∫Á∫øÁ®ã <code>new Thread()</code> ÊØîËæÉÊ∂àËÄóÊÄßËÉΩÔºåÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊòØÊØîËæÉËÄóÊó∂„ÄÅËÄóËµÑÊ∫êÁöÑ„ÄÇ</li>
<li>Ë∞ÉÁî® <code>new Thread()</code> ÂàõÂª∫ÁöÑÁ∫øÁ®ãÁº∫‰πèÁÆ°ÁêÜÔºåË¢´Áß∞‰∏∫<strong>ÈáéÁ∫øÁ®ã</strong>ÔºåËÄå‰∏îÂèØ‰ª•Êó†ÈôêÂà∂ÁöÑÂàõÂª∫ÔºåÁ∫øÁ®ã‰πãÈó¥ÁöÑÁõ∏‰∫íÁ´û‰∫â‰ºöÂØºËá¥ËøáÂ§öÂç†Áî®Á≥ªÁªüËµÑÊ∫êËÄåÂØºËá¥Á≥ªÁªüÁò´Áó™ÔºåËøòÊúâÁ∫øÁ®ã‰πãÈó¥ÁöÑÈ¢ëÁπÅ‰∫§Êõø‰πü‰ºöÊ∂àËÄóÂæàÂ§öÁ≥ªÁªüËµÑÊ∫ê„ÄÇ</li>
<li>‰∏î‰ΩøÁî® <code>new Thread()</code> ÂêØÂä®ÁöÑÁ∫øÁ®ã‰∏çÂà©‰∫éÊâ©Â±ïÔºåÊØîÂ¶ÇÂÆöÊó∂ÊâßË°å„ÄÅÂÆöÊúüÊâßË°å„ÄÅÂÆöÊó∂ÂÆöÊúüÊâßË°å„ÄÅÁ∫øÁ®ã‰∏≠Êñ≠Á≠âÈÉΩ‰∏ç‰æøÂÆûÁé∞„ÄÇ</li>
</ol></li>
<li>ÊâÄ‰ª•<strong>ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊ±†</strong>ÊòØ‰∏™Êõ¥Â•ΩÁöÑÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂõ†‰∏∫ÂèØ‰ª•ÈôêÂà∂Á∫øÁ®ãÁöÑÊï∞ÈáèÂπ∂‰∏îÂèØ‰ª•ÂõûÊî∂ÂÜçÂà©Áî®Ëøô‰∫õÁ∫øÁ®ãÔºå<strong>ËÄåÂà©Áî® Executor Ê°ÜÊû∂ÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÁöÑÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊ±†</strong>„ÄÇ</li>
<li><strong>‰ΩøÁî® Executors Á∫øÁ®ãÊ±†Ê°ÜÊû∂ÁöÑ‰ºòÁÇπ</strong>Ôºö
<ol type="1">
<li>ËÉΩ<strong>Â§çÁî®</strong>Â∑≤Â≠òÂú®Âπ∂Á©∫Èó≤ÁöÑÁ∫øÁ®ã‰ªéËÄåÈôç‰ΩéÁ∫øÁ®ãÂàõÂª∫ÂíåÈîÄÊØÅÈÄ†ÊàêÁöÑÊ∂àËÄó„ÄÇ</li>
<li>ÂèØÊúâÊïàÊéßÂà∂ÊúÄÂ§ßÂπ∂ÂèëÁ∫øÁ®ãÊï∞ÔºåÊèêÈ´òÁ≥ªÁªüËµÑÊ∫ê‰ΩøÁî®ÁéáÔºåÂêåÊó∂ÈÅøÂÖçËøáÂ§öËµÑÊ∫êÁ´û‰∫â„ÄÇ</li>
<li>Ê°ÜÊû∂‰∏≠Â∑≤ÁªèÊúâÂÆöÊó∂„ÄÅÂÆöÊúü„ÄÅÂçïÁ∫øÁ®ã„ÄÅÂπ∂ÂèëÊï∞ÊéßÂà∂Á≠âÂäüËÉΩ„ÄÇ</li>
</ol></li>
<li><p><strong>Áªº‰∏äÊâÄËø∞</strong>Ôºö‰ΩøÁî®Á∫øÁ®ãÊ±†Ê°ÜÊû∂ Executor ËÉΩÊõ¥Â•ΩÁöÑÁÆ°ÁêÜÁ∫øÁ®ã„ÄÅÊèêÈ´òÁ≥ªÁªüËµÑÊ∫ê‰ΩøÁî®Áéá„ÄÇ</p></li>
</ul>
<blockquote>
<p>‰ΩÜÊòØËøòÊòØ‰∏çÊé®ËçêÈÄöËøá Executors Áõ¥Êé•ÂàõÂª∫Á∫øÁ®ãÊ±†ÔºåËÄåÊòØ<strong>Êõ¥Êé®ËçêÈÄöËøá ThreadPoolExecutor Êù•ÂàõÂª∫Á∫øÁ®ãÊ±†</strong>ÔºåÂêéÁª≠‰ºöÂàÜÊûê</p>
</blockquote>
<h3 id="Á∫øÁ®ãÊ±†ÁöÑÂàõÂª∫ÊñπÂºè">Á∫øÁ®ãÊ±†ÁöÑÂàõÂª∫ÊñπÂºè <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÈÄöËøá Executors ÂéªÂàõÂª∫</strong></p>
<p><strong>Executors ‰∏∫Â∑•ÂÖ∑Á±ª</strong>ÔºåÂÖ∂Êèê‰æõ‰∫Ü‰∏çÂêåÊñπÊ≥ïÊåâÁÖßÊàë‰ª¨ÁöÑÈúÄÊ±ÇÊù•ÂàõÂª∫‰∏çÂêåÁöÑÁ∫øÁ®ãÊ±†ÔºåÊù•Êª°Ë∂≥‰∏öÂä°ÁöÑÈúÄÊ±Ç„ÄÇ</p>
<ul>
<li><strong>Executors.newFixedThreadPool(int i)</strong> ÔºöÂàõÂª∫‰∏Ä‰∏™Êã•Êúâ i ‰∏™Á∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±†
<ul>
<li>ÊâßË°åÈïøÊúüÁöÑ‰ªªÂä°ÔºåÊÄßËÉΩÂ•ΩÂæàÂ§ö</li>
<li>ÂàõÂª∫‰∏Ä‰∏™ÂÆöÈïøÁ∫øÁ®ãÊ±†ÔºåÂèØÊéßÂà∂Á∫øÁ®ãÊï∞ÊúÄÂ§ßÂπ∂ÂèëÊï∞ÔºåË∂ÖÂá∫ÁöÑÁ∫øÁ®ã‰ºöÂú®ÈòüÂàó‰∏≠Á≠âÂæÖ</li>
</ul></li>
<li><strong>Executors.newSingleThreadExecutor()</strong>ÔºöÂàõÂª∫‰∏Ä‰∏™Âè™Êúâ1‰∏™Á∫øÁ®ãÁöÑÂçïÁ∫øÁ®ãÊ±†
<ul>
<li>‰∏Ä‰∏™‰ªªÂä°‰∏Ä‰∏™‰ªªÂä°ÊâßË°åÁöÑÂú∫ÊôØ</li>
<li>ÂàõÂª∫‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÂåñÁöÑÁ∫øÁ®ãÊ±†ÔºåÂÆÉÂè™‰ºöÁî®ÂîØ‰∏ÄÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°Ôºå‰øùËØÅÊâÄÊúâ‰ªªÂä°ÊåâÁÖßÊåáÂÆöÈ°∫Â∫èÊâßË°å</li>
</ul></li>
<li><strong>Executors.newCacheThreadPool()</strong>ÔºöÂàõÂª∫‰∏Ä‰∏™ÂèØÊâ©ÂÆπÁöÑÁ∫øÁ®ãÊ±†
<ul>
<li>ÊâßË°åÂæàÂ§öÁü≠ÊúüÂºÇÊ≠•ÁöÑÂ∞èÁ®ãÂ∫èÊàñËÄÖË¥üËΩΩËæÉËΩªÁöÑÊúçÂä°Âô®</li>
<li>ÂàõÂª∫‰∏Ä‰∏™ÂèØÁºìÂ≠òÁ∫øÁ®ãÊ±†ÔºåÂ¶ÇÊûúÁ∫øÁ®ãÈïøÂ∫¶Ë∂ÖËøáÂ§ÑÁêÜÈúÄË¶ÅÔºåÂèØÁÅµÊ¥ªÂõûÊî∂Á©∫Èó≤Á∫øÁ®ãÔºåÂ¶ÇÊó†ÂèØÁî®Á∫øÁ®ãÔºåÂàôÊñ∞Âª∫Êñ∞Á∫øÁ®ã</li>
</ul></li>
<li><strong>Executors.newScheduledThreadPool(int corePoolSize)</strong>Ôºö
<ul>
<li>Á∫øÁ®ãÊ±†ÊîØÊåÅÂÆöÊó∂‰ª•ÂèäÂë®ÊúüÊÄßÊâßË°å‰ªªÂä°</li>
<li>corePoolSize ‰∏∫‰º†ÂÖ•ÂèÇÊï∞ÔºåÊúÄÂ§ßÁ∫øÁ®ãÊï∞‰∏∫Êï¥ÂΩ¢ÁöÑÊúÄÂ§ßÊï∞ÁöÑÁ∫øÁ®ãÊ±†</li>
</ul></li>
</ul>
<p><strong>ÊñπÊ≥ïÁöÑÂ∫ïÂ±ÇÈÉΩÊòØÈÄöËøá ThreadPoolExecutor ÂéªÂàõÂª∫Á∫øÁ®ãÊ±†</strong></p>
<p>Êàë‰ª¨ÈÄöËøáÊü•ÁúãÊ∫êÁ†ÅÔºåÁÇπÂáª‰∫Ü <code>Executors.newFixedThreadPool</code> „ÄÅ <code>Executors.newSingleThreadExecutor</code> „ÄÅ <code>Executors.newCachedThreadPool</code> ËÉΩÂ§üÂèëÁé∞Â∫ïÂ±ÇÈÉΩÊòØ‰ΩøÁî®‰∫Ü <strong>ThreadPoolExecutor</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂàõÂª∫Âõ∫ÂÆöÁ∫øÁ®ãÊï∞ÁöÑÁ∫øÁ®ãÊ±†</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                  <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂàõÂª∫‰ªÖÊúâ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±†</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newSingleThreadExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FinalizableDelegatedExecutorService</span><br><span class="line">        (<span class="keyword">new</span> ThreadPoolExecutor(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂàõÂª∫ÂèØÊâ©ÂÆπÁöÑÁ∫øÁ®ãÊ±†</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newCachedThreadPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">0</span>, Integer.MAX_VALUE,</span><br><span class="line">                                  <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> SynchronousQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Á∫øÁ®ãÊ±†ÁöÑÂÜÖÈÉ®ÔºåËøò‰ΩøÁî®Âà∞‰∫Ü <code>LinkedBlockingQueue</code> ÈìæË°®ÈòªÂ°ûÈòüÂàó</p>
<p>ËÄå <code>Executors.newCacheThreadPool</code> Â∫ïÂ±ÇÁî®ÁöÑÊòØ <code>SynchronousBlockingQueue</code> ÂêåÊ≠•ÈòªÂ°ûÈòüÂàó</p>
<blockquote>
<p><strong>Executors.newScheduledThreadPool(int corePoolSize)</strong>Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂàõÂª∫ÊîØÊåÅÂÆöÊó∂ÂèäÂë®ÊúüÊÄßÊâßË°å‰ªªÂä°ÁöÑÁ∫øÁ®ãÊ±†ÔºåÂèØ‰ª•ËßÅÂà∞ÊúÄÁªàËøòÊòØ‰ΩøÁî®‰∫ÜThreadPoolExecutorÊù•ÂàõÂª∫Á∫øÁ®ãÊ±†</span></span><br><span class="line"><span class="comment">// 1.ExecutorsÁ±ª‰∏≠</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newScheduledThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> ScheduledThreadPoolExecutor(corePoolSize);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.ScheduledThreadPoolExecutorÁ±ª‰∏≠</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ScheduledThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>(corePoolSize, Integer.MAX_VALUE, <span class="number">0</span>, NANOSECONDS,</span><br><span class="line">             <span class="keyword">new</span> DelayedWorkQueue());  <span class="comment">// DelayedWorkQueue Âª∂ËøüÈòªÂ°ûÈòüÂàó</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3.ThreadPoolExecutorÁ±ª‰∏≠</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="keyword">int</span> maximumPoolSize,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="params"><span class="function">                             TimeUnit unit,</span></span></span><br><span class="line"><span class="params"><span class="function">                             BlockingQueue&lt;Runnable&gt; workQueue)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,</span><br><span class="line">            Executors.defaultThreadFactory(), defaultHandler);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="threadpoolexecutor-Á±ªÂàÜÊûê">ThreadPoolExecutor Á±ªÂàÜÊûê<span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize,     // Ê†∏ÂøÉÁ∫øÁ®ãÊï∞</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">int</span> maximumPoolSize,  // ÊúÄÂ§ßÁ∫øÁ®ãÊï∞</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">long</span> keepAliveTime,   // Â§ö‰ΩôÁ∫øÁ®ãÂ≠òÊ¥ªÊó∂Èó¥</span></span></span><br><span class="line"><span class="params"><span class="function">                          TimeUnit unit,        // Â§ö‰ΩôÁ∫øÁ®ãÂ≠òÊ¥ªÊó∂Èó¥Âçï‰Ωç</span></span></span><br><span class="line"><span class="params"><span class="function">                          BlockingQueue&lt;Runnable&gt; workQueue,  // ‰ªªÂä°ÈòüÂàó</span></span></span><br><span class="line"><span class="params"><span class="function">                          ThreadFactory threadFactory,</span></span></span><br><span class="line"><span class="params"><span class="function">                          RejectedExecutionHandler handler)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Á∫øÁ®ãÊ±†Âú®ÂàõÂª∫ÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÖ±Êúâ7Â§ßÂèÇÊï∞Ôºö</p>
<ul>
<li><strong>corePoolSize</strong>ÔºöÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÔºåÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÂ∏∏È©ªÊ†∏ÂøÉÁ∫øÁ®ãÊï∞
<ul>
<li>Âú®ÂàõÂª∫Á∫øÁ®ãÊ±†ÂêéÔºåÂΩìÊúâËØ∑Ê±Ç‰ªªÂä°Êù•‰πãÂêéÔºåÂ∞±‰ºöÂÆâÊéíÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÂéªÊâßË°åËØ∑Ê±Ç‰ªªÂä°ÔºåËøë‰ººÁêÜËß£‰∏∫‰ªäÊó•ÂΩìÂÄºÁ∫øÁ®ã</li>
<li>ÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÁõÆËææÂà∞ corePoolSize ÂêéÔºåÂ∞±‰ºöÊää‰πãÂêéÁöÑ‰ªªÂä°ÊîæÂà∞ÁºìÂ≠òÈòüÂàóworkQueue‰∏≠</li>
</ul></li>
<li><strong>maximumPoolSize</strong>ÔºöÁ∫øÁ®ãÊ±†ËÉΩÂ§üÂÆπÁ∫≥ÂêåÊó∂ÊâßË°åÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÔºåÊ≠§ÂÄºÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫é1
<ul>
<li>Áõ∏ÂΩì‰∫éÊâ©ÂÆπÂêéÁöÑÁ∫øÁ®ãÊï∞ÔºåËøô‰∏™Á∫øÁ®ãÊ±†ËÉΩÂÆπÁ∫≥ÁöÑÊúÄÂ§öÁ∫øÁ®ãÊï∞</li>
</ul></li>
<li><strong>keepAliveTime</strong>ÔºöÂ§ö‰ΩôÁöÑÁ©∫Èó≤Á∫øÁ®ãÂ≠òÊ¥ªÊó∂Èó¥
<ul>
<li>ÂΩìÁ∫øÁ®ãÊ±†Êï∞ÈáèË∂ÖËøá corePoolSize Êó∂ÔºåÂèàÂΩìÁ©∫Èó≤Êó∂Èó¥ËææÂà∞ keepAliveTime ÂÄºÊó∂ÔºåÂ§ö‰ΩôÁöÑÁ©∫Èó≤Á∫øÁ®ã‰ºöË¢´ÈîÄÊØÅÔºåÁõ¥Âà∞Âè™Ââ©‰∏ã corePoolSize ‰∏™Á∫øÁ®ã</li>
<li>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂè™ÊúâÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞Â§ß‰∫é corePoolSize Êó∂ÔºåkeepAliveTime Êâç‰ºöËµ∑‰ΩúÁî®</li>
</ul></li>
<li><strong>unit</strong>ÔºökeepAliveTime ÁöÑÂçï‰Ωç</li>
<li><strong>workQueue</strong>Ôºö‰ªªÂä°ÈòüÂàóÔºåË¢´Êèê‰∫§ÁöÑ‰ΩÜÊú™Ë¢´ÊâßË°åÁöÑ‰ªªÂä°ÔºàÁ±ª‰ºº‰∫éÈì∂Ë°åÈáåÈù¢ÁöÑÂÄôÂÆ¢Âå∫Ôºâ
<ul>
<li>LinkedBlockingQueueÔºöÈìæË°®ÈòªÂ°ûÈòüÂàó</li>
<li>SynchronousBlockingQueueÔºöÂêåÊ≠•ÈòªÂ°ûÈòüÂàó</li>
</ul></li>
<li><strong>threadFactory</strong>ÔºöË°®Á§∫ÁîüÊàêÁ∫øÁ®ãÊ±†‰∏≠Â∑•‰ΩúÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÂ∑•ÂéÇÔºåÁî®‰∫éÂàõÂª∫Á∫øÁ®ãÊ±†‰∏ÄËà¨Áî®ÈªòËÆ§Âç≥ÂèØ</li>
<li><strong>handler</strong>ÔºöÊãíÁªùÁ≠ñÁï•ÔºåË°®Á§∫ÂΩìÈòüÂàóÊª°‰∫ÜÂπ∂‰∏îÂ∑•‰ΩúÁ∫øÁ®ãÂ§ß‰∫éÁ∫øÁ®ãÊ±†ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÔºàmaximumPoolSizeÔºâÊó∂ÔºåÂ¶Ç‰ΩïÊù•ÊãíÁªùËØ∑Ê±ÇÊâßË°åÁöÑ Runnable ÁöÑÁ≠ñÁï•</li>
</ul>
<p><strong>ÊãíÁªùÁ≠ñÁï•</strong></p>
<p>‰ª•‰∏ãÊâÄÊúâÊãíÁªùÁ≠ñÁï•ÈÉΩÂÆûÁé∞‰∫Ü RejectedExecutionHandler Êé•Âè£</p>
<ul>
<li><strong>AbortPolicy</strong>ÔºöÈªòËÆ§ÔºåÁõ¥Êé•ÊäõÂá∫ RejectedExcutionException ÂºÇÂ∏∏ÔºåÈòªÊ≠¢Á≥ªÁªüÊ≠£Â∏∏ËøêË°å</li>
<li><strong>DiscardPolicy</strong>ÔºöÁõ¥Êé•‰∏¢ÂºÉ‰ªªÂä°Ôºå‰∏ç‰∫à‰ªª‰ΩïÂ§ÑÁêÜ‰πü‰∏çÊäõÂá∫ÂºÇÂ∏∏ÔºåÂ¶ÇÊûúÂÖÅËÆ∏ËøêË°å‰ªªÂä°‰∏¢Â§±ÔºåËøôÊòØ‰∏ÄÁßçÂ•ΩÊñπÊ°à</li>
<li><strong>CallerRunsPolicy</strong>ÔºöËØ•Á≠ñÁï•Êó¢‰∏ç‰ºöÊäõÂºÉ‰ªªÂä°Ôºå‰πü‰∏ç‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåËÄåÊòØÂ∞ÜÊüê‰∫õ‰ªªÂä°ÂõûÈÄÄÂà∞Ë∞ÉÁî®ËÄÖ</li>
<li><strong>DiscardOldestPolicy</strong>ÔºöÊäõÂºÉÈòüÂàó‰∏≠Á≠âÂæÖÊúÄ‰πÖÁöÑ‰ªªÂä°ÔºåÁÑ∂ÂêéÊääÂΩìÂâç‰ªªÂä°Âä†ÂÖ•ÈòüÂàó‰∏≠Â∞ùËØïÂÜçÊ¨°Êèê‰∫§ÂΩìÂâç‰ªªÂä°</li>
</ul>
<h3 id="Á∫øÁ®ãÊ±†Â∫ïÂ±ÇÂ∑•‰ΩúÂéüÁêÜ">Á∫øÁ®ãÊ±†Â∫ïÂ±ÇÂ∑•‰ΩúÂéüÁêÜ<span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>Á∫øÁ®ãÊ±†ËøêË°åÊû∂ÊûÑÂõæ</strong></p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÊ±†ËøêË°åÊû∂ÊûÑÂõæ.png" alt="Á∫øÁ®ãÊ±†ËøêË°åÊû∂ÊûÑÂõæ"></p>
<p><strong>ÊñáÂ≠óËØ¥Êòé</strong></p>
<ol type="1">
<li>Âú®ÂàõÂª∫‰∫ÜÁ∫øÁ®ãÊ±†ÂêéÔºåÁ≠âÂæÖÊèê‰∫§ËøáÊù•ÁöÑ‰ªªÂä°ËØ∑Ê±Ç</li>
<li>ÂΩìË∞ÉÁî® <code>execute()</code> ÊñπÊ≥ïÊ∑ªÂä†‰∏Ä‰∏™ËØ∑Ê±Ç‰ªªÂä°Êó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂÅöÂá∫Â¶Ç‰∏ãÂà§Êñ≠
<ol type="1">
<li>Â¶ÇÊûúÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊ±†Êï∞ÈáèÂ∞è‰∫é corePoolSizeÔºåÈÇ£‰πàÈ©¨‰∏äÂàõÂª∫Á∫øÁ®ãËøêË°åËøô‰∏™‰ªªÂä°</li>
<li>Â¶ÇÊûúÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊàñÁ≠â‰∫é corePoolSizeÔºåÈÇ£‰πàÂ∞ÜËøô‰∏™‰ªªÂä°ÊîæÂÖ•ÈòüÂàó</li>
<li>Â¶ÇÊûúËøôÊó∂ÂÄôÈòüÂàóÊª°‰∫ÜÔºåÂπ∂‰∏îÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèËøòÂ∞è‰∫é maximumPoolSizeÔºåÈÇ£‰πàËøòÊòØÂàõÂª∫ÈùûÊ†∏ÂøÉÁ∫øÁ®ãËøêË°åËøô‰∏™‰ªªÂä°Ôºõ</li>
<li>Â¶ÇÊûúÈòüÂàóÊª°‰∫ÜÂπ∂‰∏îÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊàñÁ≠â‰∫é maximumPoolSizeÔºåÈÇ£‰πàÁ∫øÁ®ãÊ±†‰ºöÂêØÂä®È•±ÂíåÊãíÁªùÁ≠ñÁï•Êù•ÊâßË°å</li>
</ol></li>
<li>ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂÆåÊàê‰ªªÂä°Êó∂ÔºåÂÆÉ‰ºö‰ªéÈòüÂàó‰∏≠Âèñ‰∏ã‰∏Ä‰∏™‰ªªÂä°Êù•ÊâßË°å</li>
<li>ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÊó†‰∫ãÂèØÂÅöÔºåÂΩìË∂ÖËøá‰∏ÄÂÆöÁöÑÊó∂Èó¥(keepAliveTime)Êó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂà§Êñ≠Ôºö
<ol type="1">
<li>Â¶ÇÊûúÂΩìÂâçËøêË°åÁöÑÁ∫øÁ®ãÊï∞Â§ß‰∫é corePoolSizeÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞±Ë¢´ÂÅúÊéâ</li>
<li>ÊâÄ‰ª•Á∫øÁ®ãÊ±†ÁöÑÊâÄÊúâ‰ªªÂä°ÂÆåÊàêÂêéÔºåÂÆÉ‰ºöÊúÄÁªàÊî∂Áº©Âà∞ corePoolSize ÁöÑÂ§ßÂ∞è</li>
</ol></li>
</ol>
<blockquote>
<p>‰ª•È°æÂÆ¢ÂéªÈì∂Ë°åÂäûÁêÜ‰∏öÂä°‰∏∫‰æãÔºåË∞àË∞àÁ∫øÁ®ãÊ±†ÁöÑÂ∫ïÂ±ÇÂ∑•‰ΩúÂéüÁêÜ</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/Á∫øÁ®ãÊ±†.png" alt="Á∫øÁ®ãÊ±†"></p>
<ol type="1">
<li>ÊúÄÂºÄÂßãÂÅáËÆæÊù•‰∫Ü‰∏§‰∏™È°æÂÆ¢ÔºåÂõ†‰∏∫ corePoolSize ‰∏∫2ÔºåÂõ†Ê≠§Ëøô‰∏§‰∏™È°æÂÆ¢Áõ¥Êé•ËÉΩÂ§üÂéªÁ™óÂè£ÂäûÁêÜ</li>
<li>ÂêéÈù¢ÂèàÊù•‰∫Ü‰∏â‰∏™È°æÂÆ¢ÔºåÂõ†‰∏∫ corePool Â∑≤ÁªèË¢´È°æÂÆ¢Âç†Áî®‰∫ÜÔºåÂõ†Ê≠§Âè™ÊúâÂéªÂÄôÂÆ¢Âå∫Ôºå‰πüÂ∞±ÊòØÈòªÂ°ûÈòüÂàó‰∏≠Á≠âÂæÖ</li>
<li>ÂêéÈù¢ÁöÑ‰∫∫ÂèàÈôÜÈôÜÁª≠Áª≠Êù•‰∫ÜÔºåÂÄôÂÆ¢Âå∫ÂèØËÉΩ‰∏çÂ§üÁî®‰∫ÜÔºåÂõ†Ê≠§ÈúÄË¶ÅÁî≥ËØ∑Â¢ûÂä†Â§ÑÁêÜËØ∑Ê±ÇÁöÑÁ™óÂè£ÔºåËøôÈáåÁöÑÁ™óÂè£ÊåáÁöÑÊòØÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞Ôºå‰ª•Ê≠§Êù•Ëß£ÂÜ≥Á∫øÁ®ã‰∏çÂ§üÁî®ÁöÑÈóÆÈ¢ò</li>
<li>ÂÅáËÆæÂèóÁêÜÁ™óÂè£Â∑≤ÁªèËææÂà∞ÊúÄÂ§ßÊï∞ÔºåÂπ∂‰∏îËØ∑Ê±ÇÊï∞ËøòÊòØ‰∏çÊñ≠ÈÄíÂ¢ûÔºåÊ≠§Êó∂ÂÄôÂÆ¢Âå∫ÂíåÁ∫øÁ®ãÊ±†ÈÉΩÂ∑≤ÁªèÊª°‰∫ÜÔºå‰∏∫‰∫ÜÈò≤Ê≠¢Â§ßÈáèËØ∑Ê±ÇÂÜ≤ÂûÆÁ∫øÁ®ãÊ±†ÔºåÂ∑≤ÁªèÈúÄË¶ÅÂºÄÂêØÊãíÁªùÁ≠ñÁï•</li>
<li>‰∏¥Êó∂Â¢ûÂä†ÁöÑÁ∫øÁ®ã‰ºöÂõ†‰∏∫Ë∂ÖËøá‰∫ÜÊúÄÂ§ßÂ≠òÊ¥ªÊó∂Èó¥ÔºåÂ∞±‰ºöÈîÄÊØÅÔºåÊúÄÂêé‰ªéÊúÄÂ§ßÊï∞ÂâäÂáèÂà∞Ê†∏ÂøÉÊï∞</li>
</ol>
</blockquote>
<h3 id="‰∏∫‰ªÄ‰πà‰∏çÁî®-executors-ÂàõÂª∫Á∫øÁ®ãÊ±†">‰∏∫‰ªÄ‰πà‰∏çÁî® Executors ÂàõÂª∫Á∫øÁ®ãÊ±† <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>‰ΩøÁî® Executors Á∫øÁ®ãÊ±†ÂàõÂª∫ÁöÑÊñπÊ≥ïÊúâÔºö</p>
<ul>
<li>Âõ∫ÂÆöÊï∞ÁöÑÔºönewFixedThreadPool</li>
<li>Âçï‰∏ÄÁöÑÔºönewSingleThreadExecutor</li>
<li>ÂèØÂèòÁöÑÔºönewCachedThreadPool</li>
</ul>
<p>ÈÇ£‰πàÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÂ∫îËØ•‰ΩøÁî®Âì™‰∏™Ôºü</p>
<p><strong>Êàë‰ª¨‰∏Ä‰∏™ÈÉΩ‰∏çÁî®ÔºåÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÊòØ‰ΩøÁî®Ëá™Â∑±Ëá™ÂÆö‰πâÁöÑ</strong></p>
<p>‰∏∫‰ªÄ‰πà‰∏çÁî® JDK Êèê‰æõÁöÑ Executors Êù•ÂàõÂª∫Á∫øÁ®ãÊ±†Ôºü</p>
<p>Ê†πÊçÆÈòøÈáåÂ∑¥Â∑¥ÊâãÂÜåÔºöÂπ∂ÂèëÊéßÂà∂ËøôÁ´†ÔºåÊúâÂ¶Ç‰∏ãÔºö</p>
<ul>
<li><strong>Á∫øÁ®ãËµÑÊ∫êÂøÖÈ°ªÈÄöËøáÁ∫øÁ®ãÊ±†Êèê‰æõÔºå‰∏çÂÖÅËÆ∏Âú®Â∫îÁî®‰∏≠Ëá™Ë°åÊòæÂºèÂàõÂª∫Á∫øÁ®ã</strong>
<ul>
<li>‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÂ•ΩÂ§ÑÊòØÂáèÂ∞ëÂú®ÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ã‰∏äÊâÄÊ∂àËÄóÁöÑÊó∂Èó¥‰ª•ÂèäÁ≥ªÁªüËµÑÊ∫êÁöÑÂºÄÈîÄÔºåËß£ÂÜ≥ËµÑÊ∫ê‰∏çË∂≥ÁöÑÈóÆÈ¢ò</li>
<li>Â¶ÇÊûú‰∏ç‰ΩøÁî®Á∫øÁ®ãÊ±†ÔºåÊúâÂèØËÉΩÈÄ†ÊàêÁ≥ªÁªüÂàõÂª∫Â§ßÈáèÂêåÁ±ªÁ∫øÁ®ãËÄåÂØºËá¥Ê∂àËÄóÂÆåÂÜÖÂ≠òÊàñËÄÖ‚ÄúËøáÂ∫¶ÂàáÊç¢‚ÄùÁöÑÈóÆÈ¢ò</li>
</ul></li>
<li><strong>Á∫øÁ®ãÊ±†‰∏çÂÖÅËÆ∏‰ΩøÁî® Executors ÂéªÂàõÂª∫ÔºåËÄåÊòØÈÄöËøá ThreadToolExecutors ÁöÑÊñπÂºè</strong>ÔºåËøôÊ†∑ÁöÑÂ§ÑÁêÜÊñπÂºèËÆ©ÂÜôÁöÑÂêåÂ≠¶Êõ¥Âä†ÊòéÁ°ÆÁ∫øÁ®ãÊ±†ÁöÑËøêË°åËßÑÂàôÔºåËßÑÈÅøËµÑÊ∫êËÄóÂ∞ΩÁöÑÈ£éÈô©„ÄÇ
<ul>
<li>Executors ËøîÂõûÁöÑÁ∫øÁ®ãÊ±†ÂØπË±°<strong>ÂºäÁ´ØÂ¶Ç‰∏ã</strong>Ôºö
<ul>
<li>FixedThreadPool Âíå SingleThreadPoolÔºöËøêË°åÁöÑËØ∑Ê±ÇÈòüÂàóÈïøÂ∫¶‰∏∫ Integer.MAX_VALUEÔºåÂèØËÉΩ‰ºöÂ†ÜÁßØÂ§ßÈáèÁöÑËØ∑Ê±ÇÔºå‰ªéËÄåÂØºËá¥ OOM</li>
<li>CacheThreadPool Âíå ScheduledThreadPoolÔºöËøêË°åÁöÑËØ∑Ê±ÇÈòüÂàóÈïøÂ∫¶‰∏∫ÔºöInteger.MAX_VALUEÔºåÂèØËÉΩ‰ºöÂ†ÜÁßØÂ§ßÈáèÁöÑËØ∑Ê±ÇÔºå‰ªéËÄåÂØºËá¥OOM</li>
</ul></li>
</ul></li>
</ul>
<h3 id="ÂéüÂ≠êÁ±ª-ÂéüÂ≠êÊìç‰Ωú-cas">ÂéüÂ≠êÁ±ª &amp; ÂéüÂ≠êÊìç‰Ωú &amp; CAS <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>ÂéüÂ≠êÊìç‰ΩúÔºàatomic operationÔºâÊÑè‰∏∫&quot;<strong>‰∏çÂèØË¢´‰∏≠Êñ≠ÁöÑ‰∏Ä‰∏™Êàñ‰∏ÄÁ≥ªÂàóÊìç‰Ωú</strong>‚Äù</p>
<p>Âú® Java ‰∏≠ÂèØ‰ª•ÈÄöËøá<strong>ÈîÅ</strong>Âíå<strong>Âæ™ÁéØ CAS</strong> ÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÂéüÂ≠êÊìç‰Ωú„ÄÇ</p>
<ul>
<li>CAS Êìç‰ΩúÔºö<code>Compare &amp; Set</code> ÊàñÊòØ <code>Compare &amp; Swap</code>ÔºåÁé∞Âú®Âá†‰πéÊâÄÊúâÁöÑ CPU Êåá‰ª§ÈÉΩÊîØÊåÅ CAS ÁöÑÂéüÂ≠êÊìç‰ΩúÔºåÂÆÉÁöÑÂäüËÉΩÊòØÂà§Êñ≠ÂÜÖÂ≠òÊüê‰∏™‰ΩçÁΩÆÁöÑÂÄºÊòØÂê¶‰∏∫È¢ÑÊúüÂÄºÔºåÂ¶ÇÊûúÊòØÂàôÊõ¥Êîπ‰∏∫Êñ∞ÁöÑÂÄºÔºå<strong>Ëøô‰∏™ËøáÁ®ãÊòØÂéüÂ≠êÁöÑ</strong></li>
<li><strong>‰πüÂ∞±ÊòØËØ¥ CAS ÊòØ‰∏ÄÊù° CPU ÁöÑÂéüÂ≠êÊåá‰ª§Ôºå‰∏ç‰ºöÈÄ†ÊàêÊâÄË∞ìÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØËØ¥ CAS ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ</strong></li>
</ul>
<p><strong>ÂéüÂ≠êÊìç‰ΩúÊòØÊåá‰∏Ä‰∏™‰∏çÂèóÂÖ∂‰ªñÊìç‰ΩúÂΩ±ÂìçÁöÑÊìç‰Ωú‰ªªÂä°ÂçïÂÖÉ</strong>„ÄÇÂéüÂ≠êÊìç‰ΩúÊòØÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÈÅøÂÖçÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÂøÖÈ°ªÁöÑÊâãÊÆµ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö<code>int++</code> Âπ∂‰∏çÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúÔºåÊâÄ‰ª•ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËØªÂèñÂÆÉÁöÑÂÄºÂπ∂Âä† 1 Êó∂ÔºåÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÊúâÂèØËÉΩ‰ºöËØªÂà∞‰πãÂâçÁöÑÂÄºÔºåËøôÂ∞±‰ºöÂºïÂèëÈîôËØØ„ÄÇ</p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂøÖÈ°ª‰øùËØÅÂ¢ûÂä†Êìç‰ΩúÊòØÂéüÂ≠êÁöÑÔºåÂú® JDK1.5 ‰πãÂâçÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂêåÊ≠•ÊäÄÊúØÊù•ÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇÂà∞ JDK1.5Ôºå<code>java.util.concurrent.atomic</code> ÂåÖÊèê‰æõ‰∫Ü int Âíå long Á±ªÂûãÁöÑ<strong>ÂéüÂ≠êÂåÖË£ÖÁ±ª</strong>ÔºåÂÆÉ‰ª¨ÂèØ‰ª•Ëá™Âä®ÁöÑ‰øùËØÅÂØπ‰∫é‰ªñ‰ª¨ÁöÑÊìç‰ΩúÊòØÂéüÂ≠êÁöÑÂπ∂‰∏î‰∏çÈúÄË¶Å‰ΩøÁî®ÂêåÊ≠•ÔºåËÄåÊòØÈÄöËøá CAS ËøõË°å‰øùËØÅÔºö</p>
<ul>
<li><p>CAS ÊòØ <code>compareAndSwap</code>Ôºå<strong>ÊØîËæÉÂΩìÂâçÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÁöÑÂÄºÂíå‰∏ªÁâ©ÁêÜÂÜÖÂ≠ò‰∏≠ÁöÑÂÄº</strong>ÔºåÂ¶ÇÊûúÁõ∏ÂêåÂàôÊâßË°åËßÑÂÆöÊìç‰ΩúÔºåÂê¶ËÄÖÁªßÁª≠ÊØîËæÉÁõ¥Âà∞‰∏ªÂÜÖÂ≠òÂíåÂ∑•‰ΩúÂÜÖÂ≠òÁöÑÂÄº‰∏ÄËá¥‰∏∫Ê≠¢</p></li>
<li><p>CAS Êúâ3‰∏™Êìç‰ΩúÊï∞ÔºåÂÜÖÂ≠òÂÄºVÔºåÊóßÁöÑÈ¢ÑÊúüÂÄºAÔºåË¶Å‰øÆÊîπÁöÑÊõ¥Êñ∞ÂÄºB„ÄÇÂΩì‰∏î‰ªÖÂΩìÈ¢ÑÊúüÂÄºAÂíåÂÜÖÂ≠òÂÄºVÁõ∏ÂêåÊó∂ÔºåÂ∞ÜÂÜÖÂ≠òÂÄºV‰øÆÊîπ‰∏∫BÔºåÂê¶ËÄÖ‰ªÄ‰πàÈÉΩ‰∏çÂÅö„ÄÇ</p></li>
</ul>
<blockquote>
<p><code>java.util.concurrent</code> Ëøô‰∏™ÂåÖÈáåÈù¢Êèê‰æõ‰∫Ü‰∏ÄÁªÑÂéüÂ≠êÁ±ª„ÄÇ</p>
<ul>
<li>ÂéüÂ≠êÁ±ªÔºöAtomicBooleanÔºåAtomicIntegerÔºåAtomicLongÔºåAtomicReference</li>
<li>ÂéüÂ≠êÊï∞ÁªÑÔºöAtomicIntegerArrayÔºåAtomicLongArrayÔºåAtomicReferenceArray</li>
<li>ÂéüÂ≠êÂ±ûÊÄßÊõ¥Êñ∞Âô®ÔºöAtomicIntegerFieldUpdaterÔºåAtomicLongFieldUpdaterÔºåAtomicReferenceFieldUpdater</li>
<li>Ëß£ÂÜ≥ ABA ÈóÆÈ¢òÁöÑÂéüÂ≠êÁ±ªÔºö
<ul>
<li>AtomicMarkableReferenceÔºàÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™ boolean Êù•ÂèçÊò†‰∏≠Èó¥ÊúâÊ≤°ÊúâÂèòËøáÔºâ</li>
<li>AtomicStampedReferenceÔºàÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™ int Êù•Á¥ØÂä†Êù•ÂèçÊò†‰∏≠Èó¥ÊúâÊ≤°ÊúâÂèòËøáÔºâ</li>
</ul></li>
</ul>
</blockquote>
<h3 id="cas-‰∏é-synchronized">CAS ‰∏é synchronized <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p><strong>ÁªìÂêà CAS Âíå volatile ÂèØ‰ª•ÂÆûÁé∞Êó†ÈîÅÂπ∂ÂèëÔºåÈÄÇÁî®‰∫éÁ∫øÁ®ãÊï∞Â∞ë„ÄÅÂ§öÊ†∏ CPU ÁöÑÂú∫ÊôØ‰∏ã„ÄÇ</strong></p>
<ul>
<li>CAS ÊòØÂü∫‰∫é<strong>‰πêËßÇÈîÅ</strong>ÁöÑÊÄùÊÉ≥ÔºöÊúÄ‰πêËßÇÁöÑ‰º∞ËÆ°Ôºå‰∏çÊÄïÂà´ÁöÑÁ∫øÁ®ãÊù•‰øÆÊîπÂÖ±‰∫´ÂèòÈáèÔºåÂ∞±ÁÆóÊîπ‰∫Ü‰πüÊ≤°ÂÖ≥Á≥ªÔºåÊàëÂêÉ‰∫èÁÇπÂÜçÈáçËØïÂëó„ÄÇ</li>
<li>synchronized ÊòØÂü∫‰∫é<strong>ÊÇ≤ËßÇÈîÅ</strong>ÁöÑÊÄùÊÉ≥ÔºöÊúÄÊÇ≤ËßÇÁöÑ‰º∞ËÆ°ÔºåÂæóÈò≤ÁùÄÂÖ∂ÂÆÉÁ∫øÁ®ãÊù•‰øÆÊîπÂÖ±‰∫´ÂèòÈáèÔºåÊàë‰∏ä‰∫ÜÈîÅ‰Ω†‰ª¨ÈÉΩÂà´ÊÉ≥ÊîπÔºåÊàëÊîπÂÆå‰∫ÜËß£ÂºÄÈîÅÔºå‰Ω†‰ª¨ÊâçÊúâÊú∫‰ºö„ÄÇ</li>
<li>CAS ‰ΩìÁé∞ÁöÑÊòØÊó†ÈîÅÂπ∂Âèë„ÄÅÊó†ÈòªÂ°ûÂπ∂ÂèëÔºåËØ∑‰ªîÁªÜ‰Ωì‰ºöËøô‰∏§Âè•ËØùÁöÑÊÑèÊÄù
<ul>
<li>Âõ†‰∏∫Ê≤°Êúâ‰ΩøÁî® synchronizedÔºåÊâÄ‰ª•Á∫øÁ®ã‰∏ç‰ºöÈô∑ÂÖ•ÈòªÂ°ûÔºåËøôÊòØÊïàÁéáÊèêÂçáÁöÑÂõ†Á¥†‰πã‰∏Ä</li>
<li>‰ΩÜÂ¶ÇÊûúÁ´û‰∫âÊøÄÁÉàÔºåÂèØ‰ª•ÊÉ≥Âà∞ÈáçËØïÂøÖÁÑ∂È¢ëÁπÅÂèëÁîüÔºåÂèçËÄåÊïàÁéá‰ºöÂèóÂΩ±Âìç</li>
</ul></li>
</ul>
<h3 id="locksupport-‰πã-park-unpark">LockSupport ‰πã park &amp; unpark</h3>
<p>LockSupport ‰∏∫ <code>java.util.concurrent.locks</code> ÂåÖ‰∏ãÁöÑÂ∑•ÂÖ∑ÔºåÂÖ∂‰∏ªË¶ÅÊèê‰æõ‰∫Ü <code>park</code> Âíå <code>unpark</code> ÊñπÊ≥ïÔºåËøô‰∏§‰∏™ÊñπÊ≥ï‰∏ªË¶ÅÁî®‰∫éÈòªÂ°ûÁ∫øÁ®ãÂíåËß£ÈîÅÈòªÂ°ûÁ∫øÁ®ãÔºåÂÖ∂ÂèØ‰ª•ËÆ©Á∫øÁ®ãÂú®‰ªªÊÑè‰ΩçÁΩÆÈòªÂ°ûÔºåÂú®ÈòªÂ°û‰πãÂêé‰πüÊúâÂØπÂ∫îÁöÑÂî§ÈÜíÊñπÊ≥ï„ÄÇ</p>
<blockquote>
<p>3ÁßçËÆ©Á∫øÁ®ãÁ≠âÂæÖÂíåÂî§ÈÜíÁöÑÊñπÊ≥ï</p>
<ol type="1">
<li>synchronizeÔºö‰ΩøÁî® Object ‰∏≠ÁöÑ <code>wait()</code> ÊñπÊ≥ïËÆ©Á∫øÁ®ãÁ≠âÂæÖÔºå‰ΩøÁî® Object ‰∏≠ÁöÑ <code>notify()</code> ÊñπÊ≥ïÂî§ÈÜíÁ∫øÁ®ãÔºõ</li>
<li>ReentrantLockÔºö‰ΩøÁî® Condition ÁöÑ <code>await()</code> ÊñπÊ≥ïËÆ©Á∫øÁ®ãÁ≠âÂæÖÔºå‰ΩøÁî® <code>signal()</code> ÊñπÊ≥ïÂî§ÈÜíÁ∫øÁ®ãÔºõ</li>
<li>LockSupportÔºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ã‰ª•ÂèäÂî§ÈÜíÊåáÂÆöË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ã</li>
</ol>
</blockquote>
<p><strong>ÁâπÁÇπ</strong>Ôºö‰∏é Object ÁöÑ wait &amp; notify Áõ∏ÊØî</p>
<ul>
<li>waitÔºånotify Âíå notifyAll ÂøÖÈ°ªÈÖçÂêà Object Monitor ‰∏ÄËµ∑‰ΩøÁî®ÔºåËÄå parkÔºåunpark ‰∏çÂøÖ</li>
<li>park &amp; unpark ÊòØ<strong>‰ª•Á∫øÁ®ã‰∏∫Âçï‰Ωç</strong>Êù•„ÄéÈòªÂ°û„ÄèÂíå„ÄéÂî§ÈÜí„ÄèÁ∫øÁ®ãÔºåËÄå notify Âè™ËÉΩÈöèÊú∫Âî§ÈÜí‰∏Ä‰∏™Á≠âÂæÖÁ∫øÁ®ãÔºånotifyAll ÊòØÂî§ÈÜíÊâÄÊúâÁ≠âÂæÖÁ∫øÁ®ãÔºåÂ∞±‰∏çÈÇ£‰πàÁ≤æÁ°Æ</li>
<li>park &amp; unpark ÂèØ‰ª•<strong>ÂÖà unpark</strong>ÔºåËÄå wait &amp; notify ‰∏çËÉΩÂÖà notify</li>
</ul>
<p><strong>ÂéüÁêÜ</strong>Ôºö</p>
<ul>
<li>ÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑ‰∏Ä‰∏™ Parker ÂØπË±°ÔºåÁî±‰∏âÈÉ®ÂàÜÁªÑÊàê <code>_counter</code> Ôºå <code>_cond</code> Âíå <code>_mutex</code></li>
<li>ÂΩìÂú®Á∫øÁ®ã‰∏≠Ë∞ÉÁî® <code>LockSupport.park()</code> ÊñπÊ≥ïÊó∂ÔºåËã•ËØ•Á∫øÁ®ãÁöÑ Parker ÂØπË±° <code>_counter</code> ÂÄº‰∏∫0ÔºåÂàôÁ∫øÁ®ãËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºõ</li>
<li>ÂΩìË∞ÉÁî® <code>LockSupport.unpark(Á∫øÁ®ãÂØπË±°)</code>Êó∂Ôºå‰ºö‰ª§ÂàöÂàöÂõ† <code>unpark()</code> ËÄåÈòªÂ°ûÁöÑÁ∫øÁ®ãÊÅ¢Â§çËøêË°åÔºõ</li>
<li>ÁâπÂà´Ê≥®ÊÑèÔºöÂΩìÁ∫øÁ®ãÊú™ÈòªÂ°ûÊó∂Ôºå‰πüÂèØ‰ª•Â§öÊ¨°Ë∞ÉÁî® <code>LockSupport.unpark(Á∫øÁ®ãÂØπË±°)</code> ÊñπÊ≥ïÔºåËøô‰ºö‰ª§Ê≠§Êó∂Á∫øÁ®ãÁöÑ Parker ÂØπË±° <code>_counter</code> ÂÄº‰∏∫ 1ÔºåËÄåÂΩìÂú®ËØ•Á∫øÁ®ã‰∏≠Ë∞ÉÁî® <code>park()</code> ÊñπÊ≥ïÊó∂Ôºå‰ºöÊ∂àËÄóËøô‰∏™ <code>_counter</code> ÂÄºÔºåÁî±‰∫éÊ∂àËÄóÂÆå‰πãÂêé‰∏∫ 0ÔºåÂõ†Ê≠§Á∫øÁ®ã‰∏ç‰ºöÈòªÂ°ûÔºåËÄåÊòØÁªßÁª≠ËøêË°åÔºõ</li>
<li>‰ΩÜÊòØËÄÉËôëÂà∞ <code>_counter</code> ÂÄºÊúÄÂ§ß‰∏∫1ÔºåÂΩìË∞ÉÁî®‰∏ÄÊ¨° <code>park()</code> ÊñπÊ≥ïÊ∂àËÄóÂÆå‰πãÂêéÔºåÂÜçÊ¨°Ë∞ÉÁî® <code>park()</code> Á∫øÁ®ãËøòÊòØ‰ºöËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ</li>
</ul>
<p><strong>Ê≥®ÊÑèÁÇπ</strong></p>
<ul>
<li>ÂΩì park ‰ΩèÁöÑÁ∫øÁ®ãË¢´ÊâìÊñ≠ÂêéÔºåÊâìÊñ≠Ê†áÂøó‰Ωç‰ºöË¢´ÁΩÆ‰∏∫ trueÔºõ</li>
<li>Ê≠§Êó∂ÂÜçÊ¨° park Á∫øÁ®ãÊó∂ÔºåparkÊó†ÊïàÔºåÂç≥Ôºö<strong>ÂΩìÁ∫øÁ®ãÁöÑÊâìÊñ≠Ê†áÂøó‰Ωç‰∏∫ true Êó∂ÔºåÂÜçÊ¨° park Êó†Êïà</strong></li>
<li>ÂèØ‰ª•ÈÄöËøá <code>Thread.interrupted()</code> Ê∏ÖÈô§ÊâìÊñ≠Ê†áÂøó‰ΩçÔºõËÄåÊñπÊ≥ï <code>isInterrupted</code> ÊòØ‰∏ç‰ºöÊ∏ÖÈô§ÊâìÊñ≠Ê†áÂøó‰ΩçÁöÑ</li>
</ul>
<blockquote>
<p>Ëøõ‰∏ÄÊ≠•ÁêÜËß£ËßÅÔºö<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14491216.html">JavaÔºöÂπ∂ÂèëÁ¨îËÆ∞-03Ôºö3.9 Park &amp; Unpark</a></p>
</blockquote>
<h3 id="aqsË∞àË∞àÂØπaqsÁöÑÁêÜËß£">AQSÔºöË∞àË∞àÂØπAQSÁöÑÁêÜËß£ <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<blockquote>
<p>‰º†ÈÄÅÈó®Ôºö<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14799761.html">JavaÔºöAQS Â∞èËÆ∞-1(Ê¶ÇËø∞)</a></p>
</blockquote>
<p>ÂÖ®Áß∞ÊòØ Abstract Queued SynchronizerÔºàÊäΩË±°ÈòüÂàóÂêåÊ≠•Âô®ÔºâÔºåÊòØ<strong>ÈòªÂ°ûÂºèÈîÅÂíåÁõ∏ÂÖ≥ÁöÑÂêåÊ≠•Âô®Â∑•ÂÖ∑ÁöÑÊ°ÜÊû∂</strong>ÔºåËøô‰∏™Á±ªÂú® <code>java.util.concurrent.locks</code> ÂåÖ‰∏ãÈù¢„ÄÇ</p>
<p><strong>AQS ÁöÑÊ†∏ÂøÉÊÄùÊÉ≥</strong>Ôºö</p>
<ul>
<li>Â¶ÇÊûúË¢´ËØ∑Ê±ÇÁöÑÂÖ±‰∫´ËµÑÊ∫ê<strong>Á©∫Èó≤</strong>ÔºåÂàôÂ∞ÜÂΩìÂâçËØ∑Ê±ÇËµÑÊ∫êÁöÑÁ∫øÁ®ãËÆæÁΩÆ‰∏∫ÊúâÊïàÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºåÂπ∂‰∏îÂ∞ÜÂÖ±‰∫´ËµÑÊ∫êËÆæÁΩÆ‰∏∫ÈîÅÂÆöÁä∂ÊÄÅ„ÄÇ</li>
<li>Â¶ÇÊûúË¢´ËØ∑Ê±ÇÁöÑÂÖ±‰∫´ËµÑÊ∫ê<strong>Ë¢´Âç†Áî®</strong>ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶Å‚ºÄÂ•ó<strong>Á∫øÁ®ãÈòªÂ°ûÁ≠âÂæÖ</strong>‰ª•Âèä<strong>Ë¢´Âî§ÈÜíÊó∂ÈîÅÂàÜÈÖç</strong>ÁöÑÊú∫Âà∂ÔºåËøô‰∏™Êú∫Âà∂ AQS ÊòØÁî® <strong>CLH ÈòüÂàó</strong>ÂÆûÁé∞ÁöÑÔºåÂç≥Â∞ÜÊöÇÊó∂Ëé∑Âèñ‰∏çÂà∞ÈîÅÁöÑÁ∫øÁ®ãÂä†ÂÖ•Âà∞ÈòüÂàó‰∏≠„ÄÇ</li>
</ul>
<p><strong>state ÂèòÈáè</strong>Ôºö</p>
<ul>
<li><p><strong>AQS ‰ΩøÁî®‚ºÄ‰∏™ int Á±ªÂûãÁöÑÊàêÂëòÂèòÈáè state Êù•Ë°®Á§∫ËµÑÊ∫êÔºàÁã¨Âç†/ÂÖ±‰∫´ÔºâÁöÑÁä∂ÊÄÅ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂÖ±‰∫´ÂèòÈáèÔºå‰ΩøÁî®volatile‰øÆÈ•∞‰øùËØÅÁ∫øÁ®ãÂèØËßÅÊÄß</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> state;</span><br><span class="line"></span><br><span class="line"><span class="comment">// state Áä∂ÊÄÅ‰ø°ÊÅØÈÄöËøáÊñπÊ≥ïgetState/setState/compareAndSetStateËøõË°åËé∑Âèñ‰∏é‰øÆÊîπ</span></span><br><span class="line"><span class="comment">// Ëé∑Âèñ state Áä∂ÊÄÅ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ËÆæÁΩÆ state Áä∂ÊÄÅ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(<span class="keyword">int</span> newState)</span> </span>&#123;</span><br><span class="line">    state = newState;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// cas Êú∫Âà∂ËÆæÁΩÆstateÁä∂ÊÄÅ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">compareAndSetState</span><span class="params">(<span class="keyword">int</span> expect, <span class="keyword">int</span> update)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> unsafe.compareAndSwapInt(<span class="keyword">this</span>, stateOffset, expect, update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>AQS ÂØπËµÑÊ∫êÁöÑÂç†Áî®ÂàÜ‰∏∫‰∏§ÁßçÊñπÂºèÔºöExclusiveÔºàÁã¨Âç†Ôºâ‰∏é ShareÔºàÂÖ±‰∫´Ôºâ</strong></p>
<ul>
<li><strong>ExclusiveÔºàÁã¨Âç†Ôºâ</strong>ÔºöÂè™Êúâ‚ºÄ‰∏™Á∫øÁ®ãËÉΩÊâßË°åÔºåÂ¶Ç ReentrantLockÔºåÂèàÂèØÂàÜ‰∏∫ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÔºö
<ul>
<li><strong>ÂÖ¨Âπ≥ÈîÅ</strong>ÔºöÂ§ö‰∏™Á∫øÁ®ãÊåâÁÖßÁî≥ËØ∑ÈîÅÁöÑÈ°∫Â∫èÂéªËé∑ÂèñÈîÅÔºåÁ∫øÁ®ã‰ºöÂÖàËøõÂÖ•ÈòüÂàó‰∏≠ËøõË°åÊéíÈòüÔºåÂõ†Ê≠§ÈòüÂàó‰∏≠Á¨¨‰∏Ä‰∏™Á∫øÁ®ã‰ºöÂÖàËé∑ÂæóÈîÅËµÑÊ∫êÔºõ</li>
<li><strong>ÈùûÂÖ¨Âπ≥ÈîÅ</strong>ÔºöÂΩìÁ∫øÁ®ãË¶ÅËé∑ÂèñÈîÅÊó∂Ôºå<strong>‰ºöÂÖàÂ∞ùËØïËé∑ÂæóÈîÅ</strong>ÔºåËé∑Âèñ‰∏çÂà∞ÂÜçËøõÂÖ•ÈòüÂàóÁ≠âÂæÖÔºà<strong>ÈòüÂàó‰∏≠Á≠âÂæÖÁöÑÁ∫øÁ®ãËøòÊòØÈÅµÂæ™FIFOÁöÑ</strong>Ôºâ„ÄÇÂõ†Ê≠§ÂΩìÊúâÊñ∞Êù•ÁöÑÁ∫øÁ®ãËé∑ÂèñÈîÅÊó∂ÔºåÂ≠òÂú®ÂíåÈòüÂàó‰∏≠Á≠âÂæÖÁöÑÁ∫øÁ®ã‰∫íÁõ∏Á´û‰∫âÁöÑÊÉÖÂÜµÔºåÂõ†Ê≠§ÊòØÈùûÂÖ¨Âπ≥ÁöÑ„ÄÇ</li>
</ul></li>
<li><strong>ShareÔºàÂÖ±‰∫´Ôºâ</strong>ÔºöÂ§ö‰∏™Á∫øÁ®ãÂèØÂêåÊó∂ÊâßË°åÔºåÂ¶Ç Semaphore / CountDownLatch„ÄÇ</li>
</ul>
<blockquote>
<p>ReentrantReadWriteLock ÂèØ‰ª•ÁúãÊàêÊòØ<strong>ÁªÑÂêàÂºè</strong>ÔºåÂõ†‰∏∫ ReentrantReadWriteLock ‰πüÂ∞±ÊòØËØªÂÜôÈîÅÔºåÂÖÅËÆ∏Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂØπÊüê‚ºÄËµÑÊ∫êËøõË°åËØª„ÄÇ</p>
</blockquote>
<p><strong>CLH ÈòüÂàó</strong></p>
<ul>
<li><p>CLHÔºàCraig + Landin + HagerstenÔºâÈòüÂàóÊòØ‚ºÄ‰∏™ËôöÊãüÁöÑÂèåÂêëÈòüÂàóÔºàËôöÊãüÁöÑÂèåÂêëÈòüÂàóÂç≥‰∏çÂ≠òÂú®ÈòüÂàóÂÆû‰æãÔºå<strong>‰ªÖÂ≠òÂú®ÁªìÁÇπ‰πãÈó¥ÁöÑÂÖ≥ËÅîÂÖ≥Á≥ª</strong>Ôºâ</p></li>
<li><p>AQS ÊòØÂ∞ÜÊØèÊù°ËØ∑Ê±ÇÂÖ±‰∫´ËµÑÊ∫êÁöÑÁ∫øÁ®ãÂ∞ÅË£ÖÊàê‚ºÄ‰∏™ CLH ÈîÅÈòüÂàóÁöÑ‚ºÄ‰∏™ÁªìÁÇπÔºàNodeÔºâÔºåÊù•ÂÆåÊàêËé∑ÂèñËµÑÊ∫êÁ∫øÁ®ãÁöÑÊéíÈòüÂ∑•‰Ωú„ÄÇ</p>
<p><img src="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/AQSÂéüÁêÜÂõæ.PNG" alt="AQSÂéüÁêÜÂõæ"></p></li>
</ul>
<p><strong>Â¶Ç‰ΩïËá™ÂÆö‰πâÂêåÊ≠•Âô®</strong></p>
<ul>
<li><p>‰∏çÂêåÁöÑËá™ÂÆö‰πâÂêåÊ≠•Âô®‰∫âÁî®ÂÖ±‰∫´ËµÑÊ∫êÁöÑÊñπÂºè‰∏çÂêå„ÄÇ<strong>Ëá™ÂÆö‰πâÂêåÊ≠•Âô®Âú®ÂÆûÁé∞Êó∂Âè™ÈúÄË¶ÅÂÆûÁé∞ÂÖ±‰∫´ËµÑÊ∫ê state ÁöÑËé∑Âèñ‰∏éÈáäÊîæÊñπÂºèÂç≥ÂèØ</strong>ÔºåËá≥‰∫éÂÖ∑‰ΩìÁ∫øÁ®ãÁ≠âÂæÖÈòüÂàóÁöÑÁª¥Êä§ÔºàÂ¶ÇËé∑ÂèñËµÑÊ∫êÂ§±Ë¥•ÂÖ•Èòü/Âî§ÈÜíÂá∫ÈòüÁ≠âÔºâÔºåAQSÂ∑≤ÁªèÂú®È°∂Â±ÇÂÆûÁé∞Â•Ω‰∫Ü„ÄÇ</p></li>
<li><p><strong>AQS Â∫ïÂ±Ç‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°Âºè</strong></p>
<p>ÂêåÊ≠•Âô®ÁöÑËÆæËÆ°ÊòØÂü∫‰∫éÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÁöÑÔºåÂ¶ÇÊûúÈúÄË¶ÅËá™ÂÆö‰πâÂêåÊ≠•Âô®‚ºÄËà¨ÁöÑÊñπÂºèÊòØËøôÊ†∑ÔºàÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÂæàÁªèÂÖ∏ÁöÑ‚ºÄ‰∏™Â∫îÁî®ÔºâÔºö</p>
<ol type="1">
<li>‰ΩøÁî®ËÄÖÁªßÊâø AbstractQueuedSynchronizer Âπ∂ÈáçÂÜôÊåáÂÆöÁöÑÊñπÊ≥ï„ÄÇÔºàËøô‰∫õÈáçÂÜôÊñπÊ≥ïÂæàÁÆÄÂçïÔºåÊó†ÈùûÊòØÂØπ‰∫éÂÖ±‰∫´ËµÑÊ∫ê state ÁöÑËé∑ÂèñÂíåÈáäÊîæÔºâ</li>
<li>Â∞Ü AQS ÁªÑÂêàÂú®Ëá™ÂÆö‰πâÂêåÊ≠•ÁªÑ‰ª∂ÁöÑÂÆûÁé∞‰∏≠ÔºåÂπ∂Ë∞ÉÁî®ÂÖ∂Ê®°ÊùøÊñπÊ≥ïÔºåËÄåËøô‰∫õÊ®°ÊùøÊñπÊ≥ï‰ºöË∞ÉÁî®‰ΩøÁî®ËÄÖÈáçÂÜôÁöÑÊñπÊ≥ï„ÄÇ</li>
</ol></li>
<li><p>‰∏ªË¶ÅÂ∞±ÊòØÂ≠êÁ±ªÂÆûÁé∞<strong>‰ª•‰∏ãÂá†‰∏™Ê®°ÁâàÊñπÊ≥ï</strong>Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ËØ•Á∫øÁ®ãÊòØÂê¶Ê≠£Âú®Áã¨Âç†ËµÑÊ∫ê„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isHeldExclusively</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Áã¨Âç†ÊñπÂºè:Â∞ùËØïËé∑ÂèñËµÑÊ∫êÔºåÊàêÂäüÂàôËøîÂõûtrueÔºåÂ§±Ë¥•ÂàôËøîÂõûfalse„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryAcquire</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">&#125;      </span><br><span class="line"><span class="comment">// Áã¨Âç†ÊñπÂºè:Â∞ùËØïÈáäÊîæËµÑÊ∫êÔºåÊàêÂäüÂàôËøîÂõûtrueÔºåÂ§±Ë¥•ÂàôËøîÂõûfalse„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryRelease</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂÖ±‰∫´ÊñπÂºèÔºöÂ∞ùËØïËé∑ÂèñËµÑÊ∫ê„ÄÇË¥üÊï∞Ë°®Á§∫Â§±Ë¥•Ôºõ0Ë°®Á§∫ÊàêÂäüÔºå‰ΩÜÊ≤°ÊúâÂâ©‰ΩôÂèØÁî®ËµÑÊ∫êÔºõÊ≠£Êï∞Ë°®Á§∫ÊàêÂäüÔºå‰∏îÊúâÂâ©‰ΩôËµÑÊ∫ê„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ÂÖ±‰∫´ÊñπÂºèÔºöÂ∞ùËØïÈáäÊîæËµÑÊ∫êÔºåÊàêÂäüÂàôËøîÂõûtrueÔºåÂ§±Ë¥•ÂàôËøîÂõûfalse„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryReleaseShared</span><span class="params">(<span class="keyword">int</span> arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå<strong>ÊØè‰∏™ÊñπÊ≥ïÈÉΩÊäõÂá∫ UnsupportedOperationExceptionÔºåÂõ†Ê≠§Ëá™ÂÆö‰πâÂêåÊ≠•Âô®Êó∂ÂøÖÈ°ªÈáçÂÜôË¶ÅÁî®Âà∞ÁöÑÊñπÊ≥ï„ÄÇ </strong>AQS Á±ª‰∏≠ÁöÑÂÖ∂‰ªñÊñπÊ≥ïÈÉΩÊòØ final ÔºåÊâÄ‰ª•Êó†Ê≥ïË¢´ÂÖ∂‰ªñÁ±ªÈáçÂÜôÔºåÂè™ÊúâËøôÂá†‰∏™ÊñπÊ≥ïÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÁ±ªÈáçÂÜô„ÄÇ</p>
<p>‚ºÄËà¨Êù•ËØ¥ÔºåËá™ÂÆö‰πâÂêåÊ≠•Âô®Ë¶Å‰πàÊòØÁã¨Âç†ÊñπÊ≥ïÔºåË¶Å‰πàÊòØÂÖ±‰∫´ÊñπÂºèÔºå‰ªñ‰ª¨‰πüÂè™ÈúÄÂÆûÁé∞ <code>tryAcquire-tryRelease</code>„ÄÅ<code>tryAcquireShared-tryReleaseShared</code> ‰∏≠ÁöÑ‚ºÄÁßçÂç≥ÂèØ„ÄÇ‰ΩÜ AQS ‰πü‚ΩÄÊåÅËá™ÂÆö‰πâÂêåÊ≠•Âô®ÂêåÊó∂ÂÆûÁé∞Áã¨Âç†ÂíåÂÖ±‰∫´‰∏§ÁßçÊñπÂºèÔºåÂ¶Ç ReentrantReadWriteLock„ÄÇ</p></li>
</ul>
<p><strong>AQS Â∑≤ÊúâÂÆûÁé∞</strong></p>
<ul>
<li><strong>‰ª• ReentrantLock ‰∏∫‰æã</strong>Ôºö
<ul>
<li>stateÂàùÂßãÂåñ‰∏∫0ÔºåË°®Á§∫Êú™ÈîÅÂÆöÁä∂ÊÄÅ„ÄÇ</li>
<li>AÁ∫øÁ®ã<code>lock()</code>Êó∂Ôºå‰ºöË∞ÉÁî®<code>tryAcquire()</code>Áã¨Âç†ËØ•ÈîÅÂπ∂Â∞Ü state+1„ÄÇ</li>
<li>Ê≠§ÂêéÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂÜç<code>tryAcquire()</code>Êó∂Â∞±‰ºöÂ§±Ë¥•ÔºåÁõ¥Âà∞AÁ∫øÁ®ã<code>unlock()</code>Âà∞state=0ÔºàÂç≥ÈáäÊîæÈîÅÔºâ‰∏∫Ê≠¢ÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÊâçÊúâÊú∫‰ºöËé∑ÂèñËØ•ÈîÅ„ÄÇ</li>
<li>ÂΩìÁÑ∂ÔºåÈáäÊîæÈîÅ‰πãÂâçÔºå AÁ∫øÁ®ãËá™Â∑±ÊòØÂèØ‰ª•ÈáçÂ§çËé∑ÂèñÊ≠§ÈîÅÁöÑÔºàstate‰ºöÁ¥ØÂä†ÔºâÔºåËøôÂ∞±ÊòØÂèØÈáçÂÖ•ÁöÑÊ¶ÇÂøµ„ÄÇ</li>
<li>‰ΩÜË¶ÅÊ≥®ÊÑèÔºåËé∑ÂèñÂ§öÂ∞ëÊ¨°Â∞±Ë¶ÅÈáäÊîæÂ§ö‰πàÊ¨°ÔºåËøôÊ†∑ÊâçËÉΩ‰øùËØÅstateÊòØËÉΩÂõûÂà∞Èõ∂ÁöÑ„ÄÇ</li>
</ul></li>
<li><strong>ÂÜç‰ª• CountDownLatch ‰ª•‰æã</strong>Ôºö
<ul>
<li>‰ªªÂä°ÂàÜ‰∏∫ N ‰∏™Â≠êÁ∫øÁ®ãÂéªÊâßË°åÔºå state‰πüÂàùÂßãÂåñ‰∏∫NÔºàÊ≥®ÊÑèNË¶Å‰∏éÁ∫øÁ®ã‰∏™Êï∞‚ºÄËá¥Ôºâ„ÄÇ</li>
<li>Ëøô N ‰∏™Â≠êÁ∫øÁ®ãÊòØÂπ∂Ë°åÊâßË°åÁöÑÔºåÊØè‰∏™Â≠êÁ∫øÁ®ãÊâßË°åÂÆåÂêé <code>countDown()</code> ‚ºÄÊ¨°Ôºå <code>state-1</code> ÔºàCASÔºâ„ÄÇ</li>
<li>Á≠âÂà∞ÊâÄÊúâÂ≠êÁ∫øÁ®ãÈÉΩÊâßË°åÂÆåÂêé(Âç≥state=0)Ôºå‰ºö<code>unpark()</code>‰∏ªË∞ÉÁî®Á∫øÁ®ãÔºåÁÑ∂Âêé‰∏ªË∞ÉÁî®Á∫øÁ®ãÂ∞±‰ºö‰ªé<code>await()</code>ÂáΩÊï∞ËøîÂõûÔºåÁªßÁª≠ÂêéÁª≠Âä®‰Ωú„ÄÇ</li>
</ul></li>
</ul>
<h3 id="aqsreentrantlock">AQSÔºöReentrantLock <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>‰º†ÈÄÅÈó®Ôºö<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14800883.html">JavaÔºöAQS Â∞èËÆ∞-2(ReentrantLock)</a></p>
<h3 id="aqs‰ø°Âè∑Èáè-ÂÄíËÆ°Êó∂Âô®-Âæ™ÁéØÊ†ÖÊ†è">AQSÔºö‰ø°Âè∑Èáè &amp; ÂÄíËÆ°Êó∂Âô® &amp; Âæ™ÁéØÊ†ÖÊ†è <span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<ul>
<li><p><strong>Semaphore / ‰ø°Âè∑Èáè</strong>ÔºöÂÖÅËÆ∏Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËÆøÈóÆÔºåsynchronized Âíå ReentrantLock ÈÉΩÊòØ‚ºÄÊ¨°Âè™ÂÖÅËÆ∏‚ºÄ‰∏™Á∫øÁ®ãËÆøÈóÆÊüê‰∏™ËµÑÊ∫êÔºå Semaphore ÂèØ‰ª•ÊåáÂÆöÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËÆøÈóÆÊüê‰∏™ËµÑÊ∫ê„ÄÇ</p>
<blockquote>
<p>‰ø°Âè∑Èáè‰∏ªË¶ÅÁî®‰∫é‰∏§‰∏™ÁõÆÁöÑÔºö</p>
<ul>
<li><strong>‰∏Ä‰∏™ÊòØÁî®‰∫éÂÖ±‰∫´ËµÑÊ∫êÁöÑ‰∫íÊñ•‰ΩøÁî®</strong></li>
<li><strong>Âè¶‰∏Ä‰∏™Áî®‰∫éÂπ∂ÂèëÁ∫øÁ®ãÊï∞ÁöÑÊéßÂà∂</strong></li>
</ul>
<p>ÈÄöËøá <code>new Semaphore(3);</code> Êù•ÊåáÂÆöÂÖÅËÆ∏ËÆøÈóÆÁ∫øÁ®ãÊï∞ÔºåÈÄöËøá <code>acquire()</code> Êù•Ëé∑Âèñ‰ø°Âè∑ÈáèÔºåÈÄöËøá <code>release();</code> Êù•ÈáäÊîæËÆ∏ÂèØ</p>
<ul>
<li><code>acquire</code>ÔºöÈÄöËøáËØ•ÊñπÊ≥ïËé∑ÂèñÂà∞‰∏Ä‰∏™ËÆ∏ÂèØÔºåÁÑ∂ÂêéÂØπÂÖ±‰∫´ËµÑÊ∫êËøõË°åÊìç‰ΩúÔºõÂ¶ÇÊûúËÆ∏ÂèØÂ∑≤ÁªèÂàÜÈÖçÂÆå‰∫ÜÔºåÈÇ£‰πàÁ∫øÁ®ãÂ∞ÜËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãÈáäÊîæËÆ∏ÂèØÊâçÊúâÊú∫‰ºöÂÜçÊ¨°Ëé∑ÂæóËÆ∏ÂèØÔºõ</li>
<li><code>release</code>ÔºöÁ∫øÁ®ãÈáäÊîæ‰∏Ä‰∏™ËÆ∏ÂèØÔºåËÆ∏ÂèØÂ∞ÜË¢´ÂΩíËøòÁªô Semaphore</li>
</ul>
</blockquote></li>
<li><p><strong>CountDownLatch / ÂÄíËÆ°Êó∂Âô®</strong>ÔºöCountDownLatch ÊòØ‚ºÄ‰∏™ÂêåÊ≠•Â∑•ÂÖ∑Á±ªÔºåÁî®Êù•<strong>ÂçèË∞ÉÂ§ö‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÂêåÊ≠•</strong>„ÄÇËøô‰∏™Â∑•ÂÖ∑ÈÄöÂ∏∏<strong>Áî®Êù•ÊéßÂà∂Á∫øÁ®ãÁ≠âÂæÖ</strong>ÔºåÂÆÉÂèØ‰ª•<strong>ËÆ©Êüê‚ºÄ‰∏™Á∫øÁ®ãÁ≠âÂæÖÁõ¥Âà∞ÂÄíËÆ°Êó∂ÁªìÊùü</strong>ÔºåÂú®ÂºÄÂßãÊâßË°å„ÄÇÂÖ∂ÈÄöËøá‰∏Ä‰∏™ËÆ°Êï∞Âô®Êù•ÂÆûÁé∞ÔºåËÆ°Êï∞Âô®ÁöÑÂàùÂÄºÊòØÁ∫øÁ®ãÁöÑÊï∞ÈáèÔºåÂΩìÊØè‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÂÆåÊàêÂêéÔºåËÆ°Êï∞Âô®ÁöÑÂÄº-1ÔºåÂΩìËÆ°Êï∞Âô®ÁöÑÂÄº‰∏∫ 0 Êó∂ÔºåË°®Á§∫ÊâÄÊúâÂÖ∂‰ªñÁ∫øÁ®ãÈÉΩÊâßË°åÂÆåÊØïÔºå<strong>Á≠âÂæÖÁöÑÁ∫øÁ®ãÁªßÁª≠ÊâßË°å</strong>„ÄÇ</p>
<blockquote>
<p>ÂÖ≥ÈîÆÊñπÊ≥ïÔºö</p>
<ul>
<li><code>await</code>ÔºöË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÁ∫øÁ®ã‰ºöË¢´ÊåÇËµ∑ÔºåÁõ¥Âà∞ count ÁöÑÂÄº‰∏∫ 0 Êó∂ÊâçÁªßÁª≠ÊâßË°åÔºõ</li>
<li><code>countDown</code>ÔºöÂ∞Ü count ÂÄºÂáè 1</li>
</ul>
</blockquote></li>
<li><p><strong>CyclicBarrier / Âæ™ÁéØÊ†ÖÊ†è</strong>ÔºöCyclicBarrier Âíå CountDownLatch ÈùûÂ∏∏Á±ª‰ººÔºåÂÆÉ‰πüÂèØ‰ª•ÂÆûÁé∞Á∫øÁ®ãÈó¥ÁöÑËÆ°Êï∞Á≠âÂæÖÔºå‰ΩÜÊòØÂÆÉÁöÑÂäüËÉΩÊØî CountDownLatch Êõ¥Âä†Â§çÊùÇÂíåÂº∫Â§ß„ÄÇ‰∏ªË¶ÅÂ∫îÁî®Âú∫ÊôØÂíå CountDownLatch Á±ª‰ºº„ÄÇ</p>
<p>CyclicBarrier ÁöÑÂ≠óÈù¢ÊÑèÊÄùÊòØÂèØÂæ™ÁéØ‰ΩøÁî®ÔºàCyclicÔºâÁöÑÂ±èÈöúÔºàBarrierÔºâ„ÄÇÂÆÉË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÊòØÔºå<strong>ËÆ©‚ºÄÁªÑÁ∫øÁ®ãÂà∞Ëææ‚ºÄ‰∏™Â±èÈöúÔºà‰πüÂèØ‰ª•Âè´ÂêåÊ≠•ÁÇπÔºâÊó∂Ë¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÊúÄÂêé‚ºÄ‰∏™Á∫øÁ®ãÂà∞ËææÂ±èÈöúÊó∂ÔºåÂ±èÈöúÊâç‰ºöÂºÄÈó®ÔºåÊâÄÊúâË¢´Â±èÈöúÊã¶Êà™ÁöÑÁ∫øÁ®ãÊâç‰ºöÁªßÁª≠Âπ≤Ê¥ª</strong>„ÄÇCyclicBarrier ÈªòËÆ§ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÊòØ <code>CyclicBarrier(int parties)</code>ÔºåÂÖ∂ÂèÇÊï∞Ë°®Á§∫Â±èÈöúÊã¶Êà™ÁöÑÁ∫øÁ®ãÊï∞ÈáèÔºåÊØè‰∏™Á∫øÁ®ãË∞ÉÁî® <code>await()</code>ÊñπÊ≥ïÂëäËØâ CyclicBarrier ÊàëÂ∑≤ÁªèÂà∞Ëææ‰∫ÜÂ±èÈöúÔºåÁÑ∂ÂêéÂΩìÂâçÁ∫øÁ®ãË¢´ÈòªÂ°û„ÄÇ</p>
<blockquote>
<p>ÂÖ∂‰ªñÔºöCountDownLatch Âü∫‰∫é AQS ÁöÑÂÖ±‰∫´Ê®°ÂºèÔºõCyclicBarrier Âü∫‰∫é Condition ÂÆûÁé∞</p>
</blockquote></li>
</ul>
<h3 id="ÂêåÊ≠•ÂÆπÂô®ÂíåÂπ∂ÂèëÂÆπÂô®">ÂêåÊ≠•ÂÆπÂô®ÂíåÂπ∂ÂèëÂÆπÂô®</h3>
<p>ÂêåÊ≠•ÈõÜÂêà‰∏éÂπ∂ÂèëÈõÜÂêàÈÉΩ‰∏∫Â§öÁ∫øÁ®ãÂíåÂπ∂ÂèëÊèê‰æõ‰∫ÜÂêàÈÄÇÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂíåÔºå‰∏çËøáÂπ∂ÂèëÈõÜÂêàÁöÑÂèØÊâ©Â±ïÊÄßÊõ¥È´ò„ÄÇ</p>
<p><strong>ÂêåÊ≠•ÂÆπÂô®</strong>Ôºö</p>
<ul>
<li>ÂèØ‰ª•ÁÆÄÂçïÂú∞ÁêÜËß£‰∏∫ÈÄöËøá synchronized Êù•ÂÆûÁé∞ÂêåÊ≠•ÁöÑÂÆπÂô®ÔºåÂ¶ÇÊûúÊúâÂ§ö‰∏™Á∫øÁ®ãË∞ÉÁî®ÂêåÊ≠•ÂÆπÂô®ÁöÑÊñπÊ≥ïÔºåÂÆÉ‰ª¨Â∞Ü‰ºö‰∏≤Ë°åÊâßË°å„ÄÇ</li>
<li>ÂêåÊ≠•ÂÆπÂô®ÊúâÔºöÈÅóÁïôÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈõÜÂêàÂ¶Ç <code>Hashtable</code> Ôºå <code>Vector</code></li>
<li>‰ΩøÁî® <code>Collections</code> Ë£ÖÈ•∞ÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈõÜÂêàÔºåÂ¶ÇÔºö
<ul>
<li><code>Collections.synchronizedCollection/synchronizedList/synchronizedMap/synchronizedSet</code></li>
</ul></li>
</ul>
<p><strong>Âπ∂ÂèëÂÆπÂô®</strong>Ôºö</p>
<ul>
<li><p>Âπ∂ÂèëÂÆπÂô®‰ΩøÁî®‰∫Ü‰∏éÂêåÊ≠•ÂÆπÂô®ÂÆåÂÖ®‰∏çÂêåÁöÑÂä†ÈîÅÁ≠ñÁï•Êù•Êèê‰æõÊõ¥È´òÁöÑÂπ∂ÂèëÊÄßÂíå‰º∏Áº©ÊÄß</p></li>
<li><p>Âú® ConcurrentHashMap ‰∏≠ÈááÁî®‰∫Ü‰∏ÄÁßçÁ≤íÂ∫¶Êõ¥ÁªÜÁöÑÂä†ÈîÅÊú∫Âà∂</p></li>
</ul>
<p><strong>ÂêåÊ≠•ÂÆπÂô®SynchronizedMap Âíå Âπ∂ÂèëÂÆπÂô®ConcurrentHashMap ÂçïÁã¨ÊØîËæÉÔºö</strong></p>
<ul>
<li><p>SynchronizedMapÔºö‰∏ÄÊ¨°ÈîÅ‰ΩèÊï¥Âº†Ë°®Êù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÊâÄ‰ª•ÊØèÊ¨°Âè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊù•ËÆø‰∏∫ map„ÄÇ</p></li>
<li><p>ConcurrentHashMap ‰ΩøÁî®ÂàÜÊÆµÈîÅÔºàJDK 7ÔºâÊù•‰øùËØÅÂú®Â§öÁ∫øÁ®ã‰∏ãÁöÑÊÄßËÉΩ</p>
<ul>
<li><p>ConcurrentHashMap ‰∏≠ÂàôÊòØ‰∏ÄÊ¨°ÈîÅ‰Ωè‰∏Ä‰∏™Ê°∂„ÄÇConcurrentHashMap ÈªòËÆ§Â∞Ühash Ë°®ÂàÜ‰∏∫ 16 ‰∏™Ê°∂ÔºåËØ∏Â¶Ç get„ÄÅput„ÄÅremove Á≠âÂ∏∏Áî®Êìç‰ΩúÂè™ÈîÅÂΩìÂâçÈúÄË¶ÅÁî®Âà∞ÁöÑÊ°∂„ÄÇËøôÊ†∑ÔºåÂéüÊù•Âè™ËÉΩ‰∏Ä‰∏™Á∫øÁ®ãËøõÂÖ•ÔºåÁé∞Âú®Âç¥ËÉΩÂêåÊó∂Êúâ 16 ‰∏™ÂÜôÁ∫øÁ®ãÊâßË°åÔºåÂπ∂ÂèëÊÄßËÉΩÁöÑÊèêÂçáÊòØÊòæËÄåÊòìËßÅÁöÑ„ÄÇ</p></li>
<li><p>Âè¶Â§ñ ConcurrentHashMap ‰ΩøÁî®‰∫Ü‰∏ÄÁßç<strong>‰∏çÂêåÁöÑËø≠‰ª£ÊñπÂºè</strong>„ÄÇÂú®ËøôÁßçËø≠‰ª£ÊñπÂºè‰∏≠ÔºåÂΩì iterator Ë¢´ÂàõÂª∫ÂêéÈõÜÂêàÂÜçÂèëÁîüÊîπÂèòÂ∞±‰∏çÂÜçÊòØÊäõÂá∫ <code>ConcurrentModificationException</code>Ôºà<strong>fail-fastÊú∫Âà∂</strong>ÔºâÔºåÂèñËÄå‰ª£‰πãÁöÑÊòØÂú®ÊîπÂèòÊó∂ new Êñ∞ÁöÑÊï∞ÊçÆ‰ªéËÄå‰∏çÂΩ±ÂìçÂéüÊúâÁöÑÊï∞ÊçÆ Ôºåiterator ÂÆåÊàêÂêéÂÜçÂ∞ÜÂ§¥ÊåáÈíàÊõøÊç¢‰∏∫Êñ∞ÁöÑÊï∞ÊçÆ ÔºåËøôÊ†∑ iterator Á∫øÁ®ãÂèØ‰ª•‰ΩøÁî®ÂéüÊù•ËÄÅÁöÑÊï∞ÊçÆÔºåËÄåÂÜôÁ∫øÁ®ã‰πüÂèØ‰ª•Âπ∂ÂèëÁöÑÂÆåÊàêÊîπÂèò</p>
<p>Âç≥Ôºö<strong>ÂΩìÈõÜÂêàÁöÑÁªìÊûÑË¢´ÊîπÂèòÁöÑÊó∂ÂÄôÔºåfail-safe Êú∫Âà∂‰ºöÂú®Â§çÂà∂ÂéüÈõÜÂêàÁöÑ‰∏Ä‰ªΩÊï∞ÊçÆÂá∫Êù•</strong>ÔºåÁÑ∂ÂêéÂú®Â§çÂà∂ÁöÑÈÇ£‰ªΩÊï∞ÊçÆÈÅçÂéÜÔºåËøôÂ∞±ÊòØ<strong>fast-safeÊú∫Âà∂</strong></p></li>
</ul></li>
</ul>
<h3 id="ÂÖ≥‰∫é-copyonwritearraylist">ÂÖ≥‰∫é CopyOnWriteArrayList</h3>
<p>CopyOnWriteArrayListÔºöÂÜôÊó∂Â§çÂà∂Ôºå‰∏ªË¶ÅÊòØ‰∏ÄÁßç<strong>ËØªÂÜôÂàÜÁ¶ªÁöÑÊÄùÊÉ≥</strong></p>
<p>ÂÜôÊó∂Â§çÂà∂ÔºåCopyOnWrite ÂÆπÂô®Âç≥ÂÜôÊó∂Â§çÂà∂ÁöÑÂÆπÂô®ÔºåÂæÄ‰∏Ä‰∏™ÂÆπÂô®‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºå‰∏çÁõ¥Êé•ÂæÄÂΩìÂâçÂÆπÂô® <code>Object[]</code> Ê∑ªÂä†ÔºåËÄåÊòØÂÖàÂ∞Ü <code>Object[]</code> ËøõË°å copyÔºåÂ§çÂà∂Âá∫‰∏Ä‰∏™Êñ∞ÁöÑÂÆπÂô® <code>object[] newElements</code>ÔºåÁÑ∂ÂêéÊñ∞ÁöÑÂÆπÂô® <code>Object[] newElements</code> ÈáåÊ∑ªÂä†ÂÖÉÁ¥†ÔºåÊ∑ªÂä†ÂÖÉÁ¥†ÂÆåÂêéÔºåÂú®Â∞ÜÂéüÂÆπÂô®ÁöÑÂºïÁî®ÊåáÂêëÊñ∞ÁöÑÂÆπÂô® <code>setArray(newElements);</code> ËøôÊ†∑ÂÅöÁöÑ<strong>Â•ΩÂ§ÑÊòØÂèØ‰ª•ÂØπ copyOnWrite ÂÆπÂô®ËøõË°åÂπ∂ÂèëÁöÑËØªÔºåËÄå‰∏çÈúÄË¶ÅÂä†ÈîÅ</strong>ÔºåÂõ†‰∏∫ÂΩìÂâçÂÆπÂô®‰∏çÈúÄË¶ÅÊ∑ªÂä†‰ªª‰ΩïÂÖÉÁ¥†„ÄÇ</p>
<p>ÊâÄ‰ª• CopyOnWrite ÂÆπÂô®‰πüÊòØ‰∏ÄÁßçËØªÂÜôÂàÜÁ¶ªÁöÑÊÄùÊÉ≥ÔºåËØªÂíåÂÜô‰∏çÂêåÁöÑÂÆπÂô®ÔºåÂ∞±ÊòØÂÜôÁöÑÊó∂ÂÄôÔºåÊää ArrayList Êâ©ÂÆπ‰∏Ä‰∏™Âá∫Êù•ÔºåÁÑ∂ÂêéÊääÂÄºÂ°´ÂÜô‰∏äÂéªÔºåÂÜçÈÄöÁü•ÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÔºåÊää ArrayList ÁöÑÂºïÁî®ÊåáÂêëÊâ©ÂÆπÂêéÁöÑÂÆπÂô®„ÄÇ</p>
<ul>
<li>ÈÄÇÂêà„ÄéËØªÂ§öÂÜôÂ∞ë„ÄèÁöÑÂ∫îÁî®Âú∫ÊôØ</li>
<li><strong>get Âº±‰∏ÄËá¥ÊÄß</strong></li>
<li><strong>Ëø≠‰ª£Âô®Âº±‰∏ÄËá¥ÊÄß</strong></li>
</ul>
<blockquote>
<p>‰∏çË¶ÅËßâÂæóÂº±‰∏ÄËá¥ÊÄßÂ∞±‰∏çÂ•Ω</p>
<ul>
<li>Êï∞ÊçÆÂ∫ìÁöÑ MVCC ÈÉΩÊòØÂº±‰∏ÄËá¥ÊÄßÁöÑË°®Áé∞</li>
<li>Âπ∂ÂèëÈ´òÂíå‰∏ÄËá¥ÊÄßÊòØÁüõÁõæÁöÑÔºåÈúÄË¶ÅÊùÉË°°</li>
</ul>
</blockquote>
<h3 id="ÈòªÂ°ûÈòüÂàó">ÈòªÂ°ûÈòüÂàó <span class="emoji" data-emoji="exclamation">‚ùó</span><span class="emoji" data-emoji="exclamation">‚ùó</span></h3>
<p>ÈòªÂ°ûÈòüÂàóÔºàBlockingQueueÔºâÊòØ‰∏Ä‰∏™<strong>ÊîØÊåÅ‰∏§‰∏™ÈôÑÂä†Êìç‰ΩúÁöÑÈòüÂàó</strong>ÔºåËøô‰∏§‰∏™ÈôÑÂä†ÁöÑÊìç‰ΩúÊòØÔºö</p>
<ul>
<li><strong>Âú®ÈòüÂàó‰∏∫Á©∫Êó∂ÔºåËé∑ÂèñÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã‰ºöÁ≠âÂæÖÈòüÂàóÂèò‰∏∫ÈùûÁ©∫ÔºåÂç≥Ëé∑ÂèñÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºõ</strong></li>
<li><strong>ÂΩìÈòüÂàóÊª°Êó∂ÔºåÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã‰ºöÁ≠âÂæÖÈòüÂàóÂèØÁî®ÔºåÂç≥ÂæÄÈòüÂàó‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºõ</strong></li>
</ul>
<p>ÈòªÂ°ûÈòüÂàóÂ∏∏Áî®‰∫é<strong>Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ</strong>ÁöÑÂú∫ÊôØÔºåÁîü‰∫ßËÄÖÊòØÂæÄÈòüÂàóÈáåÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÔºåÊ∂àË¥πËÄÖÊòØ‰ªéÈòüÂàóÈáåÊãøÂÖÉÁ¥†ÁöÑÁ∫øÁ®ã„ÄÇÈòªÂ°ûÈòüÂàóÂ∞±ÊòØÁîü‰∫ßËÄÖÂ≠òÊîæÂÖÉÁ¥†ÁöÑÂÆπÂô®ÔºåËÄåÊ∂àË¥πËÄÖ‰πüÂè™‰ªéÂÆπÂô®ÈáåÊãøÂÖÉÁ¥†„ÄÇ</p>
<blockquote>
<p>‰ª£Á†ÅÂèØËßÅÔºö<a href>ÊâãÊíï‰ª£Á†ÅÔºöÊ∂àË¥πËÄÖÁîü‰∫ßËÄÖ</a></p>
</blockquote>
<p><strong>‰∏∫‰ªÄ‰πàË¶ÅÁî®ÈòªÂ°ûÈòüÂàóÔºü</strong></p>
<p>‰ΩøÁî®ÈòªÂ°ûÈòüÂàóÁöÑÂ•ΩÂ§ÑÊòØÊàë‰ª¨‰∏çÈúÄË¶ÅÂÖ≥ÂøÉ‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÈòªÂ°ûÁ∫øÁ®ãÔºå‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÂî§ÈÜíÁ∫øÁ®ãÔºåÂõ†‰∏∫Ëøô‰∏ÄÂàá BlockingQueue ÈÉΩÂ∏Æ‰Ω†‰∏ÄÊâãÂåÖÂäû‰∫Ü</p>
<p>Âú® concurrent ÂåÖÂèëÂ∏É‰ª•ÂâçÔºåÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÔºåÊàë‰ª¨ÊØè‰∏™Á®ãÂ∫èÂëòÈÉΩÂøÖÈ°ªËá™Â∑±ÂèñÊéßÂà∂Ëøô‰∫õÁªÜËäÇÔºà‰ΩøÁî®wait/notify/notifiAll/synchronizeÔºâÔºåÂ∞§ÂÖ∂ËøòË¶ÅÂÖºÈ°æÊïàÁéáÂíåÁ∫øÁ®ãÂÆâÂÖ®ÔºåËÄåËøô‰ºöÁªôÊàë‰ª¨ÁöÑÁ®ãÂ∫èÂ∏¶Êù•‰∏çÂ∞èÁöÑÂ§çÊùÇÂ∫¶„ÄÇ</p>
<p>BlockingQueue ÈòªÂ°ûÈòüÂàóÊòØÂ±û‰∫é‰∏Ä‰∏™Êé•Âè£ÔºåÂ∫ï‰∏ãÊúâ‰∏É‰∏™ÂÆûÁé∞Á±ª</p>
<ul>
<li><p><strong>ArrayBlockQueue</strong>ÔºöÁî±Êï∞ÁªÑÁªìÊûÑÁªÑÊàêÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàó</p></li>
<li><p><strong>LinkedBlockingQueue</strong>ÔºöÁî±ÈìæË°®ÁªìÊûÑÁªÑÊàêÁöÑÊúâÁïåÔºà‰ΩÜÊòØÈªòËÆ§Â§ßÂ∞è Integer.MAX_VALUEÔºâÁöÑÈòªÂ°ûÈòüÂàó</p>
<blockquote>
<p>ÊúâÁïåÔºå‰ΩÜÊòØÁïåÈôêÈùûÂ∏∏Â§ßÔºåÁõ∏ÂΩì‰∫éÊó†ÁïåÔºåÂèØ‰ª•ÂΩìÊàêÊó†Áïå</p>
</blockquote></li>
<li><p>PriorityBlockQueueÔºöÊîØÊåÅ‰ºòÂÖàÁ∫ßÊéíÂ∫èÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàó</p></li>
<li><p>DelayQueueÔºö‰ΩøÁî®‰ºòÂÖàÁ∫ßÈòüÂàóÂÆûÁé∞ÁöÑÂª∂ËøüÊó†ÁïåÈòªÂ°ûÈòüÂàó</p></li>
<li><p><strong>SynchronousQueue</strong>Ôºö‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÈòªÂ°ûÈòüÂàóÔºå‰πüÂç≥Âçï‰∏™ÂÖÉÁ¥†ÁöÑÈòüÂàó</p>
<blockquote>
<p>Áîü‰∫ß‰∏Ä‰∏™ÔºåÊ∂àË¥π‰∏Ä‰∏™Ôºå‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†Ôºå‰∏çÊ∂àË¥π‰∏çÁîü‰∫ß</p>
</blockquote></li>
<li><p>LinkedTransferQueueÔºöÁî±ÈìæË°®ÁªìÊûÑÁªÑÊàêÁöÑÊó†ÁïåÈòªÂ°ûÈòüÂàó</p></li>
<li><p>LinkedBlockingDequeÔºöÁî±ÈìæË°®ÁªìÊûÑÁªÑÊàêÁöÑÂèåÂêëÈòªÂ°ûÈòüÂàó</p></li>
</ul>
<blockquote>
<p>Êõ¥Âä†ËØ¶ÁªÜÂÜÖÂÆπÂèØËßÅÂØπÂ∫îÁöÑÈòªÂ°ûÈòüÂàóÁ¨îËÆ∞</p>
</blockquote>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- Êú¨ÊñáÁªìÊùü </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> ÊÑüË∞¢ÈòÖËØª ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Java</a>
              <a href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Èù¢ËØïÁ¨îËÆ∞</a>
              <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Âπ∂ÂèëÁºñÁ®ã</a>
              <a href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Èù¢Áªè</a>
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Â≠¶‰π†Á¨îËÆ∞</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/" rel="prev" title="Èù¢ÁªèÔºö4-ÈõÜÂêàÁ±ª">
      <i class="fa fa-chevron-left"></i> Èù¢ÁªèÔºö4-ÈõÜÂêàÁ±ª
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/07/18/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A6-JVM/" rel="next" title="Èù¢ÁªèÔºö6-JVM">
      Èù¢ÁªèÔºö6-JVM <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          ÊñáÁ´†ÁõÆÂΩï
        </li>
        <li class="sidebar-nav-overview">
          Á´ôÁÇπÊ¶ÇËßà
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B%E6%A6%82%E8%BF%B0"><span class="nav-text">Á∫øÁ®ã‰∏éËøõÁ®ãÊ¶ÇËø∞ ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%BC%82%E5%90%8C"><span class="nav-text">Á∫øÁ®ã‰∏éËøõÁ®ãÁöÑÂºÇÂêå ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88-%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88"><span class="nav-text">Á®ãÂ∫èËÆ°Êï∞Âô® &amp; ËôöÊãüÊú∫Ê†à &amp; Êú¨Âú∞ÊñπÊ≥ïÊ†à</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E4%B8%8E%E5%B9%B6%E8%A1%8C%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">Âπ∂Âèë‰∏éÂπ∂Ë°åÁöÑÂå∫Âà´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java-%E4%B8%AD%E7%94%A8%E5%88%B0%E7%9A%84%E7%BA%BF%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="nav-text">Java ‰∏≠Áî®Âà∞ÁöÑÁ∫øÁ®ãË∞ÉÂ∫¶ÁÆóÊ≥ï</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-text">ÂàõÂª∫Á∫øÁ®ãÁöÑÊñπÂºè ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#thread%E7%B1%BB%E4%B8%AD%E7%9A%84%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95"><span class="nav-text">ThreadÁ±ª‰∏≠ÁöÑÂ∏∏ËßÅÊñπÊ≥ï‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BC%98%E7%82%B9%E4%B8%8E%E7%BC%BA%E7%82%B9"><span class="nav-text">Â§öÁ∫øÁ®ãÁöÑ‰ºòÁÇπ‰∏éÁº∫ÁÇπ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E5%92%8C%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8"><span class="nav-text">Á∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ® ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%B4%E7%95%8C%E5%8C%BA%E7%AB%9E%E6%80%81%E6%9D%A1%E4%BB%B6"><span class="nav-text">‰∏¥ÁïåÂå∫&amp;Á´ûÊÄÅÊù°‰ª∂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E5%92%8C%E4%BA%92%E6%96%A5"><span class="nav-text">Â§öÁ∫øÁ®ãÂêåÊ≠•Âíå‰∫íÊñ•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81"><span class="nav-text">Á∫øÁ®ãÁöÑÁä∂ÊÄÅ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2"><span class="nav-text">Á∫øÁ®ãÁä∂ÊÄÅËΩ¨Êç¢ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2"><span class="nav-text">Â§öÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%BB%E9%94%81%E6%B4%BB%E9%94%81%E9%A5%A5%E9%A5%BF%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">Ê≠ªÈîÅ&amp;Ê¥ªÈîÅ&amp;È••È•øÁöÑÂå∫Âà´ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sleep-%E5%92%8C-wait-%E7%9A%84%E5%BC%82%E5%90%8C"><span class="nav-text">sleep() Âíå wait() ÁöÑÂºÇÂêå</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#start-%E5%92%8C-run-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">start() Âíå run() ÁöÑÂå∫Âà´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized-%E5%85%B3%E9%94%AE%E5%AD%97%E6%A6%82%E8%BF%B0"><span class="nav-text">synchronized ÂÖ≥ÈîÆÂ≠óÊ¶ÇËø∞ ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="nav-text">synchronized ÂÖ≥ÈîÆÂ≠óÁöÑÂ∫ïÂ±ÇÂéüÁêÜ ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized-%E4%BC%98%E5%8C%96-%E9%94%81%E4%BC%98%E5%8C%96"><span class="nav-text">synchronized ‰ºòÂåñ &amp; ÈîÅ‰ºòÂåñ ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized-%E5%92%8C-reentrantlock-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">synchronized Âíå ReentrantLock ÁöÑÂå∫Âà´ ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81"><span class="nav-text">‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="nav-text">Âπ∂ÂèëÁºñÁ®ã‰∏âË¶ÅÁ¥†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#volatile-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-text">volatile ÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩúÁî® ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized-%E5%92%8C-volatile-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">synchronized Âíå volatile ÁöÑÂå∫Âà´ ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%8F%8C%E9%87%8D%E6%A3%80%E6%9F%A5%E9%94%81dcl"><span class="nav-text">Âçï‰æãÊ®°ÂºèÔºöÂèåÈáçÊ£ÄÊü•ÈîÅDCL ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threadlocal-%E7%AE%80%E4%BB%8B"><span class="nav-text">ThreadLocal ÁÆÄ‰ªã ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threadlocal-%E4%BD%BF%E7%94%A8"><span class="nav-text">ThreadLocal ‰ΩøÁî®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threadlocal-%E7%BB%93%E6%9E%84"><span class="nav-text">ThreadLocal ÁªìÊûÑ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threadlocal-%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E9%97%AE%E9%A2%98"><span class="nav-text">ThreadLocal ÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢ò ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threadlocal-%E4%B8%8E-synchronized-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">ThreadLocal ‰∏é synchronized ÁöÑÂå∫Âà´ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E5%8E%9F%E5%9B%A0-%E7%BA%BF%E7%A8%8B%E7%BB%84"><span class="nav-text">‰ΩøÁî®Á∫øÁ®ãÊ±†ÁöÑÂéüÂõ† &amp; Á∫øÁ®ãÁªÑ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#runnable-callable-future-futuretask"><span class="nav-text">Runnable &amp; Callable &amp; Future &amp; FutureTask</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#execute-%E5%92%8C-submit-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">execute() Âíå submit() ÁöÑÂå∫Âà´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#executors-executor-executor%E6%A1%86%E6%9E%B6"><span class="nav-text">Executors &amp; Executor &amp; ExecutorÊ°ÜÊû∂ ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="nav-text">Á∫øÁ®ãÊ±†ÁöÑÂàõÂª∫ÊñπÂºè ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threadpoolexecutor-%E7%B1%BB%E5%88%86%E6%9E%90"><span class="nav-text">ThreadPoolExecutor Á±ªÂàÜÊûê‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%BA%95%E5%B1%82%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">Á∫øÁ®ãÊ±†Â∫ïÂ±ÇÂ∑•‰ΩúÂéüÁêÜ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-executors-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="nav-text">‰∏∫‰ªÄ‰πà‰∏çÁî® Executors ÂàõÂª∫Á∫øÁ®ãÊ±† ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%AD%90%E7%B1%BB-%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C-cas"><span class="nav-text">ÂéüÂ≠êÁ±ª &amp; ÂéüÂ≠êÊìç‰Ωú &amp; CAS ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cas-%E4%B8%8E-synchronized"><span class="nav-text">CAS ‰∏é synchronized ‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#locksupport-%E4%B9%8B-park-unpark"><span class="nav-text">LockSupport ‰πã park &amp; unpark</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#aqs%E8%B0%88%E8%B0%88%E5%AF%B9aqs%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-text">AQSÔºöË∞àË∞àÂØπAQSÁöÑÁêÜËß£ ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#aqsreentrantlock"><span class="nav-text">AQSÔºöReentrantLock ‚ùó‚ùó‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#aqs%E4%BF%A1%E5%8F%B7%E9%87%8F-%E5%80%92%E8%AE%A1%E6%97%B6%E5%99%A8-%E5%BE%AA%E7%8E%AF%E6%A0%85%E6%A0%8F"><span class="nav-text">AQSÔºö‰ø°Âè∑Èáè &amp; ÂÄíËÆ°Êó∂Âô® &amp; Âæ™ÁéØÊ†ÖÊ†è ‚ùó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E5%AE%B9%E5%99%A8%E5%92%8C%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8"><span class="nav-text">ÂêåÊ≠•ÂÆπÂô®ÂíåÂπ∂ÂèëÂÆπÂô®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-copyonwritearraylist"><span class="nav-text">ÂÖ≥‰∫é CopyOnWriteArrayList</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97"><span class="nav-text">ÈòªÂ°ûÈòüÂàó ‚ùó‚ùó</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">‰∏çÊÄ•‰∏çË∫Å„ÄÇ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">198</span>
          <span class="site-state-item-name">Êó•Âøó</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">ÂàÜÁ±ª</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">89</span>
        <span class="site-state-item-name">Ê†áÁ≠æ</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">72</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">JavaÂü∫Á°Ä</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">JavaËØ≠Ê≥ï</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">KËøëÈÇª</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E7%BB%8F%E5%8E%86/" rel="tag">‰∏™‰∫∫ÁªèÂéÜ</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">‰∏≠Èó¥‰ª∂</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">ÂÖ®ÊñáÊ£ÄÁ¥¢</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">ÂÜ≥Á≠ñÊ†ë</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">ÂàÜÁ±ªÈóÆÈ¢ò</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">Âà∑È¢ò</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">Âà∑È¢òÁ¨îËÆ∞</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/" rel="tag">Âä†ÂØÜÊñáÁ´†</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">ÂçöÂÆ¢Êê≠Âª∫</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">ÂèÇËÄÉÊñá‰ª∂</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">Âü∫Á°ÄÁü•ËØÜ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">Â≠¶‰π†Á¨îËÆ∞</a><span class="tag-list-count">104</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">Âπ∂ÂèëÁºñÁ®ã</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">ÂºÄÂèëÊ°ÜÊû∂</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%90%E9%95%BF%E5%8F%B2/" rel="tag">ÊàêÈïøÂè≤</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">ÊéíÂ∫èÁÆóÊ≥ï</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">Êìç‰ΩúÁ≥ªÁªü</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">ÊîØÊåÅÂêëÈáèÊú∫</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">Êï∞Â≠¶Êé®ÂØº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">Êï∞ÊçÆÂ∫ì</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">Êï∞ÊçÆÊ∏ÖÊ¥ó</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">Êï∞ÊçÆÁªìÊûÑ</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">Êó•ÂøóÊ°ÜÊû∂</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">Êú∫Âô®Â≠¶‰π†</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">Ê†ëÁªìÊûÑ</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">Ê†ëËéìÊ¥æ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">Ê∂àÊÅØÈòüÂàó</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">Ê∑±Â∫¶Â≠¶‰π†</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">ÁâπÂæÅÈÄâÊã©</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">ÁéØÂ¢ÉÈÖçÁΩÆ</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">ÁõÆÊ†áÊ£ÄÊµã</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ÁÆóÊ≥ï</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">Á∫øÊÄßÂõûÂΩí</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">ËÅöÁ±ª</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">Ë°®Á§∫Â±Ç</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">ËÆ°ÁÆóÊú∫ÁΩëË∑Ø</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">ËØª‰π¶Á¨îËÆ∞</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">Ë∞ÉÁî®ÈìæÁõëÊéß</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">Ë¥ùÂè∂ÊñØ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">ËΩØ‰ª∂‰ΩøÁî®</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">ÈÄªËæëÂõûÂΩí</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">ÈõÜÂêàÁ±ª</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">ÈõÜÊàêÂ≠¶‰π†</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">Èù¢Áªè</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">Èù¢ËØïÁ¨îËÆ∞</a><span class="tag-list-count">61</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Á´ôÁÇπÊÄªÂ≠óÊï∞">3.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Á´ôÁÇπÈòÖËØªÊó∂Èïø">54:07</span>
</div>

<!--
  <div class="powered-by">Áî± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> Âº∫ÂäõÈ©±Âä®
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "ËØ∑Â§öÂ§öÊåáÊïô~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
