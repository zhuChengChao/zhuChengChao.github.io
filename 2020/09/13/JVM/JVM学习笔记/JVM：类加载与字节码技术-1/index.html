<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="说明：在学习了 bilibili 上 黑马程序员 的课程 JVM完整教程 后做的学习笔记，总共分为5篇笔记，本文为 3&#x2F;5 篇，其余笔记地址如下：  JVM：内存结构 JVM：垃圾回收 JVM：类加载字节码-1 JVM：类加载字节码-2 JVM：内存模型">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM：类加载与字节码技术-1">
<meta property="og:url" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/index.html">
<meta property="og:site_name" content="贤余超">
<meta property="og:description" content="说明：在学习了 bilibili 上 黑马程序员 的课程 JVM完整教程 后做的学习笔记，总共分为5篇笔记，本文为 3&#x2F;5 篇，其余笔记地址如下：  JVM：内存结构 JVM：垃圾回收 JVM：类加载字节码-1 JVM：类加载字节码-2 JVM：内存模型">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/类加载与字节码技术.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/常量池载入运行时常量池.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/方法字节码载入方法区.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/main线程开始运行，分配栈帧内存.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/bipush10.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/istore-1.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/ldc.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/istore-2.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iload-1.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iload-2.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iadd.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/istore-3.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/getstatic.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iload-3.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/invokevirtual.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/invokevirtual2.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iinc.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具2.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具3.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具4.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具5.PNG">
<meta property="og:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具6.PNG">
<meta property="article:published_time" content="2020-09-13T02:24:00.000Z">
<meta property="article:modified_time" content="2020-09-13T02:24:00.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="JVM">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/类加载与字节码技术.PNG">

<link rel="canonical" href="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>JVM：类加载与字节码技术-1 | 贤余超</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">贤余超</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">一位底层码农 :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">96</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">204</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="不急不躁。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="贤余超">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JVM：类加载与字节码技术-1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-13 10:24:00" itemprop="dateCreated datePublished" datetime="2020-09-13T10:24:00+08:00">2020-09-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JVM/" itemprop="url" rel="index"><span itemprop="name">JVM</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>33k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>30 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>说明：在学习了 bilibili 上 <strong><a href>黑马程序员</a></strong> 的课程 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yE411Z7AP">JVM完整教程</a> 后做的学习笔记，总共分为5篇笔记，本文为 3/5 篇，其余笔记地址如下：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://xianyuchao.cn/2020/09/06/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/">JVM：内存结构</a></li>
<li><a target="_blank" rel="noopener" href="https://xianyuchao.cn/2020/09/06/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/">JVM：垃圾回收</a></li>
<li><a target="_blank" rel="noopener" href="https://xianyuchao.cn/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/">JVM：类加载字节码-1</a></li>
<li><a target="_blank" rel="noopener" href="https://xianyuchao.cn/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-2/">JVM：类加载字节码-2</a></li>
<li><a target="_blank" rel="noopener" href="https://xianyuchao.cn/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/">JVM：内存模型</a></li>
</ul>
<span id="more"></span>
<h1 id="jvm类加载与字节码技术-1">JVM：类加载与字节码技术-1</h1>
<h3 id="内容">内容</h3>
<ol type="1">
<li>类文件结构</li>
<li>字节码指令</li>
</ol>
<blockquote>
<p>下面的内容在后续笔记中：</p>
<ol start="3" type="1">
<li>编译期处理</li>
<li>类加载阶段</li>
<li>类加载器</li>
<li>运行期优化</li>
</ol>
</blockquote>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/类加载与字节码技术.PNG" alt="类加载与字节码技术"></p>
<h2 id="类文件结构">1. 类文件结构</h2>
<p>一个简单的 HelloWorld.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行 <code>javac -parameters -d . HellowWorld.java</code></p>
<blockquote>
<p>参数-parameters会保存方法中参数的名称信息</p>
</blockquote>
<p>编译为 HelloWorld.class 后是这个样子的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@localhost</span> ~]# od -t xC HelloWorld.class</span><br><span class="line"><span class="number">0000000</span> ca fe ba be <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">34</span> <span class="number">00</span> <span class="number">23</span> 0a <span class="number">00</span> <span class="number">06</span> <span class="number">00</span> <span class="number">15</span> 09</span><br><span class="line"><span class="number">0000020</span> <span class="number">00</span> <span class="number">16</span> <span class="number">00</span> <span class="number">17</span> 08 <span class="number">00</span> <span class="number">18</span> 0a <span class="number">00</span> <span class="number">19</span> <span class="number">00</span> 1a <span class="number">07</span> <span class="number">00</span> 1b <span class="number">07</span></span><br><span class="line"><span class="number">0000040</span> <span class="number">00</span> 1c <span class="number">01</span> <span class="number">00</span> <span class="number">06</span> 3c <span class="number">69</span> 6e <span class="number">69</span> <span class="number">74</span> 3e <span class="number">01</span> <span class="number">00</span> <span class="number">03</span> <span class="number">28</span> <span class="number">29</span></span><br><span class="line"><span class="number">0000060</span> <span class="number">56</span> <span class="number">01</span> <span class="number">00</span> <span class="number">04</span> <span class="number">43</span> <span class="number">6f</span> <span class="number">64</span> <span class="number">65</span> <span class="number">01</span> <span class="number">00</span> <span class="number">0f</span> 4c <span class="number">69</span> 6e <span class="number">65</span> 4e</span><br><span class="line"><span class="number">0000100</span> <span class="number">75</span> <span class="number">6d</span> <span class="number">62</span> <span class="number">65</span> <span class="number">72</span> <span class="number">54</span> <span class="number">61</span> <span class="number">62</span> 6c <span class="number">65</span> <span class="number">01</span> <span class="number">00</span> <span class="number">12</span> 4c <span class="number">6f</span> <span class="number">63</span></span><br><span class="line"><span class="number">0000120</span> <span class="number">61</span> 6c <span class="number">56</span> <span class="number">61</span> <span class="number">72</span> <span class="number">69</span> <span class="number">61</span> <span class="number">62</span> 6c <span class="number">65</span> <span class="number">54</span> <span class="number">61</span> <span class="number">62</span> 6c <span class="number">65</span> <span class="number">01</span></span><br><span class="line"><span class="number">0000140</span> <span class="number">00</span> <span class="number">04</span> <span class="number">74</span> <span class="number">68</span> <span class="number">69</span> <span class="number">73</span> <span class="number">01</span> <span class="number">00</span> <span class="number">1d</span> 4c <span class="number">63</span> 6e <span class="number">2f</span> <span class="number">69</span> <span class="number">74</span> <span class="number">63</span></span><br><span class="line"><span class="number">0000160</span> <span class="number">61</span> <span class="number">73</span> <span class="number">74</span> <span class="number">2f</span> 6a <span class="number">76</span> <span class="number">6d</span> <span class="number">2f</span> <span class="number">74</span> <span class="number">35</span> <span class="number">2f</span> <span class="number">48</span> <span class="number">65</span> 6c 6c <span class="number">6f</span></span><br><span class="line"><span class="number">0000200</span> <span class="number">57</span> <span class="number">6f</span> <span class="number">72</span> 6c <span class="number">64</span> 3b <span class="number">01</span> <span class="number">00</span> <span class="number">04</span> <span class="number">6d</span> <span class="number">61</span> <span class="number">69</span> 6e <span class="number">01</span> <span class="number">00</span> <span class="number">16</span></span><br><span class="line"><span class="number">0000220</span> <span class="number">28</span> 5b 4c 6a <span class="number">61</span> <span class="number">76</span> <span class="number">61</span> <span class="number">2f</span> 6c <span class="number">61</span> 6e <span class="number">67</span> <span class="number">2f</span> <span class="number">53</span> <span class="number">74</span> <span class="number">72</span></span><br><span class="line"><span class="number">0000240</span> <span class="number">69</span> 6e <span class="number">67</span> 3b <span class="number">29</span> <span class="number">56</span> <span class="number">01</span> <span class="number">00</span> <span class="number">04</span> <span class="number">61</span> <span class="number">72</span> <span class="number">67</span> <span class="number">73</span> <span class="number">01</span> <span class="number">00</span> <span class="number">13</span></span><br><span class="line"><span class="number">0000260</span> 5b 4c 6a <span class="number">61</span> <span class="number">76</span> <span class="number">61</span> <span class="number">2f</span> 6c <span class="number">61</span> 6e <span class="number">67</span> <span class="number">2f</span> <span class="number">53</span> <span class="number">74</span> <span class="number">72</span> <span class="number">69</span></span><br><span class="line"><span class="number">0000300</span> 6e <span class="number">67</span> 3b <span class="number">01</span> <span class="number">00</span> <span class="number">10</span> <span class="number">4d</span> <span class="number">65</span> <span class="number">74</span> <span class="number">68</span> <span class="number">6f</span> <span class="number">64</span> <span class="number">50</span> <span class="number">61</span> <span class="number">72</span> <span class="number">61</span></span><br><span class="line"><span class="number">0000320</span> <span class="number">6d</span> <span class="number">65</span> <span class="number">74</span> <span class="number">65</span> <span class="number">72</span> <span class="number">73</span> <span class="number">01</span> <span class="number">00</span> 0a <span class="number">53</span> <span class="number">6f</span> <span class="number">75</span> <span class="number">72</span> <span class="number">63</span> <span class="number">65</span> <span class="number">46</span></span><br><span class="line"><span class="number">0000340</span> <span class="number">69</span> 6c <span class="number">65</span> <span class="number">01</span> <span class="number">00</span> <span class="number">0f</span> <span class="number">48</span> <span class="number">65</span> 6c 6c <span class="number">6f</span> <span class="number">57</span> <span class="number">6f</span> <span class="number">72</span> 6c <span class="number">64</span></span><br><span class="line"><span class="number">0000360</span> 2e 6a <span class="number">61</span> <span class="number">76</span> <span class="number">61</span> 0c <span class="number">00</span> <span class="number">07</span> <span class="number">00</span> 08 <span class="number">07</span> <span class="number">00</span> <span class="number">1d</span> 0c <span class="number">00</span> 1e</span><br><span class="line"><span class="number">0000400</span> <span class="number">00</span> <span class="number">1f</span> <span class="number">01</span> <span class="number">00</span> 0b <span class="number">68</span> <span class="number">65</span> 6c 6c <span class="number">6f</span> <span class="number">20</span> <span class="number">77</span> <span class="number">6f</span> <span class="number">72</span> 6c <span class="number">64</span></span><br><span class="line"><span class="number">0000420</span> <span class="number">07</span> <span class="number">00</span> <span class="number">20</span> 0c <span class="number">00</span> <span class="number">21</span> <span class="number">00</span> <span class="number">22</span> <span class="number">01</span> <span class="number">00</span> 1b <span class="number">63</span> 6e <span class="number">2f</span> <span class="number">69</span> <span class="number">74</span></span><br><span class="line"><span class="number">0000440</span> <span class="number">63</span> <span class="number">61</span> <span class="number">73</span> <span class="number">74</span> <span class="number">2f</span> 6a <span class="number">76</span> <span class="number">6d</span> <span class="number">2f</span> <span class="number">74</span> <span class="number">35</span> <span class="number">2f</span> <span class="number">48</span> <span class="number">65</span> 6c 6c</span><br><span class="line"><span class="number">0000460</span> <span class="number">6f</span> <span class="number">57</span> <span class="number">6f</span> <span class="number">72</span> 6c <span class="number">64</span> <span class="number">01</span> <span class="number">00</span> <span class="number">10</span> 6a <span class="number">61</span> <span class="number">76</span> <span class="number">61</span> <span class="number">2f</span> 6c <span class="number">61</span></span><br><span class="line"><span class="number">0000500</span> 6e <span class="number">67</span> <span class="number">2f</span> <span class="number">4f</span> <span class="number">62</span> 6a <span class="number">65</span> <span class="number">63</span> <span class="number">74</span> <span class="number">01</span> <span class="number">00</span> <span class="number">10</span> 6a <span class="number">61</span> <span class="number">76</span> <span class="number">61</span></span><br><span class="line"><span class="number">0000520</span> <span class="number">2f</span> 6c <span class="number">61</span> 6e <span class="number">67</span> <span class="number">2f</span> <span class="number">53</span> <span class="number">79</span> <span class="number">73</span> <span class="number">74</span> <span class="number">65</span> <span class="number">6d</span> <span class="number">01</span> <span class="number">00</span> <span class="number">03</span> <span class="number">6f</span></span><br><span class="line"><span class="number">0000540</span> <span class="number">75</span> <span class="number">74</span> <span class="number">01</span> <span class="number">00</span> <span class="number">15</span> 4c 6a <span class="number">61</span> <span class="number">76</span> <span class="number">61</span> <span class="number">2f</span> <span class="number">69</span> <span class="number">6f</span> <span class="number">2f</span> <span class="number">50</span> <span class="number">72</span></span><br><span class="line"><span class="number">0000560</span> <span class="number">69</span> 6e <span class="number">74</span> <span class="number">53</span> <span class="number">74</span> <span class="number">72</span> <span class="number">65</span> <span class="number">61</span> <span class="number">6d</span> 3b <span class="number">01</span> <span class="number">00</span> <span class="number">13</span> 6a <span class="number">61</span> <span class="number">76</span></span><br><span class="line"><span class="number">0000600</span> <span class="number">61</span> <span class="number">2f</span> <span class="number">69</span> <span class="number">6f</span> <span class="number">2f</span> <span class="number">50</span> <span class="number">72</span> <span class="number">69</span> 6e <span class="number">74</span> <span class="number">53</span> <span class="number">74</span> <span class="number">72</span> <span class="number">65</span> <span class="number">61</span> <span class="number">6d</span></span><br><span class="line"><span class="number">0000620</span> <span class="number">01</span> <span class="number">00</span> <span class="number">07</span> <span class="number">70</span> <span class="number">72</span> <span class="number">69</span> 6e <span class="number">74</span> 6c 6e <span class="number">01</span> <span class="number">00</span> <span class="number">15</span> <span class="number">28</span> 4c 6a</span><br><span class="line"><span class="number">0000640</span> <span class="number">61</span> <span class="number">76</span> <span class="number">61</span> <span class="number">2f</span> 6c <span class="number">61</span> 6e <span class="number">67</span> <span class="number">2f</span> <span class="number">53</span> <span class="number">74</span> <span class="number">72</span> <span class="number">69</span> 6e <span class="number">67</span> 3b</span><br><span class="line"><span class="number">0000660</span> <span class="number">29</span> <span class="number">56</span> <span class="number">00</span> <span class="number">21</span> <span class="number">00</span> <span class="number">05</span> <span class="number">00</span> <span class="number">06</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> <span class="number">01</span></span><br><span class="line"><span class="number">0000700</span> <span class="number">00</span> <span class="number">07</span> <span class="number">00</span> 08 <span class="number">00</span> <span class="number">01</span> <span class="number">00</span> 09 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">2f</span> <span class="number">00</span> <span class="number">01</span> <span class="number">00</span> <span class="number">01</span></span><br><span class="line"><span class="number">0000720</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">05</span> 2a b7 <span class="number">00</span> <span class="number">01</span> b1 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> 0a <span class="number">00</span></span><br><span class="line"><span class="number">0000740</span> <span class="number">00</span> <span class="number">00</span> <span class="number">06</span> <span class="number">00</span> <span class="number">01</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">04</span> <span class="number">00</span> 0b <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> 0c <span class="number">00</span></span><br><span class="line"><span class="number">0000760</span> <span class="number">01</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">05</span> <span class="number">00</span> 0c <span class="number">00</span> <span class="number">0d</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> 09 <span class="number">00</span> 0e <span class="number">00</span></span><br><span class="line"><span class="number">0001000</span> <span class="number">0f</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> 09 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">37</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> <span class="number">01</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">0001020</span> 09 b2 <span class="number">00</span> <span class="number">02</span> <span class="number">12</span> <span class="number">03</span> b6 <span class="number">00</span> <span class="number">04</span> b1 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> 0a</span><br><span class="line"><span class="number">0001040</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> 0a <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">06</span> <span class="number">00</span> 08 <span class="number">00</span> <span class="number">07</span> <span class="number">00</span> 0b</span><br><span class="line"><span class="number">0001060</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> 0c <span class="number">00</span> <span class="number">01</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> 09 <span class="number">00</span> <span class="number">10</span> <span class="number">00</span> <span class="number">11</span> <span class="number">00</span> <span class="number">00</span></span><br><span class="line"><span class="number">0001100</span> <span class="number">00</span> <span class="number">12</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">05</span> <span class="number">01</span> <span class="number">00</span> <span class="number">10</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">01</span> <span class="number">00</span> <span class="number">13</span> <span class="number">00</span></span><br><span class="line"><span class="number">0001120</span> <span class="number">00</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> <span class="number">14</span></span><br></pre></td></tr></table></figure>
<p>根据 JVM 规范，类文件结构如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ClassFile&#123;</span><br><span class="line">    <span class="comment">//  u4/u2 表示字节数</span></span><br><span class="line">	u4 					magic;  		<span class="comment">// 魔术			</span></span><br><span class="line">	u2 					minor_version;  <span class="comment">// 版本</span></span><br><span class="line">	u2 					major_version;  <span class="comment">// 版本</span></span><br><span class="line">	u2 					constant_pool_count;  				   <span class="comment">//常量池信息</span></span><br><span class="line">	cp_info 			constant_pool[constant_pool_count-<span class="number">1</span>];  <span class="comment">//常量池信息</span></span><br><span class="line">	u2 					access_flags;      <span class="comment">// 访问修饰</span></span><br><span class="line">	u2 					this_class;        <span class="comment">// 类信息</span></span><br><span class="line">	u2 					super_class;	   <span class="comment">// 父类信息</span></span><br><span class="line">	u2 					interfaces_count;  <span class="comment">// 接口信息</span></span><br><span class="line">	u2 					interfaces[interfaces_count];  <span class="comment">// 接口信息</span></span><br><span class="line">	u2 					fields_count;			<span class="comment">// 类中的成员变量信息</span></span><br><span class="line">	field_info  		fields[fields_count];	<span class="comment">// 类中的成员变量信息</span></span><br><span class="line">	u2 					methods_count;			<span class="comment">// 类中的方法信息</span></span><br><span class="line">	method_info 		methods[methods_count];	<span class="comment">// 类中的方法信息</span></span><br><span class="line">	u2 					attributes_count;			   <span class="comment">// 类的附加属性信息</span></span><br><span class="line">	attribute_info 		attributes[attributes_count];  <span class="comment">// 类的附加属性信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="魔数magic">1.1 魔数magic</h3>
<p>0~3 字节，表示它是否是【class】类型的文件</p>
<p>0000000 <strong>ca fe ba be</strong> 00 00 00 34 00 23 0a 00 06 00 15 09</p>
<p><strong>ca fe ba be</strong> ：表示这一个java类型的文件</p>
<h3 id="版本">1.2 版本</h3>
<p>4~7 字节，表示类的版本 00 34（52） 表示是 Java 8</p>
<p>0000000 ca fe ba be <strong>00 00 00 34</strong> 00 23 0a 00 06 00 15 09</p>
<h3 id="常量池">1.3 常量池</h3>
<table>
<thead>
<tr class="header">
<th>Constant Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CONSTANT_Class</td>
<td>7</td>
</tr>
<tr class="even">
<td>CONSTANT_Fieldref</td>
<td>9</td>
</tr>
<tr class="odd">
<td>CONSTANT_Methodref</td>
<td>10（0a）</td>
</tr>
<tr class="even">
<td>CONSTANT_InterfaceMethodref</td>
<td>11（0b）</td>
</tr>
<tr class="odd">
<td>CONSTANT_String</td>
<td>8</td>
</tr>
<tr class="even">
<td>CONSTANT_Integer</td>
<td>3</td>
</tr>
<tr class="odd">
<td>CONSTANT_Float</td>
<td>4</td>
</tr>
<tr class="even">
<td>CONSTANT_Long</td>
<td>5</td>
</tr>
<tr class="odd">
<td>CONSTANT_Double</td>
<td>6</td>
</tr>
<tr class="even">
<td>CONSTANT_NameAndType</td>
<td>12（0c）</td>
</tr>
<tr class="odd">
<td>CONSTANT_Utf8</td>
<td>1</td>
</tr>
<tr class="even">
<td>CONSTANT_MethodHandle</td>
<td>15（0f）</td>
</tr>
<tr class="odd">
<td>CONSTANT_MethodType</td>
<td>16（20）</td>
</tr>
<tr class="even">
<td>CONSTANT_InvokeDynamic</td>
<td>18（22）</td>
</tr>
</tbody>
</table>
<p>8~9 字节，表示常量池长度，00 23 （35） 表示常量池有 #1~#34项，注意 #0 项不计入，也没有值</p>
<p>0000000 ca fe ba be 00 00 00 34 <strong>00 23</strong> 0a 00 06 00 15 09</p>
<p><strong>第#1项</strong> 0a 表示一个 Method 信息，00 06 和 00 15（21） 表示它引用了常量池中 #6 和 #21 项来获得这个方法的【所属类】和【方法名】<br>
0000000 ca fe ba be 00 00 00 34 00 23 <strong>0a 00 06 00 15</strong> 09</p>
<p><strong>第#2项</strong> 09 表示一个 Field 信息，00 16（22）和 00 17（23） 表示它引用了常量池中 #22 和 # 23 项来获得这个成员变量的【所属类】和【成员变量名】<br>
0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 <strong>09</strong><br>
0000020 <strong>00 16 00 17</strong> 08 00 18 0a 00 19 00 1a 07 00 1b 07</p>
<p><strong>第#3项</strong> 08 表示一个字符串常量名称，00 18（24）表示它引用了常量池中 #24 项<br>
0000020 00 16 00 17 <strong>08 00 18</strong> 0a 00 19 00 1a 07 00 1b 07</p>
<p><strong>第#4项</strong> 0a 表示一个 Method 信息，00 19（25） 和 00 1a（26） 表示它引用了常量池中 #25 和 #26 项来获得这个方法的【所属类】和【方法名】<br>
0000020 00 16 00 17 08 00 18 <strong>0a 00 19 00 1a</strong> 07 00 1b 07</p>
<p><strong>第#5项</strong> 07 表示一个 Class 信息，00 1b（27） 表示它引用了常量池中 #27 项<br>
0000020 00 16 00 17 08 00 18 0a 00 19 00 1a <strong>07 00 1b</strong> 07</p>
<p><strong>第#6项</strong> 07 表示一个 Class 信息，00 1c（28） 表示它引用了常量池中 #28 项<br>
0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b <strong>07</strong><br>
0000040 <strong>00 1c</strong> 01 00 06 3c 69 6e 69 74 3e 01 00 03 28 29</p>
<p><strong>第#7项</strong> 01 表示一个 utf8 串，00 06 表示长度，3c 69 6e 69 74 3e 是【 <code>&lt;init&gt;</code> 】,表示了构造方法<br>
0000040 00 1c <strong>01 00 06 3c 69 6e 69 74 3e</strong> 01 00 03 28 29</p>
<p><strong>第#8项</strong> 01 表示一个 utf8 串，00 03 表示长度，28 29 56 是【<code>()V</code>】其实就是表示无参、无返回值<br>
0000040 00 1c 01 00 06 3c 69 6e 69 74 3e <strong>01 00 03 28 29</strong><br>
0000060 <strong>56</strong> 01 00 04 43 6f 64 65 01 00 0f 4c 69 6e 65 4e</p>
<p><strong>第#9项</strong> 01 表示一个 utf8 串，00 04 表示长度，43 6f 64 65 是【Code】<br>
0000060 56 <strong>01 00 04 43 6f 64 65</strong> 01 00 0f 4c 69 6e 65 4e</p>
<p><strong>第#10项</strong> 01 表示一个 utf8 串，00 0f（15） 表示长度，4c 69 6e 65 4e 75 6d 62 65 72 54 61 62 6c 65是【LineNumberTable】<br>
0000060 56 01 00 04 43 6f 64 65 <strong>01 00 0f 4c 69 6e 65 4e</strong><br>
0000100 <strong>75 6d 62 65 72 54 61 62 6c 65</strong> 01 00 12 4c 6f 63</p>
<p><strong>第#11项</strong> 01 表示一个 utf8 串，00 12（18） 表示长度，4c 6f 63 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65 是【LocalVariableTable】<br>
0000100 75 6d 62 65 72 54 61 62 6c 65 <strong>01 00 12 4c 6f 63</strong><br>
0000120 <strong>61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65</strong> 01</p>
<p><strong>第#12项</strong> 01 表示一个 utf8 串，00 04 表示长度，74 68 69 73 是【this】<br>
0000120 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65 <strong>01</strong><br>
0000140 <strong>00 04 74 68 69 73</strong> 01 00 1d 4c 63 6e 2f 69 74 63</p>
<p><strong>第#13项</strong> 01 表示一个 utf8 串，00 1d（29） 表示长度，是【Lcn/itcast/jvm/t5/HelloWorld;】<br>
0000140 00 04 74 68 69 73 01 <strong>00 1d 4c 63 6e 2f 69 74 63</strong><br>
0000160 <strong>61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c 6f</strong><br>
0000200 <strong>57 6f 72 6c 64 3b</strong> 01 00 04 6d 61 69 6e 01 00 16</p>
<p><strong>第#14项</strong> 01 表示一个 utf8 串，00 04 表示长度，74 68 69 73 是【main】<br>
0000200 57 6f 72 6c 64 3b <strong>01 00 04 6d 61 69 6e</strong> 01 00 16</p>
<p><strong>第#15项</strong> 01 表示一个 utf8 串，00 16（22） 表示长度，是【([Ljava/lang/String;)V】其实就是参数为字符串数组，无返回值<br>
0000200 57 6f 72 6c 64 3b 01 00 04 6d 61 69 6e <strong>01 00 16</strong><br>
0000220 <strong>28 5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72</strong><br>
0000240 <strong>69 6e 67 3b 29 56</strong> 01 00 04 61 72 67 73 01 00 13</p>
<p><strong>第#16项</strong> 01 表示一个 utf8 串，00 04 表示长度，是【args】<br>
0000240 69 6e 67 3b 29 56 <strong>01 00 04 61 72 67 73</strong> 01 00 13</p>
<p><strong>第#17项</strong> 01 表示一个 utf8 串，00 13（19） 表示长度，是【[Ljava/lang/String;】<br>
0000240 69 6e 67 3b 29 56 01 00 04 61 72 67 73 <strong>01 00 13</strong><br>
0000260 <strong>5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72 69</strong><br>
0000300 <strong>6e 67 3b</strong> 01 00 10 4d 65 74 68 6f 64 50 61 72 61</p>
<p><strong>第#18项</strong> 01 表示一个 utf8 串，00 10（16） 表示长度，是【MethodParameters】<br>
0000300 6e 67 3b <strong>01 00 10 4d 65 74 68 6f 64 50 61 72 61</strong><br>
0000320 <strong>6d 65 74 65 72 73</strong> 01 00 0a 53 6f 75 72 63 65 46</p>
<p><strong>第#19项</strong> 01 表示一个 utf8 串，00 0a（10） 表示长度，是【SourceFile】<br>
0000320 6d 65 74 65 72 73 <strong>01 00 0a 53 6f 75 72 63 65 46</strong><br>
0000340 <strong>69 6c 65</strong> 01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 64</p>
<p><strong>第#20项</strong> 01 表示一个 utf8 串，00 0f（15） 表示长度，是【HelloWorld.java】<br>
0000340 69 6c 65 <strong>01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 64</strong><br>
0000360 <strong>2e 6a 61 76 61</strong> 0c 00 07 00 08 07 00 1d 0c 00 1e</p>
<p><strong>第#21项</strong> 0c 表示一个 【名+类型】，00 07 00 08 引用了常量池中 #7 #8 两项<br>
0000360 2e 6a 61 76 61 <strong>0c 00 07 00 08</strong> 07 00 1d 0c 00 1e</p>
<p><strong>第#22项</strong> 07 表示一个 Class 信息，00 1d（29） 引用了常量池中 #29 项<br>
0000360 2e 6a 61 76 61 0c 00 07 00 08 <strong>07 00 1d</strong> 0c 00 1e</p>
<p><strong>第#23项</strong> 0c 表示一个 【名+类型】，00 1e（30） 00 1f （31）引用了常量池中 #30 #31 两项<br>
0000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d <strong>0c 00 1e</strong><br>
0000400 <strong>00 1f</strong> 01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64</p>
<p><strong>第#24项</strong> 01 表示一个 utf8 串，00 0f（15） 表示长度，是【hello world】<br>
0000400 00 1f <strong>01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64</strong></p>
<p><strong>第#25项</strong> 07 表示一个 Class 信息，00 20（32） 引用了常量池中 #32 项<br>
0000420 <strong>07 00 20</strong> 0c 00 21 00 22 01 00 1b 63 6e 2f 69 74</p>
<p><strong>第#26项</strong> 0c 表示一个 【名+类型】，00 21（33） 00 22（34）引用了常量池中 #33 #34 两项<br>
0000420 07 00 20 <strong>0c 00 21 00 22</strong> 01 00 1b 63 6e 2f 69 74</p>
<p><strong>第#27项</strong> 01 表示一个 utf8 串，00 1b（27） 表示长度，是【cn/itcast/jvm/t5/HelloWorld】<br>
0000420 07 00 20 0c 00 21 00 22 <strong>01 00 1b 63 6e 2f 69 74</strong><br>
0000440 <strong>63 61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c</strong><br>
0000460 <strong>6f 57 6f 72 6c 64</strong> 01 00 10 6a 61 76 61 2f 6c 61</p>
<p><strong>第#28项</strong> 01 表示一个 utf8 串，00 10（16） 表示长度，是【java/lang/Object】<br>
0000460 6f 57 6f 72 6c 64 <strong>01 00 10 6a 61 76 61 2f 6c 61</strong><br>
0000500 <strong>6e 67 2f 4f 62 6a 65 63 74</strong> 01 00 10 6a 61 76 61</p>
<p><strong>第#29项</strong> 01 表示一个 utf8 串，00 10（16） 表示长度，是【java/lang/System】<br>
0000500 6e 67 2f 4f 62 6a 65 63 74 <strong>01 00 10 6a 61 76 61</strong><br>
0000520 <strong>2f 6c 61 6e 67 2f 53 79 73 74 65 6d</strong> 01 00 03 6f</p>
<p><strong>第#30项</strong> 01 表示一个 utf8 串，00 03 表示长度，是【out】<br>
0000520 2f 6c 61 6e 67 2f 53 79 73 74 65 6d <strong>01 00 03 6f</strong><br>
0000540 <strong>75 74</strong> 01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72</p>
<p><strong>第#31项</strong> 01 表示一个 utf8 串，00 15（21） 表示长度，是【Ljava/io/PrintStream;】<br>
0000540 75 74 <strong>01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72</strong><br>
0000560 <strong>69 6e 74 53 74 72 65 61 6d 3b</strong> 01 00 13 6a 61 76</p>
<p><strong>第#32项</strong> 01 表示一个 utf8 串，00 13（19） 表示长度，是【java/io/PrintStream】<br>
0000560 69 6e 74 53 74 72 65 61 6d 3b <strong>01 00 13 6a 61 76</strong><br>
0000600 <strong>61 2f 69 6f 2f 50 72 69 6e 74 53 74 72 65 61 6d</strong></p>
<p><strong>第#33项</strong> 01 表示一个 utf8 串，00 07 表示长度，是【println】<br>
0000620 <strong>01 00 07 70 72 69 6e 74 6c 6e</strong> 01 00 15 28 4c 6a</p>
<p><strong>第#34项</strong> 01 表示一个 utf8 串，00 15（21） 表示长度，是【(Ljava/lang/String;)V】<br>
0000620 01 00 07 70 72 69 6e 74 6c 6e <strong>01 00 15 28 4c 6a</strong><br>
0000640 <strong>61 76 61 2f 6c 61 6e 67 2f 53 74 72 69 6e 67 3b</strong><br>
0000660 <strong>29 56</strong> 00 21 00 05 00 06 00 00 00 00 00 02 00 01</p>
<h3 id="访问标识与继承信息">1.4 访问标识与继承信息</h3>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th>Flag Name</th>
<th>Value</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ACC_PUBLIC</td>
<td>0x0001</td>
<td>Declared public ; may be accessed from outside its package.</td>
</tr>
<tr class="even">
<td>ACC_FINAL</td>
<td>0x0010</td>
<td>Declared final ; no subclasses allowed.</td>
</tr>
<tr class="odd">
<td>ACC_SUPER</td>
<td>0x0020</td>
<td>Treat superclass methods specially when invoked by the <em>invokespecial</em> instruction.</td>
</tr>
<tr class="even">
<td>ACC_INTERFACE</td>
<td>0x0200</td>
<td>Is an interface, not a class.</td>
</tr>
<tr class="odd">
<td>ACC_ABSTRACT</td>
<td>0x0400</td>
<td>Declared abstract ; must not be instantiated.</td>
</tr>
<tr class="even">
<td>ACC_SYNTHETIC</td>
<td>0x1000</td>
<td>Declared synthetic; not present in the source code.</td>
</tr>
<tr class="odd">
<td>ACC_ANNOTATION</td>
<td>0x2000</td>
<td>Declared as an annotation type.</td>
</tr>
<tr class="even">
<td>ACC_ENUM</td>
<td>0x4000</td>
<td>Declared as an enum type.</td>
</tr>
</tbody>
</table>
<p>接上方的字节码继续：</p>
<p>21 表示该 class 是一个类，公共的<br>
0000660 29 56 <strong>00 21</strong> 00 05 00 06 00 00 00 00 00 02 00 01</p>
<p>05 表示根据常量池中 #5 找到本类全限定名<br>
0000660 29 56 00 21 <strong>00 05</strong> 00 06 00 00 00 00 00 02 00 01</p>
<p>06 表示根据常量池中 #6 找到父类全限定名<br>
0000660 29 56 00 21 00 05 <strong>00 06</strong> 00 00 00 00 00 02 00 01</p>
<p>表示接口的数量，本类为 0<br>
0000660 29 56 00 21 00 05 00 06 <strong>00 00</strong> 00 00 00 02 00 01</p>
<h3 id="field-信息">1.5 Field 信息</h3>
<table>
<colgroup>
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 73%">
</colgroup>
<thead>
<tr class="header">
<th>FieldType</th>
<th>Type</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>B</td>
<td>byte</td>
<td>signed byte</td>
</tr>
<tr class="even">
<td>C</td>
<td>char</td>
<td>Unicode character code point in the Basic Multilingual Plane, encoded with UTF-16</td>
</tr>
<tr class="odd">
<td>D</td>
<td>double</td>
<td>double-precision floating-point value</td>
</tr>
<tr class="even">
<td>F</td>
<td>float</td>
<td>single-precision floating-point value</td>
</tr>
<tr class="odd">
<td>I</td>
<td>int</td>
<td>integer</td>
</tr>
<tr class="even">
<td>J</td>
<td>long</td>
<td>long integer</td>
</tr>
<tr class="odd">
<td>L ClassName ;</td>
<td>reference</td>
<td>an instance of class ClassName</td>
</tr>
<tr class="even">
<td>S</td>
<td>short</td>
<td>signed short</td>
</tr>
<tr class="odd">
<td>Z</td>
<td>boolean</td>
<td>true or false</td>
</tr>
<tr class="even">
<td>[</td>
<td>reference</td>
<td>one array dimension</td>
</tr>
</tbody>
</table>
<p>接上方的字节码继续：</p>
<p>表示成员变量数量，本类为 0<br>
0000660 29 56 00 21 00 05 00 06 00 00 <strong>00 00</strong> 00 02 00 01</p>
<h3 id="method-信息">1.6 Method 信息</h3>
<p>接上方的字节码继续：</p>
<p>表示方法数量，本类为 2<br>
0000660 29 56 00 21 00 05 00 06 00 00 00 00 <strong>00 02</strong> 00 01</p>
<p>一个方法由 访问修饰符，名称，参数描述，方法属性数量，方法属性组成</p>
<p>第一个方法的字节码如下：</p>
<p>0000660 29 56 00 21 00 05 00 06 00 00 00 00 00 02 <strong>00 01</strong><br>
0000700 <strong>00 07 00 08 00 01 00 09 00 00 00 2f 00 01 00 01</strong><br>
0000720 <strong>00 00 00 05 2a b7 00 01 b1 00 00 00 02 00 0a 00</strong><br>
0000740 <strong>00 00 06 00 01 00 00 00 04 00 0b 00 00 00 0c 00</strong><br>
0000760 <strong>01 00 00 00 05 00 0c 00 0d 00 00</strong> 00 09 00 0e 00</p>
<p>上述字节码，按照顺序解释如下：</p>
<ul>
<li>00 01代表访问修饰符（本类中是 public）</li>
<li>00 07代表引用了常量池 #07 项作为方法名称</li>
<li>00 08代表引用了常量池 #08 项作为方法参数描述</li>
<li>00 01代表方法属性数量，本方法是 1</li>
<li>方法属性
<ul>
<li>00 09 表示引用了常量池 #09 项，发现是【Code】属性</li>
<li>00 00 00 2f 表示此属性的长度是 47<br>
</li>
<li>00 01 表示【操作数栈】最大深度</li>
<li>00 01 表示【局部变量表】最大槽（slot）数</li>
<li>00 00 00 05 表示字节码程度，本例是 5</li>
<li>2a b7 00 01 b1 是字节码指令</li>
<li>00 00 00 02 表示方法细节属性数量，本例是 2</li>
<li>00 0a 表示引用了常量池 #10 项，发现是【LineNumberTable】属性
<ul>
<li>00 00 00 06 表示此属性的总长度，本例是 6</li>
<li>00 01 表示【LineNumberTable】长度</li>
<li>00 00 表示【字节码】行号 00 04 表示【java 源码】行号</li>
</ul></li>
<li>00 0b 表示引用了常量池 #11 项，发现是【LocalVariableTable】属性
<ul>
<li>00 00 00 0c 表示此属性的总长度，本例是 12</li>
<li>00 01 表示【LocalVariableTable】长度</li>
<li>00 00 表示局部变量生命周期开始，相对于字节码的偏移量</li>
<li>00 05 表示局部变量覆盖的范围长度</li>
<li>00 0c 表示局部变量名称，本例引用了常量池 #12 项，是【this】</li>
<li>00 0d 表示局部变量的类型，本例引用了常量池 #13 项，是【Lcn/itcast/jvm/t5/HelloWorld;】</li>
<li>00 00 表示局部变量占有的槽位（slot）编号，本例是 0</li>
</ul></li>
</ul></li>
</ul>
<p>第二个方法的字节码如下：</p>
<p>0000760 01 00 00 00 05 00 0c 00 0d 00 00 <strong>00 09 00 0e 00</strong><br>
0001000 <strong>0f 00 02 00 09 00 00 00 37 00 02 00 01 00 00 00</strong><br>
0001020 <strong>09 b2 00 02 12 03 b6 00 04 b1 00 00 00 02 00 0a</strong><br>
0001040 <strong>00 00 00 0a 00 02 00 00 00 06 00 08 00 07 00 0b</strong><br>
0001060 <strong>00 00 00 0c 00 01 00 00 00 09 00 10 00 11 00 00</strong><br>
0001100 <strong>00 12 00 00 00 05 01 00 10 00 00</strong> 00 01 00 13 00</p>
<ul>
<li>00 09 代表访问修饰符（本类中是 public static）</li>
<li>00 0e 代表引用了常量池 #14 项作为方法名称</li>
<li>00 0f 代表引用了常量池 #15 项作为方法参数描述</li>
<li>00 02 代表方法属性数量，本方法是 2</li>
<li>方法属性（属性1）
<ul>
<li>00 09 表示引用了常量池 #09 项，发现是【Code】属性</li>
<li>00 00 00 37 表示此属性的长度是 55</li>
<li>00 02 表示【操作数栈】最大深度</li>
<li>00 01 表示【局部变量表】最大槽（slot）数</li>
<li>00 00 00 05 表示字节码长度，本例是 9</li>
<li>b2 00 02 12 03 b6 00 04 b1 是字节码指令</li>
<li>00 00 00 02 表示方法细节属性数量，本例是 2</li>
<li>00 0a 表示引用了常量池 #10 项，发现是【LineNumberTable】属性
<ul>
<li>00 00 00 0a 表示此属性的总长度，本例是 10</li>
<li>00 02 表示【LineNumberTable】长度</li>
<li>00 00 表示【字节码】行号 00 06 表示【java 源码】行号</li>
<li>00 08 表示【字节码】行号 00 07 表示【java 源码】行号</li>
</ul></li>
<li>00 0b 表示引用了常量池 #11 项，发现是【LocalVariableTable】属性
<ul>
<li>00 00 00 0c 表示此属性的总长度，本例是 12</li>
<li>00 01 表示【LocalVariableTable】长度</li>
<li>00 00 表示局部变量生命周期开始，相对于字节码的偏移量</li>
<li>00 09 表示局部变量覆盖的范围长度</li>
<li>00 10 表示局部变量名称，本例引用了常量池 #16 项，是【args】</li>
<li>00 11 表示局部变量的类型，本例引用了常量池 #17 项，是【[Ljava/lang/String;】</li>
<li>00 00 表示局部变量占有的槽位（slot）编号，本例是 0</li>
</ul></li>
</ul></li>
<li>方法属性（属性2）
<ul>
<li>00 12 表示引用了常量池 #18 项，发现是【MethodParameters】属性
<ul>
<li>00 00 00 05 表示此属性的总长度，本例是 5</li>
<li>01 参数数量</li>
<li>00 10 表示引用了常量池 #16 项，是【args】</li>
<li>00 00 访问修饰符</li>
</ul></li>
</ul></li>
</ul>
<h3 id="附加属性">1.7 附加属性</h3>
<p>接上方字节码：</p>
<p>0001100 00 12 00 00 00 05 01 00 10 00 00 <strong>00 01 00 13 00</strong><br>
0001120 <strong>00 00 02 00 14</strong></p>
<ul>
<li>00 01 表示附加属性数量</li>
<li>00 13 表示引用了常量池 #19 项，即【SourceFile】</li>
<li>00 00 00 02 表示此属性的长度</li>
<li>00 14 表示引用了常量池 #20 项，即【HelloWorld.java】</li>
</ul>
<p>参考文献</p>
<p>https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html</p>
<h2 id="字节码指令">2. 字节码指令</h2>
<h3 id="入门">2.1 入门</h3>
<p>接着上一节，研究一下两组字节码指令，一个是</p>
<p><code>public cn.itcast.jvm.t5.HelloWorld();</code> 构造方法的字节码指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2a b7 00 01 b1</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><code>2a =&gt; aload_0</code> 加载 <code>slot 0</code> 的局部变量，即 <code>this</code>，做为下面的 <code>invokespecial</code> 构造方法调用的参数</li>
<li><code>b7 =&gt; invokespecial</code> 预备调用构造方法，哪个方法呢？</li>
<li>00 01 引用常量池中 #1 项，即【 <code>Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</code> 】</li>
<li>b1 表示返回</li>
</ol>
<p>另一个是 <code>public static void main(java.lang.String[]);</code> 主方法的字节码指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b2 00 02 12 03 b6 00 04 b1</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><code>b2 =&gt; getstatic</code> 用来加载静态变量，哪个静态变量呢？</li>
<li>00 02 引用常量池中 #2 项，即【<code>Field java/lang/System.out:Ljava/io/PrintStream;</code>】</li>
<li><code>12 =&gt; ldc</code> 加载参数，哪个参数呢？</li>
<li>03 引用常量池中 #3 项，即 【<code>String hello world</code>】</li>
<li><code>b6 =&gt; invokevirtual</code> 预备调用成员方法，哪个方法呢？</li>
<li>00 04 引用常量池中 #4 项，即【<code>Method java/io/PrintStream.println:(Ljava/lang/String;)V</code>】</li>
<li>b1 表示返回</li>
</ol>
<p>请参考：https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5</p>
<h3 id="javap-工具">2.2 javap 工具</h3>
<p>自己分析类文件结构太麻烦了，Oracle 提供了 javap 工具来反编译 class 文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">C:\...&gt;javap -v HelloWorld.class</span><br><span class="line">Classfile /C:/.../HelloWorld.class</span><br><span class="line">  Last modified <span class="number">2020</span>-<span class="number">9</span>-<span class="number">9</span>; size <span class="number">547</span> bytes         <span class="comment">// 最后修改时间  文件大小</span></span><br><span class="line">  MD5 checksum 72b642df992eec6e9c33e4a8b09d4022  <span class="comment">// MD5的签名</span></span><br><span class="line">  Compiled from <span class="string">&quot;HelloWorld.java&quot;</span>  <span class="comment">// 对应的原文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cn</span>.<span class="title">xyc</span>.<span class="title">HelloWorld</span>     // 类的全路径名称</span></span><br><span class="line"><span class="class">  <span class="title">minor</span> <span class="title">version</span>: 0</span></span><br><span class="line"><span class="class">  <span class="title">major</span> <span class="title">version</span>: 52                // 52 -&gt; <span class="title">JDK8</span></span></span><br><span class="line"><span class="class">  <span class="title">flags</span>: <span class="title">ACC_PUBLIC</span>, <span class="title">ACC_SUPER</span>     // 访问修饰符</span></span><br><span class="line"><span class="class"><span class="title">Constant</span> <span class="title">pool</span>:  // 常量池</span></span><br><span class="line"><span class="class">   #1 </span>= Methodref          #<span class="number">6.</span>#<span class="number">20</span>         <span class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   #<span class="number">2</span> = Fieldref           #<span class="number">21.</span>#<span class="number">22</span>        <span class="comment">// java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   #<span class="number">3</span> = String             #<span class="number">23</span>            <span class="comment">// hello world</span></span><br><span class="line">   #<span class="number">4</span> = Methodref          #<span class="number">24.</span>#<span class="number">25</span>        <span class="comment">// java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">   #<span class="number">5</span> = Class              #<span class="number">26</span>            <span class="comment">// cn/xyc/HelloWorld</span></span><br><span class="line">   #<span class="number">6</span> = Class              #<span class="number">27</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #<span class="number">7</span> = Utf8               &lt;init&gt;</span><br><span class="line">   #<span class="number">8</span> = Utf8               ()V</span><br><span class="line">   #<span class="number">9</span> = Utf8               Code</span><br><span class="line">  #<span class="number">10</span> = Utf8               LineNumberTable</span><br><span class="line">  #<span class="number">11</span> = Utf8               LocalVariableTable</span><br><span class="line">  #<span class="number">12</span> = Utf8               <span class="keyword">this</span></span><br><span class="line">  #<span class="number">13</span> = Utf8               Lcn/xyc/HelloWorld;</span><br><span class="line">  #<span class="number">14</span> = Utf8               main</span><br><span class="line">  #<span class="number">15</span> = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #<span class="number">16</span> = Utf8               args</span><br><span class="line">  #<span class="number">17</span> = Utf8               [Ljava/lang/String;</span><br><span class="line">  #<span class="number">18</span> = Utf8               SourceFile</span><br><span class="line">  #<span class="number">19</span> = Utf8               HelloWorld.java</span><br><span class="line">  #<span class="number">20</span> = NameAndType        #<span class="number">7</span>:#<span class="number">8</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  #<span class="number">21</span> = Class              #<span class="number">28</span>            <span class="comment">// java/lang/System</span></span><br><span class="line">  #<span class="number">22</span> = NameAndType        #<span class="number">29</span>:#<span class="number">30</span>        <span class="comment">// out:Ljava/io/PrintStream;</span></span><br><span class="line">  #<span class="number">23</span> = Utf8               hello world</span><br><span class="line">  #<span class="number">24</span> = Class              #<span class="number">31</span>            <span class="comment">// java/io/PrintStream</span></span><br><span class="line">  #<span class="number">25</span> = NameAndType        #<span class="number">32</span>:#<span class="number">33</span>        <span class="comment">// println:(Ljava/lang/String;)V</span></span><br><span class="line">  #<span class="number">26</span> = Utf8               cn/xyc/HelloWorld</span><br><span class="line">  #<span class="number">27</span> = Utf8               java/lang/Object</span><br><span class="line">  #<span class="number">28</span> = Utf8               java/lang/System</span><br><span class="line">  #<span class="number">29</span> = Utf8               out</span><br><span class="line">  #<span class="number">30</span> = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #<span class="number">31</span> = Utf8               java/io/PrintStream</span><br><span class="line">  #<span class="number">32</span> = Utf8               println</span><br><span class="line">  #<span class="number">33</span> = Utf8               (Ljava/lang/String;)V</span><br><span class="line">&#123;  <span class="comment">// 方法信息</span></span><br><span class="line">  <span class="keyword">public</span> cn.xyc.HelloWorld();  <span class="comment">// 构造方法</span></span><br><span class="line">    descriptor: ()V            <span class="comment">// 构造方法参数信息</span></span><br><span class="line">    flags: ACC_PUBLIC          <span class="comment">// 访问修饰符</span></span><br><span class="line">    Code:                      <span class="comment">// 具体代码</span></span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span>  <span class="comment">// 栈深度 局部变量表长度 参数长度</span></span><br><span class="line">         <span class="number">0</span>: aload_0			   <span class="comment">// 将第一个引用类型本地变量推送至栈顶</span></span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>   <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:      <span class="comment">// 局部变量表</span></span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcn/xyc/HelloWorld;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;  <span class="comment">// 主方法</span></span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: getstatic     #<span class="number">2</span>    <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">         <span class="number">3</span>: ldc           #<span class="number">3</span>    <span class="comment">// String hello world</span></span><br><span class="line">         <span class="number">5</span>: invokevirtual #<span class="number">4</span>    <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">         <span class="number">8</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">5</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">6</span>: <span class="number">8</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">9</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">&quot;HelloWorld.java&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="图解方法执行流程">2.3 图解方法执行流程</h3>
<h4 id="原始-java-代码">1）原始 java 代码</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示 字节码指令 和 操作数栈、常量池的关系</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> b = Short.MAX_VALUE + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> c = a + b;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="编译后的字节码文件">2）编译后的字节码文件</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">C:\...&gt;javap -v Demo3_1.class</span><br><span class="line">Classfile /C:/.../Demo3_1.class</span><br><span class="line">  Last modified <span class="number">2020</span>-<span class="number">9</span>-<span class="number">13</span>; size <span class="number">597</span> bytes</span><br><span class="line">  MD5 checksum bb8d90abbce7a3caa70d1f589389774f</span><br><span class="line">  Compiled from <span class="string">&quot;Demo3_1.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cn</span>.<span class="title">xyc</span>.<span class="title">Demo3_1</span></span></span><br><span class="line"><span class="class">  <span class="title">minor</span> <span class="title">version</span>: 0</span></span><br><span class="line"><span class="class">  <span class="title">major</span> <span class="title">version</span>: 52</span></span><br><span class="line"><span class="class">  <span class="title">flags</span>: <span class="title">ACC_PUBLIC</span>, <span class="title">ACC_SUPER</span></span></span><br><span class="line"><span class="class"><span class="title">Constant</span> <span class="title">pool</span>:</span></span><br><span class="line"><span class="class">   #1 </span>= Methodref          #<span class="number">7.</span>#<span class="number">25</span>         <span class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   #<span class="number">2</span> = Class              #<span class="number">26</span>            <span class="comment">// java/lang/Short</span></span><br><span class="line">   #<span class="number">3</span> = Integer            <span class="number">32768</span></span><br><span class="line">   #<span class="number">4</span> = Fieldref           #<span class="number">27.</span>#<span class="number">28</span>        <span class="comment">// java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   #<span class="number">5</span> = Methodref          #<span class="number">29.</span>#<span class="number">30</span>        <span class="comment">// java/io/PrintStream.println:(I)V</span></span><br><span class="line">   #<span class="number">6</span> = Class              #<span class="number">31</span>            <span class="comment">// cn/xyc/Demo3_1</span></span><br><span class="line">   #<span class="number">7</span> = Class              #<span class="number">32</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #<span class="number">8</span> = Utf8               &lt;init&gt;</span><br><span class="line">   #<span class="number">9</span> = Utf8               ()V</span><br><span class="line">  #<span class="number">10</span> = Utf8               Code</span><br><span class="line">  #<span class="number">11</span> = Utf8               LineNumberTable</span><br><span class="line">  #<span class="number">12</span> = Utf8               LocalVariableTable</span><br><span class="line">  #<span class="number">13</span> = Utf8               <span class="keyword">this</span></span><br><span class="line">  #<span class="number">14</span> = Utf8               Lcn/xyc/Demo3_1;</span><br><span class="line">  #<span class="number">15</span> = Utf8               main</span><br><span class="line">  #<span class="number">16</span> = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #<span class="number">17</span> = Utf8               args</span><br><span class="line">  #<span class="number">18</span> = Utf8               [Ljava/lang/String;</span><br><span class="line">  #<span class="number">19</span> = Utf8               a</span><br><span class="line">  #<span class="number">20</span> = Utf8               I</span><br><span class="line">  #<span class="number">21</span> = Utf8               b</span><br><span class="line">  #<span class="number">22</span> = Utf8               c</span><br><span class="line">  #<span class="number">23</span> = Utf8               SourceFile</span><br><span class="line">  #<span class="number">24</span> = Utf8               Demo3_1.java</span><br><span class="line">  #<span class="number">25</span> = NameAndType        #<span class="number">8</span>:#<span class="number">9</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  #<span class="number">26</span> = Utf8               java/lang/Short</span><br><span class="line">  #<span class="number">27</span> = Class              #<span class="number">33</span>            <span class="comment">// java/lang/System</span></span><br><span class="line">  #<span class="number">28</span> = NameAndType        #<span class="number">34</span>:#<span class="number">35</span>        <span class="comment">// out:Ljava/io/PrintStream;</span></span><br><span class="line">  #<span class="number">29</span> = Class              #<span class="number">36</span>            <span class="comment">// java/io/PrintStream</span></span><br><span class="line">  #<span class="number">30</span> = NameAndType        #<span class="number">37</span>:#<span class="number">38</span>        <span class="comment">// println:(I)V</span></span><br><span class="line">  #<span class="number">31</span> = Utf8               cn/xyc/Demo3_1</span><br><span class="line">  #<span class="number">32</span> = Utf8               java/lang/Object</span><br><span class="line">  #<span class="number">33</span> = Utf8               java/lang/System</span><br><span class="line">  #<span class="number">34</span> = Utf8               out</span><br><span class="line">  #<span class="number">35</span> = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #<span class="number">36</span> = Utf8               java/io/PrintStream</span><br><span class="line">  #<span class="number">37</span> = Utf8               println</span><br><span class="line">  #<span class="number">38</span> = Utf8               (I)V</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> cn.xyc.Demo3_1();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcn/xyc/Demo3_1;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">4</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: bipush        <span class="number">10</span>  <span class="comment">// 常数10入栈--&gt;该值不是从常量池中取来的</span></span><br><span class="line">         <span class="number">2</span>: istore_1		  <span class="comment">// 存入第一个slot_1中</span></span><br><span class="line">         <span class="number">3</span>: ldc           #<span class="number">3</span>  <span class="comment">// int 32768</span></span><br><span class="line">         <span class="number">5</span>: istore_2  	      <span class="comment">// 存入第二个slot_2中</span></span><br><span class="line">         <span class="number">6</span>: iload_1		      <span class="comment">// 加载slot_1中的值到操作栈中</span></span><br><span class="line">         <span class="number">7</span>: iload_2		      <span class="comment">// 加载slot_2中的值到操作栈中</span></span><br><span class="line">         <span class="number">8</span>: iadd</span><br><span class="line">         <span class="number">9</span>: istore_3		  <span class="comment">// 存入第三个slot_3中</span></span><br><span class="line">        <span class="number">10</span>: getstatic     #<span class="number">4</span>  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">        <span class="number">13</span>: iload_3			  <span class="comment">// 加载slot_3中的值到操作栈中</span></span><br><span class="line">        <span class="number">14</span>: invokevirtual #<span class="number">5</span>  <span class="comment">// Method java/io/PrintStream.println:(I)V</span></span><br><span class="line">        <span class="number">17</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">5</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">6</span>: <span class="number">3</span></span><br><span class="line">        line <span class="number">7</span>: <span class="number">6</span></span><br><span class="line">        line <span class="number">8</span>: <span class="number">10</span></span><br><span class="line">        line <span class="number">9</span>: <span class="number">17</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">18</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">            <span class="number">3</span>      <span class="number">15</span>     <span class="number">1</span>     a   I</span><br><span class="line">            <span class="number">6</span>      <span class="number">12</span>     <span class="number">2</span>     b   I</span><br><span class="line">           <span class="number">10</span>       <span class="number">8</span>     <span class="number">3</span>     c   I</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">&quot;Demo3_1.java&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="常量池载入运行时常量池">3）常量池载入运行时常量池</h4>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/常量池载入运行时常量池.PNG" alt="常量池载入运行时常量池"></p>
<p>可见 <code>int a=10</code> 这些小的数组并不是存储运行时常量池中的，而是与方法的字节码存在一起；</p>
<p>但一旦<strong>数值超过了Short的最大值</strong>，<code>Short.MAX_VALUE + 1;</code>，值就存在常量池中了</p>
<h4 id="方法字节码载入方法区">4）方法字节码载入方法区</h4>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/方法字节码载入方法区.PNG" alt="方法字节码载入方法区"></p>
<h4 id="main-线程开始运行分配栈帧内存">5）main 线程开始运行，分配栈帧内存</h4>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/main线程开始运行，分配栈帧内存.PNG" alt="main线程开始运行，分配栈帧内存"></p>
<blockquote>
<p>绿色：局部变量表，对应字节码中 locals=4，分别存放args，a，b，c</p>
<p>浅蓝色：操作数栈，stack=2</p>
</blockquote>
<h4 id="执行引擎开始执行字节码">6）执行引擎开始执行字节码</h4>
<h5 id="bipush-10">bipush 10</h5>
<ul>
<li>将一个 byte 压入操作数栈（其长度会补齐 4 个字节），类似的指令还有：
<ul>
<li>sipush 将一个 short 压入操作数栈（其长度会补齐 4 个字节）</li>
<li>ldc 将一个 int 压入操作数栈</li>
<li>ldc2_w 将一个 long 压入操作数栈（分两次压入，因为 long 是 8 个字节）</li>
</ul></li>
<li>这里小的数字都是和字节码指令存在一起，超过 short 范围的数字存入了常量池</li>
</ul>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/bipush10.PNG" alt="bipush10"></p>
<h5 id="istore_1">istore_1</h5>
<ul>
<li>将操作数栈顶数据弹出，存入局部变量表的 slot 1</li>
</ul>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/istore-1.PNG" alt="istore-1"></p>
<h5 id="ldc-3">ldc #3</h5>
<ul>
<li>从常量池加载 #3 数据到操作数栈</li>
<li><strong>注意</strong> Short.MAX_VALUE 是 32767，所以 32768 = Short.MAX_VALUE + 1 实际是在编译期间计算好的</li>
</ul>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/ldc.PNG" alt="ldc"></p>
<h5 id="istore_2">istore_2</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/istore-2.PNG" alt="istore-2"></p>
<h5 id="iload_1">iload_1</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iload-1.PNG" alt="iload-1"></p>
<h5 id="iload_2">iload_2</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iload-2.PNG" alt="iload-2"></p>
<h5 id="iadd">iadd</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iadd.PNG" alt="iadd"></p>
<h5 id="istore_3">istore_3</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/istore-3.PNG" alt="istore-3"></p>
<h5 id="getstatic-4">getstatic #4</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/getstatic.PNG" alt="getstatic"></p>
<h5 id="iload_3">iload_3</h5>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iload-3.PNG" alt="iload-3"></p>
<h5 id="invokevirtual-5">invokevirtual #5</h5>
<ul>
<li>找到常量池 #5 项</li>
<li>定位到方法区 java/io/PrintStream.println:(I)V 方法</li>
<li>生成新的栈帧（分配 locals、stack等）</li>
<li>传递参数，执行新栈帧中的字节码</li>
</ul>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/invokevirtual.PNG" alt="invokevirtual"></p>
<ul>
<li>执行完毕，弹出栈帧</li>
<li>清除 main 操作数栈内容</li>
</ul>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/invokevirtual2.PNG" alt="invokevirtual2"></p>
<h5 id="return">return</h5>
<ul>
<li>完成 main 方法调用，弹出 main 栈帧</li>
<li>程序结束</li>
</ul>
<h3 id="练习---分析-i">2.4 练习 - 分析 i++</h3>
<p>目的：从字节码角度分析 a++ 相关题目</p>
<p>源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从字节码角度分析　a++  相关题目</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> b = a++ + ++a + a--;</span><br><span class="line">        System.out.println(a);  <span class="comment">// 11</span></span><br><span class="line">        System.out.println(b);  <span class="comment">// 34</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">  descriptor: ([Ljava/lang/String;)V</span><br><span class="line">  flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: bipush        <span class="number">10</span></span><br><span class="line">       <span class="number">2</span>: istore_1</span><br><span class="line">       <span class="number">3</span>: iload_1</span><br><span class="line">       <span class="number">4</span>: iinc          <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">       <span class="number">7</span>: iinc          <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">10</span>: iload_1</span><br><span class="line">      <span class="number">11</span>: iadd</span><br><span class="line">      <span class="number">12</span>: iload_1</span><br><span class="line">      <span class="number">13</span>: iinc          <span class="number">1</span>, -<span class="number">1</span></span><br><span class="line">      <span class="number">16</span>: iadd</span><br><span class="line">      <span class="number">17</span>: istore_2      <span class="comment">// 下方分析到此</span></span><br><span class="line">      <span class="number">18</span>: getstatic     #<span class="number">2</span>  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">21</span>: iload_1</span><br><span class="line">      <span class="number">22</span>: invokevirtual #<span class="number">3</span>  <span class="comment">// Method java/io/PrintStream.println:(I)V</span></span><br><span class="line">      <span class="number">25</span>: getstatic     #<span class="number">2</span>  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">28</span>: iload_2</span><br><span class="line">      <span class="number">29</span>: invokevirtual #<span class="number">3</span>  <span class="comment">// Method java/io/PrintStream.println:(I)V</span></span><br><span class="line">      <span class="number">32</span>: <span class="keyword">return</span></span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">6</span>: <span class="number">0</span></span><br><span class="line">      line <span class="number">7</span>: <span class="number">3</span></span><br><span class="line">      line <span class="number">8</span>: <span class="number">18</span></span><br><span class="line">      line <span class="number">9</span>: <span class="number">25</span></span><br><span class="line">      line <span class="number">10</span>: <span class="number">32</span></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>      <span class="number">33</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">          <span class="number">3</span>      <span class="number">30</span>     <span class="number">1</span>     a   I</span><br><span class="line">         <span class="number">18</span>      <span class="number">15</span>     <span class="number">2</span>     b   I</span><br></pre></td></tr></table></figure>
<p>分析：</p>
<ul>
<li><strong>注意 iinc 指令是直接在局部变量 slot 上进行运算</strong></li>
<li>a++ 和 ++a 的区别是先执行 iload 还是 先执行 iinc</li>
</ul>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/iinc.PNG" alt="iinc"></p>
<h3 id="条件判断指令">2.5 条件判断指令</h3>
<table>
<thead>
<tr class="header">
<th>指令</th>
<th>助记符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0x99</td>
<td>ifeq</td>
<td>判断是否 == 0</td>
</tr>
<tr class="even">
<td>0x9a</td>
<td>ifne</td>
<td>判断是否 != 0</td>
</tr>
<tr class="odd">
<td>0x9b</td>
<td>iflt</td>
<td>判断是否 &lt; 0</td>
</tr>
<tr class="even">
<td>0x9c</td>
<td>ifge</td>
<td>判断是否 &gt;= 0</td>
</tr>
<tr class="odd">
<td>0x9d</td>
<td>ifgt</td>
<td>判断是否 &gt; 0</td>
</tr>
<tr class="even">
<td>0x9e</td>
<td>ifle</td>
<td>判断是否 &lt;= 0</td>
</tr>
<tr class="odd">
<td>0x9f</td>
<td>if_icmpeq</td>
<td>两个int是否 ==</td>
</tr>
<tr class="even">
<td>0xa0</td>
<td>if_icmpne</td>
<td>两个int是否 !=</td>
</tr>
<tr class="odd">
<td>0xa1</td>
<td>if_icmplt</td>
<td>两个int是否 &lt;</td>
</tr>
<tr class="even">
<td>0xa2</td>
<td>if_icmpge</td>
<td>两个int是否 &gt;=</td>
</tr>
<tr class="odd">
<td>0xa3</td>
<td>if_icmpgt</td>
<td>两个int是否 &gt;</td>
</tr>
<tr class="even">
<td>0xa4</td>
<td>if_icmple</td>
<td>两个int是否 &lt;=</td>
</tr>
<tr class="odd">
<td>0xa5</td>
<td>if_acmpeq</td>
<td>两个引用是否 ==</td>
</tr>
<tr class="even">
<td>0xa6</td>
<td>if_acmpne</td>
<td>两个引用是否 !=</td>
</tr>
<tr class="odd">
<td>0xc6</td>
<td>ifnull</td>
<td>判断是否 == null</td>
</tr>
<tr class="even">
<td>0xc7</td>
<td>ifnonnull</td>
<td>判断是否 != null</td>
</tr>
</tbody>
</table>
<p>几点说明：</p>
<ul>
<li><strong>byte，short，char 都会按 int 比较，因为操作数栈都是 4 字节</strong></li>
<li>goto 用来进行跳转到指定行号的字节码</li>
</ul>
<p>源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(a == <span class="number">0</span>) &#123;</span><br><span class="line">            a = <span class="number">10</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            a = <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: iconst_0             <span class="comment">// 分配了0</span></span><br><span class="line">         <span class="number">1</span>: istore_1             <span class="comment">// 把0存入a变量中</span></span><br><span class="line">         <span class="number">2</span>: iload_1				 <span class="comment">// 把a加载进入栈中进行后续比较</span></span><br><span class="line">         <span class="number">3</span>: ifne          <span class="number">12</span>     <span class="comment">// 栈中的数不等于0？，若是则跳至12</span></span><br><span class="line">         <span class="number">6</span>: bipush        <span class="number">10</span>     <span class="comment">// 若等于0，则将10放入栈</span></span><br><span class="line">         <span class="number">8</span>: istore_1			 <span class="comment">// 将10赋值给a</span></span><br><span class="line">         <span class="number">9</span>: goto          <span class="number">15</span>     <span class="comment">// 跳转到15行</span></span><br><span class="line">        <span class="number">12</span>: bipush        <span class="number">20</span>     <span class="comment">// 将20放入栈</span></span><br><span class="line">        <span class="number">14</span>: istore_1             <span class="comment">// 将20赋值给a</span></span><br><span class="line">        <span class="number">15</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>思考</p>
<p>细心的同学应当注意到，以上比较指令中没有 long，float，double 的比较，那么它们要比较怎么办？</p>
<p>参考:https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lcmp</p>
</blockquote>
<h3 id="循环控制指令">2.6 循环控制指令</h3>
<p>其实循环控制还是前面介绍的那些指令，例如 while 循环：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (a &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            a++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: iconst_0             <span class="comment">// 常量0</span></span><br><span class="line">     <span class="number">1</span>: istore_1             <span class="comment">// 赋值给a </span></span><br><span class="line">     <span class="number">2</span>: iload_1              <span class="comment">// 把a加载进操作栈中</span></span><br><span class="line">     <span class="number">3</span>: bipush        <span class="number">10</span>     <span class="comment">// 把10加载进操作栈中</span></span><br><span class="line">     <span class="number">5</span>: if_icmpge     <span class="number">14</span>     <span class="comment">// 栈中，两个整数进行比较</span></span><br><span class="line">     <span class="number">8</span>: iinc          <span class="number">1</span>, <span class="number">1</span>   <span class="comment">// 自增</span></span><br><span class="line">    <span class="number">11</span>: goto          <span class="number">2</span>      <span class="comment">// 调回第2行代码</span></span><br><span class="line">    <span class="number">14</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<p>再比如 do while 循环：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            a++;</span><br><span class="line">        &#125; <span class="keyword">while</span> (a &lt; <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: iconst_0</span><br><span class="line">     <span class="number">1</span>: istore_1</span><br><span class="line">     <span class="number">2</span>: iinc          <span class="number">1</span>, <span class="number">1</span>  <span class="comment">// 先自增</span></span><br><span class="line">     <span class="number">5</span>: iload_1             <span class="comment">// 把自增后的值放入栈</span></span><br><span class="line">     <span class="number">6</span>: bipush        <span class="number">10</span>    <span class="comment">// 把10放入栈</span></span><br><span class="line">     <span class="number">8</span>: if_icmplt     <span class="number">2</span>     <span class="comment">// 进行比较</span></span><br><span class="line">    <span class="number">11</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<p>最后再看看 for 循环：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: iconst_0</span><br><span class="line">     <span class="number">1</span>: istore_1</span><br><span class="line">     <span class="number">2</span>: iload_1</span><br><span class="line">     <span class="number">3</span>: bipush        <span class="number">10</span></span><br><span class="line">     <span class="number">5</span>: if_icmpge     <span class="number">14</span></span><br><span class="line">     <span class="number">8</span>: iinc          <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="number">11</span>: goto          <span class="number">2</span></span><br><span class="line">    <span class="number">14</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意</p>
<p>比较 while 和 for 的字节码，你发现它们是一模一样的，殊途也能同归</p>
</blockquote>
<h3 id="练习---判断结果">2.7 练习 - 判断结果</h3>
<p>请从字节码角度分析，下列代码运行的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_6_1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            x = x++;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; </span><br><span class="line">        System.out.println(x); <span class="comment">// 结果是 0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：只与x有关的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>: iconst_0</span><br><span class="line"><span class="number">3</span>: istore_2</span><br><span class="line"><span class="number">10</span>: iload_2             <span class="comment">// 把x的值放入栈中，x此时为0</span></span><br><span class="line"><span class="number">11</span>: iinc          <span class="number">2</span>, <span class="number">1</span>  <span class="comment">// x自增，这个自增在slot中自增的</span></span><br><span class="line"><span class="number">14</span>: istore_2            <span class="comment">// 赋值操作，把栈中的x值赋值给x，x被覆盖了</span></span><br></pre></td></tr></table></figure>
<h3 id="构造方法">2.8 构造方法</h3>
<h4 id="cinitv">1）<code>&lt;cinit&gt;()V</code></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_8_1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        i = <span class="number">20</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        i = <span class="number">30</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译器会按从上至下的顺序，收集所有 static 静态代码块和静态成员赋值的代码，合并为一个特殊的方法 <code>&lt;cinit&gt;()V</code> ：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: bipush <span class="number">10</span>    	<span class="comment">// 把10放入栈中   </span></span><br><span class="line"><span class="number">2</span>: putstatic #<span class="number">2</span> 	<span class="comment">// Field i:I，常量池中找到i变量</span></span><br><span class="line"><span class="number">5</span>: bipush <span class="number">20</span>		<span class="comment">// 把20放入栈中</span></span><br><span class="line"><span class="number">7</span>: putstatic #<span class="number">2</span> 	<span class="comment">// Field i:I</span></span><br><span class="line"><span class="number">10</span>: bipush <span class="number">30</span>		<span class="comment">// 把20放入栈中</span></span><br><span class="line"><span class="number">12</span>: putstatic #<span class="number">2</span> 	<span class="comment">// Field i:I</span></span><br><span class="line"><span class="number">15</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;cinit&gt;()V</code> 方法会在类加载的初始化阶段被调用</p>
<h4 id="initv">2）<code>&lt;init&gt;()V</code></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_8_2</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String a = <span class="string">&quot;s1&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        b = <span class="number">20</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> b = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        a = <span class="string">&quot;s2&quot;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Demo3_8_2</span><span class="params">(String a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">        <span class="keyword">this</span>.b = b;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Demo3_8_2 d = <span class="keyword">new</span> Demo3_8_2(<span class="string">&quot;s3&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        System.out.println(d.a);  <span class="comment">// &quot;s3&quot;</span></span><br><span class="line">        System.out.println(d.b);  <span class="comment">// 30</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译器会按从上至下的顺序，收集所有 {} 代码块和成员变量赋值的代码，形成新的构造方法，但原始构造方法内的代码总是在最后</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">   stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">3</span></span><br><span class="line">       <span class="number">0</span>: aload_0			 <span class="comment">// this</span></span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>   <span class="comment">// super.&lt;init&gt;()V</span></span><br><span class="line">       <span class="number">4</span>: aload_0</span><br><span class="line">       <span class="number">5</span>: ldc #<span class="number">2</span> 			 <span class="comment">// &lt;- &quot;s1&quot;</span></span><br><span class="line">       <span class="number">7</span>: putfield #<span class="number">3</span> 		 <span class="comment">// -&gt; this.a</span></span><br><span class="line">       <span class="number">10</span>: aload_0</span><br><span class="line">       <span class="number">11</span>: bipush <span class="number">20</span> 		 <span class="comment">// &lt;- 20</span></span><br><span class="line">       <span class="number">13</span>: putfield #<span class="number">4</span> 		 <span class="comment">// -&gt; this.b</span></span><br><span class="line">       <span class="number">16</span>: aload_0</span><br><span class="line">       <span class="number">17</span>: bipush <span class="number">10</span>		 <span class="comment">// &lt;- 10</span></span><br><span class="line">       <span class="number">19</span>: putfield #<span class="number">4</span>		 <span class="comment">// -&gt; this.b</span></span><br><span class="line">       <span class="number">22</span>: aload_0</span><br><span class="line">       <span class="number">23</span>: ldc #<span class="number">5</span>			 <span class="comment">// &lt;- &quot;s2&quot;</span></span><br><span class="line">       <span class="number">25</span>: putfield #<span class="number">3</span> 		 <span class="comment">// -&gt; this.a</span></span><br><span class="line">       <span class="number">28</span>: aload_0 			 <span class="comment">// ------------------------------</span></span><br><span class="line">       <span class="number">29</span>: aload_1 			 <span class="comment">// &lt;- slot_1(a) &quot;s3&quot; 			 |</span></span><br><span class="line">       <span class="number">30</span>: putfield #<span class="number">3</span>		 <span class="comment">// -&gt; this.a 				     |</span></span><br><span class="line">       <span class="number">33</span>: aload_0			 <span class="comment">//								 |</span></span><br><span class="line">       <span class="number">34</span>: iload_2			 <span class="comment">// &lt;- slot 2(b) 30 			 |</span></span><br><span class="line">       <span class="number">35</span>: putfield #<span class="number">4</span>		 <span class="comment">// -&gt; this.b --------------------</span></span><br><span class="line">       <span class="number">38</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<h3 id="方法调用">2.9 方法调用</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_9</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Demo3_9</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Demo3_9 d = <span class="keyword">new</span> Demo3_9();</span><br><span class="line">        d.test1();</span><br><span class="line">        d.test2();</span><br><span class="line">        d.test3();</span><br><span class="line">        d.test4();</span><br><span class="line">        Demo3_9.test4();</span><br><span class="line">        d.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">3</span>    <span class="comment">// class cn/xyc/Demo3_9</span></span><br><span class="line">     <span class="number">3</span>: dup					<span class="comment">// 复制一份引用</span></span><br><span class="line">     <span class="number">4</span>: invokespecial #<span class="number">4</span>    <span class="comment">// Method &quot;&lt;init&gt;&quot;:()V 构造方法，调用完成后，引用被消耗</span></span><br><span class="line">     <span class="number">7</span>: astore_1            <span class="comment">// 把对象引用赋值给d</span></span><br><span class="line">     <span class="number">8</span>: aload_1             <span class="comment">// 把对象引用加载至栈中</span></span><br><span class="line">     <span class="number">9</span>: invokespecial #<span class="number">5</span>    <span class="comment">// Method test1:()V  私有方法</span></span><br><span class="line">    <span class="number">12</span>: aload_1</span><br><span class="line">    <span class="number">13</span>: invokespecial #<span class="number">6</span>    <span class="comment">// Method test2:()V  final方法</span></span><br><span class="line">    <span class="number">16</span>: aload_1</span><br><span class="line">    <span class="number">17</span>: invokevirtual #<span class="number">7</span>    <span class="comment">// Method test3:()V  普通方法--&gt;运行时确定，动态绑定</span></span><br><span class="line">    <span class="number">20</span>: aload_1</span><br><span class="line">    <span class="number">21</span>: pop                 <span class="comment">// 由于静态方法的调用不需要对象的引用</span></span><br><span class="line">    <span class="number">22</span>: invokestatic  #<span class="number">8</span>    <span class="comment">// Method test4:()V  静态方法</span></span><br><span class="line">    <span class="number">25</span>: invokestatic  #<span class="number">8</span>    <span class="comment">// Method test4:()V  静态方法</span></span><br><span class="line">    <span class="number">28</span>: aload_1</span><br><span class="line">    <span class="number">29</span>: invokevirtual #<span class="number">9</span>    <span class="comment">// Method toString:()Ljava/lang/String;</span></span><br><span class="line">    <span class="number">32</span>: pop</span><br><span class="line">    <span class="number">33</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<ul>
<li>new 是创建【对象】，给对象分配堆内存，执行成功会将【对象引用】压入操作数栈</li>
<li>dup 是复制操作数栈栈顶的内容，本例即为【对象引用】，为什么需要两份引用呢，一个是要配合 invokespecial 调用该对象的构造方法 <code>&quot;&lt;init&gt;&quot;:()V</code> （会消耗掉栈顶一个引用），另一个要配合 astore_1 赋值给局部变量</li>
<li>最终方法（final），私有方法（private），构造方法都是由 invokespecial 指令来调用，属于<strong>静态绑定</strong></li>
<li>普通成员方法是由 invokevirtual 调用，属于<strong>动态绑定</strong>，即支持多态</li>
<li>成员方法与静态方法调用的另一个区别是，执行方法前是否需要【对象引用】</li>
<li>比较有意思的是 d.test4(); 是通过【对象引用】调用一个静态方法，可以看到在调用invokestatic 之前执行了 pop 指令，把【对象引用】从操作数栈弹掉了</li>
<li>还有一个执行 invokespecial 的情况是通过 super 调用父类方法</li>
</ul>
<h3 id="多态的原理">2.10 多态的原理</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示多态原理，注意加上下面的 JVM 参数，禁用指针压缩</span></span><br><span class="line"><span class="comment"> * -XX:-UseCompressedOops -XX:-UseCompressedClassPointers</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_10</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(Animal animal)</span> </span>&#123;</span><br><span class="line">        animal.eat();</span><br><span class="line">        System.out.println(animal.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        test(<span class="keyword">new</span> Cat());</span><br><span class="line">        test(<span class="keyword">new</span> Dog());</span><br><span class="line">        System.in.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;我是&quot;</span> + <span class="keyword">this</span>.getClass().getSimpleName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;啃骨头&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;吃鱼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="运行代码">1）运行代码</h4>
<p>停在 <code>System.in.read()</code> 方法上，这时运行 jps 获取进程 id</p>
<h4 id="运行-hsdb-工具">2）运行 HSDB 工具</h4>
<p>进入 JDK 安装目录，执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Software\Java\jdk1.8.0_241</span><br><span class="line">java -cp ./lib/sa-jdi.jar sun.jvm.hotspot.HSDB</span><br></pre></td></tr></table></figure>
<p>进入图形界面 <code>File -&gt; Attach To HotSport process -&gt; 输入进程 id</code></p>
<h4 id="查找某个对象">3）查找某个对象</h4>
<p>打开 <code>Tools -&gt; Find Object By Query</code>寻找对象</p>
<p>输入 <code>select d from cn.xyc.Dog d</code> 点击 Execute 执行</p>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具.PNG" alt="HSDB工具"></p>
<h4 id="查看对象内存结构">4）查看对象内存结构</h4>
<p>点击超链接可以看到对象的内存结构，此对象没有任何属性，因此只有对象头的 16 字节，前 8 字节是 MarkWord，后 8 字节就是对象的 Class 指针</p>
<p>但目前看不到它的实际地址</p>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具2.PNG" alt="HSDB工具2"></p>
<h4 id="查看对象class的内存地址">5）查看对象Class的内存地址</h4>
<p>可以通过 <code>Windows -&gt; Console</code> 进入命令行模式，执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mem 0x000000012a19b1e0 2</span><br></pre></td></tr></table></figure>
<p>mem 有两个参数，参数 1 是对象地址，参数 2 是查看 2 行（即 16 字节）</p>
<p>结果中第一行为对象的MarkWord</p>
<p>结果中第二行 0x000000001bc04028 即为 Class 的内存地址</p>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具3.PNG" alt="HSDB工具3"></p>
<h4 id="查看类的-vtable">6）查看类的 vtable</h4>
<p>vtable：虚方法表</p>
<p><strong>方法1</strong>：<code>Tool -&gt; inspector</code>进入 Inspector 工具，输入刚才的 Class 内存地址，看到如下界面</p>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具4.PNG" alt="HSDB工具4"></p>
<p><strong>方法2</strong>：或者 <code>Tools -&gt; Class Browser</code> 输入 Dog 查找，可以得到相同的结果</p>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具5.PNG" alt="HSDB工具5"></p>
<p>无论通过哪种方法，都可以找到 Dog Class 的 vtable 长度为 6，意思就是 Dog 类有 6 个虚方法（多态相关的，final，static 不会列入）</p>
<p>那么这 6 个方法都是谁呢？从 Class 的起始地址开始算，偏移 0x1b8 就是 vtable 的起始地址，进行计算得到：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0x000000001bc04028</span><br><span class="line">			 1b8 +</span><br><span class="line">---------------------</span><br><span class="line">0x000000001bc041e0</span><br></pre></td></tr></table></figure>
<p>通过 Windows -&gt; Console 进入命令行模式，执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hsdb&gt; mem 0x000000001bc041e0 6</span><br><span class="line">0x000000001bc041e0: 0x000000001b801b10 </span><br><span class="line">0x000000001bc041e8: 0x000000001b8015e8 </span><br><span class="line">0x000000001bc041f0: 0x000000001bc035e8 </span><br><span class="line">0x000000001bc041f8: 0x000000001b801540 </span><br><span class="line">0x000000001bc04200: 0x000000001b801678 </span><br><span class="line">0x000000001bc04208: 0x000000001bc03fa8 </span><br></pre></td></tr></table></figure>
<p>就得到了 6 个虚方法的入口地址，因为上方显示了vtable中有6个虚方法</p>
<h4 id="验证方法地址">7）验证方法地址</h4>
<p>通过 <code>Tools -&gt; Class Browser</code> 查看每个类的方法定义，比较可知</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Dog    --&gt; public void eat() @0x000000001bc03fa8;</span><br><span class="line">Animal --&gt; public java.lang.String toString() @0x000000001bc035e8;</span><br><span class="line">Object --&gt; protected void finalize() @0x000000001b801b10;</span><br><span class="line">Object --&gt; public boolean equals(java.lang.Object) @0x000000001b8015e8;</span><br><span class="line">Object --&gt; public native int hashCode() @0x000000001b801540;</span><br><span class="line">Object --&gt; protected native java.lang.Object clone() @0x000000001b801678;</span><br></pre></td></tr></table></figure>
<p>对号入座，发现：</p>
<p>eat() 方法是 Dog 类自己的，而Animal中的eat方法为：<code>public abstract void eat() @0x000000001bc03530;</code></p>
<p><img src="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1/HSDB工具6.PNG" alt="HSDB工具6"></p>
<h4 id="小结">8）小结</h4>
<p>当执行 invokevirtual 指令时，<br>
1. 先通过栈帧中的对象引用找到对象<br>
2. 分析对象头，找到对象的实际 Class<br>
3. Class 结构中有 vtable，它在类加载的链接阶段就已经根据方法的重写规则生成好了<br>
4. 查表得到方法的具体地址<br>
5. 执行方法的字节码</p>
<h3 id="异常处理">2.11 异常处理</h3>
<h4 id="try-catch">try-catch</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_11_1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            i = <span class="number">10</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            i = <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">1</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: iconst_0</span><br><span class="line">     <span class="number">1</span>: istore_1          <span class="comment">// 将0复制给i</span></span><br><span class="line">     <span class="number">2</span>: bipush        <span class="number">10</span>  <span class="comment">// 把10放入栈中</span></span><br><span class="line">     <span class="number">4</span>: istore_1          <span class="comment">// 把10复制给i   即try块中的代码</span></span><br><span class="line">     <span class="number">5</span>: goto          <span class="number">12</span>  <span class="comment">// 运行到12行</span></span><br><span class="line">     <span class="number">8</span>: astore_2          <span class="comment">// 从局部变量表中可知，astore_2-&gt;slot2-&gt;e,把异常对象存入slot2中</span></span><br><span class="line">     <span class="number">9</span>: bipush        <span class="number">20</span></span><br><span class="line">    <span class="number">11</span>: istore_1</span><br><span class="line">    <span class="number">12</span>: <span class="keyword">return</span></span><br><span class="line">Exception table:  <span class="comment">// 异常表</span></span><br><span class="line">  from    to  target   type  <span class="comment">// 监视第[2,5)行的代码  发生异常后和Exception进行匹配进入第8行</span></span><br><span class="line">    <span class="number">2</span>      <span class="number">5</span>       <span class="number">8</span>   Class java/lang/Exception  </span><br><span class="line">LocalVariableTable:  <span class="comment">// 局部变量表</span></span><br><span class="line">  Start  Length  Slot  Name   Signature</span><br><span class="line">      <span class="number">9</span>       <span class="number">3</span>     <span class="number">2</span>     e   Ljava/lang/Exception;</span><br><span class="line">      <span class="number">0</span>      <span class="number">13</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">      <span class="number">2</span>      <span class="number">11</span>     <span class="number">1</span>     i   I</span><br></pre></td></tr></table></figure>
<ul>
<li>可以看到多出来一个 <strong>Exception table</strong> 的结构，[from, to) 是前闭后开的检测范围，一旦这个范围内的字节码执行出现异常，则通过 type 匹配异常类型，如果一致，进入 target 所指示行号</li>
<li>8 行的字节码指令 astore_2 是将异常对象引用存入局部变量表的 slot 2 位置</li>
</ul>
<h4 id="多个-single-catch-块的情况">多个 single-catch 块的情况</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_11_2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            i = <span class="number">10</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            i = <span class="number">30</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            i = <span class="number">40</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            i = <span class="number">50</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">1</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: iconst_0</span><br><span class="line">     <span class="number">1</span>: istore_1</span><br><span class="line">     <span class="number">2</span>: bipush        <span class="number">10</span></span><br><span class="line">     <span class="number">4</span>: istore_1</span><br><span class="line">     <span class="number">5</span>: goto          <span class="number">26</span></span><br><span class="line">     <span class="number">8</span>: astore_2            <span class="comment">// 异常放到slot2中的e变量</span></span><br><span class="line">     <span class="number">9</span>: bipush        <span class="number">30</span></span><br><span class="line">    <span class="number">11</span>: istore_1</span><br><span class="line">    <span class="number">12</span>: goto          <span class="number">26</span></span><br><span class="line">    <span class="number">15</span>: astore_2            <span class="comment">// 异常放到slot2中的e变量</span></span><br><span class="line">    <span class="number">16</span>: bipush        <span class="number">40</span></span><br><span class="line">    <span class="number">18</span>: istore_1</span><br><span class="line">    <span class="number">19</span>: goto          <span class="number">26</span></span><br><span class="line">    <span class="number">22</span>: astore_2            <span class="comment">// 异常放到slot2中的e变量</span></span><br><span class="line">    <span class="number">23</span>: bipush        <span class="number">50</span></span><br><span class="line">    <span class="number">25</span>: istore_1</span><br><span class="line">    <span class="number">26</span>: <span class="keyword">return</span></span><br><span class="line">  Exception table:</span><br><span class="line">     from    to  target type  <span class="comment">// target 变多了</span></span><br><span class="line">         <span class="number">2</span>     <span class="number">5</span>     <span class="number">8</span>   Class java/lang/ArithmeticException</span><br><span class="line">         <span class="number">2</span>     <span class="number">5</span>    <span class="number">15</span>   Class java/lang/NullPointerException</span><br><span class="line">         <span class="number">2</span>     <span class="number">5</span>    <span class="number">22</span>   Class java/lang/Exception</span><br><span class="line">  LocalVariableTable:</span><br><span class="line">    Start  Length  Slot  Name   Signature</span><br><span class="line">        <span class="number">9</span>       <span class="number">3</span>     <span class="number">2</span>     e   Ljava/lang/ArithmeticException;</span><br><span class="line">       <span class="number">16</span>       <span class="number">3</span>     <span class="number">2</span>     e   Ljava/lang/NullPointerException;</span><br><span class="line">       <span class="number">23</span>       <span class="number">3</span>     <span class="number">2</span>     e   Ljava/lang/Exception;</span><br><span class="line">        <span class="number">0</span>      <span class="number">27</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">        <span class="number">2</span>      <span class="number">25</span>     <span class="number">1</span>     i   I</span><br></pre></td></tr></table></figure>
<p>因为异常出现时，只能进入 Exception table 中一个分支，所以局部变量表 slot 2 位置<strong>被共用</strong></p>
<h4 id="multi-catch-的情况">multi-catch 的情况</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_11_3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Method test = Demo3_11_3.class.getMethod(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">            test.invoke(<span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">3</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: ldc           #<span class="number">2</span>  <span class="comment">// class cn/xyc/Demo3_11_3</span></span><br><span class="line">     <span class="number">2</span>: ldc           #<span class="number">3</span>  <span class="comment">// String test</span></span><br><span class="line">     <span class="number">4</span>: iconst_0</span><br><span class="line">     <span class="number">5</span>: anewarray     #<span class="number">4</span>  <span class="comment">// class java/lang/Class</span></span><br><span class="line">     <span class="number">8</span>: invokevirtual #<span class="number">5</span>  <span class="comment">// Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;</span></span><br><span class="line">    <span class="number">11</span>: astore_1</span><br><span class="line">    <span class="number">12</span>: aload_1</span><br><span class="line">    <span class="number">13</span>: aconst_null</span><br><span class="line">    <span class="number">14</span>: iconst_0</span><br><span class="line">    <span class="number">15</span>: anewarray     #<span class="number">6</span>  <span class="comment">// class java/lang/Object</span></span><br><span class="line">    <span class="number">18</span>: invokevirtual #<span class="number">7</span>  <span class="comment">// Method java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;</span></span><br><span class="line">    <span class="number">21</span>: pop</span><br><span class="line">    <span class="number">22</span>: goto          <span class="number">30</span></span><br><span class="line">    <span class="number">25</span>: astore_1          <span class="comment">// 异常对象的引用存储于slot1</span></span><br><span class="line">    <span class="number">26</span>: aload_1           <span class="comment">// 把异常对象的引用加载到操作栈</span></span><br><span class="line">    <span class="number">27</span>: invokevirtual #<span class="number">1</span>  <span class="comment">// Method java/lang/ReflectiveOperationException.printStackTrace:()V</span></span><br><span class="line">    <span class="number">30</span>: <span class="keyword">return</span></span><br><span class="line">  Exception table:</span><br><span class="line">     from    to  target  type  <span class="comment">// 监视[0， 22)行代码，出现异常进行匹配，异常的入口相同</span></span><br><span class="line">         <span class="number">0</span>    <span class="number">22</span>    <span class="number">25</span>   Class java/lang/NoSuchMethodException</span><br><span class="line">         <span class="number">0</span>    <span class="number">22</span>    <span class="number">25</span>   Class java/lang/IllegalAccessException</span><br><span class="line">         <span class="number">0</span>    <span class="number">22</span>    <span class="number">25</span>   Class java/lang/reflect/InvocationTargetException</span><br><span class="line">  LocalVariableTable:</span><br><span class="line">    Start  Length  Slot  Name   Signature</span><br><span class="line">       <span class="number">12</span>      <span class="number">10</span>     <span class="number">1</span>  test   Ljava/lang/reflect/Method;</span><br><span class="line">       <span class="number">26</span>       <span class="number">4</span>     <span class="number">1</span>     e   Ljava/lang/ReflectiveOperationException;</span><br><span class="line">        <span class="number">0</span>      <span class="number">31</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br></pre></td></tr></table></figure>
<h4 id="finally">finally</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_11_4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            i = <span class="number">10</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            i = <span class="number">20</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            i = <span class="number">30</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Code:</span><br><span class="line">  stack=<span class="number">1</span>, locals=<span class="number">4</span>, args_size=<span class="number">1</span></span><br><span class="line">     <span class="number">0</span>: iconst_0</span><br><span class="line">     <span class="number">1</span>: istore_1          <span class="comment">// 0 -&gt; i</span></span><br><span class="line">     <span class="number">2</span>: bipush        <span class="number">10</span>  <span class="comment">// try --------------------------------------</span></span><br><span class="line">     <span class="number">4</span>: istore_1          <span class="comment">// 10 -&gt; i                                  |</span></span><br><span class="line">     <span class="number">5</span>: bipush        <span class="number">30</span>  <span class="comment">// finally                                  |</span></span><br><span class="line">     <span class="number">7</span>: istore_1          <span class="comment">// 30 -&gt; i                                  |</span></span><br><span class="line">     <span class="number">8</span>: goto          <span class="number">27</span>  <span class="comment">// return -----------------------------------</span></span><br><span class="line">    <span class="number">11</span>: astore_2          <span class="comment">// catch Exceptin -&gt; e ----------------------</span></span><br><span class="line">    <span class="number">12</span>: bipush        <span class="number">20</span>  <span class="comment">//                                          |</span></span><br><span class="line">    <span class="number">14</span>: istore_1          <span class="comment">// 20 -&gt; i                                  |</span></span><br><span class="line">    <span class="number">15</span>: bipush        <span class="number">30</span>  <span class="comment">// finally                                  |</span></span><br><span class="line">    <span class="number">17</span>: istore_1		  <span class="comment">// 30 -&gt; i                                  |</span></span><br><span class="line">    <span class="number">18</span>: goto          <span class="number">27</span>  <span class="comment">// return -----------------------------------</span></span><br><span class="line">    <span class="number">21</span>: astore_3          <span class="comment">// catch any -&gt; slot 3 ----------------------</span></span><br><span class="line">    <span class="number">22</span>: bipush        <span class="number">30</span>  <span class="comment">// finally                                  |</span></span><br><span class="line">    <span class="number">24</span>: istore_1          <span class="comment">// 30 -&gt; i                                  |</span></span><br><span class="line">    <span class="number">25</span>: aload_3           <span class="comment">// &lt;- slot 3  有这个slot3                    |</span></span><br><span class="line">    <span class="number">26</span>: athrow            <span class="comment">// throw 抛出---------------------------------</span></span><br><span class="line">    <span class="number">27</span>: <span class="keyword">return</span></span><br><span class="line">  Exception table:</span><br><span class="line">     from    to  target type</span><br><span class="line">         <span class="number">2</span>     <span class="number">5</span>    <span class="number">11</span>   Class java/lang/Exception</span><br><span class="line">         <span class="number">2</span>     <span class="number">5</span>    <span class="number">21</span>   any  <span class="comment">// 剩余的异常类型，比如 Error，监测[2, 5)中的其他异常/error</span></span><br><span class="line">        <span class="number">11</span>    <span class="number">15</span>    <span class="number">21</span>   any  <span class="comment">// 剩余的异常类型，比如 Error，监测[11, 15)-&gt;catch块中的其他异常/error</span></span><br><span class="line">  LocalVariableTable:</span><br><span class="line">    Start  Length  Slot  Name   Signature</span><br><span class="line">       <span class="number">12</span>       <span class="number">3</span>     <span class="number">2</span>     e   Ljava/lang/Exception;</span><br><span class="line">        <span class="number">0</span>      <span class="number">28</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">        <span class="number">2</span>      <span class="number">26</span>     <span class="number">1</span>     i   I</span><br></pre></td></tr></table></figure>
<p>可以看到 finally 中的代码被复制了 3 份，分别放入 try 流程，catch 流程以及 catch 剩余的异常类型流程</p>
<h3 id="练习---finally-面试题">2.12 练习 - finally 面试题</h3>
<h4 id="finally-出现了-return">finally 出现了 return</h4>
<p>先问问自己，下面的题目输出什么？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_12_1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test();</span><br><span class="line">        System.out.println(result);  <span class="comment">// 20</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()I</span><br><span class="line">  flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">1</span>, locals=<span class="number">2</span>, args_size=<span class="number">0</span></span><br><span class="line">       <span class="number">0</span>: bipush        <span class="number">10</span>  <span class="comment">// &lt;- 10 放入栈顶</span></span><br><span class="line">       <span class="number">2</span>: istore_0          <span class="comment">// 10 -&gt; slot 0(从栈顶移除了)</span></span><br><span class="line">       <span class="number">3</span>: bipush        <span class="number">20</span>  <span class="comment">// &lt; - 20 放入栈顶</span></span><br><span class="line">       <span class="number">5</span>: ireturn           <span class="comment">// 返回栈顶 int(20)</span></span><br><span class="line">       <span class="number">6</span>: astore_1          <span class="comment">// catch any -&gt; slot 1</span></span><br><span class="line">       <span class="number">7</span>: bipush        <span class="number">20</span>  <span class="comment">// &lt;- 20 放入栈顶</span></span><br><span class="line">       <span class="number">9</span>: ireturn           <span class="comment">// 返回栈顶 int(20)</span></span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">           <span class="number">0</span>     <span class="number">3</span>     <span class="number">6</span>   any</span><br></pre></td></tr></table></figure>
<ul>
<li>由于 finally 中的 ireturn 被插入了所有可能的流程，因此返回结果肯定以 finally 的为准</li>
<li>至于字节码中第 2 行，似乎没啥用，且留个伏笔，看下个例子</li>
<li>跟上例中的 finally 相比，<strong>发现没有 athrow 了</strong>，这告诉我们：如果在 finally 中出现了 return，会吞掉异常！可以试一下下面的代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_12_1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test();</span><br><span class="line">        System.out.println(result);  <span class="comment">// 20</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;  <span class="comment">// 加不加结果都一样</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>很危险的操作，异常被吞掉了，即使发生了异常也不知道了</p>
<h4 id="finally-对返回值影响">finally 对返回值影响</h4>
<p>同样问问自己，下面的题目输出什么？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_12_2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test();</span><br><span class="line">        System.out.println(result);  <span class="comment">// 10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            i = <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()I</span><br><span class="line">  flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">1</span>, locals=<span class="number">3</span>, args_size=<span class="number">0</span></span><br><span class="line">       <span class="number">0</span>: bipush        <span class="number">10</span>  <span class="comment">// &lt;- 10 放入栈顶</span></span><br><span class="line">       <span class="number">2</span>: istore_0			<span class="comment">// 10 -&gt; i</span></span><br><span class="line">       <span class="number">3</span>: iload_0			<span class="comment">// &lt;- i(10)</span></span><br><span class="line">       <span class="number">4</span>: istore_1			<span class="comment">// 10 -&gt; slot1，暂存至slot1，目的是为了固定返回值 ☆</span></span><br><span class="line">       <span class="number">5</span>: bipush        <span class="number">20</span>  <span class="comment">// &lt;- 20 放入栈顶</span></span><br><span class="line">       <span class="number">7</span>: istore_0          <span class="comment">// 20 -&gt; i</span></span><br><span class="line">       <span class="number">8</span>: iload_1		    <span class="comment">// &lt;- slot 1(10) 载入 slot 1 暂存的值 ☆</span></span><br><span class="line">       <span class="number">9</span>: ireturn           <span class="comment">// 返回栈顶的 int(10)</span></span><br><span class="line">      <span class="number">10</span>: astore_2          <span class="comment">// 期间出现异常，存储异常到slot2中</span></span><br><span class="line">      <span class="number">11</span>: bipush        <span class="number">20</span>  <span class="comment">// &lt;- 20 放入栈顶</span></span><br><span class="line">      <span class="number">13</span>: istore_0          <span class="comment">// 20 -&gt; i</span></span><br><span class="line">      <span class="number">14</span>: aload_2           <span class="comment">// 异常加载进栈</span></span><br><span class="line">      <span class="number">15</span>: athrow            <span class="comment">// athrow出异常</span></span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">           <span class="number">3</span>     <span class="number">5</span>    <span class="number">10</span>   any</span><br></pre></td></tr></table></figure>
<h3 id="synchronized">2.13 synchronized</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3_13</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">  descriptor: ([Ljava/lang/String;)V</span><br><span class="line">  flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">4</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">2</span>  <span class="comment">// class java/lang/Object</span></span><br><span class="line">       <span class="number">3</span>: dup               <span class="comment">// 将对象的引用复制两次放入栈中，在invokespecial构造方法中被消耗一次</span></span><br><span class="line">       <span class="number">4</span>: invokespecial #<span class="number">1</span>  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">7</span>: astore_1          <span class="comment">// 把lock引用-&gt;slot_1(lock),给lock赋值时又消耗了一次</span></span><br><span class="line">       <span class="number">8</span>: aload_1           <span class="comment">// 把lock的引用加载到操作栈，&lt;- lock （synchronized开始）</span></span><br><span class="line">       <span class="number">9</span>: dup</span><br><span class="line">      <span class="number">10</span>: astore_2          <span class="comment">// lock引用 -&gt; slot 2</span></span><br><span class="line">      <span class="number">11</span>: monitorenter		<span class="comment">// monitorenter(lock引用)</span></span><br><span class="line">      <span class="number">12</span>: getstatic     #<span class="number">3</span>  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">15</span>: ldc           #<span class="number">4</span>  <span class="comment">// String ok</span></span><br><span class="line">      <span class="number">17</span>: invokevirtual #<span class="number">5</span>  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">20</span>: aload_2           <span class="comment">// &lt;- slot 2(lock引用) </span></span><br><span class="line">      <span class="number">21</span>: monitorexit		<span class="comment">// monitorexit(lock引用)</span></span><br><span class="line">      <span class="number">22</span>: goto          <span class="number">30</span></span><br><span class="line">      <span class="number">25</span>: astore_3			<span class="comment">// any -&gt; slot 3</span></span><br><span class="line">      <span class="number">26</span>: aload_2			<span class="comment">// &lt;- slot 2(lock引用)</span></span><br><span class="line">      <span class="number">27</span>: monitorexit		<span class="comment">// monitorexit(lock引用)		</span></span><br><span class="line">      <span class="number">28</span>: aload_3			<span class="comment">// &lt;- slot 3(lock引用)</span></span><br><span class="line">      <span class="number">29</span>: athrow			<span class="comment">// 抛出</span></span><br><span class="line">      <span class="number">30</span>: <span class="keyword">return</span></span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">          <span class="number">12</span>    <span class="number">22</span>    <span class="number">25</span>   any    <span class="comment">// synchronized代码块内部出现问题，进入25</span></span><br><span class="line">          <span class="number">25</span>    <span class="number">28</span>    <span class="number">25</span>   any    <span class="comment">// [25, 28)行代码出现问题，进入25</span></span><br><span class="line">    LineNumberTable: ...</span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>      <span class="number">31</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">          <span class="number">8</span>      <span class="number">23</span>     <span class="number">1</span>  lock   Ljava/lang/Object;</span><br><span class="line">    StackMapTable: ...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意</p>
<p>方法级别的 synchronized 不会在字节码指令中有所体现</p>
</blockquote>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- 本文结束 </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> 感谢阅读 ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> 学习笔记</a>
              <a href="/tags/JVM/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> JVM</a>
              <a href="/tags/Java/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/06/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" rel="prev" title="JVM：垃圾回收">
      <i class="fa fa-chevron-left"></i> JVM：垃圾回收
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/13/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JVM%EF%BC%9A%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-2/" rel="next" title="JVM：类加载与字节码技术-2">
      JVM：类加载与字节码技术-2 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%97%E8%8A%82%E7%A0%81%E6%8A%80%E6%9C%AF-1"><span class="nav-text">JVM：类加载与字节码技术-1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AE%B9"><span class="nav-text">内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-text">1. 类文件结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AD%94%E6%95%B0magic"><span class="nav-text">1.1 魔数magic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%88%E6%9C%AC"><span class="nav-text">1.2 版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F%E6%B1%A0"><span class="nav-text">1.3 常量池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%A0%87%E8%AF%86%E4%B8%8E%E7%BB%A7%E6%89%BF%E4%BF%A1%E6%81%AF"><span class="nav-text">1.4 访问标识与继承信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#field-%E4%BF%A1%E6%81%AF"><span class="nav-text">1.5 Field 信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#method-%E4%BF%A1%E6%81%AF"><span class="nav-text">1.6 Method 信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%84%E5%8A%A0%E5%B1%9E%E6%80%A7"><span class="nav-text">1.7 附加属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4"><span class="nav-text">2. 字节码指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-text">2.1 入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#javap-%E5%B7%A5%E5%85%B7"><span class="nav-text">2.2 javap 工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E8%A7%A3%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-text">2.3 图解方法执行流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%9F%E5%A7%8B-java-%E4%BB%A3%E7%A0%81"><span class="nav-text">1）原始 java 代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%90%8E%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6"><span class="nav-text">2）编译后的字节码文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F%E6%B1%A0%E8%BD%BD%E5%85%A5%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0"><span class="nav-text">3）常量池载入运行时常量池</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E5%AD%97%E8%8A%82%E7%A0%81%E8%BD%BD%E5%85%A5%E6%96%B9%E6%B3%95%E5%8C%BA"><span class="nav-text">4）方法字节码载入方法区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#main-%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%A7%8B%E8%BF%90%E8%A1%8C%E5%88%86%E9%85%8D%E6%A0%88%E5%B8%A7%E5%86%85%E5%AD%98"><span class="nav-text">5）main 线程开始运行，分配栈帧内存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-text">6）执行引擎开始执行字节码</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#bipush-10"><span class="nav-text">bipush 10</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#istore_1"><span class="nav-text">istore_1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ldc-3"><span class="nav-text">ldc #3</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#istore_2"><span class="nav-text">istore_2</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#iload_1"><span class="nav-text">iload_1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#iload_2"><span class="nav-text">iload_2</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#iadd"><span class="nav-text">iadd</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#istore_3"><span class="nav-text">istore_3</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getstatic-4"><span class="nav-text">getstatic #4</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#iload_3"><span class="nav-text">iload_3</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#invokevirtual-5"><span class="nav-text">invokevirtual #5</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#return"><span class="nav-text">return</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0---%E5%88%86%E6%9E%90-i"><span class="nav-text">2.4 练习 - 分析 i++</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E6%8C%87%E4%BB%A4"><span class="nav-text">2.5 条件判断指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4"><span class="nav-text">2.6 循环控制指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0---%E5%88%A4%E6%96%AD%E7%BB%93%E6%9E%9C"><span class="nav-text">2.7 练习 - 判断结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="nav-text">2.8 构造方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cinitv"><span class="nav-text">1）&lt;cinit&gt;()V</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#initv"><span class="nav-text">2）&lt;init&gt;()V</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8"><span class="nav-text">2.9 方法调用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E6%80%81%E7%9A%84%E5%8E%9F%E7%90%86"><span class="nav-text">2.10 多态的原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="nav-text">1）运行代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C-hsdb-%E5%B7%A5%E5%85%B7"><span class="nav-text">2）运行 HSDB 工具</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E6%9F%90%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="nav-text">3）查找某个对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AF%B9%E8%B1%A1%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"><span class="nav-text">4）查看对象内存结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AF%B9%E8%B1%A1class%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80"><span class="nav-text">5）查看对象Class的内存地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B1%BB%E7%9A%84-vtable"><span class="nav-text">6）查看类的 vtable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E6%96%B9%E6%B3%95%E5%9C%B0%E5%9D%80"><span class="nav-text">7）验证方法地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-text">8）小结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-text">2.11 异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#try-catch"><span class="nav-text">try-catch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA-single-catch-%E5%9D%97%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-text">多个 single-catch 块的情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#multi-catch-%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-text">multi-catch 的情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#finally"><span class="nav-text">finally</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0---finally-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="nav-text">2.12 练习 - finally 面试题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#finally-%E5%87%BA%E7%8E%B0%E4%BA%86-return"><span class="nav-text">finally 出现了 return</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#finally-%E5%AF%B9%E8%BF%94%E5%9B%9E%E5%80%BC%E5%BD%B1%E5%93%8D"><span class="nav-text">finally 对返回值影响</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#synchronized"><span class="nav-text">2.13 synchronized</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">不急不躁。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">204</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">96</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arthas/" rel="tag">Arthas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CompletableFuture/" rel="tag">CompletableFuture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">74</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">Java基础</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">Java语法</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">K近邻</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TransmittableThreadLocal/" rel="tag">TransmittableThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E7%BB%8F%E5%8E%86/" rel="tag">个人经历</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">全文检索</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">决策树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">分类问题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">刷题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">刷题笔记</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/" rel="tag">加密文章</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">参考文件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">基础知识</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a><span class="tag-list-count">104</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">并发编程</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">开发框架</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%90%E9%95%BF%E5%8F%B2/" rel="tag">成长史</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">持久层框架</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">排序算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">支持向量机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">数学推导</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">数据清洗</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8/" rel="tag">日常</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">日志框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">树结构</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag">测试工具</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">消息队列</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">特征选择</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">环境配置</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">目标检测</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">线性回归</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">聚类</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">表示层</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">计算机网路</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">调用链监控</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">贝叶斯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">软件使用</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">逻辑回归</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">集合类</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">集成学习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">面经</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">面试笔记</a><span class="tag-list-count">61</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">3.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">54:57</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "请多多指教~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
