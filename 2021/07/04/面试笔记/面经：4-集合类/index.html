<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ä¸ªäººæ•´ç† ğŸ’ª ä¸ªäººä¸“ç”¨ ğŸ’ª æš‘æœŸå®ä¹  ğŸ’ª ç§‹æ‹› ğŸ’ª åç«¯å¼€å‘ ğŸ’ª å…«è‚¡æ–‡ ğŸ˜¶">
<meta property="og:type" content="article">
<meta property="og:title" content="é¢ç»ï¼š4-é›†åˆç±»">
<meta property="og:url" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/index.html">
<meta property="og:site_name" content="è´¤ä½™è¶…">
<meta property="og:description" content="ä¸ªäººæ•´ç† ğŸ’ª ä¸ªäººä¸“ç”¨ ğŸ’ª æš‘æœŸå®ä¹  ğŸ’ª ç§‹æ‹› ğŸ’ª åç«¯å¼€å‘ ğŸ’ª å…«è‚¡æ–‡ ğŸ˜¶">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/Collection.PNG">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/Map.PNG">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/HashMapæ‰©å®¹1.png">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/HashMapæ‰©å®¹2.png">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/HashMapæ‰©å®¹3.png">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯1.PNG">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯2.PNG">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯3.PNG">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯4.PNG">
<meta property="og:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/ConcurrentHashMapåˆ†æ®µé”.JPG">
<meta property="article:published_time" content="2021-07-04T02:24:00.000Z">
<meta property="article:modified_time" content="2021-07-04T02:24:00.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="å­¦ä¹ ç¬”è®°">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="é¢è¯•ç¬”è®°">
<meta property="article:tag" content="é¢ç»">
<meta property="article:tag" content="é›†åˆç±»">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/Collection.PNG">

<link rel="canonical" href="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>é¢ç»ï¼š4-é›†åˆç±» | è´¤ä½™è¶…</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">è´¤ä½™è¶…</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸€ä½åº•å±‚ç å†œ :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">96</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">203</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="ä¸æ€¥ä¸èºã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è´¤ä½™è¶…">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          é¢ç»ï¼š4-é›†åˆç±»
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-04 10:24:00" itemprop="dateCreated datePublished" datetime="2021-07-04T10:24:00+08:00">2021-07-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E7%BB%8F/" itemprop="url" rel="index"><span itemprop="name">é¢ç»</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E9%9B%86%E5%90%88/" itemprop="url" rel="index"><span itemprop="name">Javaé›†åˆ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>42k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>38 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>ä¸ªäººæ•´ç† <span class="emoji" data-emoji="muscle">ğŸ’ª</span> ä¸ªäººä¸“ç”¨ <span class="emoji" data-emoji="muscle">ğŸ’ª</span> æš‘æœŸå®ä¹  <span class="emoji" data-emoji="muscle">ğŸ’ª</span> ç§‹æ‹› <span class="emoji" data-emoji="muscle">ğŸ’ª</span> åç«¯å¼€å‘ <span class="emoji" data-emoji="muscle">ğŸ’ª</span> å…«è‚¡æ–‡ <span class="emoji" data-emoji="no_mouth">ğŸ˜¶</span></p>
<span id="more"></span>
<h1 id="é¢ç»4-é›†åˆç±»">é¢ç»ï¼š4-é›†åˆç±»</h1>
<h3 id="å¸¸ç”¨çš„å®¹å™¨">å¸¸ç”¨çš„å®¹å™¨ <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p>å¸¸è§å®¹å™¨ä¸»è¦åŒ…æ‹¬ Collection å’Œ Map ä¸¤ç§ï¼Œ<strong>Collection å­˜å‚¨ç€å¯¹è±¡çš„é›†åˆ</strong>ï¼Œè€Œ <strong>Map å­˜å‚¨ç€é”®å€¼å¯¹ï¼ˆä¸¤ä¸ªå¯¹è±¡ï¼‰çš„æ˜ å°„è¡¨</strong>ã€‚</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/Collection.PNG" alt="Collection" style="zoom: 67%;"></p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/Map.PNG" alt="Map" style="zoom:67%;"></p>
<p><strong>Collection</strong></p>
<ul>
<li><p><strong>Set</strong></p>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 82%">
</colgroup>
<thead>
<tr class="header">
<th>Set</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HashSet</td>
<td>åŸºäºå“ˆå¸Œè¡¨(HashMap)å®ç°ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒæœ‰åºæ€§æ“ä½œã€‚<br>å¹¶ä¸”å¤±å»äº†å…ƒç´ çš„æ’å…¥é¡ºåºä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ Iterator éå† HashSet å¾—åˆ°çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„</td>
</tr>
<tr class="even">
<td>LinkedHashSet</td>
<td>å…·æœ‰ HashSet çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œåº•å±‚æ˜¯<strong>é“¾è¡¨+å“ˆå¸Œè¡¨</strong>ã€‚<br>ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ ï¼Œå†ç»´æŠ¤ä¸€ä¸ª<strong>åŒå‘é“¾è¡¨</strong>ä¿å­˜å…ƒç´ çš„æ’å…¥ä¿¡æ¯</td>
</tr>
<tr class="odd">
<td>TreeSet</td>
<td><strong>åŸºäºçº¢é»‘æ ‘å®ç°</strong>ï¼Œæ”¯æŒæœ‰åºæ€§æ“ä½œï¼›<br>ä¾‹å¦‚ï¼šæ ¹æ®ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾å…ƒç´ çš„æ“ä½œã€‚<br>ä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸å¦‚ HashSetï¼ŒHashSet æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒTreeSet åˆ™ä¸º O(logN)</td>
</tr>
</tbody>
</table></li>
<li><p><strong>List</strong></p>
<table>
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th>List</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ArrayList</td>
<td>åŸºäº<strong>åŠ¨æ€æ•°ç»„</strong>å®ç°ï¼Œæ”¯æŒéšæœºè®¿é—®ï¼Œ1.5å€æ‰©å®¹</td>
</tr>
<tr class="even">
<td>Vector</td>
<td>å’Œ ArrayList ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„ï¼Œ2å€æ‰©å®¹</td>
</tr>
<tr class="odd">
<td>LinkedList</td>
<td>åŸºäº<strong>åŒå‘é“¾è¡¨å®ç°</strong>ï¼Œåªèƒ½é¡ºåºè®¿é—®ï¼Œä½†æ˜¯å¯ä»¥å¿«é€Ÿåœ°åœ¨é“¾è¡¨ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚<br>ä¸ä»…å¦‚æ­¤ï¼ŒLinkedList è¿˜å¯ä»¥ç”¨ä½œæ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—</td>
</tr>
</tbody>
</table></li>
<li><p><strong>Queue</strong></p>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 82%">
</colgroup>
<thead>
<tr class="header">
<th>Queue</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>LinkedList</td>
<td>åŸºäºé“¾è¡¨å®ç°çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°åŒå‘é˜Ÿåˆ—</td>
</tr>
<tr class="even">
<td>PriorityQueue</td>
<td><strong>åŸºäºå †ç»“æ„</strong>å®ç°ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°ä¼˜å…ˆé˜Ÿåˆ—</td>
</tr>
<tr class="odd">
<td>ArrayDeque</td>
<td>å®ç°äº† Dequeï¼ˆåŒå‘é˜Ÿåˆ—ï¼‰ï¼ŒDeque ç»§æ‰¿è‡ª Queue<br>ä½¿ç”¨äº†å¯å˜æ•°ç»„ï¼Œå¯ä»¥åšä¸ºé˜Ÿåˆ—æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ ˆä½¿ç”¨<br>ArrayDequeä¸æ”¯æŒ<code>null</code>å€¼</td>
</tr>
</tbody>
</table></li>
</ul>
<p><strong>Map</strong></p>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 82%">
</colgroup>
<thead>
<tr class="header">
<th>Map</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HashMap</td>
<td>åŸºäºå“ˆå¸Œè¡¨å®ç°</td>
</tr>
<tr class="even">
<td>LinkedHashMap</td>
<td>ä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤å…ƒç´ çš„é¡ºåºï¼Œ<strong>é¡ºåºä¸ºæ’å…¥é¡ºåºæˆ–è€…æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼ŒLeast Recently Usedï¼‰é¡ºåº</strong></td>
</tr>
<tr class="odd">
<td>TreeMap</td>
<td>åŸºäº<strong>çº¢é»‘æ ‘</strong>å®ç°</td>
</tr>
<tr class="even">
<td>HashTable</td>
<td>å’Œ HashMap ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„ï¼Œè¿™æ„å‘³ç€åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å†™å…¥ HashTable å¹¶ä¸”ä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´<br>å®ƒæ˜¯<strong>é—ç•™ç±»</strong>ï¼Œä¸åº”è¯¥å»ä½¿ç”¨å®ƒ<br>ç°åœ¨å¯ä»¥ä½¿ç”¨ ConcurrentHashMap æ¥æ”¯æŒçº¿ç¨‹å®‰å…¨ï¼Œå…¶æ•ˆç‡ä¼šæ›´é«˜ï¼Œå› ä¸ºå¼•å…¥äº†åˆ†æ®µé”ï¼ˆJDK 7ï¼‰</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="list-set-map-çš„åŒºåˆ«">List &amp; Set &amp; Map çš„åŒºåˆ«</h3>
<ul>
<li><strong>List(å¯¹ä»˜é¡ºåºçš„å¥½å¸®æ‰‹)</strong>ï¼šList æ¥å£å­˜å‚¨ä¸€ç»„ä¸å”¯ä¸€ï¼ˆå¯ä»¥æœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼‰ï¼Œæœ‰åºçš„å¯¹è±¡</li>
<li><strong>Set(æ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨)</strong>ï¼šä¸å…è®¸é‡å¤çš„é›†åˆã€‚ä¸ä¼šæœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚</li>
<li><strong>Map(ç”¨Keyæ¥æœç´¢çš„ä¸“å®¶)</strong>ï¼šä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨ã€‚Mapä¼šç»´æŠ¤ä¸Keyæœ‰å…³è”çš„å€¼ã€‚ä¸¤ä¸ªKeyå¯ä»¥å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼Œä½†Keyä¸èƒ½é‡å¤ï¼Œå…¸å‹çš„Keyæ˜¯Stringç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ã€‚</li>
</ul>
<table style="width:100%;">
<colgroup>
<col style="width: 5%">
<col style="width: 31%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>æ¯”è¾ƒ</th>
<th>LIst</th>
<th>Set</th>
<th>Map</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ç»§æ‰¿æ¥å£</td>
<td>Collection</td>
<td>Collection</td>
<td>æ˜¯ä¸ªæ¥å£</td>
</tr>
<tr class="even">
<td>å¸¸è§å®ç°ç±»</td>
<td>AbstractList<br>å¸¸ç”¨çš„å­ç±»æœ‰ï¼š<br>ArrayList<br>LinkedList<br>Vector</td>
<td>AbstractSet<br>å¸¸ç”¨çš„å­ç±»æœ‰ï¼š<br>HashSet<br>LinkedHashSet<br>TreeSet</td>
<td>å®ç°çš„ç±»ï¼š<br>HashMap<br>HashTable<br>LinkedHashMap</td>
</tr>
<tr class="odd">
<td>å¸¸è§æ–¹æ³•</td>
<td>add()<br>remove()<br>clear()<br>get()<br>contains()<br>size()<br>...</td>
<td>add()<br>remove()<br>clear()<br>get()<br>contains()<br>size()<br>...</td>
<td>put()<br>get()<br>remove()<br>clear()<br>containsKey()<br>containsValue()<br>keySet()<br>values()<br>size()<br>...</td>
</tr>
<tr class="even">
<td>å…ƒç´ </td>
<td>å¯é‡å¤</td>
<td>ä¸å¯é‡å¤</td>
<td>ä¸å¯é‡å¤</td>
</tr>
<tr class="odd">
<td>é¡ºåº</td>
<td>æœ‰åº</td>
<td>ä¸€èˆ¬æ— åº(ç”±hashcodeå†³å®š)</td>
<td>ä¸€èˆ¬æ— åº</td>
</tr>
<tr class="even">
<td>çº¿ç¨‹å®‰å…¨</td>
<td>Vectorçº¿ç¨‹å®‰å…¨</td>
<td></td>
<td>HashTableçº¿ç¨‹å®‰å…¨</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://blog.csdn.net/qq_41701956/article/details/103223461</p>
</blockquote>
<h3 id="å¦‚ä½•é€‰ç”¨é›†åˆ">å¦‚ä½•é€‰ç”¨é›†åˆ</h3>
<p>ä¸»è¦æ ¹æ®é›†åˆçš„ç‰¹ç‚¹æ¥é€‰ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦<strong>æ ¹æ®é”®å€¼è·å–åˆ°å…ƒç´ å€¼</strong>æ—¶å°±é€‰ç”¨ Map æ¥å£ä¸‹çš„é›†åˆï¼›</p>
<ul>
<li>éœ€è¦æ’åºæ—¶é€‰æ‹© TreeMapï¼›</li>
<li>ä¸éœ€è¦æ’åºæ—¶å°±é€‰æ‹© HashMapï¼›</li>
<li>éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨å°±é€‰ç”¨ ConcurrentHashMapã€‚</li>
</ul>
<p>å½“æˆ‘ä»¬<strong>åªéœ€è¦å­˜æ”¾å…ƒç´ å€¼</strong>æ—¶ï¼Œå°±é€‰æ‹©å®ç° Collection æ¥å£çš„é›†åˆï¼Œéœ€è¦ä¿è¯å…ƒç´ å”¯ä¸€æ—¶é€‰æ‹©å®ç° Set æ¥å£çš„é›†åˆæ¯”å¦‚ TreeSet æˆ– HashSetï¼Œä¸éœ€è¦å°±é€‰æ‹©å®ç° List æ¥å£çš„æ¯”å¦‚ ArrayList æˆ– LinkedListï¼Œç„¶åå†æ ¹æ®å®ç°è¿™äº›æ¥å£çš„é›†åˆçš„ç‰¹ç‚¹æ¥é€‰ç”¨ã€‚</p>
<h3 id="arraylist-å’Œ-linkedlist-çš„åŒºåˆ«">ArrayList å’Œ LinkedList çš„åŒºåˆ« <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>ArrayListï¼š</strong>åº•å±‚æ˜¯åŸºäº<strong>åŠ¨æ€æ•°ç»„</strong>å®ç°çš„ï¼ŒæŸ¥æ‰¾å¿«ï¼Œå¢åˆ è¾ƒæ…¢ï¼›</p>
<p><strong>LinkedListï¼š</strong>åº•å±‚æ˜¯åŸºäºé“¾è¡¨å®ç°çš„ï¼ŒæŸ¥æ‰¾æ…¢ï¼Œå¢åˆ å¿«ï¼›</p>
<ul>
<li>ç¡®åˆ‡çš„è¯´æ˜¯åŒå‘é“¾è¡¨ï¼ˆJDK1.6 ä¹‹å‰æ˜¯åŒå‘å¾ªç¯é“¾è¡¨ã€<strong>JDK1.7 ä¹‹åå–æ¶ˆäº†å¾ªç¯</strong>ï¼‰ï¼ŒæŸ¥æ‰¾æ…¢ã€å¢åˆ å¿«ã€‚</li>
<li>LinkedList é“¾è¡¨ç”±ä¸€ç³»åˆ—èŠ‚ç‚¹è¿æ¥è€Œæˆï¼Œä¸€ä¸ªèŠ‚ç‚¹åŒ…å« 3 ä¸ªéƒ¨åˆ†ï¼šå…ƒç´ å†…å®¹ã€å‰é©±èŠ‚ç‚¹å’Œåé©±èŠ‚ç‚¹ã€‚</li>
<li>é“¾è¡¨å†…éƒ¨æœ‰ä¸€ä¸ª <strong>first èŠ‚ç‚¹</strong>ï¼Œä¸ºé“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›å†…éƒ¨æœ‰ä¸€ä¸ª <strong>last èŠ‚ç‚¹</strong>ï¼Œä¸ºé“¾è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li>
</ul>
<blockquote>
<p><strong>è¡¥å……ï¼š</strong></p>
<p><strong>ArrayList çš„å¢åˆ æœªå¿…å°±æ˜¯æ¯” LinkedList è¦æ…¢ï¼š</strong></p>
<ol type="1">
<li><p>å¦‚æœå¢åˆ éƒ½æ˜¯åœ¨æœ«å°¾æ¥æ“ä½œï¼ˆæ¯æ¬¡è°ƒç”¨çš„éƒ½æ˜¯ <code>remove()</code> å’Œ <code>add()</code>ï¼‰ï¼Œæ­¤æ—¶ ArrayList å°±ä¸éœ€è¦ç§»åŠ¨å’Œå¤åˆ¶æ•°ç»„æ¥è¿›è¡Œæ“ä½œäº†ã€‚å¦‚æœæ•°æ®é‡æœ‰ç™¾ä¸‡çº§çš„æ—¶ï¼Œé€Ÿåº¦æ˜¯ä¼šæ¯” LinkedList è¦å¿«çš„ã€‚</p></li>
<li><p>å¦‚æœåˆ é™¤æ“ä½œçš„ä½ç½®æ˜¯åœ¨ä¸­é—´ã€‚ç”±äº LinkedList çš„æ¶ˆè€—ä¸»è¦æ˜¯åœ¨éå†ä¸Šï¼ˆ LinkedList ä¼šæ¯”è¾ƒæŸ¥è¯¢çš„ index ä¸é“¾è¡¨é•¿åº¦ï¼Œé€‰æ‹©ä»å¤´è¿˜æ˜¯ä»å°¾å¼€å§‹æŸ¥æ‰¾ï¼‰ï¼ŒArrayList çš„æ¶ˆè€—ä¸»è¦æ˜¯åœ¨ç§»åŠ¨å’Œå¤åˆ¶ä¸Šï¼ˆåº•å±‚è°ƒç”¨çš„æ˜¯ <code>arrayCopy()</code> æ–¹æ³•ï¼Œæ˜¯ native æ–¹æ³•ï¼‰ã€‚LinkedList çš„éå†é€Ÿåº¦æ˜¯è¦æ…¢äº ArrayList çš„å¤åˆ¶ç§»åŠ¨é€Ÿåº¦çš„ï¼Œå¦‚æœæ•°æ®é‡æœ‰ç™¾ä¸‡çº§çš„æ—¶ï¼Œè¿˜æ˜¯ ArrayList è¦å¿«ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ArrayList</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line"></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                     size - index);</span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LinkedListæ¯”è¾ƒéœ€è¦æ’å…¥çš„ index ä¸é“¾è¡¨é•¿åº¦</span></span><br><span class="line"><span class="comment">// å°äºé“¾è¡¨é•¿åº¦ä¸€èˆ¬åˆ™ä»è€Œå¼€å§‹éå†ï¼Œåä¹‹ä»å°¾å¼€å§‹éå†</span></span><br><span class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;   <span class="comment">// å°äºé“¾è¡¨é•¿åº¦çš„ä¸€åŠï¼Œåˆ™ä»å¤´å¼€å§‹éå†</span></span><br><span class="line">        Node&lt;E&gt; x = first;  <span class="comment">// firstèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;					<span class="comment">// å¤§äºé“¾è¡¨é•¿åº¦çš„ä¸€åŠï¼Œåˆ™ä»æœ«å°¾å¼€å§‹éå†</span></span><br><span class="line">        Node&lt;E&gt; x = last;  <span class="comment">// lastèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>å‚è€ƒï¼šhttps://www.cnblogs.com/syp172654682/p/9817277.html</p>
</blockquote>
</blockquote>
<blockquote>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="randomaccess-æ¥å£">RandomAccess æ¥å£</h3>
<p><strong>ArrayList å®ç° RandomAccess æ¥å£æœ‰ä½•ä½œç”¨ï¼Ÿä¸ºä½• LinkedList å´æ²¡å®ç°è¿™ä¸ªæ¥å£ï¼Ÿ</strong></p>
<blockquote>
<p>ArrayList å®ç°äº† RandomAccess</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; </span></span><br><span class="line"><span class="class">	<span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt; </span></span><br><span class="line"><span class="class">	<span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">RandomAccess</span>, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LinkedList æœªå®ç°è¯¥æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<ol type="1">
<li><p>RandomAccess æ¥å£åªæ˜¯ä¸€ä¸ªæ ‡å¿—æ¥å£(Marker interface)ï¼Œåªè¦ List é›†åˆå®ç°è¿™ä¸ªæ¥å£ï¼Œå°±èƒ½<strong>æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®</strong>ã€‚</p></li>
<li><p>é€šè¿‡æŸ¥çœ‹ Collections ç±»ä¸­çš„ <code>copy()</code> æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">copy</span><span class="params">(List&lt;? <span class="keyword">super</span> T&gt; dest, List&lt;? extends T&gt; src)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> srcSize = src.size();</span><br><span class="line">    <span class="keyword">if</span> (srcSize &gt; dest.size())</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">&quot;Source does not fit in dest&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (srcSize &lt; COPY_THRESHOLD ||</span><br><span class="line">        (src <span class="keyword">instanceof</span> RandomAccess &amp;&amp; dest <span class="keyword">instanceof</span> RandomAccess)) &#123;</span><br><span class="line">        <span class="comment">// srcä¸destå®ç°äº†RandomAccessæ¥å£ï¼Œåˆ™ç”¨forå¾ªç¯éå†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;srcSize; i++)</span><br><span class="line">            dest.set(i, src.get(i));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// src æˆ– dest æœ‰ä¸€æ²¡å®ç°RandomAccessæ¥å£ï¼Œåˆ™ç”¨iteratorå¾ªç¯éå†</span></span><br><span class="line">        ListIterator&lt;? <span class="keyword">super</span> T&gt; di=dest.listIterator();</span><br><span class="line">        ListIterator&lt;? extends T&gt; si=src.listIterator();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;srcSize; i++) &#123;</span><br><span class="line">            di.next();</span><br><span class="line">            di.set(si.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç° RandomAccess æ¥å£çš„ List é›†åˆé‡‡ç”¨ä¸€èˆ¬çš„ for å¾ªç¯éå†ï¼Œè€Œæœªå®ç°è¿™æ¥å£åˆ™é‡‡ç”¨è¿­ä»£å™¨ï¼Œå³ ArrayList ä¸€èˆ¬é‡‡ç”¨ for å¾ªç¯éå†ï¼Œè€Œ LinkedList ä¸€èˆ¬é‡‡ç”¨è¿­ä»£å™¨éå†ï¼›</p></li>
<li><p>ç†ç”±åˆ™ä¸ºï¼š<strong>ArrayList ç”¨ for å¾ªç¯éå†æ¯” iterator è¿­ä»£å™¨éå†å¿«ï¼ŒLinkedList ç”¨ iterator è¿­ä»£å™¨éå†æ¯” for å¾ªç¯éå†å¿«ã€‚</strong>æ‰€ä»¥è¯´ï¼Œå½“æˆ‘ä»¬åœ¨åšé¡¹ç›®æ—¶ï¼Œåº”è¯¥è€ƒè™‘åˆ° List é›†åˆçš„ä¸åŒå­ç±»é‡‡ç”¨ä¸åŒçš„éå†æ–¹å¼ï¼Œèƒ½å¤Ÿæé«˜æ€§èƒ½ã€‚</p></li>
</ol>
<blockquote>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/weixin_39148512/article/details/79234817</p>
</blockquote>
<h3 id="arraylist-çš„æ‰©å®¹æœºåˆ¶">ArrayList çš„æ‰©å®¹æœºåˆ¶ <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<blockquote>
<p>æ›´å¤šå…³äºArrayListçš„å†…å®¹å¯è§ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14297634.html">Javaï¼šArrayListç±»å°è®°</a></p>
</blockquote>
<blockquote>
<p>æ¨èé˜…è¯»+å‚è€ƒï¼š</p>
<p>https://juejin.im/post/5d42ab5e5188255d691bc8d6</p>
<p>https://www.cnblogs.com/SunArmy/p/9844022.html</p>
</blockquote>
<p><strong>æ€»çš„æ¥è¯´å°±æ˜¯åˆ†ä¸¤æ­¥ï¼š</strong></p>
<ol type="1">
<li><strong>æ‰©å®¹</strong>ï¼šæŠŠåŸæ¥çš„æ•°ç»„å¤åˆ¶åˆ°å¦ä¸€ä¸ªå†…å­˜ç©ºé—´æ›´å¤§çš„æ•°ç»„ä¸­ï¼ˆ1.5å€ï¼‰</li>
<li><strong>æ·»åŠ å…ƒç´ </strong>ï¼šæŠŠæ–°å…ƒç´ æ·»åŠ åˆ°æ‰©å®¹ä»¥åçš„æ•°ç»„ä¸­</li>
</ol>
<p><strong>åˆ†æ­¥è¯´æ˜ï¼š</strong></p>
<ol type="1">
<li><p>å½“ä½¿ç”¨ add æ–¹æ³•çš„æ—¶å€™é¦–å…ˆè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ï¼Œä¼ å…¥ size+1 è¿›å»ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å…… elementData æ•°ç»„çš„å¤§å°ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.ArrayListä¸­çš„addæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å› ä¸ºè¦æ·»åŠ å…ƒç´ ï¼Œæ‰€ä»¥æ·»åŠ ä¹‹åå¯èƒ½å¯¼è‡´å®¹é‡ä¸å¤Ÿï¼Œæ‰€ä»¥éœ€è¦åœ¨æ·»åŠ ä¹‹å‰è¿›è¡Œåˆ¤æ–­ï¼ˆæ‰©å®¹ï¼‰</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">// æœ€åæ‰©å®¹æˆåŠŸ/ä¸éœ€è¦æ‰©å®¹  æ‰æ·»åŠ å…ƒç´ ï¼Œå¹¶ä»¤size+1</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.ArrayList ä¸­ add æ–¹æ³•çš„ ensureCapacityInternal æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.calculateCapacityæ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­ä¼ å…¥çš„æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼Œè‹¥æ˜¯ï¼Œåˆ™è¿”å›DEFAULT_CAPACITYä¸minCapacityä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…¶ä¸­ï¼ŒDEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span></span><br><span class="line">    <span class="comment">// æ»¡è¶³ä¸‹é¢æ¡ä»¶è¡¨ç¤ºçš„æ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ éœ€è¦çš„æ‰©å®¹æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="comment">// å…¶ä¸­private static final int DEFAULT_CAPACITY = 10;</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.ensureExplicitCapacityæ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ·»åŠ å…ƒç´ åçš„æ•°ç»„ï¼Œæ˜¯å¦å¯èƒ½å‘ç”Ÿæº¢å‡ºï¼Œè‹¥å¯èƒ½å‘ç”Ÿæº¢å‡ºï¼Œåˆ™è¿›è¡Œgrowæ‰©å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;  <span class="comment">// æ¶‰åŠ fail-fast</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// overflow-conscious code å·²ç»æº¢å‡ºäº† éœ€è¦æ‰©å®¹äº†</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å½“éœ€è¦æ‰©å®¹ï¼Œå³å·²ç»å‘ç”Ÿäº†æº¢å‡ºï¼Œåˆ™è°ƒç”¨growå‡½æ•°è¿›è¡Œæ‰©å®¹æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="comment">// æ‰©å®¹å¤§å°ä¸ºåŸæ•°ç»„é•¿åº¦çš„1.5å€ï¼›</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ–°å®¹é‡çš„å¤§å°æ˜¯å¦å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œå¦‚æœå°äºé‚£å°±å°†æœ€å°å®¹é‡æœ€ä¸ºæ•°ç»„çš„æ–°å®¹é‡</span></span><br><span class="line">    <span class="comment">// è¿™æ˜¯è€ƒè™‘åˆ°ç¬¬ä¸€æ¬¡è¿›å…¥æ—¶ï¼ŒoldCapacityä¸º0çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">// å½“æ–°å®¹é‡å¤§äºMAX_ARRAY_SIZEï¼Œä½¿ç”¨hugeCapacityæ¯”è¾ƒäºŒè€…</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);</code>æ‰©å®¹å¤§å°ä¸ºåŸæ•°ç»„é•¿åº¦çš„1.5å€ï¼›</p>
<p><code>newCapacity - MAX_ARRAY_SIZE</code>å½“æ–°å®¹é‡å¤§äºMAX_ARRAY_SIZEï¼Œä½¿ç”¨hugeCapacityæ¯”è¾ƒäºŒè€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hugeCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">    <span class="comment">// å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">    <span class="comment">// è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class="line">    <span class="comment">// è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class="line">    <span class="comment">// MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</span></span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :</span><br><span class="line">    MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ArrayList ä¸­ copy æ•°ç»„çš„æ ¸å¿ƒå°±æ˜¯ <code>System.arraycopy</code> æ–¹æ³•ï¼Œå°† original æ•°ç»„çš„æ‰€æœ‰æ•°æ®å¤åˆ¶åˆ° copy æ•°ç»„ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨growå‡½æ•°ä¸­æœ€ç»ˆè°ƒç”¨Arrays.copyOfæ–¹æ³•</span></span><br><span class="line">elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›ä¸€æ­¥ï¼šArrays.copyOf è°ƒç”¨æµç¨‹</span></span><br><span class="line"><span class="comment">// 1.Arraysç±»ä¸­çš„copyOfæ–¹æ³•ï¼š</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T[] copyOf(T[] original, <span class="keyword">int</span> newLength) &#123;</span><br><span class="line">    <span class="keyword">return</span> (T[]) copyOf(original, newLength, original.getClass());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.Arraysç±»ä¸­çš„copyOfæ–¹æ³•ï¼š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T,U&gt; T[] copyOf(U[] original, <span class="keyword">int</span> newLength, Class&lt;? extends T[]&gt; newType) &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    T[] copy = ((Object)newType == (Object)Object[].class)</span><br><span class="line">        ? (T[]) <span class="keyword">new</span> Object[newLength]</span><br><span class="line">        : (T[]) Array.newInstance(newType.getComponentType(), newLength);</span><br><span class="line">    System.arraycopy(original, <span class="number">0</span>, copy, <span class="number">0</span>,</span><br><span class="line">                     Math.min(original.length, newLength));</span><br><span class="line">    <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Systemç±»ä¸­çš„arraycopyæ–¹æ³•ï¼šæ˜¯ä¸€ä¸ªnativeæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">arraycopy</span><span class="params">(Object src,  <span class="keyword">int</span>  srcPos,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    Object dest, <span class="keyword">int</span> destPos,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    <span class="keyword">int</span> length)</span></span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="array-å’Œ-arraylist-åŒºåˆ«">Array å’Œ ArrayList åŒºåˆ« <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<ol type="1">
<li>Arrayï¼ˆæ•°ç»„ï¼‰ å¯ä»¥å®¹çº³åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ï¼Œè€Œ ArrayList åªèƒ½å®¹çº³å¯¹è±¡ï¼Œä½†æ˜¯ Array æ•°ç»„åœ¨å­˜æ”¾çš„æ—¶å€™ä¸€å®šæ˜¯åŒç§ç±»å‹çš„å…ƒç´ ï¼Œè€Œ ArrayList å°±ä¸ä¸€å®šäº†ï¼Œå› ä¸º ArrayList å¯ä»¥å­˜å‚¨ Objectï¼›</li>
<li>Array å¤§å°æ˜¯å›ºå®šçš„ï¼ŒArrayList çš„å¤§å°æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼ˆåº•å±‚åŸºäºåŠ¨æ€æ•°ç»„ï¼Œå¯ä»¥è¿›è¡Œæ‰©å®¹æ“ä½œï¼‰ã€‚</li>
</ol>
<p><strong>ä»€ä¹ˆæ—¶å€™æ›´é€‚åˆä½¿ç”¨ Arrayï¼š</strong></p>
<ol type="1">
<li>å¦‚æœ<strong>åˆ—è¡¨çš„å¤§å°å·²ç»æŒ‡å®š</strong>ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å­˜å‚¨å’Œéå†å®ƒä»¬ï¼›</li>
<li>å¯¹äºéå†<strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼Œå°½ç®¡ Collections ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥å‡è½»ç¼–ç ä»»åŠ¡ï¼Œåœ¨æŒ‡å®šå¤§å°çš„åŸºæœ¬ç±»å‹çš„åˆ—è¡¨ä¸Šå·¥ä½œä¹Ÿä¼šå˜å¾—å¾ˆæ…¢ï¼›</li>
<li>å¦‚æœä½ è¦ä½¿ç”¨å¤šç»´æ•°ç»„ï¼Œä½¿ç”¨ <code>[][]</code> æ¯”<code>&lt;List&gt;</code> æ›´å®¹æ˜“ã€‚</li>
</ol>
<blockquote>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="hashmap-çš„æ•°æ®ç»“æ„">HashMap çš„æ•°æ®ç»“æ„ <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<blockquote>
<p>æ›´ä¸ºè¯¦ç»†çš„å†…å®¹å¯è§åšå®¢ç« èŠ‚ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14298141.html">Javaï¼šHashMapç±»å°è®°</a></p>
</blockquote>
<p>HashMap çš„å®ç°å¯åˆ†ä¸º JDK7 ä¸ JDK8 ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒJDK1.7 å’Œ 1.8 çš„ä¸»è¦åŒºåˆ«åœ¨äº<strong>å¤´æ’å’Œå°¾æ’</strong>æ–¹å¼çš„ä¿®æ”¹ï¼Œå¤´æ’å®¹æ˜“å¯¼è‡´ HashMap é“¾è¡¨æ­»å¾ªç¯ï¼Œå¹¶ä¸” 1.8 ä¹‹ååŠ å…¥<strong>çº¢é»‘æ ‘</strong>å¯¹æ€§èƒ½æœ‰æå‡</p>
<blockquote>
<p><strong>HashMap å®ç°åŠåŸç†åˆ†æ</strong>ï¼šhttps://www.cnblogs.com/chengxiao/p/6059914.html</p>
</blockquote>
<p><strong>JDK1.7ï¼šEntryæ•°ç»„ + é“¾è¡¨</strong></p>
<p>HashMap çš„ä¸»å¹²æ˜¯ä¸€ä¸ª Entry æ•°ç»„ã€‚Entry æ˜¯ HashMap çš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œæ¯ä¸€ä¸ª Entry åŒ…å«ä¸€ä¸ª key-value é”®å€¼å¯¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HashMapçš„ä¸»å¹²æ•°ç»„ï¼Œå¯ä»¥çœ‹åˆ°å°±æ˜¯ä¸€ä¸ªEntryæ•°ç»„ï¼Œåˆå§‹å€¼ä¸ºç©ºæ•°ç»„&#123;&#125;</span></span><br><span class="line"><span class="comment">// ä¸”æœ‰ï¼šä¸»å¹²æ•°ç»„çš„é•¿åº¦ä¸€å®šæ˜¯2çš„æ¬¡å¹‚ï¼Œè‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œå‚è€ƒæ–‡ç« ä¸­æœ‰è¯¦ç»†åˆ†æ</span></span><br><span class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</span><br></pre></td></tr></table></figure>
<p>Entry æ˜¯ HashMap ä¸­çš„ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K,V&gt; next;  <span class="comment">// å­˜å‚¨æŒ‡å‘ä¸‹ä¸€ä¸ªEntryçš„å¼•ç”¨ï¼Œå•é“¾è¡¨ç»“æ„</span></span><br><span class="line">    <span class="keyword">int</span> hash;         <span class="comment">// å¯¹keyçš„hashå€¼è¿›è¡Œhashè¿ç®—åå¾—åˆ°çš„å€¼ï¼Œå­˜å‚¨åœ¨Entryï¼Œé¿å…é‡å¤è®¡ç®—</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ... æ„é€ å‡½æ•°/get/set/toString</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥èŠ‚ç‚¹ï¼šå¤´æ’æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å–å‡ºç´¢å¼•ä½ç½®çš„å…ƒç´ </span></span><br><span class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</span><br><span class="line">    <span class="comment">// å°†æ–°çš„å…ƒç´ æ”¾ç½®åˆ°ç´¢å¼•ä½ï¼ŒåŒæ—¶å°†åŸæ¥çš„ä½œä¸ºæ–°å…ƒç´ çš„ä¸‹ä¸€ä¸ªä¿å­˜ï¼Œå½¢æˆå•å‘é“¾è¡¨</span></span><br><span class="line">    <span class="comment">// å¤´æ’æ³•</span></span><br><span class="line">    table[bucketIndex] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<p>ç®€å•æ¥è¯´ï¼š<strong>HashMap ç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„</strong>ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼›</p>
<p>å¦‚æœå®šä½åˆ°çš„æ•°ç»„ä½ç½®ä¸å«é“¾è¡¨ï¼ˆå½“å‰entryçš„nextæŒ‡å‘nullï¼‰ï¼Œé‚£ä¹ˆå¯¹äºæŸ¥æ‰¾ï¼Œæ·»åŠ ç­‰æ“ä½œå¾ˆå¿«ï¼Œä»…éœ€ä¸€æ¬¡å¯»å€å³å¯ï¼›</p>
<p>å¦‚æœå®šä½åˆ°çš„æ•°ç»„åŒ…å«é“¾è¡¨ï¼Œå¯¹äºæ·»åŠ æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œé¦–å…ˆéå†é“¾è¡¨ï¼Œå­˜åœ¨å³è¦†ç›–ï¼Œå¦åˆ™æ–°å¢ï¼›å¯¹äºæŸ¥æ‰¾æ“ä½œæ¥è®²ï¼Œä»éœ€éå†é“¾è¡¨ï¼Œç„¶åé€šè¿‡ key å¯¹è±¡çš„ equals æ–¹æ³•é€ä¸€æ¯”å¯¹æŸ¥æ‰¾ã€‚</p>
<p>æ‰€ä»¥ï¼Œæ€§èƒ½è€ƒè™‘ï¼ŒHashMapä¸­çš„é“¾è¡¨å‡ºç°è¶Šå°‘ï¼Œæ€§èƒ½æ‰ä¼šè¶Šå¥½ã€‚</p>
</blockquote>
<p><strong>JDK1.8ï¼šNodeæ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘ï¼›</strong></p>
<blockquote>
<p>è¿›ä¸€æ­¥è¯´æ˜ï¼š</p>
<ol type="1">
<li>Nodeæ•°ç»„ï¼šè¿™é‡Œå˜æˆäº† Node æ•°ç»„ï¼Œè€Œä¸æ˜¯ Entry æ•°ç»„äº†ï¼ŒNode æ•°ç»„å…¶å®å®ç°äº† Entry æ•°ç»„ï¼Œè§æºç éƒ¨åˆ†</li>
<li>é“¾è¡¨ï¼šå•å‘é“¾è¡¨</li>
<li><strong>çº¢é»‘æ ‘ï¼šçº¢é»‘æ ‘èŠ‚ç‚¹+åŒå‘é“¾è¡¨</strong></li>
</ol>
</blockquote>
<p>Entry å’Œ Node éƒ½åŒ…å« keyã€valueã€hashã€next å±æ€§ï¼Œä»¥ä¸‹æ˜¯ <strong>Node çš„æºç </strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HashMapçš„ä¸»å¹²æ•°ç»„</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Nodeç±»ç»§æ‰¿äº† Map.Entry&lt;K,V&gt;</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    V value;</span><br><span class="line">    Node&lt;K,V&gt; next;  <span class="comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">// ... æ„é€ å‡½æ•° get/set/toString</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™æ˜¯è·å–Nodeçš„hashå€¼</span></span><br><span class="line">        <span class="comment">// æ“ä½œï¼šå¯¹keyå’Œvalueå–äº†ä¸€ä¸ªå¼‚æˆ–æ“ä½œ</span></span><br><span class="line">        <span class="keyword">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">setValue</span><span class="params">(V newValue)</span> </span>&#123;</span><br><span class="line">        V oldValue = value;</span><br><span class="line">        value = newValue;</span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼ŒåŒæ—¶å¯¹keyå’Œvalueè¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">this</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Map.Entry) &#123;</span><br><span class="line">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line">            <span class="keyword">if</span> (Objects.equals(key, e.getKey()) &amp;&amp;</span><br><span class="line">                Objects.equals(value, e.getValue()))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯<strong>çº¢é»‘æ ‘çš„èŠ‚ç‚¹ç±»æºç </strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¢é»‘æ ‘èŠ‚ç‚¹+åŒå‘é“¾è¡¨ï¼Œå¯è§å…¶ç»§æ‰¿äº†LinkedHashMap.Entry&lt;K,V&gt;</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    TreeNode&lt;K,V&gt; parent;  <span class="comment">// red-black tree links</span></span><br><span class="line">    TreeNode&lt;K,V&gt; left;	   <span class="comment">// å·¦å­æ ‘</span></span><br><span class="line">    TreeNode&lt;K,V&gt; right;   <span class="comment">// å³å­æ•°</span></span><br><span class="line">    TreeNode&lt;K,V&gt; prev;    <span class="comment">// needed to unlink next upon deletion</span></span><br><span class="line">    <span class="keyword">boolean</span> red;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> hash, K key, V val, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">        <span class="keyword">super</span>(hash, key, val, next);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...å…³äºæ ‘çš„ä¸€äº›æ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LinkedHashMapæºç ä¸­ï¼š</span></span><br><span class="line"><span class="comment">// çº¢é»‘æ ‘ä¸­çš„åŒå‘é“¾è¡¨å°±ä½“ç°åœ¨æ­¤</span></span><br><span class="line"><span class="comment">// è€Œä¹‹æ‰€ä»¥åœ¨ç»´æŠ¤çº¢é»‘æ ‘çš„åŒæ—¶ï¼Œå†ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨çš„ç»“æ„ï¼Œè¿™æ˜¯ä¸ºäº†æ‰©å®¹æ–¹ä¾¿</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">HashMap</span>.<span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; before, after;  <span class="comment">// å‰ä¸€ä¸ªå’Œåä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    Entry(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">        <span class="keyword">super</span>(hash, key, value, next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„æ¡ä»¶</strong>ï¼š</p>
<ol type="1">
<li><p>å½“é“¾è¡¨ä¸Šçš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ 8 ä¸ª</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­é“¾è¡¨é•¿åº¦åˆ°è¾¾8è°ƒç”¨treeifyBinæ–¹æ³•è½¬æ¢çº¢é»‘æ ‘,TREEIFY_THRESHOLDçš„å€¼ä¸º8</span></span><br><span class="line"><span class="comment">// static final int TREEIFY_THRESHOLD = 8;</span></span><br><span class="line"><span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>)</span><br><span class="line">    treeifyBin(tab, hash);</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨æ•°ç»„é•¿åº¦ &gt;= 64 æ—¶æ‰ä¼šè½¬åŒ–æˆçº¢é»‘æ ‘ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// treeifyBinæ–¹æ³•å¼€å¤´æœ‰åˆ¤æ–­æ•°ç»„é•¿åº¦æ˜¯å¦å°äº64,å°äºåˆ™è¿›è¡Œæ‰©å®¹,å¦åˆ™è½¬çº¢é»‘æ ‘.</span></span><br><span class="line"><span class="comment">// å…¶ä¸­:MIN_TREEIFY_CAPACITYçš„å€¼ä¸º64.</span></span><br><span class="line"><span class="comment">// static final int MIN_TREEIFY_CAPACITY = 64;</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">treeifyBin</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> hash)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, index; Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">if</span> (tab == <span class="keyword">null</span> || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="line">        resize();</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/g5zhu5896/article/details/82968287</p>
</blockquote></li>
<li><p>éæ ‘åŒ–ä»€ä¹ˆæ—¶å€™è¿›è¡Œï¼Ÿ</p>
<ol type="1">
<li>æ ‘ä¸Šçš„èŠ‚ç‚¹ä¸ªæ•°å°äº6ï¼›</li>
<li>ä»…åœ¨ resize æ—¶ï¼Œå¯¹æ ‘çš„è¿ç§»ä¸­è¿›è¡Œäº†éæ ‘åŒ–çš„æ“ä½œã€‚</li>
</ol></li>
</ol>
<p>èŠ‚ç‚¹å˜æˆæ ‘èŠ‚ç‚¹ï¼Œä»¥æé«˜æœç´¢æ•ˆç‡å’Œæ’å…¥æ•ˆç‡åˆ° O(logN)ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/vking_wang/article/details/14166593</p>
</blockquote>
<h3 id="hashmap-çš„-put-get">HashMap çš„ put() &amp; get() <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>putæ–¹æ³•ï¼š</strong></p>
<ol type="1">
<li><p>å½“æˆ‘ä»¬æƒ³å¾€ä¸€ä¸ª HashMap ä¸­æ·»åŠ ä¸€å¯¹ key-value æ—¶ï¼Œç³»ç»Ÿ<strong>é¦–å…ˆä¼šè®¡ç®— key çš„ hash å€¼</strong>ï¼›</p>
<blockquote>
<p>hash çš„è®¡ç®—å…¬å¼ï¼š<code>(key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</code>ï¼Œåç»­æ ¹æ® <code>hash &amp; (æ•°ç»„é•¿åº¦-1)</code> è®¡ç®—åœ¨ hashè¡¨ ä¸­çš„ä½ç½®</p>
</blockquote></li>
<li>æ‹¿åˆ°äº† hash å€¼åï¼Œè°ƒç”¨ <code>putVal(...)</code>ï¼Œåšäº†å¦‚ä¸‹æ“ä½œï¼š
<ol type="1">
<li>åˆ¤æ–­ table æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºï¼Œåˆ™è°ƒç”¨ <code>resize()</code> å¯¹ table æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼›</li>
<li>æ ¹æ® hash å€¼ç¡®è®¤åœ¨ table ä¸­å­˜å‚¨çš„ä½ç½®ã€‚è‹¥è¯¥ä½ç½®æ²¡æœ‰å…ƒç´ ï¼Œåˆ™ç›´æ¥æ’å…¥ï¼›</li>
<li>è‹¥ä¸ä¸ºç©ºï¼Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼š
<ol type="1">
<li>å¦‚æœä¸¤ä¸ª hash å€¼ç›¸ç­‰ä¸” key å€¼ç›¸ç­‰ï¼šåˆ™ç”¨æ–°çš„ Entry çš„ value è¦†ç›–åŸæ¥èŠ‚ç‚¹çš„ valueï¼›</li>
<li>å‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼Œå†æ¬¡åˆ†æƒ…å†µè¿›è¡Œè®¨è®ºï¼š
<ol type="1">
<li>è‹¥è¯¥é“¾å·²ç»ä¸ºæ ‘ï¼Œåˆ™å°†è¯¥èŠ‚ç‚¹æ’å…¥æ ‘ä¸­ï¼›</li>
<li>è‹¥è¯¥èŠ‚ç‚¹ä¸ºé“¾è¡¨ï¼Œåˆ™æ’å…¥åˆ°é“¾è¡¨ä¸­ï¼Œè€Œå½“æ’å…¥æ–°èŠ‚ç‚¹åï¼Œè‹¥é“¾è¡¨çš„é•¿åº¦è¿‡é•¿(å¤§äºç­‰äºTREEIFY_THRESHOLD)ï¼Œåˆ™å°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ç»“æ„ã€‚</li>
</ol>
<blockquote>
<p>è¿™éƒ¨åˆ†å†…å®¹è§åšå®¢ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14298141.html">Javaï¼šHashMapç±»å°è®°ï¼šHashMap çš„ put&amp;get æ‰§è¡Œè¿‡ç¨‹</a></p>
</blockquote></li>
</ol></li>
</ol></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. é€šè¿‡hash(key)è®¡ç®—keyçš„hashå€¼</span></span><br><span class="line">    <span class="comment">// 2. æ‹¿åˆ°äº† hash å€¼åï¼Œè°ƒç”¨ putVal()</span></span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. é€šè¿‡hash(key)è®¡ç®—keyçš„hashå€¼ï¼Œ</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="comment">// æ‰°åŠ¨é¿å…ç®—æ³•ï¼Œå……åˆ†åˆ©ç”¨é«˜ä½ä½</span></span><br><span class="line">    <span class="comment">// å…¶ä¸­ï¼š&gt;&gt;&gt; æ— ç¬¦å·å³ç§»ï¼Œå³é«˜ä½è¡¥0</span></span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æ‹¿åˆ°äº†hashå€¼åï¼Œè°ƒç”¨putVal()</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="params"><span class="function">               <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰è¾…åŠ©å˜é‡</span></span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">    <span class="comment">// 2.1 åˆ¤æ–­tableæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="comment">// hashmapå¯¹è±¡ä¸­ï¼Œè‹¥tableå±æ€§ä¸ºç©º-&gt;ç¬¬ä¸€æ¬¡put-&gt;resize()</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// è°ƒç”¨resizeå‡½æ•°ï¼Œé»˜è®¤å¤§å°ä¸º16ï¼Œå¯¹äºresizeå‡½æ•°åç»­åˆ†æâ˜†</span></span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">// 2.2 å‘ç°tab[i]æ²¡æœ‰å€¼ï¼Œç›´æ¥å­˜å…¥å³å¯</span></span><br><span class="line">    <span class="comment">// æ ¹æ®keyçš„hashå€¼è®¡ç®—è¯¥keyåœ¨hashmapä¸­çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">        <span class="comment">// å‘ç°tab[i]æ²¡æœ‰å€¼ï¼Œåˆ™å°†å…ƒç´ æ”¾å…¥tableä¸­</span></span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 2.3 tab[i]å–åˆ°å€¼äº†ï¼Œè«æ…Œï¼Œå…ˆå®šä¹‰ä¸‹æ–¹2ä¸ªå˜é‡</span></span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">// 2.3.1 å¦‚æœæ˜¯keyé‡å¤äº†ï¼Œå¾ˆç®€å•ï¼Œç›´æ¥e = pï¼Œå³valueæ›¿æ¢ä¸€ä¸‹å³å¯</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;  <span class="comment">// å½“å‰ç´¢å¼•ä½ç½®å¯¹åº”é“¾è¡¨çš„å¤´èŠ‚ç‚¹çš„hashå€¼å’Œå¾…æ·»åŠ å…ƒç´ å€¼ç›¸åŒ</span></span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">// 2.3.2 å‘ç”Ÿäº†hashå†²çª</span></span><br><span class="line">        <span class="comment">// 2.3.2.1 è¯¥é“¾ä¸ºæ ‘ï¼Œåˆ™å°†è¯¥èŠ‚ç‚¹æ’å…¥æ ‘ä¸­</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="comment">// 2.3.2.2 è¯¥é“¾ä¸ºé“¾è¡¨ï¼Œåˆ™æ’å…¥åˆ°é“¾è¡¨ä¸­</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¼€å§‹éå†é“¾è¡¨</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="comment">// èŠ‚ç‚¹åå·²ç»æ²¡å…ƒç´ äº†ï¼Œåˆ™æ’å…¥</span></span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                    <span class="comment">// æ·»åŠ å®Œæˆåï¼Œåˆ¤æ–­æ˜¯éœ€è¦æ ‘åŒ–</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// éå†è¿‡ç¨‹ä¸­åˆ¤æ–­èŠ‚ç‚¹keyå’Œå¾…æ’å…¥èŠ‚ç‚¹æ˜¯å¦ç›¸åŒï¼Œæ»¡è¶³åˆ™è¯´æ˜æœ‰é‡å¤key</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// eä¸ä¸ºç©ºï¼Œè¯´æ˜äº§ç”Ÿäº†hashå†²çªï¼Œä¸”å­˜åœ¨äº†å€¼çš„æ›¿æ¢</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;  <span class="comment">// æ—§çš„valueå€¼è¿”å›</span></span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;  <span class="comment">// æ–°çš„å€¼æ›¿æ¢æ—§çš„å€¼</span></span><br><span class="line">            afterNodeAccess(e);  <span class="comment">// ç©ºæ–¹æ³•ï¼Œç”¨äºåç»­é‡å†™</span></span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">// æ˜¯å¦éœ€è¦è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        <span class="comment">// è‹¥éœ€è¦æ‰©å®¹ï¼Œåˆ™è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œåç»­åˆ†æ</span></span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);  <span class="comment">// ç©ºæ–¹æ³•ï¼Œç”¨äºåç»­é‡å†™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>getæ–¹æ³•ï¼š</strong></p>
<p>é€šè¿‡ key çš„ hash å€¼æ‰¾åˆ°åœ¨ table æ•°ç»„ä¸­çš„ç´¢å¼•å¤„çš„ Nodeï¼Œç„¶åè¿”å›è¯¥ key å¯¹åº”çš„ value å³å¯ã€‚</p>
<p>åœ¨è¿™é‡Œèƒ½å¤Ÿæ ¹æ® key å¿«é€Ÿçš„å–åˆ° value é™¤äº†å’Œ HashMap çš„æ•°æ®ç»“æ„å¯†ä¸å¯åˆ†å¤–ï¼Œè¿˜å’Œ Node æœ‰è«å¤§çš„å…³ç³»ã€‚</p>
<p>HashMap åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰å°† keyï¼Œvalue åˆ†å¼€æ¥å­˜å‚¨ï¼Œè€Œæ˜¯å½“åšä¸€ä¸ªæ•´ä½“ key-value æ¥å¤„ç†çš„ï¼Œè¿™ä¸ªæ•´ä½“å°±æ˜¯ Node å¯¹è±¡ã€‚</p>
<p>åŒæ—¶ value ä¹Ÿåªç›¸å½“äº key çš„é™„å±è€Œå·²ã€‚</p>
<p><strong>å³åœ¨å­˜å‚¨çš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæ ¹æ® key çš„ HashCode æ¥å†³å®š Node åœ¨ table æ•°ç»„ä¸­çš„å­˜å‚¨ä½ç½®<code>hash(key) &amp; (æ•°ç»„é•¿åº¦-1)</code>ï¼‰ï¼Œåœ¨å–çš„è¿‡ç¨‹ä¸­åŒæ ·æ ¹æ® key çš„ HashCode å–å‡ºç›¸å¯¹åº”çš„ Node å¯¹è±¡ï¼ˆvalue å°±åŒ…å«åœ¨é‡Œé¢ï¼‰ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">// æ ¹æ®keyæ‰¾valueï¼Œä¼ å…¥hash(key) å’Œ key</span></span><br><span class="line">    <span class="comment">// æ ¹æ®è¿”å›ç»“æœï¼Œä¸ºnullåˆ™ç›´æ¥è¿”å›ï¼Œä¸ç„¶å°±è¿”å›eçš„value</span></span><br><span class="line">    <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">    <span class="comment">// å¦‚æœè¡¨ä¸æ˜¯ç©ºçš„ï¼Œå¹¶ä¸”è¦æŸ¥æ‰¾ç´¢å¼•å¤„æœ‰å€¼</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// å°±åˆ¤æ–­ä½äºç¬¬ä¸€ä¸ªçš„keyæ˜¯å¦æ˜¯è¦æŸ¥æ‰¾çš„keyï¼Œå³hashå€¼ç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œå†…å®¹ä¹Ÿè¦ç›¸åŒ</span></span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">            ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        <span class="comment">// è¯´æ˜ç¬¬ä¸€ä¸ªç»“ç‚¹çš„å€¼ä¸ç›¸åŒï¼Œè‹¥ç»“ç‚¹åæœ‰é“¾è¡¨/æ ‘ç»§ç»­éå†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœä¸æ˜¯å°±åˆ¤æ–­é“¾è¡¨æ˜¯å¦æ˜¯çº¢é»‘äºŒå‰æ ‘ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä»æ ‘ä¸­å–å€¼</span></span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            <span class="comment">// å¦‚æœä¸æ˜¯æ ‘ï¼Œå°±éå†é“¾è¡¨</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒï¼šhttps://www.cnblogs.com/kangkaii/p/8473793.html</p>
</blockquote>
<h3 id="hashmap-çš„-resize-æ–¹æ³•">HashMap çš„ resize æ–¹æ³• <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<blockquote>
<p>æ›´å¤šå…³äº resize çš„æ–¹æ³•è¯¦è§£è§ä¸ªäººåšå®¢ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14298141.html">Javaï¼šHashMapç±»å°è®°ï¼šHashMap çš„ resize/æ‰©å®¹</a></p>
</blockquote>
<p><strong>æœ‰ä¸¤ç§æƒ…å†µä¼šè°ƒç”¨ resize æ–¹æ³•ï¼š</strong></p>
<ol type="1">
<li><p>ç¬¬ä¸€æ¬¡è°ƒç”¨ HashMap çš„ put æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨ resize æ–¹æ³•å¯¹ table æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœä¸ä¼ å…¥æŒ‡å®šå€¼ï¼Œé»˜è®¤å¤§å°ä¸º 16ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hashmapå¯¹è±¡ä¸­ tabelå±æ€§ä¸ºç©º---&gt;ç¬¬ä¸€æ¬¡put----&gt;resize()</span></span><br><span class="line"><span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">    n = (tab = resize()).length;</span><br></pre></td></tr></table></figure></li>
<li><p>æ‰©å®¹æ—¶ä¼šè°ƒç”¨ resizeï¼Œå³ size &gt; threshold æ—¶ï¼Œtable æ•°ç»„å¤§å°ç¿»å€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">       resize();</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š<code>threshold=loadFactor * length</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°ç»„é•¿åº¦å›ºå®šä»¥åï¼Œ å¦‚æœè´Ÿè½½å› å­è¶Šå¤§ï¼Œæ‰€èƒ½å®¹çº³çš„å…ƒç´ ä¸ªæ•°è¶Šå¤šï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªå€¼å°±ä¼šè¿›è¡Œæ‰©å®¹(<strong>é»˜è®¤æ˜¯æ‰©å®¹ä¸ºåŸæ¥çš„2å€</strong>)</p>
<blockquote>
<p>å¦‚æœåœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚ç©ºé—´æ¯”è¾ƒå¤šï¼Œä½†è¦æ±‚é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠæ‰©å®¹å› å­è°ƒå°ä»¥è¾ƒå°‘hashå†²çªçš„æ¦‚ç‡</p>
<p>ç›¸åå°±å¢å¤§æ‰©å®¹å› å­(è¿™ä¸ªå€¼å¯ä»¥å¤§äº1çš„ï¼Œå› ä¸ºå­˜åœ¨hashå†²çªï¼Œä¹Ÿå¾ˆå¥½ç†è§£)</p>
</blockquote></li>
</ol>
<p><strong>resize æ–‡å­—è¯´æ˜</strong>ï¼š</p>
<p>æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½æ˜¯<strong>ç¿»å€</strong>ã€‚æ‰©å®¹åè¦å°†åŸæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ‰¾åˆ°åœ¨æ–°æ•°ç»„ä¸­åˆé€‚çš„ä½ç½®ã€‚</p>
<p>æœ‰å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬æŠŠ <code>table[i]</code> ä½ç½®çš„æ‰€æœ‰ <code>node</code> è¿ç§»åˆ° <code>newtab</code> ä¸­å»çš„æ—¶å€™ï¼šè¿™é‡Œé¢çš„ <code>node</code> è¦ä¹ˆåœ¨ <code>newtab</code> çš„ <code>i</code> ä½ç½®ï¼ˆä¸å˜ï¼‰ï¼Œè¦ä¹ˆåœ¨ <code>newtab</code> çš„ <code>i + n</code> ä½ç½®ã€‚</p>
<blockquote>
<p>å…¶ä¸­ n ä¸º åŸtable çš„é•¿åº¦</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†ï¼šæŠŠ <code>table[i]</code> è¿™ä¸ªæ¡¶ä¸­çš„ <code>node</code> æ‹†åˆ†ä¸ºä¸¤ä¸ªé“¾è¡¨ L1 å’Œ L2ï¼šå¦‚æœ <code>hash &amp; n == 0</code>ï¼Œé‚£ä¹ˆå½“å‰è¿™ä¸ª <code>node</code> è¢«è¿æ¥åˆ° L1 é“¾è¡¨ï¼›å¦åˆ™è¿æ¥åˆ° L2 é“¾è¡¨ã€‚è¿™æ ·ä¸‹æ¥ï¼Œå½“éå†å®Œ <code>table[i]</code> å¤„çš„æ‰€æœ‰ node çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸¤ä¸ªé“¾è¡¨ L1 å’Œ L2ï¼Œè¿™æ—¶æˆ‘ä»¬ä»¤ <code>newtab[i] = L1</code>ï¼Œ<code>newtab[i + n] = L2</code>ï¼Œè¿™å°±å®Œæˆäº† <code>table[i]</code> ä½ç½®æ‰€æœ‰ node çš„è¿ç§»ï¼ˆrehashï¼‰ï¼Œ<strong>è¿™ä¹Ÿæ˜¯ HashMap ä¸­å®¹é‡ä¸€å®šçš„æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚å¸¦æ¥çš„æ–¹ä¾¿ä¹‹å¤„</strong>ã€‚</p>
<blockquote>
<p>å›¾è§£æµç¨‹ï¼šæ‰©å®¹æœºåˆ¶ï¼šhttps://www.cnblogs.com/duodushuduokanbao/p/9492952.html</p>
<p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <strong>2æ¬¡å¹‚</strong> çš„æ‰©å±•(æŒ‡é•¿åº¦æ‰©ä¸ºåŸæ¥2å€)ï¼Œæ‰€ä»¥ï¼Œ<strong>å…ƒç´ çš„ä½ç½®è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨ 2æ¬¡å¹‚ çš„ä½ç½®</strong>ã€‚</p>
<p>çœ‹ä¸‹å›¾å¯ä»¥æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œnä¸ºtableçš„é•¿åº¦ï¼Œå›¾(a)è¡¨ç¤ºæ‰©å®¹å‰çš„ key1 å’Œ key2 ä¸¤ç§ key ç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œå›¾(b)è¡¨ç¤ºæ‰©å®¹å key1 å’Œ key2 ä¸¤ç§ key ç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œå…¶ä¸­ hash1 æ˜¯ key1 å¯¹åº”çš„å“ˆå¸Œä¸é«˜ä½è¿ç®—ç»“æœã€‚</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/HashMapæ‰©å®¹1.png" alt="HashMapæ‰©å®¹1"></p>
<p>å…ƒç´ åœ¨é‡æ–°è®¡ç®— hash ä¹‹åï¼Œå› ä¸º n å˜ä¸º 2 å€ï¼Œé‚£ä¹ˆ n-1 çš„ mask èŒƒå›´åœ¨é«˜ä½å¤š1bit(çº¢è‰²)ï¼Œå› æ­¤æ–°çš„ index å°±ä¼šå‘ç”Ÿè¿™æ ·çš„å˜åŒ–ï¼š</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/HashMapæ‰©å®¹2.png" alt="HashMapæ‰©å®¹2"></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ‰©å…… HashMap çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒ JDK1.7 çš„å®ç°é‚£æ ·é‡æ–°è®¡ç®— hashï¼Œ<strong>åªéœ€è¦çœ‹çœ‹åŸæ¥çš„ hash å€¼æ–°å¢çš„é‚£ä¸ª bit æ˜¯1è¿˜æ˜¯0å°±å¥½äº†</strong>ï¼Œæ˜¯0çš„è¯ç´¢å¼•æ²¡å˜ï¼Œæ˜¯1çš„è¯ç´¢å¼•å˜æˆ<strong>â€œåŸç´¢å¼•+oldCapâ€</strong>ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹å›¾ä¸º16æ‰©å……ä¸º32çš„resizeç¤ºæ„å›¾ï¼š</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/HashMapæ‰©å®¹3.png" alt="HashMapæ‰©å®¹3"></p>
<p>è¿™ä¸ªè®¾è®¡ç¡®å®éå¸¸çš„å·§å¦™ï¼Œæ—¢çœå»äº†é‡æ–°è®¡ç®— hash å€¼çš„æ—¶é—´ï¼Œè€Œä¸”åŒæ—¶ï¼Œç”±äºæ–°å¢çš„1bitæ˜¯0è¿˜æ˜¯1å¯ä»¥è®¤ä¸ºæ˜¯éšæœºçš„ï¼Œå› æ­¤ resize çš„è¿‡ç¨‹ï¼Œå‡åŒ€çš„æŠŠä¹‹å‰çš„å†²çªçš„èŠ‚ç‚¹åˆ†æ•£åˆ°æ–°çš„ bucket äº†ã€‚è¿™ä¸€å—å°±æ˜¯ JDK1.8 æ–°å¢çš„ä¼˜åŒ–ç‚¹ã€‚æœ‰ä¸€ç‚¹æ³¨æ„åŒºåˆ«ï¼ŒJDK1.7ä¸­ rehash çš„æ—¶å€™ï¼Œæ—§é“¾è¡¨è¿ç§»æ–°é“¾è¡¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨æ–°è¡¨çš„æ•°ç»„ç´¢å¼•ä½ç½®ç›¸åŒï¼Œåˆ™é“¾è¡¨å…ƒç´ ä¼šå€’ç½®ï¼Œä½†æ˜¯ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œ<strong>JDK1.8ä¸ä¼šå€’ç½®</strong>ã€‚</p>
</blockquote>
<p><strong>resize æºç </strong>ï¼šè§åšå®¢å†…å®¹å§<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14298141.html">Javaï¼šHashMapç±»å°è®°ï¼šHashMap çš„ resize/æ‰©å®¹-resizeè¯¦è§£ + çº¢é»‘æ ‘æ•°æ®è¿ç§»split</a></p>
<h3 id="hashmap-çš„-size-æ˜¯-2-çš„æ•´æ•°æ¬¡æ–¹">HashMap çš„ size æ˜¯ 2 çš„æ•´æ•°æ¬¡æ–¹ <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>æ€»çš„æ¥è®²ï¼šæ˜¯ä¸ºäº†å°† key çš„ hash å€¼å‡åŒ€çš„åˆ†å¸ƒåœ¨æ•°ç»„çš„ç´¢å¼•ä¸Šï¼Œå‡å°‘å“ˆå¸Œå†²çªçš„å‡ºç°ã€‚</strong></p>
<ol type="1">
<li>è¿™æ ·åšæ€»æ˜¯èƒ½å¤Ÿä¿è¯ HashMap çš„åº•å±‚æ•°ç»„é•¿åº¦ä¸º 2 çš„ n æ¬¡æ–¹ã€‚å½“ length ä¸º 2 çš„ n æ¬¡æ–¹æ—¶ï¼Œ<code>hash(key)&amp;(length-1)</code> å°±ç›¸å½“äºå¯¹ length å–æ¨¡ <code>(hash(key)%length)</code>ï¼Œè€Œä¸”é€Ÿåº¦æ¯”ç›´æ¥å–æ¨¡å¿«å¾—å¤šï¼Œ<strong>è¿™æ˜¯ HashMap åœ¨é€Ÿåº¦ä¸Šçš„ä¸€ä¸ªä¼˜åŒ–</strong>ã€‚</li>
<li>å¦‚æœ length ä¸º 2 çš„æ¬¡å¹‚ï¼Œåˆ™ length - 1 è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å¿…å®šæ˜¯ <code>11111â€¦â€¦</code> çš„å½¢å¼ï¼Œåœ¨ä¸ key çš„hashå€¼è¿›è¡ŒäºŒè¿›åˆ¶è¿›è¡Œä¸æ“ä½œæ—¶æ•ˆç‡ä¼šéå¸¸çš„å¿«ï¼Œè€Œä¸”<strong>ç©ºé—´ä¸æµªè´¹</strong>ã€‚</li>
<li>å¦‚æœ length ä¸æ˜¯ 2 çš„æ¬¡å¹‚ï¼Œæ¯”å¦‚ï¼šlength ä¸º 15ï¼Œåˆ™ length - 1 ä¸º 14ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶ä¸º <code>1110</code>ï¼Œåœ¨äº keyçš„hash ä¸æ“ä½œï¼Œæœ€åä¸€ä½éƒ½ä¸º 0 ï¼Œè€Œ <code>0001ï¼Œ0011ï¼Œ0101ï¼Œ1001ï¼Œ1011ï¼Œ0111ï¼Œ1101</code> è¿™å‡ ä¸ªä½ç½®æ°¸è¿œéƒ½ä¸èƒ½å­˜æ”¾å…ƒç´ äº†ï¼Œ<strong>ç©ºé—´æµªè´¹ç›¸å½“å¤§</strong>ï¼Œæ›´ç³Ÿçš„æ˜¯è¿™ç§æƒ…å†µä¸­ï¼Œæ•°ç»„å¯ä»¥ä½¿ç”¨çš„ä½ç½®æ¯”æ•°ç»„é•¿åº¦å°äº†å¾ˆå¤šï¼Œè¿™æ„å‘³ç€è¿›ä¸€æ­¥å¢åŠ äº†ç¢°æ’çš„å‡ ç‡ï¼Œå‡æ…¢äº†æŸ¥è¯¢çš„æ•ˆç‡ï¼Œè¿™æ ·å°±ä¼šé€ æˆç©ºé—´çš„æµªè´¹ã€‚</li>
<li><strong>ä¾¿äºæ‰©å®¹</strong>ï¼šæ‰©å…… HashMap çš„æ—¶å€™ï¼Œä¸éœ€é‡æ–°è®¡ç®— hashï¼Œåªéœ€è¦çœ‹çœ‹åŸæ¥çš„ hash å€¼æ–°å¢çš„é‚£ä¸ª bit æ˜¯1è¿˜æ˜¯0å°±å¥½äº†ï¼Œæ˜¯0çš„è¯ç´¢å¼•æ²¡å˜ï¼Œæ˜¯1çš„è¯ç´¢å¼•å˜æˆ<strong>â€œåŸç´¢å¼•+oldCapâ€</strong>ï¼Œæ›´ä¸ºå…·ä½“çš„å¯è§ä¸Šä¸€é—®ï¼š<strong>HashMap çš„ resize æ–¹æ³•</strong></li>
</ol>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://blog.csdn.net/zjcjava/article/details/78495416</p>
<p>https://www.cnblogs.com/zhimingxin/p/8609545.html</p>
</blockquote>
<h3 id="hashmap-å¤šçº¿ç¨‹æ­»å¾ªç¯æ•°æ®ä¸¢å¤±é—®é¢˜">HashMap å¤šçº¿ç¨‹æ­»å¾ªç¯+æ•°æ®ä¸¢å¤±é—®é¢˜ <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>JDK7 ä¸‹å­˜åœ¨å¤šçº¿ç¨‹æ­»å¾ªç¯é—®é¢˜ï¼š</strong></p>
<p>ä¸»è¦æ˜¯å¤šçº¿ç¨‹åŒæ—¶ put æ—¶ï¼Œå¦‚æœåŒæ—¶è§¦å‘äº† rehash æ“ä½œï¼Œä¼šå¯¼è‡´ HashMap ä¸­çš„é“¾è¡¨ä¸­å‡ºç° <strong>å¾ªç¯èŠ‚ç‚¹</strong>ï¼Œè¿›è€Œä½¿å¾—åé¢å†æ¬¡ get çš„æ—¶å€™ï¼Œä¼š<strong>æ­»å¾ªç¯</strong>ã€‚</p>
<blockquote>
<p>ä»£ç æ€»ç»“ï¼šåœ¨ resize æ—¶ï¼Œä¼šè¿›å…¥ä¸€ä¸ª transfer å‡½æ•°ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹åœ¨åœ¨è¿›è¡ŒèŠ‚ç‚¹è¿ç§»æ—¶ï¼Œå¤±å»äº† CPU çš„æ§åˆ¶æƒï¼Œè€Œå¯¼è‡´å¦ä¸€ä¸ªçº¿ç¨‹å®Œæˆäº†æ‰©å®¹ï¼Œå†æ¢å¤ä¹‹å‰çš„çº¿ç¨‹æ—¶å°±å¯èƒ½ä¼šå‡ºç°é“¾è¡¨çš„ç¯çŠ¶ç»“æ„ï¼</p>
</blockquote>
<p><strong>è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<p>é€šè¿‡æŸ¥çœ‹ JDK7 <code>put()</code> ã€<code>addEntry()</code>ã€<code>resize()</code>ã€<code>transfer()</code>å‡½æ•°è¯´æ˜æ­»å¾ªç¯å‡ºç°è¿‡ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// HashMapå…è®¸å­˜å‚¨nullé”®ï¼Œå­˜å‚¨åœ¨æ•°ç»„çš„0ç´¢å¼•ä½ç½®</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="comment">// JDK7ä¸­é€šè¿‡ putForNullKey å‡½æ•°æ¥å¤„ç†keyä¸ºnull</span></span><br><span class="line">        <span class="keyword">return</span> putForNullKey(value);</span><br><span class="line">    <span class="comment">// å†…éƒ¨é€šè¿‡ä¸€ä¸ªæ‰°ä¹±ç®—æ³•è·å¾—ä¸€ä¸ªhashå€¼ï¼Œç”¨äºè®¡ç®—æ•°ç»„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">int</span> hash = hash(key);</span><br><span class="line">    <span class="comment">// è®¡ç®—æ•°ç»„ç´¢å¼•ï¼Œæ‰¾åˆ°é‚£ä¸ªhashæ¡¶çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">int</span> i = indexFor(hash, table.length);</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤é”®</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">        Object k;</span><br><span class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    addEntry(hash, key, value, i);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ–°èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…ƒç´ ä¸ªæ•°å¤§äºé˜ˆå€¼ï¼ŒåŒæ—¶å½“å‰ç´¢å¼•ä½æœ‰å€¼ï¼Œå°±ä¼šæ‰§è¡Œæ‰©å®¹æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="keyword">null</span> != table[bucketIndex])) &#123;</span><br><span class="line">        <span class="comment">// 2å€æ‰©å®¹ï¼Œè¿™é‡Œå°±ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ï¼ï¼</span></span><br><span class="line">        resize(<span class="number">2</span> * table.length);</span><br><span class="line">        hash = (<span class="keyword">null</span> != key) ? hash(key) : <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// é‡æ–°è®¡ç®—ç´¢å¼•ä½ç½®</span></span><br><span class="line">        bucketIndex = indexFor(hash, table.length);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// åŸºäºé”®å€¼åˆ›å»ºEntryèŠ‚ç‚¹ï¼Œå¹¶ä»¥å¤´æ’æ³•å­˜å…¥å¯¹åº”ä½ç½®ï¼Œåœ¨æ‰©å®¹ä¹‹åå†æ·»åŠ æ•°æ®</span></span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦ç»è¿‡æ‰©å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> newCapacity)</span> </span>&#123;</span><br><span class="line">    Entry[] oldTable = table;</span><br><span class="line">    <span class="keyword">int</span> oldCapacity = oldTable.length;</span><br><span class="line">    <span class="comment">// è¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œä¸æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</span><br><span class="line">        threshold = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¹æ®æ–°å®¹é‡åˆ›å»ºæ•°ç»„</span></span><br><span class="line">    Entry[] newTable = <span class="keyword">new</span> Entry[newCapacity];</span><br><span class="line">    <span class="keyword">boolean</span> oldAltHashing = useAltHashing;</span><br><span class="line">    useAltHashing |= sun.misc.VM.isBooted() &amp;&amp;</span><br><span class="line">            (newCapacity &gt;= Holder.ALTERNATIVE_HASHING_THRESHOLD);</span><br><span class="line">    <span class="comment">// è®¡ç®—æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—hash</span></span><br><span class="line">    <span class="keyword">boolean</span> rehash = oldAltHashing ^ useAltHashing;</span><br><span class="line">    <span class="comment">// å°†æ—§æ•°ç»„ä¸­çš„å…ƒç´ è¿ç§»åˆ°æ–°çš„æ•°ç»„ä¸­</span></span><br><span class="line">    transfer(newTable, rehash);</span><br><span class="line">    <span class="comment">// ä¿å­˜æ–°æ•°ç»„</span></span><br><span class="line">    table = newTable;</span><br><span class="line">    threshold = (<span class="keyword">int</span>)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// â˜†1ï¼šæ‰©å®¹è¿‡ç¨‹ä¸­å½“ç„¶æ¶‰åŠåˆ°äº†èŠ‚ç‚¹çš„è½¬ç§»æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Entry[] newTable, <span class="keyword">boolean</span> rehash)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> newCapacity = newTable.length;</span><br><span class="line">    <span class="comment">// éå†æ•°æ®çš„æ¯ä¸€ä¸ªè§’æ ‡ä½</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e : table) &#123;</span><br><span class="line">        <span class="comment">// å½“æ•°ç»„å¯¹åº”çš„æ¡¶ä½ç½®ä¸ä¸ºnullï¼Œåˆ™éœ€è¦è¿›è¡Œæ•°æ®è¿ç§»</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">null</span> != e) &#123;</span><br><span class="line">            <span class="comment">// â˜†2ï¼šè®°å½•éå†åˆ°çš„å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            Entry&lt;K,V&gt; next = e.next;</span><br><span class="line">            <span class="keyword">if</span> (rehash) &#123;</span><br><span class="line">                e.hash = <span class="keyword">null</span> == e.key ? <span class="number">0</span> : hash(e.key);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// è®¡ç®—æ–°æ•°ç»„çš„è§’æ ‡ä½ç½®ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼šåœ¨åŸå…ˆä½ç½® / åŸä½ç½®+åŸé•¿åº¦</span></span><br><span class="line">            <span class="keyword">int</span> i = indexFor(e.hash, newCapacity);</span><br><span class="line">            <span class="comment">// â˜†5.æŠŠå½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ”¹ä¸ºæ–°æ•°ç»„å¯¹åº”ä½ç½®çš„å…ƒç´ --å¤´æ’æ³•</span></span><br><span class="line">            e.next = newTable[i];</span><br><span class="line">            <span class="comment">// å°†å½“å‰å…ƒç´ æ”¾ç½®åœ¨æ•°ç»„å¯¹åº”ç´¢å¼•ä½ç½®</span></span><br><span class="line">            newTable[i] = e;</span><br><span class="line">            <span class="comment">// å†æ¬¡è¿ç§»ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            e = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç»“åˆä¸Šè¿°ä»£ç è¿›è¡Œæ–‡å­—+å›¾ç‰‡è¯´æ˜</strong>ï¼š</p>
<ol type="1">
<li><p>å‡å®š thread-1, thread-2 éƒ½è¿›å…¥äº† <code>transfer()</code> å‡½æ•°è¿›è¡Œæ‰©å®¹æ—¶çš„æ•°æ®è¿ç§»å·¥ä½œï¼Œå‡å®šæ­¤æ—¶çš„ table ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯1.PNG" alt="resizeé€ æˆæ­»å¾ªç¯1"></p></li>
<li><p>å½“ thread-1 æ‰§è¡Œå®Œ <code>Entry&lt;K,V&gt; next = e.next;</code>åå¤±å»çš„ CPU çš„ä½¿ç”¨æƒï¼Œç°åœ¨ thread-1 çš„çŠ¶æ€å°±æ˜¯ä¸Šé¢çš„çŠ¶æ€ï¼›</p></li>
<li><p>thread-2 è·å– CPU çš„æ‰§è¡Œæƒï¼Œä¹Ÿè¿›å…¥è¿™é‡Œæ‰§è¡Œï¼Œèµ·å§‹çŠ¶æ€ä¹Ÿæ˜¯ä¸Šå›¾æ‰€ç¤ºï¼›</p></li>
<li><p>thread-2 æ‰§è¡Œåç»­é€»è¾‘å®Œæˆæ‰©å®¹ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼ˆå¤´æ’æ³•ï¼‰ï¼š</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯2.PNG" alt="resizeé€ æˆæ­»å¾ªç¯2"></p></li>
<li><p>thead-1 å†æ¬¡è·å–CPUçš„æ‰§è¡Œæƒï¼Œæ­¤æ—¶ e å’Œ next çš„èŠ‚ç‚¹æŒ‡å‘æ¢å¤ï¼Œç„¶åç»§ç»­åˆ° <code>e.next = newTable[i];</code></p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯3.PNG" alt="resizeé€ æˆæ­»å¾ªç¯3"></p></li>
<li><p>å½“ thread-1 æ‰§è¡Œå®Œ <code>e.next = newTable[i];</code>åå­˜åœ¨å¦‚ä¸‹ç»“æ„ï¼Œå³å­˜åœ¨äº†ç¯çŠ¶ç»“æ„</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/resizeé€ æˆæ­»å¾ªç¯4.PNG" alt="resizeé€ æˆæ­»å¾ªç¯4"></p></li>
</ol>
<p><strong>JDK8 ä¸‹å­˜åœ¨æ•°æ®ä¸¢å¤±é—®é¢˜ï¼š</strong></p>
<p>ä¸è¿‡ï¼ŒJDK 1.8 åè§£å†³äº†å¤šçº¿ç¨‹æ­»å¾ªç¯é—®é¢˜ï¼ˆä¸é€‚ç”¨å¤´æ’æ³•ï¼‰ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å»ºè®®åœ¨å¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ HashMapï¼Œå› ä¸ºå¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ HashMap è¿˜æ˜¯ä¼šå­˜åœ¨å…¶ä»–é—®é¢˜æ¯”å¦‚<strong>æ•°æ®ä¸¢å¤±</strong>ã€‚å¹¶å‘ç¯å¢ƒä¸‹æ¨èä½¿ç”¨ ConcurrentHashMapã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ å…ƒç´ æ—¶ï¼Œä¼šæœ‰æ•°æ®è¦†ç›–ä¸¢å¤±æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="params"><span class="function">               <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">// æ­¤å¤„ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹å‘åŒä¸€ä¸ªä½ç½®å­˜å…¥å…ƒç´ ï¼Œä¼šæœ‰å€¼è¦†ç›–çš„é—®é¢˜ï¼Œå¯¼è‡´æ•°ä¸¢å¤±</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢ä»£ç çœç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// resizeå‡½æ•°ä¸­ï¼šæ‰©å®¹æ—¶ï¼Œè¿ç§»æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä¼šæœ‰æ•°æ®è¦†ç›–ä¸¢å¤±çš„é—®é¢˜</span></span><br><span class="line"><span class="comment">// å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç»™åŒä¸€ä¸ªæ•°ç»„çš„ç›¸åŒä½ç½®èµ‹å€¼ï¼Œä¼šæœ‰æ•°æ®è¦†ç›–çš„é£é™©</span></span><br><span class="line"><span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">    loTail.next = <span class="keyword">null</span>;</span><br><span class="line">    newTab[j] = loHead;  <span class="comment">// å°†åŸå§‹ç´¢å¼•ä½çš„æ•°æ®è¿ç§»åˆ°æ–°æ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">    hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">    newTab[j + oldCap] = hiHead; <span class="comment">// å°†æ–°ç´¢å¼•ä½çš„æ•°æ®è¿ç§»åˆ°æ–°æ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯¦ç»†è¯·é˜…è¯»ä¸ªäººåšå®¢éƒ¨åˆ†ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14298141.html">Javaï¼šHashMapç±»å°è®°ï¼šHashMap å¤šçº¿ç¨‹ä¸‹çš„é—®é¢˜</a></p>
</blockquote>
<h3 id="hashmap-ä¸-hashtable-çš„åŒºåˆ«">HashMap ä¸ HashTable çš„åŒºåˆ« <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<p>HashTable å’Œ HashMap çš„å®ç°åŸç†å‡ ä¹ä¸€æ ·ï¼Œæœ€ä¸»è¦çš„å·®åˆ«æ— éæ˜¯ï¼š</p>
<ol type="1">
<li><p>HashTable ä¸å…è®¸ key å’Œ value ä¸º nullï¼›</p></li>
<li><p><strong>HashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong></p>
<p>ä½†æ˜¯ HashTable çº¿ç¨‹å®‰å…¨çš„ç­–ç•¥å®ç°ä»£ä»·å´å¤ªå¤§äº†ï¼Œç®€å•ç²—æš´ï¼Œ<strong>get/put æ‰€æœ‰ç›¸å…³æ“ä½œéƒ½æ˜¯ synchronized çš„</strong>ï¼Œè¿™ç›¸å½“äºç»™æ•´ä¸ªå“ˆå¸Œè¡¨åŠ äº†ä¸€æŠŠå¤§é”ï¼Œå¤šçº¿ç¨‹è®¿é—®æ—¶å€™ï¼Œåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®æˆ–æ“ä½œè¯¥å¯¹è±¡ï¼Œé‚£å…¶ä»–çº¿ç¨‹åªèƒ½é˜»å¡ï¼Œç›¸å½“äºå°†æ‰€æœ‰çš„æ“ä½œä¸²è¡ŒåŒ–ï¼Œåœ¨ç«äº‰æ¿€çƒˆçš„å¹¶å‘åœºæ™¯ä¸­æ€§èƒ½å°±ä¼šéå¸¸å·®ã€‚</p></li>
</ol>
<p><strong>ç›¸åŒç‚¹ï¼š</strong></p>
<ol type="1">
<li>éƒ½å¯ä»¥ç”¨æ¥å­˜å‚¨é”®å€¼å¯¹</li>
<li>åº•å±‚å“ˆå¸Œè¡¨ç»“æ„æŸ¥è¯¢é€Ÿåº¦éƒ½å¾ˆå¿«</li>
<li>å†…éƒ¨é€šè¿‡å•é“¾è¡¨è§£å†³å†²çªé—®é¢˜ï¼Œå®¹é‡ä¸è¶³ä¼šè‡ªåŠ¨å¢åŠ </li>
<li>éƒ½å®ç°äº† Map æ¥å£</li>
<li>éƒ½å®ç°äº† Serializable æ¥å£ï¼Œæ”¯æŒåºåˆ—åŒ–</li>
<li>å®ç°äº† Cloneable æ¥å£ï¼Œå¯ä»¥è¢«å…‹éš†</li>
</ol>
<p><strong>ä¸åŒç‚¹ï¼š</strong></p>
<ol type="1">
<li><p>ç»§æ‰¿ä½“ç³»ï¼š<strong>HashTable åŸºäº Dictionary ç±»</strong>ï¼Œè€Œ <strong>HashMap æ˜¯åŸºäº AbstractMap</strong>ã€‚</p>
<p>Dictionary æ˜¯ä»»ä½•å¯å°†é”®æ˜ å°„åˆ°ç›¸åº”å€¼çš„ç±»çš„æŠ½è±¡çˆ¶ç±»ï¼›è€Œ AbstractMap æ˜¯åŸºäº Map æ¥å£çš„å®ç°ï¼Œå®ƒä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å®ç°æ­¤æ¥å£æ‰€éœ€çš„å·¥ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************åˆ†å‰²çº¿**************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hashtable</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">Dictionary</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Dictionary</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ®è¯´è¿™æ˜¯å› ä¸ºï¼šå†å²åŸå› </p>
</blockquote></li>
<li><p><strong>çº¿ç¨‹å®‰å…¨ä¸ä¸€æ ·ï¼š</strong>Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ HashMap ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>Collections.synchronizedMap(hashMap)</code>ï¼Œä½¿å…¶å®ç°åŒæ­¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯Hashtableçš„put()æ–¹æ³•:synchronizedåŠ é”äº†</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> V <span class="title">put</span><span class="params">(K key, V value)</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯HashMapçš„put()æ–¹æ³•:æ²¡ç”¨é€šè¿‡synchronizedåŠ é”</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>HashMap çš„ key å’Œ value éƒ½å…è®¸ä¸º nullï¼Œè€Œ Hashtable çš„ key å’Œ value éƒ½ä¸å…è®¸ä¸º nullã€‚</strong></p>
<p>HashMap é‡åˆ° key ä¸º null çš„æ—¶å€™ï¼Œåœ¨ hash å‡½æ•°ä¸­åšäº†å¯¹åº”çš„åˆ¤æ–­ï¼Œå°† null ä¿®æ”¹ä¸º 0ï¼Œè€Œå¯¹ value æ²¡æœ‰å¤„ç†ï¼›</p>
<p>Hashtable é‡åˆ° nullï¼Œç›´æ¥è¿”å› <code>NullPointerException</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HashMapåœ¨putå€¼æ—¶ï¼Œåœ¨è®¡ç®—keyçš„hashå€¼æ—¶æœ‰nullçš„åˆ¤æ–­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ hash(key)æ–¹æ³•ä¸­ï¼šå¯¹äºnullåšäº†ç‰¹æ®Šçš„å¤„ç†</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************åˆ†å‰²çº¿**************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Hashtable</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Make sure the value is not null </span></span><br><span class="line">    <span class="comment">// 1.å€¼ä¸ºnullç›´æ¥æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Makes sure the key is not already in the hashtable.</span></span><br><span class="line">    Entry&lt;?,?&gt; tab[] = table;</span><br><span class="line">    <span class="comment">// ç”±äºkeyæ˜¯nullï¼Œnullå½“ç„¶æ˜¯æ²¡æœ‰hashCode()è¿™ç§æ–¹æ³•çš„</span></span><br><span class="line">    <span class="comment">// å› æ­¤ä¸Šè¿°éœ€è¦ç›´æ¥æŠ›å‡ºå¼‚å¸¸NullPointerException</span></span><br><span class="line">    <span class="keyword">int</span> hash = key.hashCode();  </span><br><span class="line">    <span class="keyword">int</span> index = (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line">    <span class="comment">// ....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤å¯ä»¥å¾—å‡ºï¼š<strong>HashMap çš„ get æ–¹æ³•ä¸èƒ½å¦åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨ map ä¸­</strong>ï¼Œå› ä¸º get è¿”å› null æœ‰å¯èƒ½æ˜¯ä¸åŒ…å«è¯¥ keyï¼Œä¹Ÿæœ‰å¯èƒ½è¯¥ key å¯¹åº”çš„ value ä¸º nullã€‚<strong>å› ä¸º HashMap ä¸­å…è®¸ key ä¸º nullï¼Œä¹Ÿå…è®¸ value ä¸º nullã€‚</strong></p></li>
<li><p><strong>éå†æ–¹å¼çš„å†…éƒ¨å®ç°ä¸Šä¸åŒ</strong>ï¼šHashMap ä½¿ç”¨ Iterator éå†ï¼ŒHashTable ä½¿ç”¨ Enumeration éå†ï¼›</p>
<blockquote>
<p>æ®è¯´è¿™ä¹Ÿæ˜¯å› ä¸ºï¼šå†å²åŸå› </p>
</blockquote></li>
<li><p>HashMap å’Œ HashTable çš„<strong>åˆå§‹åŒ–æ–¹å¼</strong>å’Œ<strong>æ‰©å®¹æ–¹å¼</strong>ä¸åŒ</p>
<p>HashMapï¼šåœ¨æ„é€ å‡½æ•°ä¸­<strong>ä¸åˆ›å»ºæ•°ç»„</strong>ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡ put æ—¶æ‰åˆ›å»ºï¼Œä¸”åˆå§‹å¤§å°ä¸º16ï¼›ä¹‹åæ¯æ¬¡æ‰©å……å®¹é‡ä¸ºåŸæ¥çš„ä¸¤å€ï¼›</p>
<p><strong>HashTableï¼šåœ¨æ„é€ å‡½æ•°ç›´æ¥åˆ›å»ºhashtableï¼Œä¸”å…¶åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……2n+1</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hashmapåˆå§‹åŒ–:HashMap hashMap = new HashMap();</span></span><br><span class="line"><span class="comment">// é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…ˆä¸åˆ›å»ºï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†åˆ›å»º</span></span><br><span class="line">    <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">    <span class="comment">// å…¶ä¸­ï¼šDEFAULT_LOAD_FACTOR = 0.75f;</span></span><br><span class="line">    <span class="comment">// DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ–¹æ³•ï¼špublic HashMap(int initialCapacity, float loadFactor)&#123;&#125;</span></span><br><span class="line">    <span class="comment">// ä¸Šè¿°æ–¹æ³•å¹¶ä¸åˆ›å»ºçœŸæ­£çš„æ•°ç»„ï¼Œè€Œæ˜¯ç­‰åˆ°ç¬¬ä¸€æ¬¡putæ—¶æ‰é€šè¿‡resizeå»åˆ›å»º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************åˆ†å‰²çº¿**************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// hashtableåˆå§‹åŒ–:Hashtable hashtable = new Hashtable();</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Hashtable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ç›´æ¥åˆ›å»ºhashtable</span></span><br><span class="line">    <span class="keyword">this</span>(<span class="number">11</span>, <span class="number">0.75f</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Hashtable</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal Capacity: &quot;</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal Load: &quot;</span>+loadFactor);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity==<span class="number">0</span>)</span><br><span class="line">        initialCapacity = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="comment">// å§‹åŒ–tableï¼Œè·å¾—å¤§å°ä¸ºinitialCapacityçš„tableæ•°ç»„</span></span><br><span class="line">    table = <span class="keyword">new</span> Entry&lt;?,?&gt;[initialCapacity];</span><br><span class="line">    <span class="comment">// è®¡ç®—é˜€å€¼</span></span><br><span class="line">    threshold = (<span class="keyword">int</span>)Math.min(initialCapacity * loadFactor, MAX_ARRAY_SIZE + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hastableæ‰©å®¹åˆ†æï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Make sure the value is not null</span></span><br><span class="line">    <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­valueæ˜¯å¦ä¸ºnull</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Makes sure the key is not already in the hashtable.</span></span><br><span class="line">    Entry&lt;?,?&gt; tab[] = table;</span><br><span class="line">    <span class="comment">// keyè‹¥ä¸ºnullä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">int</span> hash = key.hashCode();</span><br><span class="line">    <span class="comment">// è®¡ç®—keyåœ¨hashè¡¨ä¸­çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">int</span> index = (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index];</span><br><span class="line">    <span class="comment">// entryä¸ºnullï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰åœ¨hashè¡¨ä¸­æ·»åŠ è¿‡å…ƒç´ ï¼Œéœ€è¦å»æ·»åŠ </span></span><br><span class="line">    <span class="comment">// entryä¸ä¸ºnullï¼Œè¡¨ç¤ºå‘ç”Ÿäº†hashå†²çªï¼Œåˆ™éå†é“¾è¡¨æ‰¾åˆ°æ’å…¥çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span>(; entry != <span class="keyword">null</span> ; entry = entry.next) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123;</span><br><span class="line">            <span class="comment">// keyå·²ç»å­˜åœ¨äº†ï¼Œåˆ™æ›¿æ¢ä¸€ä¸‹valueï¼Œç„¶åè¿”å›oldvalue</span></span><br><span class="line">            V old = entry.value;</span><br><span class="line">            entry.value = value;</span><br><span class="line">            <span class="keyword">return</span> old;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ ï¼Œè§ä¸‹é¢</span></span><br><span class="line">    addEntry(hash, key, value, index);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    Entry&lt;?,?&gt; tab[] = table;</span><br><span class="line">    <span class="comment">// å¯¹å®¹é‡è¿›è¡Œæ£€éªŒï¼Œè‹¥å¤§äºé˜ˆå€¼ï¼Œåˆ™éœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œè§ä¸‹é¢</span></span><br><span class="line">    <span class="keyword">if</span> (count &gt;= threshold) &#123;</span><br><span class="line">        <span class="comment">// Rehash the table if the threshold is exceeded</span></span><br><span class="line">        rehash();</span><br><span class="line"></span><br><span class="line">        tab = table;</span><br><span class="line">        hash = key.hashCode();</span><br><span class="line">        index = (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// Creates the new entry.</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) tab[index];</span><br><span class="line">    tab[index] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    count++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// rehashï¼Œæ‰©å®¹æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">rehash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> oldCapacity = table.length;</span><br><span class="line">    Entry&lt;?,?&gt;[] oldMap = table;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œï¼šæ–°å®¹é‡=æ—§å®¹é‡ * 2 + 1</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = (oldCapacity &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (oldCapacity == MAX_ARRAY_SIZE)</span><br><span class="line">            <span class="comment">// Keep running with MAX_ARRAY_SIZE buckets</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        newCapacity = MAX_ARRAY_SIZE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªsize = newCapacity çš„HashTable</span></span><br><span class="line">    Entry&lt;?,?&gt;[] newMap = <span class="keyword">new</span> Entry&lt;?,?&gt;[newCapacity];</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// é‡æ–°è®¡ç®—é˜€å€¼</span></span><br><span class="line">    threshold = (<span class="keyword">int</span>)Math.min(newCapacity * loadFactor, MAX_ARRAY_SIZE + <span class="number">1</span>);</span><br><span class="line">    table = newMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = oldCapacity ; i-- &gt; <span class="number">0</span> ;) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;K,V&gt; old = (Entry&lt;K,V&gt;)oldMap[i] ; old != <span class="keyword">null</span> ; ) &#123;</span><br><span class="line">            Entry&lt;K,V&gt; e = old;</span><br><span class="line">            old = old.next;</span><br><span class="line">            <span class="keyword">int</span> index = (e.hash &amp; <span class="number">0x7FFFFFFF</span>) % newCapacity;</span><br><span class="line">            e.next = (Entry&lt;K,V&gt;)newMap[index];</span><br><span class="line">            newMap[index] = e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://blog.csdn.net/u010983881/article/details/49762595</p>
<p>https://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="hashtable-ä¸-concurrenthashmap-çš„åŒºåˆ«">HashTable ä¸ ConcurrentHashMap çš„åŒºåˆ« <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>HashTable å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼š</strong></p>
<blockquote>
<p>è¿™é‡Œæ˜¯æŒ‰ç…§ JDK7 å¯¹ ConcurrentHashMap è¿›è¡Œäº†åˆ†æï¼Œåç»­åœ¨å…³äº ConcurrentHashMap åˆ†æä¸­ï¼Œä¼šæåˆ° JDK8 çš„ä¼˜åŒ–</p>
</blockquote>
<p>HashTable å’Œ ConcurrentHashMap ç›¸æ¯”ï¼Œ<strong>æ•ˆç‡ä½</strong>ã€‚ Hashtable ä¹‹æ‰€ä»¥æ•ˆç‡ä½ä¸»è¦æ˜¯ä½¿ç”¨äº† synchronized å…³é”®å­—å¯¹ put ç­‰æ“ä½œè¿›è¡ŒåŠ é”ï¼Œè€Œ synchronized å…³é”®å­—åŠ é”æ˜¯å¯¹æ•´å¼  Hash è¡¨çš„ï¼Œå³æ¯æ¬¡é”ä½æ•´å¼ è¡¨è®©çº¿ç¨‹<strong>ç‹¬å </strong>ï¼Œè‡´ä½¿æ•ˆç‡ä½ä¸‹ï¼›</p>
<p>è€Œ ConcurrentHashMap é‡‡ç”¨<strong>é”åˆ†æ®µæŠ€æœ¯</strong>ï¼Œå°†æ•´ä¸ª Hash æ¡¶è¿›è¡Œäº†åˆ†æ®µ Segmentï¼Œä¹Ÿå°±æ˜¯å°†è¿™ä¸ªå¤§çš„æ•°ç»„åˆ†æˆäº†å‡ ä¸ªå°çš„ç‰‡æ®µ Segmentï¼Œè€Œæ¯ä¸ªå°çš„ç‰‡æ®µ Segment ä¸Šé¢éƒ½æœ‰é”å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™å°±éœ€è¦å…ˆæ‰¾åˆ°åº”è¯¥æ’å…¥åˆ°å“ªä¸€ä¸ªç‰‡æ®µ Segment ï¼Œç„¶åå¯¹è¯¥ Segment åŠ é”å³å¯ï¼Œè¿™æ ·åšæ˜æ˜¾å‡å°äº†é”çš„ç²’åº¦ï¼Œå› æ­¤ï¼Œ ConcurrentHashMap åœ¨å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ä¸­å¯ä»¥å®ç°å¤šçº¿ç¨‹ put æ“ä½œã€‚</p>
<p><img src="/2021/07/04/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A4-%E9%9B%86%E5%90%88%E7%B1%BB/ConcurrentHashMapåˆ†æ®µé”.JPG" alt="ConcurrentHashMapåˆ†æ®µé”"></p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>ConcurrentHashMap çš„å‡ºç°ä¹Ÿæ„å‘³ç€ HashTable çš„è½å¹•ï¼Œæ‰€ä»¥åœ¨ä»¥åçš„é¡¹ç›®ä¸­ï¼Œå°½é‡å°‘ç”¨ HashTableï¼›</p>
<p>å¯¹äºæ™®é€šåœºæ™¯å¯ä»¥ä½¿ç”¨ HashMap å®ç°ï¼Œå¦‚æœæ˜¯é«˜å¹¶å‘åœºæ™¯å»ºè®®ä½¿ç”¨ ConcurrentHashMap å®ç°</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
<p>http://www.apgblogs.com/hashmap-hashtable-concurrenthashmap/</p>
</blockquote>
<h3 id="concurrenthashmap-çš„å®ç°åŸç†">ConcurrentHashMap çš„å®ç°åŸç† <span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span><span class="emoji" data-emoji="exclamation">â—</span></h3>
<blockquote>
<p>è¿™é‡Œä»…è¿›è¡Œä¸€ä¸ªç®€å•çš„è¯´æ˜ï¼Œå¦‚éœ€è¯¦ç»†äº†è§£ï¼šè§åšå®¢</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14758479.html">Javaï¼šConcurrentHashMapç±»å°è®°-2(JDK7)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14758491.html">Javaï¼šConcurrentHashMapç±»å°è®°-3(JDK8)</a></li>
</ul>
</blockquote>
<p><strong>æ•°æ®ç»“æ„</strong>ï¼š</p>
<ul>
<li><p>JDK 7ï¼šä¸­ ConcurrentHashMap é‡‡ç”¨äº† <strong>æ•°ç»„ + Segment + åˆ†æ®µé”</strong> çš„æ–¹å¼å®ç°ã€‚</p></li>
<li><p>JDK 8ï¼šä¸­ ConcurrentHashMap å‚è€ƒäº† JDK 8 HashMap çš„å®ç°ï¼Œé‡‡ç”¨äº† <strong>æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘</strong> çš„å®ç°æ–¹å¼æ¥è®¾è®¡ï¼Œ<strong>å†…éƒ¨å¤§é‡é‡‡ç”¨ CAS æ“ä½œ</strong>ã€‚</p></li>
</ul>
<p><strong>å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼š</strong></p>
<ul>
<li><p><strong>JDK 7ï¼š</strong></p>
<p>ConcurrentHashMap é‡‡ç”¨äº†éå¸¸ç²¾å¦™çš„&quot;<strong>åˆ†æ®µé”&quot;ç­–ç•¥</strong>ï¼ŒConcurrentHashMap çš„ä¸»å¹²æ˜¯ä¸ª Segment æ•°ç»„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Segment&lt;K,V&gt;[]  segments;</span><br></pre></td></tr></table></figure>
<p>Segment ç»§æ‰¿äº† <strong>ReentrantLock</strong>ï¼Œæ‰€ä»¥å®ƒå°±æ˜¯ä¸€ç§å¯é‡å…¥é”ï¼ˆReentrantLock)ã€‚åœ¨ ConcurrentHashMapï¼Œä¸€ä¸ª Segment å°±æ˜¯ä¸€ä¸ªå­å“ˆå¸Œè¡¨ï¼Œ<strong>Segment é‡Œç»´æŠ¤äº†ä¸€ä¸ª HashEntry æ•°ç»„</strong>ï¼Œå¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¯¹äºä¸åŒ Segment çš„æ•°æ®è¿›è¡Œæ“ä½œæ˜¯ä¸ç”¨è€ƒè™‘é”ç«äº‰çš„ã€‚å°±æŒ‰é»˜è®¤çš„ ConcurrentLevel ä¸º 16 æ¥è®²ï¼Œç†è®ºä¸Šå°±å…è®¸ 16 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</p>
<p>æ‰€ä»¥ï¼Œå¯¹äºåŒä¸€ä¸ª Segment çš„æ“ä½œæ‰éœ€è€ƒè™‘çº¿ç¨‹åŒæ­¥ï¼Œä¸åŒçš„ Segment åˆ™æ— éœ€è€ƒè™‘ã€‚Segment ç±»ä¼¼äº HashMapï¼Œä¸€ä¸ª Segment ç»´æŠ¤ç€ä¸€ä¸ªHashEntry æ•°ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> <span class="keyword">volatile</span> HashEntry&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure>
<p>HashEntry æ˜¯ç›®å‰æˆ‘ä»¬æåˆ°çš„æœ€å°çš„é€»è¾‘å¤„ç†å•å…ƒäº†ã€‚<strong>ä¸€ä¸ª ConcurrentHashMap ç»´æŠ¤ä¸€ä¸ª Segment æ•°ç»„ï¼Œä¸€ä¸ª Segment ç»´æŠ¤ä¸€ä¸ª HashEntry æ•°ç»„ã€‚</strong>å› æ­¤ï¼ŒConcurrentHashMap å®šä½ä¸€ä¸ªå…ƒç´ çš„è¿‡ç¨‹éœ€è¦è¿›è¡Œä¸¤æ¬¡ Hash æ“ä½œã€‚ç¬¬ä¸€æ¬¡ Hash å®šä½åˆ° Segmentï¼Œç¬¬äºŒæ¬¡ Hash å®šä½åˆ°å…ƒç´ æ‰€åœ¨çš„é“¾è¡¨çš„å¤´éƒ¨ã€‚</p></li>
<li><p><strong>JDK8 ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰€æœ‰æ•°æ®éƒ½å­˜åœ¨tableä¸­, åªæœ‰å½“ç¬¬ä¸€æ¬¡æ’å…¥æ—¶æ‰ä¼šè¢«åŠ è½½ï¼Œæ‰©å®¹æ—¶æ€»æ˜¯ä»¥2çš„å€æ•°è¿›è¡Œ</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">volatile</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"><span class="comment">// åœ¨æ‰©å®¹æ—¶å­˜æ”¾å˜é‡ï¼Œç»“æŸåç½®ä¸ºnull</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> Node&lt;K,V&gt;[] nextTable;</span><br><span class="line"><span class="comment">// ä»¥volatileä¿®é¥°çš„sizeCtlç”¨äºæ•°ç»„åˆå§‹åŒ–ä¸æ‰©å®¹æ§åˆ¶</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">int</span> sizeCtl;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol type="1">
<li><p>JDK1.8 å–æ¶ˆäº† segment æ•°ç»„ï¼Œ<strong>ç›´æ¥ç”¨ table ä¿å­˜æ•°æ®ï¼Œé”çš„ç²’åº¦æ›´å°</strong>ï¼Œå‡å°‘å¹¶å‘å†²çªçš„æ¦‚ç‡ã€‚</p></li>
<li>JDK1.8 å­˜å‚¨æ•°æ®æ—¶é‡‡ç”¨äº†<strong>é“¾è¡¨+çº¢é»‘æ ‘</strong>çš„å½¢å¼ï¼Œçº¯é“¾è¡¨çš„å½¢å¼æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œçº¢é»‘æ ‘åˆ™ä¸º O(logn)ï¼Œæ€§èƒ½æå‡å¾ˆå¤§ã€‚</li>
<li>JDK1.8 çš„å®ç°é™ä½é”çš„ç²’åº¦ï¼ŒJDK1.7ç‰ˆæœ¬é”çš„ç²’åº¦æ˜¯<strong>åŸºäºSegmentçš„ï¼ŒåŒ…å«å¤šä¸ª HashEntry</strong>ï¼Œè€ŒJDK1.8é”çš„ç²’åº¦<strong>å°±æ˜¯HashEntryï¼ˆé¦–èŠ‚ç‚¹ï¼‰</strong></li>
<li>JDK1.8 ç‰ˆæœ¬çš„æ•°æ®ç»“æ„å˜å¾—æ›´åŠ ç®€å•ï¼Œä½¿å¾—æ“ä½œä¹Ÿæ›´åŠ æ¸…æ™°æµç•…ï¼Œ<strong>å› ä¸ºå·²ç»ä½¿ç”¨ synchronized æ¥è¿›è¡ŒåŒæ­¥</strong>ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ†æ®µé”çš„æ¦‚å¿µï¼Œä¹Ÿå°±ä¸éœ€è¦ Segment è¿™ç§æ•°æ®ç»“æ„äº†ï¼Œç”±äºç²’åº¦çš„é™ä½ï¼Œå®ç°çš„å¤æ‚åº¦ä¹Ÿå¢åŠ äº†</li>
<li><p><strong>JDK1.8 ä¸ºä»€ä¹ˆä½¿ç”¨å†…ç½®é”synchronizedæ¥ä»£æ›¿é‡å…¥é”ReentrantLockï¼Œæˆ‘è§‰å¾—æœ‰ä»¥ä¸‹å‡ ç‚¹</strong></p>
<ol type="1">
<li>å› ä¸ºç²’åº¦é™ä½äº†ï¼Œåœ¨ç›¸å¯¹è€Œè¨€çš„ä½ç²’åº¦åŠ é”æ–¹å¼ï¼Œsynchronizedå¹¶ä¸æ¯”ReentrantLockå·®ï¼Œåœ¨ç²—ç²’åº¦åŠ é”ä¸­ReentrantLockå¯èƒ½é€šè¿‡Conditionæ¥æ§åˆ¶å„ä¸ªä½ç²’åº¦çš„è¾¹ç•Œï¼Œæ›´åŠ çš„çµæ´»ï¼Œè€Œåœ¨ä½ç²’åº¦ä¸­ï¼ŒConditionçš„ä¼˜åŠ¿å°±æ²¡æœ‰äº†</li>
</ol>
<pre><code>2. JVMçš„å¼€å‘å›¢é˜Ÿä»æ¥éƒ½æ²¡æœ‰æ”¾å¼ƒsynchronizedï¼Œè€Œä¸”åŸºäºJVMçš„synchronizedä¼˜åŒ–ç©ºé—´æ›´å¤§ï¼Œä½¿ç”¨å†…åµŒçš„å…³é”®å­—æ¯”ä½¿ç”¨APIæ›´åŠ è‡ªç„¶
3. åœ¨å¤§é‡çš„æ•°æ®æ“ä½œä¸‹ï¼Œå¯¹äºJVMçš„å†…å­˜å‹åŠ›ï¼ŒåŸºäºAPIçš„ReentrantLockä¼šå¼€é”€æ›´å¤šçš„å†…å­˜ï¼Œè™½ç„¶ä¸æ˜¯ç“¶é¢ˆï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªé€‰æ‹©ä¾æ®</code></pre></li>
</ol>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼šhttps://www.cnblogs.com/chengxiao/p/6842045.html</p>
</blockquote>
<h3 id="linkedhashmap-çš„å®ç°åŸç†">LinkedHashMap çš„å®ç°åŸç†</h3>
<blockquote>
<p>æ›´å¤šå†…å®¹è§åšæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14447418.html">Javaï¼šLinkedHashMapç±»å°è®°</a></p>
</blockquote>
<p>LinkedHashMap ä¹Ÿæ˜¯åŸºäº HashMap å®ç°çš„ï¼Œä¸åŒçš„æ˜¯å®ƒå®šä¹‰äº†ä¸€ä¸ª <strong>Entry head, tail</strong>ï¼Œè¿™ä¸ª head, tail ä¸æ˜¯æ”¾åœ¨ Table é‡Œï¼Œå®ƒæ˜¯é¢å¤–ç‹¬ç«‹å‡ºæ¥çš„ã€‚</p>
<p>LinkedHashMap ä¸­çš„é™æ€å†…éƒ¨ç±» Entry ç±»é€šè¿‡ç»§æ‰¿ hashMap ä¸­çš„ Nodeï¼Œå¹¶æ·»åŠ ä¸¤ä¸ªå±æ€§ <strong>Entry beforeï¼ŒEntry after</strong> å¹¶ç»“åˆ headï¼Œtail ç»„æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæ¥å®ç°æŒ‰<strong>æ’å…¥é¡ºåº</strong>æˆ–<strong>è®¿é—®é¡ºåº</strong>æ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// LinkedHashMapå®ç°äº†é™æ€å†…éƒ¨ç±»Entryï¼Œç»§æ‰¿äº†HashMap.Nodeï¼Œ</span></span><br><span class="line">    <span class="comment">// åŒæ—¶å®šä¹‰äº†before, afterä¸¤ä¸ªå±æ€§</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">HashMap</span>.<span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        Entry&lt;K,V&gt; before, after;</span><br><span class="line">        Entry(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="keyword">super</span>(hash, key, value, next);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// é“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œè¡¨ç¤ºæœ€è€çš„é‚£ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">transient</span> LinkedHashMap.Entry&lt;K,V&gt; head;</span><br><span class="line">	<span class="comment">// é“¾è¡¨çš„å°¾èŠ‚ç‚¹ï¼Œè¡¨ç¤ºæœ€æ–°æ’å…¥çš„é‚£ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">transient</span> LinkedHashMap.Entry&lt;K,V&gt; tail;</span><br><span class="line">	<span class="comment">// é“¾è¡¨çš„éå†é¡ºåºï¼š</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">boolean</span> accessOrder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å› æ­¤ï¼ŒLinkedHashMap å…¶å®å°±æ˜¯å¯ä»¥çœ‹æˆ HashMap çš„åŸºç¡€ä¸Šï¼Œå¤šäº†ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥ç»´æŒé¡ºåºã€‚</strong></p>
<p>å…¶ä¸­ï¼ŒLinkedHashMap å®šä¹‰äº†æ’åºæ¨¡å¼ accessOrderï¼Œè¯¥å±æ€§ä¸º boolean å‹å˜é‡ï¼Œ</p>
<ul>
<li>å¯¹äº<strong>è®¿é—®é¡ºåº</strong>ï¼Œä¸º trueï¼ŒæŒ‰è®¿é—®é¡ºåºæ’åºï¼Œå³æ¯å½“è®¿é—®ä¸€æ¬¡å…ƒç´ ï¼Œè¯¥å…ƒç´ å°±ä¼šè¢«ç§»åŠ¨é“¾è¡¨çš„æœ€åé¢</li>
<li>å¯¹äº<strong>æ’å…¥é¡ºåº</strong>ï¼Œåˆ™ä¸º falseï¼Œå³æŒ‰ç…§æ’å…¥å…ƒç´ çš„é¡ºåºè¿›è¡Œæ’åºï¼›</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å¿…æŒ‡å®šæ’åºæ¨¡å¼ï¼Œå…¶è¿­ä»£é¡ºåºå³ä¸ºé»˜è®¤ä¸ºæ’å…¥é¡ºåºã€‚</p>
<blockquote>
<p>æ¨èé˜…è¯»ï¼šhttps://www.jianshu.com/p/8f4f58b4b8ab</p>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="treemap-å®ç°åŸç†">TreeMap å®ç°åŸç†</h3>
<blockquote>
<p>è§ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuchengchao/p/14448137.html">Javaï¼šTreeMapç±»å°è®°</a></p>
</blockquote>
<p>TreeMap çš„å®ç°å°±æ˜¯<strong>çº¢é»‘æ ‘æ•°æ®ç»“æ„</strong>ï¼Œä¹Ÿå°±è¯´æ˜¯ä¸€æ£µè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å½“éœ€è¦å¿«é€Ÿæ£€ç´¢æŒ‡å®šèŠ‚ç‚¹ï¼›</p>
<p>TreeMap ä¸­çš„æ¯ä¸ª Entry éƒ½è¢«å½“æˆâ€œçº¢é»‘æ ‘â€çš„ä¸€ä¸ªèŠ‚ç‚¹å¯¹å¾…ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¢é»‘æ ‘èŠ‚ç‚¹å®šä¹‰</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K,V&gt; left;  <span class="comment">// å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line">    Entry&lt;K,V&gt; right; <span class="comment">// å½“å‰èŠ‚ç‚¹çš„å³å­æ ‘</span></span><br><span class="line">    Entry&lt;K,V&gt; parent;  <span class="comment">// å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">boolean</span> color = BLACK;  <span class="comment">// çº¢/é»‘</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ... çœç•¥ä¸€ä¸‹æ„é€ æ–¹æ³•/get/setæ–¹æ³•</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">// åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// è®¡ç®—Entryçš„hashå€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> keyHash = (key==<span class="keyword">null</span> ? <span class="number">0</span> : key.hashCode());</span><br><span class="line">        <span class="keyword">int</span> valueHash = (value==<span class="keyword">null</span> ? <span class="number">0</span> : value.hashCode());</span><br><span class="line">        <span class="keyword">return</span> keyHash ^ valueHash;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://blog.csdn.net/jtcode_is_my_partner/article/details/81408392</p>
<p>https://zhuanlan.zhihu.com/p/157315716</p>
</blockquote>
<h3 id="set-setå®ç°åŸç†">Set &amp; Setå®ç°åŸç†</h3>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>é¦–å…ˆï¼ŒSeté›†åˆä¸åŒ…å«é‡å¤å…ƒç´ ï¼Œ<strong>éƒ½å…·æœ‰å”¯ä¸€æ€§</strong>ï¼›</li>
<li>å½“æ— æ’åºè¦æ±‚å¯ä»¥é€‰ç”¨ HashSetï¼›</li>
<li>è‹¥æƒ³å–å‡ºå…ƒç´ çš„é¡ºåºå’Œæ”¾å…¥å…ƒç´ çš„é¡ºåºç›¸åŒï¼Œé‚£ä¹ˆå¯ä»¥é€‰ç”¨ LinkedHashSetï¼›</li>
<li>è‹¥æƒ³æ’å…¥ã€åˆ é™¤ç«‹å³æ’åºæˆ–è€…æŒ‰ç…§ä¸€å®šè§„åˆ™æ’åºå¯ä»¥é€‰ç”¨ TreeSetã€‚</li>
</ul>
<p><strong>Setæ¥å£çš„ç‰¹æ€§ï¼š</strong></p>
<p>Set æ¥å£ç»§æ‰¿äº† Collection æ¥å£ï¼ŒSet é›†åˆä¸­ä¸èƒ½åŒ…å«é‡å¤çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä½ åªè¦å°†å…ƒç´ åŠ å…¥ Set ä¸­ï¼Œé‡å¤çš„å…ƒç´ ä¼šè‡ªåŠ¨ç§»é™¤ã€‚</p>
<p>å¸¸ç”¨çš„ Set æœ‰ï¼šHashSetã€LinkedHashSet ã€TreeSet</p>
<p><strong>HashSetç‰¹ç‚¹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><p>HashSet ä¸­ä¸èƒ½æœ‰ç›¸åŒçš„å…ƒç´ ï¼Œä½†<strong>å¯ä»¥æœ‰ null å…ƒç´ </strong>ï¼Œå³å…ƒç´ å…·æœ‰å”¯ä¸€æ€§ï¼›</p>
<p>ä¸”å…¶åº•å±‚é‡‡ç”¨çš„è¿˜æ˜¯ HashMapï¼Œå¯¹äºputå…ƒç´ ï¼Œå…¶é‡‡ç”¨çš„æ–¹å¼ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HashSet çš„å€¼éƒ½æ˜¯å­˜å‚¨åœ¨ HashMap ä¸­çš„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// HashSet çš„æ„é€ æ³•ä¸­ä¼šåˆå§‹åŒ–ä¸€ä¸ªHashMapå¯¹è±¡ï¼Œ</span></span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// HashSetçš„å€¼æ˜¯ä½œä¸ºHashMapçš„keyå­˜å‚¨åœ¨HashMap ä¸­çš„</span></span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;  <span class="comment">// å½“å­˜å‚¨çš„å€¼å·²ç»å­˜åœ¨æ—¶è¿”å› false</span></span><br><span class="line">    <span class="comment">// private static final Object PRESENT = new Object();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å­˜å…¥ HashSet çš„å…ƒç´ æ˜¯æ— åºçš„ï¼›</p></li>
<li><p>æ·»åŠ ã€åˆ é™¤å…ƒç´ çš„æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½ä¸º O(1)ï¼Œå› ä¸ºå…¶æ˜¯åŸºäºHashMapè¿›è¡Œçš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.size();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.isEmpty();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ....</span></span><br></pre></td></tr></table></figure></li>
<li><p>éçº¿ç¨‹å®‰å…¨</p></li>
</ol>
<p><strong>LinkedHashSetç‰¹ç‚¹ï¼š</strong></p>
<ol type="1">
<li><p>å¯¹äº LinkedHashSet è€Œè¨€ï¼Œå®ƒç»§æ‰¿äº HashSetã€åˆåŸºäº LinkedHashMap æ¥å®ç°çš„ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">HashSet</span>&lt;<span class="title">E</span>&gt;  // ç»§æ‰¿äº†<span class="title">HashSet</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedHashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    	<span class="comment">// ç”±äºå…¶ç»§æ‰¿è‡ªHashSetï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯HashSetçš„æ„é€ å‡½æ•°</span></span><br><span class="line">    	<span class="comment">// è€Œåœ¨HashSetæ„é€ å‡½æ•°ä¸­ï¼Œæœ‰å¦‚ä¸‹ï¼šâ–³</span></span><br><span class="line">        <span class="keyword">super</span>(initialCapacity, loadFactor, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LinkedHashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(initialCapacity, <span class="number">.75f</span>, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LinkedHashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="number">16</span>, <span class="number">.75f</span>, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨HashSetç±»ä¸­â–³</span></span><br><span class="line">HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">	<span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªLinkedHashMap</span></span><br><span class="line">	map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>LinkedHashSet ä¸­ä¸èƒ½æœ‰ç›¸åŒå…ƒç´ ï¼Œ<strong>å¯ä»¥æœ‰ä¸€ä¸ª null å…ƒç´ </strong>ï¼Œå…ƒç´ ä¸¥æ ¼æŒ‰ç…§æ”¾å…¥çš„é¡ºåºæ’åˆ—ï¼ˆå‡ºäºå…¶åŸºäºLinkedHashMapå®ç°ï¼Œè€ŒLinkedHashMapç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼‰ï¼›</p></li>
<li><p>æ·»åŠ ã€åˆ é™¤å…ƒç´ çš„æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½ä¸º O(1)ï¼›</p></li>
<li><p>éçº¿ç¨‹å®‰å…¨ã€‚</p></li>
</ol>
<p><strong>TreeSetç‰¹ç‚¹ï¼š</strong></p>
<ol type="1">
<li><p>TreeSet åº•å±‚å®é™…ä½¿ç”¨çš„å­˜å‚¨å®¹å™¨å°±æ˜¯ TreeMapï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">NavigableSet</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">transient</span> NavigableMap&lt;E,Object&gt; m;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">TreeSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// åº•å±‚å®é™…ä½¿ç”¨çš„å­˜å‚¨å®¹å™¨å°±æ˜¯ TreeMapï¼›</span></span><br><span class="line">        <span class="keyword">this</span>(<span class="keyword">new</span> TreeMap&lt;E,Object&gt;());  <span class="comment">// è°ƒç”¨ TreeSet</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æŠŠTreeMapèµ‹å€¼ç»™äº†NavigableMap&lt;E,Object&gt;</span></span><br><span class="line">    TreeSet(NavigableMap&lt;E,Object&gt; m) &#123;</span><br><span class="line">        <span class="keyword">this</span>.m = m;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    	<span class="comment">// æœ¬è´¨ä¸Šè¿˜æ˜¯è°ƒç”¨äº† TreeMap çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> m.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TreeSet ä¸­ä¸èƒ½æœ‰ç›¸åŒå…ƒç´ ï¼Œ<strong>ä¸å¯ä»¥æœ‰nullå…ƒç´ </strong>ï¼Œæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºè¿›è¡Œæ’åºï¼›</p></li>
<li><p>æ·»åŠ ã€åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(log(n))ï¼›</p></li>
<li><p>éçº¿ç¨‹å®‰å…¨</p></li>
</ol>
<blockquote>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/StemQ/article/details/66477615</p>
</blockquote>
<h3 id="set-ä¿è¯å…ƒç´ ä¸é‡å¤">Set ä¿è¯å…ƒç´ ä¸é‡å¤</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;   <span class="comment">// HashSetçš„åº•å±‚ä¸ºä¸€ä¸ªHashMapç»“æ„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();  <span class="comment">// ä½œä¸ºä¸€ä¸ªå ä½ç¬¦</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…ƒç´ å€¼ä½œä¸ºçš„æ˜¯ map çš„ keyï¼Œmap çš„ value åˆ™æ˜¯ PRESENT å˜é‡ï¼Œè¿™ä¸ªå˜é‡åªä½œä¸ºæ”¾å…¥ map æ—¶çš„ä¸€ä¸ªå ä½ç¬¦è€Œå­˜åœ¨ï¼Œæ‰€ä»¥æ²¡ä»€ä¹ˆå®é™…ç”¨å¤„ã€‚å…¶å®ï¼Œè¿™æ—¶å€™ç­”æ¡ˆå·²ç»å‡ºæ¥äº†ï¼š<strong>HashMap çš„ key æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œè€Œè¿™é‡Œ HashSet çš„å…ƒç´ åˆæ˜¯ä½œä¸ºäº† map çš„ keyï¼Œå½“ç„¶ä¹Ÿä¸èƒ½é‡å¤äº†ã€‚</strong></p>
<p>LinkedHashSetã€TreeSetéƒ½ä¸€æ ·ï¼Œéƒ½é‡‡ç”¨äº†PRESENTè¿™ä¸ªå ä½ç¬¦ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="collection-å’Œ-collections">Collection å’Œ Collections</h3>
<p><strong>Collectionï¼š</strong>æ˜¯ä¸€ä¸ª<strong>é›†åˆæ¥å£</strong>ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Listï¼ŒSetï¼ŒQueue æ¥å£éƒ½ç»§æ‰¿ Collectionï¼›ç›´æ¥å®ç°è¯¥æ¥å£çš„ç±»åªæœ‰ AbstractCollection ç±»ï¼Œè¯¥ç±»ä¹Ÿåªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæä¾›äº†å¯¹é›†åˆç±»æ“ä½œçš„ä¸€äº›åŸºæœ¬å®ç°ã€‚</p>
<p><strong>Collectionsï¼š</strong>æ˜¯ä¸å±äº Java çš„é›†åˆæ¡†æ¶çš„ï¼Œå®ƒæ˜¯<strong>é›†åˆç±»çš„ä¸€ä¸ªå·¥å…·ç±»/å¸®åŠ©ç±»</strong>ã€‚æ­¤ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œ æœåŠ¡äº Java çš„ Collection æ¡†æ¶ã€‚å®ƒåŒ…å«æœ‰å…³é›†åˆæ“ä½œçš„é™æ€å¤šæ€æ–¹æ³•ï¼Œå®ç°å¯¹å„ç§é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨ç­‰æ“ä½œã€‚</p>
<p><strong>å¸¸ç”¨åŠŸèƒ½</strong></p>
<ul>
<li><code>public static &lt;T&gt; boolean addAll(Collection&lt;T&gt; c, T... elements)</code>ï¼šå¾€é›†åˆä¸­æ·»åŠ ä¸€äº›å…ƒç´ ã€‚</li>
<li><code>public static void reverse(List&lt;?&gt; list)</code>ï¼šå°†é›†åˆåè½¬</li>
<li><code>public static void shuffle(List&lt;?&gt; list)</code> ï¼šæ‰“ä¹±é¡ºåºï¼Œæ‰“ä¹±é›†åˆé¡ºåºã€‚</li>
<li><code>public static &lt;T&gt; void sort(List&lt;T&gt; list)</code>ï¼šå°†é›†åˆä¸­å…ƒç´ æŒ‰ç…§é»˜è®¤è§„åˆ™æ’åºã€‚</li>
<li><code>public static &lt;T&gt; void sort(List&lt;T&gt; listï¼ŒComparator&lt;? super T&gt; )</code> :å°†é›†åˆä¸­å…ƒç´ æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åºã€‚</li>
</ul>
<blockquote>
<p><strong>Collections ä¸­çš„ sort æ–¹æ³•</strong></p>
<p><strong>Comparator æ¯”è¾ƒå™¨</strong></p>
<p>æ’åºæ–¹æ³•ï¼š<code>public static &lt;T&gt; void sort(List&lt;T&gt; list)</code>ï¼šå°†é›†åˆä¸­å…ƒç´ æŒ‰ç…§é»˜è®¤è§„åˆ™æ’åºã€‚</p>
<p>å¦‚ï¼Œå¯¹å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionsDemo2</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">           ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">           list.add(<span class="string">&quot;cba&quot;</span>); list.add(<span class="string">&quot;aba&quot;</span>); list.add(<span class="string">&quot;sba&quot;</span>); list.add(<span class="string">&quot;nba&quot;</span>);</span><br><span class="line">           <span class="comment">//æ’åºæ–¹æ³•</span></span><br><span class="line">           Collections.sort(list);</span><br><span class="line">           System.out.println(list);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// ç»“æœï¼š</span></span><br><span class="line"><span class="comment">// [aba, cba, nba, sba]</span></span><br></pre></td></tr></table></figure>
<p>è¯´åˆ°æ’åºäº†ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ¯”è¾ƒå¤§å°ï¼Œé‚£ä¹ˆåœ¨ Java ä¸­æä¾›äº†ä¸¤ç§æ¯”è¾ƒå®ç°çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯æ¯”è¾ƒæ­»æ¿çš„é‡‡ç”¨ <code>java.lang.Comparable</code> æ¥å£å»å®ç°ï¼Œä¸€ç§æ˜¯çµæ´»çš„å½“æˆ‘éœ€è¦åšæ’åºçš„æ—¶å€™åœ¨å»é€‰æ‹©çš„<code>java.util.Comparator</code> æ¥å£å®Œæˆã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬é‡‡ç”¨çš„ <code>public static &lt;T&gt; void sort(List&lt;T&gt; list)</code> è¿™ä¸ªæ–¹æ³•å®Œæˆçš„æ’åºï¼Œ<strong>å®é™…ä¸Šè¦æ±‚äº†è¢«æ’åºçš„ç±»å‹éœ€è¦å®ç° Comparable æ¥å£å®Œæˆæ¯”è¾ƒçš„åŠŸèƒ½</strong>ï¼Œåœ¨ String ç±»å‹ä¸Šå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// å®ç°äº†Comparable&lt;String&gt;çš„æ–¹æ³•ï¼Œè¯¥æ¥å£å†…æœ‰æŠ½è±¡æ–¹æ³•public int compareTo(T o);</span></span><br><span class="line">       <span class="comment">// åœ¨Stringå†…å¯¹å…¶è¿›è¡Œäº†å®ç°</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String anotherString)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">int</span> len1 = value.length;</span><br><span class="line">           <span class="keyword">int</span> len2 = anotherString.value.length;</span><br><span class="line">           <span class="keyword">int</span> lim = Math.min(len1, len2);</span><br><span class="line">           <span class="keyword">char</span> v1[] = value;</span><br><span class="line">           <span class="keyword">char</span> v2[] = anotherString.value;</span><br><span class="line">   </span><br><span class="line">           <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">           <span class="keyword">while</span> (k &lt; lim) &#123;</span><br><span class="line">               <span class="keyword">char</span> c1 = v1[k];</span><br><span class="line">               <span class="keyword">char</span> c2 = v2[k];</span><br><span class="line">               <span class="keyword">if</span> (c1 != c2) &#123;</span><br><span class="line">                   <span class="keyword">return</span> c1 - c2;</span><br><span class="line">               &#125;</span><br><span class="line">               k++;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> len1 - len2;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>String ç±»å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå¹¶å®Œæˆäº†æ¯”è¾ƒè§„åˆ™çš„å®šä¹‰ï¼Œä½†æ˜¯è¿™æ ·å°±æŠŠè¿™ç§è§„åˆ™å†™æ­»äº†ï¼Œé‚£æ¯”å¦‚æˆ‘æƒ³è¦å­—ç¬¦ä¸²æŒ‰ç…§ç¬¬ä¸€ä¸ªå­—ç¬¦é™åºæ’åˆ—ï¼Œé‚£ä¹ˆè¿™æ ·å°±è¦ä¿®æ”¹Stringçš„æºä»£ç ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å†™æ’åºçš„è§„åˆ™</span></span><br><span class="line">&gt;<span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person o)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// return 0; // è®¤ä¸ºå…ƒç´ éƒ½æ˜¯ç›¸åŒçš„</span></span><br><span class="line">       <span class="comment">// è‡ªå®šä¹‰æ¯”è¾ƒçš„è§„åˆ™, æ¯”è¾ƒä¸¤ä¸ªäººçš„å¹´é¾„(this,å‚æ•°Person)</span></span><br><span class="line">       <span class="comment">// return this.getAge() - o.getAge();  // å¹´é¾„å‡åºæ’åº</span></span><br><span class="line">       <span class="keyword">return</span> o.getAge() - <span class="keyword">this</span>.getAge();  <span class="comment">// å¹´é¾„é™åºæ’åº</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>public static &lt;T&gt; void sort(List&lt;T&gt; listï¼ŒComparator&lt;? super T&gt; )</code> æ–¹æ³•çµæ´»çš„å®Œæˆï¼Œè¿™ä¸ªé‡Œé¢å°±æ¶‰åŠåˆ°äº† <strong>Comparatorè¿™ä¸ªæ¥å£</strong>ï¼Œä½äºä½äº <code>java.util</code> åŒ…ä¸‹ï¼Œæ’åºæ˜¯ comparator èƒ½å®ç°çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè¯¥æ¥å£ä»£è¡¨ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œæ¯”è¾ƒå™¨å…·æœ‰å¯æ¯”æ€§ï¼é¡¾åæ€ä¹‰å°±æ˜¯åšæ’åºçš„ï¼Œé€šä¿—åœ°è®²éœ€è¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡è°æ’åœ¨å‰è°æ’åœ¨åï¼Œé‚£ä¹ˆæ¯”è¾ƒçš„æ–¹æ³•å°±æ˜¯ï¼š<code>public int compare(String o1, String o2)</code> ï¼šæ¯”è¾ƒå…¶ä¸¤ä¸ªå‚æ•°çš„é¡ºåºã€‚</p>
<p>ä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒçš„ç»“æœæœ‰ä¸‰ç§ï¼šå¤§äºï¼Œç­‰äºï¼Œå°äºã€‚</p>
<p>å¦‚æœè¦æŒ‰ç…§å‡åºæ’åºï¼Œåˆ™o1 å°äºo2ï¼Œè¿”å›ï¼ˆè´Ÿæ•°ï¼‰ï¼Œç›¸ç­‰è¿”å›0ï¼Œo1å¤§äºo2è¿”å›ï¼ˆæ­£æ•°ï¼‰;</p>
<p>å¦‚æœè¦æŒ‰ç…§é™åºæ’åºï¼Œåˆ™o1 å°äºo2ï¼Œè¿”å›ï¼ˆæ­£æ•°ï¼‰ï¼Œç›¸ç­‰è¿”å›0ï¼Œo1å¤§äºo2è¿”å›ï¼ˆè´Ÿæ•°ï¼‰</p>
<p><strong>æ€»ç»“ Comparator çš„æ’åºè§„åˆ™: o1-o2 ä¸ºå‡åºï¼›o2-o1 ä¸ºé™åº</strong></p>
<p>æ“ä½œå¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionsDemo3</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">           ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">           list.add(<span class="string">&quot;cba&quot;</span>);</span><br><span class="line">           list.add(<span class="string">&quot;aba&quot;</span>);</span><br><span class="line">           list.add(<span class="string">&quot;sba&quot;</span>);</span><br><span class="line">           list.add(<span class="string">&quot;nba&quot;</span>);</span><br><span class="line">           <span class="comment">// è‡ªå®šä¹‰æ’åºæ–¹æ³• æŒ‰ç…§ç¬¬ä¸€ä¸ªå•è¯çš„é™åº</span></span><br><span class="line">           Collections.sort(list, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</span><br><span class="line">               <span class="meta">@Override</span></span><br><span class="line">               <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String o1, String o2)</span> </span>&#123;</span><br><span class="line">                   <span class="keyword">return</span> o2.charAt(<span class="number">0</span>) â€ o1.charAt(<span class="number">0</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line">           System.out.println(list);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">// [sba, nba, cba, aba]</span></span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“ï¼šComparable ä¸ Comparator ä¸¤ä¸ªæ¥å£çš„åŒºåˆ«</strong></p>
<p><strong>Comparable</strong>ï¼šå¼ºè¡Œå¯¹å®ç°å®ƒçš„æ¯ä¸ªç±»çš„å¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºã€‚è¿™ç§æ’åºè¢«ç§°ä¸ºç±»çš„è‡ªç„¶æ’åºï¼Œç±»çš„ compareTo æ–¹æ³•è¢«ç§°ä¸ºå®ƒçš„è‡ªç„¶æ¯”è¾ƒæ–¹æ³•ã€‚åªèƒ½åœ¨ç±»ä¸­å®ç° <code>compareTo()</code> ä¸€æ¬¡ï¼Œä¸èƒ½ç»å¸¸ä¿®æ”¹ç±»çš„ä»£ç å®ç°è‡ªå·±æƒ³è¦çš„æ’åºã€‚å®ç°æ­¤æ¥å£çš„å¯¹è±¡åˆ—è¡¨ï¼ˆå’Œæ•°ç»„ï¼‰å¯ä»¥é€šè¿‡<code>Collections.sort</code>ï¼ˆå’Œ <code>Arrays.sort</code>ï¼‰è¿›è¡Œè‡ªåŠ¨æ’åºï¼Œå¯¹è±¡å¯ä»¥ç”¨ä½œæœ‰åºæ˜ å°„ä¸­çš„é”®æˆ–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼Œæ— éœ€æŒ‡å®šæ¯”è¾ƒå™¨ã€‚</p>
<p><strong>Comparator</strong>ï¼šå¼ºè¡Œå¯¹æŸä¸ªå¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºã€‚å¯ä»¥å°† Comparator ä¼ é€’ç»™ sort æ–¹æ³•ï¼ˆå¦‚<code>Collections.sort</code> æˆ– <code>Arrays.sort</code>ï¼‰ï¼Œä»è€Œå…è®¸åœ¨æ’åºé¡ºåºä¸Šå®ç°ç²¾ç¡®æ§åˆ¶ã€‚è¿˜å¯ä»¥ä½¿ç”¨ Comparator æ¥æ§åˆ¶æŸäº›æ•°æ®ç»“æ„ï¼ˆå¦‚æœ‰åº set æˆ–æœ‰åºæ˜ å°„ï¼‰çš„é¡ºåºï¼Œæˆ–è€…ä¸ºé‚£äº›æ²¡æœ‰è‡ªç„¶é¡ºåºçš„å¯¹è±¡ collection æä¾›æ’åºã€‚</p>
</blockquote>
<blockquote>
<p>å‚è€ƒï¼šhttps://www.cnblogs.com/williamjie/p/11458701.html</p>
</blockquote>
<h3 id="iterator-çš„ä½¿ç”¨ä¸å…¶ç‰¹ç‚¹">Iterator çš„ä½¿ç”¨ä¸å…¶ç‰¹ç‚¹</h3>
<p>è¿­ä»£å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥éå†å¹¶é€‰æ‹©åºåˆ—ä¸­çš„å¯¹è±¡ï¼Œè€Œå¼€å‘äººå‘˜ä¸éœ€è¦äº†è§£è¯¥åºåˆ—çš„åº•å±‚ç»“æ„ã€‚è¿­ä»£å™¨é€šå¸¸è¢«ç§°ä¸ºâ€œè½»é‡çº§â€å¯¹è±¡ï¼Œå› ä¸ºåˆ›å»ºå®ƒçš„ä»£ä»·å°ã€‚</p>
<p>Java ä¸­çš„ Iterator åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”åªèƒ½å•å‘ç§»åŠ¨ï¼šã€€ã€€</p>
<ol type="1">
<li><p>ä½¿ç”¨æ–¹æ³• <code>public Iterator iterator()</code> è¦æ±‚å®¹å™¨è¿”å›ä¸€ä¸ª Iteratorã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨ Iterator çš„ <code>next()</code> æ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<code>iterator()</code> æ–¹æ³•å­˜åœ¨äº <code>java.lang.Iterable</code> æ¥å£ä¸­ï¼Œè¯¥æ¥å£è¢« Collection ç»§æ‰¿ï¼Œå› æ­¤é›†åˆç±»å¯ä»¥ä½¿ç”¨æ–¹æ³•<code>iterator()</code>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// collectionæ¥å£ç»§æ‰¿äº†Iterableæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Iterable</span>&lt;<span class="title">E</span>&gt; </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¢«collectionæ¥å£ç»§æ‰¿çš„Iterableæ¥å£ä¸­æœ‰æ–¹æ³•iteratorï¼Œå…¶ä¼šè¿”å›ä¸€ä¸ªIteratorå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">       <span class="function">Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Iteratorå¯¹è±¡ä¸­ç›¸åº”çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</span><br><span class="line">       <span class="function">E <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">       <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">&quot;remove&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote></li>
<li><p>ä½¿ç”¨ <code>public E next()</code> è·å¾—åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ã€€</p></li>
<li><p>ä½¿ç”¨ <code>public boolean hasNext()</code> æ£€æŸ¥åºåˆ—ä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ ã€‚ã€€ã€€</p></li>
<li><p>ä½¿ç”¨ <code>default void remove()</code> å°†è¿­ä»£å™¨æ–°è¿”å›çš„å…ƒç´ åˆ é™¤ã€‚</p></li>
</ol>
<blockquote>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="iterator-å’Œ-listiterator-çš„å¼‚åŒ">Iterator å’Œ ListIterator çš„å¼‚åŒ</h3>
<p><strong>ç›¸åŒç‚¹ï¼š</strong></p>
<ol type="1">
<li><p>éƒ½æ˜¯è¿­ä»£å™¨ï¼Œå½“éœ€è¦å¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œéå†ä¸éœ€è¦å¹²æ¶‰å…¶éå†è¿‡ç¨‹æ—¶ï¼Œè¿™ä¸¤ç§è¿­ä»£å™¨éƒ½å¯ä»¥ä½¿ç”¨ï¼›</p></li>
<li><p>ListIterator å®ç°äº† Iterator æ¥å£ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ListIterator</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>ä¸åŒç‚¹ï¼š</strong></p>
<ol type="1">
<li><strong>ä½¿ç”¨èŒƒå›´ä¸åŒ</strong>ï¼šIterator å¯ç”¨æ¥éå† Setã€Listã€Mapé›†åˆï¼Œä½†æ˜¯ <strong>ListIterator åªèƒ½ç”¨æ¥éå† List</strong>ã€‚</li>
<li><strong>éå†æ–¹å‘ä¸åŒ</strong>ï¼šIterator å¯¹é›†åˆåªèƒ½æ˜¯å‰å‘éå†ï¼ˆ<code>hasNext()</code>, <code>Next()</code>ï¼‰ï¼ŒListIterator æ—¢å¯ä»¥å‰å‘ä¹Ÿå¯ä»¥åå‘(<code>hasNext()</code>, <code>Next()</code>, <code>hasPrevious()</code>, <code>previous()</code>)ï¼›</li>
<li>ListIterator å¯ä»¥å®šä½å½“å‰ç´¢å¼•çš„ä½ç½®ï¼Œ<code>nextIndex()</code>å’Œ<code>previousIndex()</code>å¯ä»¥å®ç°ã€‚Iteratoræ²¡æœ‰æ­¤åŠŸèƒ½ã€‚</li>
<li>ListIteratoræœ‰addæ–¹æ³•ï¼Œå¯ä»¥å‘Listä¸­æ·»åŠ å¯¹è±¡ï¼Œè€ŒIteratorä¸èƒ½ï¼›</li>
<li>éƒ½å¯å®ç°åˆ é™¤æ“ä½œï¼Œä½†æ˜¯ ListIterator å¯ä»¥å®ç°å¯¹è±¡çš„ä¿®æ”¹ï¼Œ<code>set()</code>æ–¹æ³•å¯ä»¥å®ç°ã€‚Iteratorä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹</li>
</ol>
<p><strong>æ€»ä¹‹</strong>ï¼šListIterator å®ç°äº† Iterator æ¥å£ï¼Œå¹¶åŒ…å«å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šå¢åŠ å…ƒç´ ï¼Œæ›¿æ¢å…ƒç´ ï¼Œè·å–å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ç­‰ç­‰ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/xiangyuenacha/article/details/84253630</p>
</blockquote>
<h3 id="iterator-å’Œ-enumeration-çš„åŒºåˆ«">Iterator å’Œ Enumeration çš„åŒºåˆ«</h3>
<p>ä¸ Enumeration ç›¸æ¯”ï¼ŒIterator æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå½“ä¸€ä¸ªé›†åˆæ­£åœ¨è¢«éå†çš„æ—¶å€™ï¼Œå®ƒä¼šé˜»æ­¢å…¶å®ƒçº¿ç¨‹å»ä¿®æ”¹é›†åˆã€‚å¦åˆ™ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚è¿™å…¶å®å°±æ˜¯ fail-fast æœºåˆ¶ã€‚å…·ä½“åŒºåˆ«æœ‰ä¸‰ç‚¹ï¼š</p>
<ol type="1">
<li>Iterator çš„æ–¹æ³•åæ¯” Enumeration æ›´ç§‘å­¦ï¼›</li>
<li><strong>Iterator æœ‰ fail-fast æœºåˆ¶ï¼Œæ¯” Enumeration æ›´å®‰å…¨</strong>ï¼›</li>
<li>Iterator èƒ½å¤Ÿåˆ é™¤å…ƒç´ ï¼ŒEnumeration å¹¶ä¸èƒ½åˆ é™¤å…ƒç´ ã€‚</li>
</ol>
<p>å‡½æ•°æ¥å£å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Enumeration</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasMoreElements</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">nextElement</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/q1r9Pno6ANUzZ9wMzA-JSg</p>
</blockquote>
<h3 id="fail-fast-ä¸-fail-safe-çš„åŒºåˆ«">fail-fast ä¸ fail-safe çš„åŒºåˆ« <span class="emoji" data-emoji="exclamation">â—</span></h3>
<p><strong>fail-fastï¼š</strong></p>
<p>fail-fast çš„å­—é¢æ„æ€æ˜¯â€œå¿«é€Ÿå¤±è´¥â€ã€‚å½“æˆ‘ä»¬åœ¨éå†é›†åˆå…ƒç´ çš„æ—¶å€™ï¼Œç»å¸¸ä¼šä½¿ç”¨è¿­ä»£å™¨ï¼Œä½†åœ¨è¿­ä»£å™¨éå†å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé›†åˆçš„ç»“æ„è¢«æ”¹å˜çš„è¯ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œé˜²æ­¢ç»§ç»­éå†ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ã€‚</p>
<p><strong>fail-fast è¿­ä»£å™¨æŠ›å‡º ConcurrentModificationExceptionï¼Œè€Œ fail-safe è¿­ä»£å™¨åˆ™ä¸ä¼š</strong>ã€‚</p>
<blockquote>
<p>ç»“æ„ä¸Šçš„æ”¹å˜ï¼šé›†åˆä¸Šçš„æ’å…¥å’Œåˆ é™¤å°±æ˜¯ç»“æ„ä¸Šçš„æ”¹å˜ï¼›</p>
<p>å¯¹é›†åˆä¸­æŸä¸ªå…ƒç´ è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œå¹¶ä¸æ˜¯ç»“æ„ä¸Šçš„æ”¹å˜ï¼›</p>
<p>æŠ›å‡º ConcurrentModificationException å¼‚å¸¸å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFailFast</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)&#123;</span><br><span class="line">           list.add(i);</span><br><span class="line">       &#125;</span><br><span class="line">       Iterator&lt;Integer&gt; it = list.iterator();</span><br><span class="line">       <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">           <span class="keyword">if</span>(temp == <span class="number">3</span>)&#123;</span><br><span class="line">               temp++;</span><br><span class="line">               list.remove(<span class="number">3</span>);  <span class="comment">// åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæ”¹å˜äº†é›†åˆçš„ç»“æ„ï¼Œå¯¼è‡´fail-fast</span></span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               temp++;</span><br><span class="line">               System.out.println(it.next());</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>fail-fast å·¥ä½œåŸç†ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	checkForComodification();</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“è¿­ä»£å™¨åœ¨æ‰§è¡Œ <code>next()</code> æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨<code>checkForComodification()</code>ï¼Œå½“<code>modCount != expectedModCount</code>æ—¶åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå½“é›†åˆçš„ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒmodCountå°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¦‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ArrayList åœ¨æ·»åŠ å…ƒç´ æ—¶ï¼ŒmodCount å°±ä¼šè¢«æ”¹å˜</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;  <span class="comment">// è¿™é‡Œä¿®æ”¹äº†ï¼ï¼ï¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>fail-fast çš„ä¸€äº›å¤„ç†æ–¹æ³•ï¼š</strong></p>
<p>å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›åœ¨è¿­ä»£å™¨éå†çš„æ—¶å€™å› ä¸ºå¹¶å‘ç­‰åŸå› ï¼Œå¯¼è‡´é›†åˆçš„ç»“æ„è¢«æ”¹å˜ï¼Œè¿›è€Œå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¶‰åŠåˆ°ä¼šå½±å“åˆ° modCount å€¼æ”¹å˜çš„åœ°æ–¹ï¼ŒåŠ ä¸ŠåŒæ­¥é” synchronizedï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ <code>Collections.synchronizedList</code> æ¥è§£å†³ã€‚</p>
<p><strong>fail-safeï¼š</strong></p>
<p>java.util åŒ…ä¸­çš„æ‰€æœ‰é›†åˆç±»éƒ½è¢«è®¾è®¡ä¸º fail-fast çš„ï¼Œè€Œ <strong>java.util.concurrent ä¸­çš„é›†åˆç±»éƒ½ä¸º fail-safe çš„</strong>ã€‚</p>
<p>å¯¹äºé‡‡ç”¨ fail-safe æœºåˆ¶æ¥è¯´ï¼Œå½“æ£€æµ‹åˆ°æ­£åœ¨éå†çš„é›†åˆçš„ç»“æ„è¢«æ”¹å˜æ—¶ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼›</p>
<p>è¿™æ˜¯å› ä¸ºï¼Œ<strong>å½“é›†åˆçš„ç»“æ„è¢«æ”¹å˜çš„æ—¶å€™ï¼Œfail-safe æœºåˆ¶ä¼šå¤åˆ¶åŸé›†åˆçš„ä¸€ä»½æ•°æ®å‡ºæ¥ï¼Œç„¶ååœ¨å¤åˆ¶çš„é‚£ä»½æ•°æ®ä¸Šç»§ç»­éå†ã€‚</strong></p>
<blockquote>
<p>ç„¶ååœ¨æ·»åŠ çš„æ—¶å€™ï¼Œä¼šå¤åˆ¶ä¸€ä»½å‰¯æœ¬å‡ºæ¥æ·»åŠ å…ƒç´ ï¼Œç„¶åå†æ–°çš„è®¾ç½®å›å»....</p>
<p>å°±æ˜¯å†™çš„æ—¶å€™ï¼ŒæŠŠå®¹å™¨æ‰©å®¹ä¸€ä¸ªå‡ºæ¥ï¼Œç„¶åæŠŠå€¼å¡«å†™ä¸Šå»ï¼Œå†é€šçŸ¥å…¶ä»–çš„çº¿ç¨‹ï¼ŒæŠŠåŸå…ˆå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ‰©å®¹åçš„å®¹å™¨ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè™½ç„¶fail-safeä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†å­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š</p>
<ol type="1">
<li>å¤åˆ¶æ—¶éœ€è¦é¢å¤–çš„ç©ºé—´å’Œæ—¶é—´ä¸Šçš„å¼€é”€ã€‚</li>
<li>ä¸èƒ½ä¿è¯éå†çš„æ˜¯æœ€æ–°å†…å®¹ã€‚</li>
</ol>
<blockquote>
<p>å‚è€ƒï¼šhttps://www.jianshu.com/p/bee159e0bd49</p>
</blockquote>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- æœ¬æ–‡ç»“æŸ </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> æ„Ÿè°¢é˜…è¯» ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> å­¦ä¹ ç¬”è®°</a>
              <a href="/tags/Java/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Java</a>
              <a href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> é¢è¯•ç¬”è®°</a>
              <a href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> é¢ç»</a>
              <a href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> é›†åˆç±»</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/27/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A3-Java%E5%9F%BA%E7%A1%80/" rel="prev" title="é¢ç»ï¼š3-JavaåŸºç¡€">
      <i class="fa fa-chevron-left"></i> é¢ç»ï¼š3-JavaåŸºç¡€
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/07/11/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/%E9%9D%A2%E7%BB%8F%EF%BC%9A5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="next" title="é¢ç»ï¼š5-å¹¶å‘ç¼–ç¨‹">
      é¢ç»ï¼š5-å¹¶å‘ç¼–ç¨‹ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9D%A2%E7%BB%8F4-%E9%9B%86%E5%90%88%E7%B1%BB"><span class="nav-text">é¢ç»ï¼š4-é›†åˆç±»</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="nav-text">å¸¸ç”¨çš„å®¹å™¨ â—â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#list-set-map-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">List &amp; Set &amp; Map çš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E9%80%89%E7%94%A8%E9%9B%86%E5%90%88"><span class="nav-text">å¦‚ä½•é€‰ç”¨é›†åˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arraylist-%E5%92%8C-linkedlist-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">ArrayList å’Œ LinkedList çš„åŒºåˆ« â—â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#randomaccess-%E6%8E%A5%E5%8F%A3"><span class="nav-text">RandomAccess æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arraylist-%E7%9A%84%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6"><span class="nav-text">ArrayList çš„æ‰©å®¹æœºåˆ¶ â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#array-%E5%92%8C-arraylist-%E5%8C%BA%E5%88%AB"><span class="nav-text">Array å’Œ ArrayList åŒºåˆ« â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-text">HashMap çš„æ•°æ®ç»“æ„ â—â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E7%9A%84-put-get"><span class="nav-text">HashMap çš„ put() &amp; get() â—â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E7%9A%84-resize-%E6%96%B9%E6%B3%95"><span class="nav-text">HashMap çš„ resize æ–¹æ³• â—â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E7%9A%84-size-%E6%98%AF-2-%E7%9A%84%E6%95%B4%E6%95%B0%E6%AC%A1%E6%96%B9"><span class="nav-text">HashMap çš„ size æ˜¯ 2 çš„æ•´æ•°æ¬¡æ–¹ â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%AD%BB%E5%BE%AA%E7%8E%AF%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98"><span class="nav-text">HashMap å¤šçº¿ç¨‹æ­»å¾ªç¯+æ•°æ®ä¸¢å¤±é—®é¢˜ â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashmap-%E4%B8%8E-hashtable-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">HashMap ä¸ HashTable çš„åŒºåˆ« â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashtable-%E4%B8%8E-concurrenthashmap-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">HashTable ä¸ ConcurrentHashMap çš„åŒºåˆ« â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#concurrenthashmap-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">ConcurrentHashMap çš„å®ç°åŸç† â—â—â—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linkedhashmap-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">LinkedHashMap çš„å®ç°åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#treemap-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">TreeMap å®ç°åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-set%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">Set &amp; Setå®ç°åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-%E4%BF%9D%E8%AF%81%E5%85%83%E7%B4%A0%E4%B8%8D%E9%87%8D%E5%A4%8D"><span class="nav-text">Set ä¿è¯å…ƒç´ ä¸é‡å¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#collection-%E5%92%8C-collections"><span class="nav-text">Collection å’Œ Collections</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterator-%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%85%B6%E7%89%B9%E7%82%B9"><span class="nav-text">Iterator çš„ä½¿ç”¨ä¸å…¶ç‰¹ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterator-%E5%92%8C-listiterator-%E7%9A%84%E5%BC%82%E5%90%8C"><span class="nav-text">Iterator å’Œ ListIterator çš„å¼‚åŒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterator-%E5%92%8C-enumeration-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">Iterator å’Œ Enumeration çš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fail-fast-%E4%B8%8E-fail-safe-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">fail-fast ä¸ fail-safe çš„åŒºåˆ« â—</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">ä¸æ€¥ä¸èºã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">203</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">96</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arthas/" rel="tag">Arthas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CompletableFuture/" rel="tag">CompletableFuture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">74</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">JavaåŸºç¡€</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">Javaè¯­æ³•</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">Kè¿‘é‚»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TransmittableThreadLocal/" rel="tag">TransmittableThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E7%BB%8F%E5%8E%86/" rel="tag">ä¸ªäººç»å†</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">ä¸­é—´ä»¶</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">å…¨æ–‡æ£€ç´¢</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">å†³ç­–æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">åˆ†ç±»é—®é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">åˆ·é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">åˆ·é¢˜ç¬”è®°</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/" rel="tag">åŠ å¯†æ–‡ç« </a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">åšå®¢æ­å»º</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">å‚è€ƒæ–‡ä»¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">åŸºç¡€çŸ¥è¯†</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">å­¦ä¹ ç¬”è®°</a><span class="tag-list-count">104</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">å¹¶å‘ç¼–ç¨‹</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">å¼€å‘æ¡†æ¶</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%90%E9%95%BF%E5%8F%B2/" rel="tag">æˆé•¿å²</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">æŒä¹…å±‚æ¡†æ¶</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">æ’åºç®—æ³•</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">æ“ä½œç³»ç»Ÿ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">æ”¯æŒå‘é‡æœº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">æ•°å­¦æ¨å¯¼</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">æ•°æ®æ¸…æ´—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8/" rel="tag">æ—¥å¸¸</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">æ—¥å¿—æ¡†æ¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">æœºå™¨å­¦ä¹ </a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">æ ‘ç»“æ„</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">æ ‘è“æ´¾</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag">æµ‹è¯•å·¥å…·</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">æ¶ˆæ¯é˜Ÿåˆ—</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">æ·±åº¦å­¦ä¹ </a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">ç‰¹å¾é€‰æ‹©</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">ç¯å¢ƒé…ç½®</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">ç›®æ ‡æ£€æµ‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">çº¿æ€§å›å½’</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">èšç±»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">è¡¨ç¤ºå±‚</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">è®¡ç®—æœºç½‘è·¯</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">è¯»ä¹¦ç¬”è®°</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">è°ƒç”¨é“¾ç›‘æ§</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">è´å¶æ–¯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">è½¯ä»¶ä½¿ç”¨</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">é€»è¾‘å›å½’</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">é›†åˆç±»</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">é›†æˆå­¦ä¹ </a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">é¢ç»</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">é¢è¯•ç¬”è®°</a><span class="tag-list-count">61</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">3.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">54:18</span>
</div>

<!--
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "è¯·å¤šå¤šæŒ‡æ•™~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
