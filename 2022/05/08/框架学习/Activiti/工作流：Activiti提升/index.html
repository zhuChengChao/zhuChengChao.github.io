<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="å·¥ä½œå­¦ä¹ ç¬¬äºŒå¼¹ğŸ˜®  åŸè§†é¢‘åœ°å€ï¼šhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1H54y167gf">
<meta property="og:type" content="article">
<meta property="og:title" content="å·¥ä½œæµï¼šActivitiæå‡">
<meta property="og:url" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/index.html">
<meta property="og:site_name" content="è´¤ä½™è¶…">
<meta property="og:description" content="å·¥ä½œå­¦ä¹ ç¬¬äºŒå¼¹ğŸ˜®  åŸè§†é¢‘åœ°å€ï¼šhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1H54y167gf">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æµç¨‹å®šä¹‰å’Œæµç¨‹å®ä¾‹å›¾è§£.png">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_taskè¡¨æ•°æ®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_identitylink%20è¡¨æ•°æ®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_hi_procinstæ•°æ®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_hi_taskinstè¡¨æ•°æ®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_hi_actinstè¡¨æ•°æ®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰çš„æ¿€æ´»çŠ¶æ€ï¼šact_ru_execution.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰æµç¨‹çš„æ¿€æ´»çŠ¶æ€ï¼šact_ru_task.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰çš„æŒ‚èµ·çŠ¶æ€ï¼šact_ru_execution.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰æµç¨‹çš„æŒ‚èµ·çŠ¶æ€ï¼šact_ru_task.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰çš„æŒ‚èµ·çŠ¶æ€-å•æµç¨‹ï¼šact_ru_execution.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰æµç¨‹çš„æŒ‚èµ·çŠ¶æ€-å•æµç¨‹ï¼šact_ru_task.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/è´£ä»»äººæŒ‡å®š.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/è´£ä»»äººæŒ‡å®š-UEL.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_variableæ•°æ®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/äº‹ä»¶ç±»å‹.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/ç›‘å¬æµç¨‹é…ç½®.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/DelegateTaskç±»çš„å€¼.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æµç¨‹å˜é‡.png">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-1.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-2.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-3.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-4.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/variablesï¼šact_ru_variable.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-5.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å¤šå€™é€‰äººçš„bpmnå›¾.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/ç½‘å…³.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ’ä»–ç½‘å…³å›¾.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å¹¶è¡Œç½‘å…³å›¾.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/åŒ…å«ç½‘å…³å›¾.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/äº‹ä»¶ç±»å‹-2.PNG">
<meta property="og:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/äº‹ä»¶ç½‘å…³.PNG">
<meta property="article:published_time" content="2022-05-08T02:24:20.000Z">
<meta property="article:modified_time" content="2022-05-08T02:24:20.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="å­¦ä¹ ç¬”è®°">
<meta property="article:tag" content="å¼€å‘æ¡†æ¶">
<meta property="article:tag" content="å·¥ä½œæµ">
<meta property="article:tag" content="Activiti">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æµç¨‹å®šä¹‰å’Œæµç¨‹å®ä¾‹å›¾è§£.png">

<link rel="canonical" href="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>å·¥ä½œæµï¼šActivitiæå‡ | è´¤ä½™è¶…</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">è´¤ä½™è¶…</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸€ä½åº•å±‚ç å†œ :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">100</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">19</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">210</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="ä¸æ€¥ä¸èºã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è´¤ä½™è¶…">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          å·¥ä½œæµï¼šActivitiæå‡
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-05-08 10:24:20" itemprop="dateCreated datePublished" datetime="2022-05-08T10:24:20+08:00">2022-05-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">å¼€å‘æ¡†æ¶</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E4%BD%9C%E6%B5%81/" itemprop="url" rel="index"><span itemprop="name">å·¥ä½œæµ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>72k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1:06</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>å·¥ä½œå­¦ä¹ ç¬¬äºŒå¼¹<span class="emoji" data-emoji="open_mouth">ğŸ˜®</span></p>
<blockquote>
<p>åŸè§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1H54y167gf</p>
</blockquote>
<span id="more"></span>
<h1 id="å·¥ä½œæµactivitiæå‡">å·¥ä½œæµï¼šActivitiæå‡</h1>
<h2 id="æµç¨‹å®ä¾‹">1. æµç¨‹å®ä¾‹</h2>
<h3 id="æ¦‚è¿°">1.1 æ¦‚è¿°</h3>
<p><strong>æµç¨‹å®ä¾‹</strong>ï¼ˆProcessInstanceï¼‰ä»£è¡¨æµç¨‹å®šä¹‰çš„æ‰§è¡Œå®ä¾‹ã€‚ä¸€ä¸ªæµç¨‹å®ä¾‹åŒ…æ‹¬äº†æ‰€æœ‰çš„è¿è¡ŒèŠ‚ç‚¹ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªå¯¹è±¡æ¥äº†è§£å½“å‰æµç¨‹å®ä¾‹çš„è¿›åº¦ç­‰ä¿¡æ¯ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼šç”¨æˆ·æˆ–ç¨‹åºæŒ‰ç…§æµç¨‹å®šä¹‰å†…å®¹å‘èµ·ä¸€ä¸ªæµç¨‹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚</p>
</blockquote>
<p>æµç¨‹å®šä¹‰å’Œæµç¨‹å®ä¾‹çš„å›¾è§£ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æµç¨‹å®šä¹‰å’Œæµç¨‹å®ä¾‹å›¾è§£.png" alt="æµç¨‹å®šä¹‰å’Œæµç¨‹å®ä¾‹å›¾è§£"></p>
<h3 id="businesskey">1.2 Businesskey</h3>
<h4 id="æ¦‚è¿°-1">1.2.1 æ¦‚è¿°</h4>
<p>æµç¨‹å®šä¹‰éƒ¨ç½²åœ¨activitiåï¼Œå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­é€šè¿‡activitiå»ç®¡ç†è¯¥æµç¨‹çš„æ‰§è¡Œï¼Œæ‰§è¡Œæµç¨‹è¡¨ç¤ºæµç¨‹çš„ä¸€æ¬¡æ‰§è¡Œã€‚</p>
<blockquote>
<p>æ¯”å¦‚éƒ¨ç½²ç³»ç»Ÿå‡ºå·®æµç¨‹åï¼Œå¦‚æœæŸç”¨æˆ·è¦ç”³è¯·å‡ºå·®è¿™æ—¶å°±éœ€è¦æ‰§è¡Œè¿™ä¸ªæµç¨‹ï¼›å¦‚æœå¦å¤–ä¸€ä¸ªç”¨æˆ·ä¹Ÿè¦ç”³è¯·å‡ºå·®åˆ™ä¹Ÿéœ€è¦æ‰§è¡Œè¯¥æµç¨‹ï¼›æ¯ä¸ªæ‰§è¡Œäº’ä¸å½±å“ï¼Œæ¯ä¸ªæ‰§è¡Œæ˜¯å•ç‹¬çš„æµç¨‹å®ä¾‹ã€‚</p>
</blockquote>
<p>å¯åŠ¨æµç¨‹å®ä¾‹æ—¶ï¼ŒæŒ‡å®šçš„businesskeyï¼Œå°±ä¼šåœ¨act_ru_executionï¼ˆæµç¨‹å®ä¾‹çš„æ‰§è¡Œè¡¨ï¼‰ä¸­å­˜å‚¨businesskeyã€‚</p>
<p><strong>Businesskeyï¼šä¸šåŠ¡æ ‡è¯†</strong>ï¼Œé€šå¸¸ä¸ºä¸šåŠ¡è¡¨çš„ä¸»é”®ï¼Œä¸šåŠ¡æ ‡è¯†å’Œæµç¨‹å®ä¾‹ä¸€ä¸€å¯¹åº”ï¼Œä¸šåŠ¡æ ‡è¯†æ¥æºäºä¸šåŠ¡ç³»ç»Ÿï¼Œå­˜å‚¨ä¸šåŠ¡æ ‡è¯†å°±æ˜¯æ ¹æ®ä¸šåŠ¡æ ‡è¯†æ¥å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®ã€‚</p>
<blockquote>
<p>æ¯”å¦‚ï¼šå‡ºå·®æµç¨‹å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå°±å¯ä»¥å°†å‡ºå·®å•çš„idä½œä¸ºä¸šåŠ¡æ ‡è¯†businesskeyå­˜å‚¨åˆ°activitiä¸­ï¼Œå°†æ¥æŸ¥è¯¢activitiçš„æµç¨‹å®ä¾‹ä¿¡æ¯å°±å¯ä»¥è·å–å‡ºå·®å•çš„idä»è€Œå…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿæ•°æ®åº“å¾—åˆ°å‡ºå·®å•ä¿¡æ¯ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ·»åŠ businessKey</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addBussinessKey</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€å¾—åˆ°ProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°RunTimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// 3.1ã€å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¿˜è¦æŒ‡å®šä¸šåŠ¡æ ‡è¯†businessKeyï¼Œä¹Ÿå°±æ˜¯å‡ºå·®ç”³è¯·å•idï¼Œè¿™é‡Œæ˜¯1001</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(<span class="string">&quot;myEvection&quot;</span>, <span class="string">&quot;1001&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.2ã€å†å¯åŠ¨ä¸€ä¸ªï¼Œè¿™æ¬¡çš„businessKeyæŒ‡å®šä¸º2001</span></span><br><span class="line">    <span class="comment">// ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;myEvection&quot;, &quot;2001&quot;);</span></span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºprocessInstanceç›¸å…³å±æ€§</span></span><br><span class="line">    System.out.println(<span class="string">&quot;ä¸šåŠ¡id=&quot;</span>+processInstance.getBusinessKey());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Activitiçš„act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†.PNG" alt="act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†"></p>
<h4 id="æ•°æ®åº“æ“ä½œ">1.2.2 æ•°æ®åº“æ“ä½œ</h4>
<p>å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œä¼šæ“ä½œå¦‚ä¸‹æ•°æ®åº“è¡¨ï¼š</p>
<p><strong>è¡¨ï¼šact_ru_execution</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM act_ru_execution WHERE business_key_ = 1001;  # æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼Œè®°å½•å½“å‰æµç¨‹å®ä¾‹çš„æ‰§è¡Œæƒ…å†µ</span><br><span class="line"></span><br><span class="line">ID_	REV_	PROC_INST_ID_	BUSINESS_KEY_	PARENT_ID_	PROC_DEF_ID_	SUPER_EXEC_	ROOT_PROC_INST_ID_	ACT_ID_	IS_ACTIVE_	IS_CONCURRENT_	IS_SCOPE_	IS_EVENT_SCOPE_	IS_MI_ROOT_	SUSPENSION_STATE_	CACHED_ENT_STATE_	TENANT_ID_	NAME_	START_TIME_	START_USER_ID_	LOCK_TIME_	IS_COUNT_ENABLED_	EVT_SUBSCR_COUNT_	TASK_COUNT_	JOB_COUNT_	TIMER_JOB_COUNT_	SUSP_JOB_COUNT_	DEADLETTER_JOB_COUNT_	VAR_COUNT_	ID_LINK_COUNT_</span><br><span class="line">17501	1	17501	1001	\N	myEvection:1:15004	\N	17501	\N	1	0	1	0	0	1	\N		\N	2022-05-01 21:01:45	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line"></span><br><span class="line">-- è¿™é‡Œåªæœ‰ä¸€ä¸ªåˆ†æ”¯ï¼Œä¸»é”®id=17501å’Œæµç¨‹å®ä¾‹id=17501ï¼Œç›¸åŒ</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼šæµç¨‹å®ä¾‹æ‰§è¡Œï¼Œå¦‚æœå½“å‰åªæœ‰ä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œä¸€ä¸ªæµç¨‹å®ä¾‹åªæœ‰ä¸€æ¡è®°å½•ä¸”æ‰§è¡Œè¡¨çš„ä¸»é”®idå’Œæµç¨‹å®ä¾‹idç›¸åŒï¼›å¦‚æœå½“å‰æœ‰å¤šä¸ªåˆ†æ”¯æ­£åœ¨è¿è¡Œåˆ™è¯¥æ‰§è¡Œè¡¨ä¸­æœ‰å¤šæ¡è®°å½•ï¼Œå­˜åœ¨æ‰§è¡Œè¡¨çš„ä¸»é”®å’Œæµç¨‹å®ä¾‹idä¸ç›¸åŒçš„è®°å½•ã€‚<strong>ä½†ï¼Œä¸è®ºå½“å‰æœ‰å‡ ä¸ªåˆ†æ”¯æ€»ä¼šæœ‰ä¸€æ¡è®°å½•çš„æ‰§è¡Œè¡¨çš„ä¸»é”®å’Œæµç¨‹å®ä¾‹idç›¸åŒ</strong></p>
<p>ä¸€ä¸ªæµç¨‹å®ä¾‹è¿è¡Œå®Œæˆï¼Œæ­¤è¡¨ä¸­ä¸æµç¨‹å®ä¾‹ç›¸å…³çš„è®°å½•åˆ é™¤ã€‚</p>
</blockquote>
<p><strong>è¡¨ï¼šact_ru_task</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM act_ru_task  # ä»»åŠ¡æ‰§è¡Œè¡¨ï¼Œè®°å½•å½“å‰æ‰§è¡Œçš„ä»»åŠ¡</span><br></pre></td></tr></table></figure>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_taskè¡¨æ•°æ®.PNG" alt="act_ru_taskè¡¨æ•°æ®"></p>
<blockquote>
<p>è¯´æ˜ï¼šå¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæµç¨‹å½“å‰æ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“ç‚¹ï¼Œæ­¤è¡¨ä¼šæ’å…¥ä¸€æ¡è®°å½•è¡¨ç¤ºå½“å‰ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œå¦‚æœä»»åŠ¡å®Œæˆåˆ™è®°å½•åˆ é™¤ã€‚</p>
</blockquote>
<p><strong>è¡¨ï¼šact_ru_identitylink</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM act_ru_identitylink  # ä»»åŠ¡å‚ä¸è€…ï¼Œè®°å½•å½“å‰å‚ä¸ä»»åŠ¡çš„ç”¨æˆ·æˆ–ç»„</span><br></pre></td></tr></table></figure>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_identitylink%20è¡¨æ•°æ®.PNG" alt="act_ru_identitylink è¡¨æ•°æ®"></p>
<p><strong>è¡¨ï¼šact_hi_procinst</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM act_hi_procinst  # æµç¨‹å®ä¾‹å†å²è¡¨</span><br></pre></td></tr></table></figure>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_hi_procinstæ•°æ®.PNG" alt="act_hi_procinstæ•°æ®"></p>
<blockquote>
<p>è¯´æ˜ï¼šæµç¨‹å®ä¾‹å¯åŠ¨ï¼Œä¼šåœ¨æ­¤è¡¨æ’å…¥ä¸€æ¡è®°å½•ï¼Œæµç¨‹å®ä¾‹è¿è¡Œå®Œæˆè®°å½•ä¹Ÿä¸ä¼šåˆ é™¤ã€‚</p>
</blockquote>
<p><strong>è¡¨ï¼šact_hi_taskinst</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM act_hi_taskinst  #ä»»åŠ¡å†å²è¡¨ï¼Œè®°å½•æ‰€æœ‰ä»»åŠ¡</span><br></pre></td></tr></table></figure>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_hi_taskinstè¡¨æ•°æ®.PNG" alt="act_hi_taskinstè¡¨æ•°æ®"></p>
<blockquote>
<p>è¯´æ˜ï¼šå¼€å§‹ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ä»…åœ¨act_ru_taskè¡¨æ’å…¥è®°å½•ï¼Œä¹Ÿä¼šåœ¨å†å²ä»»åŠ¡è¡¨æ’å…¥ä¸€æ¡è®°å½•ï¼Œä»»åŠ¡å†å²è¡¨çš„ä¸»é”®å°±æ˜¯ä»»åŠ¡idï¼Œä»»åŠ¡å®Œæˆæ­¤è¡¨è®°å½•ä¸åˆ é™¤ã€‚</p>
</blockquote>
<p><strong>è¡¨ï¼šact_hi_actinst</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM act_hi_actinst  # æ´»åŠ¨å†å²è¡¨ï¼Œè®°å½•æ‰€æœ‰æ´»åŠ¨</span><br></pre></td></tr></table></figure>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_hi_actinstè¡¨æ•°æ®.PNG" alt="act_hi_actinstè¡¨æ•°æ®"></p>
<blockquote>
<p>è¯´æ˜ï¼šæ´»åŠ¨åŒ…æ‹¬ä»»åŠ¡ï¼Œæ‰€ä»¥æ­¤è¡¨ä¸­ä¸ä»…è®°å½•äº†ä»»åŠ¡ï¼Œè¿˜è®°å½•äº†æµç¨‹æ‰§è¡Œè¿‡ç¨‹çš„å…¶å®ƒæ´»åŠ¨ï¼Œæ¯”å¦‚å¼€å§‹äº‹ä»¶ã€ç»“æŸäº‹ä»¶ã€‚</p>
</blockquote>
<h4 id="æŸ¥è¯¢æµç¨‹å®ä¾‹">1.2.3 æŸ¥è¯¢æµç¨‹å®ä¾‹</h4>
<p>æµç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥æŸ¥è¯¢æµç¨‹å®ä¾‹çš„çŠ¶æ€ï¼Œå½“å‰è¿è¡Œç»“ç‚¹ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æµç¨‹å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryProcessInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String processDefinitionKey = <span class="string">&quot;myEvection&quot;</span>;</span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–RunTimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    List&lt;ProcessInstance&gt; list = runtimeService</span><br><span class="line">        .createProcessInstanceQuery()</span><br><span class="line">        .processDefinitionKey(processDefinitionKey)<span class="comment">//</span></span><br><span class="line">        .list();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (ProcessInstance processInstance : list) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹idï¼š&quot;</span></span><br><span class="line">                           + processInstance.getProcessInstanceId());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰€å±æµç¨‹å®šä¹‰idï¼š&quot;</span></span><br><span class="line">                           + processInstance.getProcessDefinitionId());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦æ‰§è¡Œå®Œæˆï¼š&quot;</span> + processInstance.isEnded());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦æš‚åœï¼š&quot;</span> + processInstance.isSuspended());</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰æ´»åŠ¨æ ‡è¯†ï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºå†…å®¹ï¼šï¼ˆåœ¨ä¸Šé¢å¯¹å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ·»åŠ businessKeyä»£ç ä¸­ï¼Œå¯åŠ¨äº†ä¸¤ä¸ªæµç¨‹å®ä¾‹ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">----------------------------</span><br><span class="line">æµç¨‹å®ä¾‹idï¼š17501</span><br><span class="line">æ‰€å±æµç¨‹å®šä¹‰idï¼šmyEvection:1:15004</span><br><span class="line">æ˜¯å¦æ‰§è¡Œå®Œæˆï¼š<span class="literal">false</span></span><br><span class="line">æ˜¯å¦æš‚åœï¼š<span class="literal">false</span></span><br><span class="line">å½“å‰æ´»åŠ¨æ ‡è¯†ï¼šnull</span><br><span class="line">----------------------------</span><br><span class="line">æµç¨‹å®ä¾‹idï¼š20001</span><br><span class="line">æ‰€å±æµç¨‹å®šä¹‰idï¼šmyEvection:1:15004</span><br><span class="line">æ˜¯å¦æ‰§è¡Œå®Œæˆï¼š<span class="literal">false</span></span><br><span class="line">æ˜¯å¦æš‚åœï¼š<span class="literal">false</span></span><br><span class="line">å½“å‰æ´»åŠ¨æ ‡è¯†ï¼šnull</span><br></pre></td></tr></table></figure>
<h4 id="å…³è”-businesskey">1.2.4 å…³è” BusinessKey</h4>
<p><strong>éœ€æ±‚ï¼š</strong>åœ¨activitiå®é™…åº”ç”¨æ—¶ï¼ŒæŸ¥è¯¢æµç¨‹å®ä¾‹åˆ—è¡¨æ—¶å¯èƒ½è¦æ˜¾ç¤ºå‡ºä¸šåŠ¡ç³»ç»Ÿçš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæŸ¥è¯¢å½“å‰è¿è¡Œçš„å‡ºå·®æµç¨‹åˆ—è¡¨éœ€è¦å°†å‡ºå·®å•åç§°ã€å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ï¼Œå‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­å­˜åœ¨ï¼Œè€Œå¹¶æ²¡æœ‰åœ¨activitiæ•°æ®åº“ä¸­å­˜åœ¨ï¼Œæ‰€ä»¥æ˜¯æ— æ³•é€šè¿‡activitiçš„apiæŸ¥è¯¢åˆ°å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚</p>
<p><strong>å®ç°ï¼š</strong></p>
<ul>
<li><p>åœ¨æŸ¥è¯¢æµç¨‹å®ä¾‹æ—¶ï¼Œé€šè¿‡businessKeyï¼ˆä¸šåŠ¡æ ‡è¯† ï¼‰å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„å‡ºå·®å•è¡¨ï¼ŒæŸ¥è¯¢å‡ºå‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚</p></li>
<li>é€šè¿‡ä¸‹é¢çš„ä»£ç å°±å¯ä»¥è·å–activitiä¸­æ‰€å¯¹åº”å®ä¾‹ä¿å­˜çš„ä¸šåŠ¡Keyã€‚è€Œè¿™ä¸ªä¸šåŠ¡Keyä¸€èˆ¬éƒ½ä¼šä¿å­˜ç›¸å…³è”çš„ä¸šåŠ¡æ“ä½œè¡¨çš„ä¸»é”®ï¼Œå†é€šè¿‡ä¸»é”®IDå»æŸ¥è¯¢ä¸šåŠ¡ä¿¡æ¯ï¼Œæ¯”å¦‚é€šè¿‡å‡ºå·®å•çš„IDï¼Œå»æŸ¥è¯¢æ›´å¤šçš„è¯·å‡ä¿¡æ¯ï¼ˆå‡ºå·®äººï¼Œå‡ºå·®æ—¶é—´ï¼Œå‡ºå·®å¤©æ•°ï¼Œå‡ºå·®ç›®çš„åœ°ç­‰ï¼‰</li>
<li><p><code>String businessKey = processInstance.getBusinessKey();</code></p></li>
</ul>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†.PNG" alt="act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†"></p>
<h3 id="æŒ‚èµ·æ¿€æ´»æµç¨‹å®ä¾‹">1.3 æŒ‚èµ·&amp;æ¿€æ´»æµç¨‹å®ä¾‹</h3>
<p>æŸäº›æƒ…å†µå¯èƒ½ç”±äºæµç¨‹å˜æ›´éœ€è¦å°†å½“å‰è¿è¡Œçš„æµç¨‹æš‚åœè€Œä¸æ˜¯ç›´æ¥åˆ é™¤ï¼Œæµç¨‹æš‚åœåå°†ä¸ä¼šç»§ç»­æ‰§è¡Œã€‚</p>
<h4 id="å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·">1.3.1 å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·</h4>
<p>æ“ä½œæµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœï¼›å³ï¼šæµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€è¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·ä¸æ¿€æ´»</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SuspendAllProcessInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–repositoryService</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æµç¨‹å®šä¹‰çš„å¯¹è±¡</span></span><br><span class="line">    ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery().</span><br><span class="line">        processDefinitionKey(<span class="string">&quot;myEvection&quot;</span>).</span><br><span class="line">        singleResult();</span><br><span class="line">    <span class="comment">// å¾—åˆ°å½“å‰æµç¨‹å®šä¹‰çš„å®ä¾‹æ˜¯å¦éƒ½ä¸ºæš‚åœçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">boolean</span> suspended = processDefinition.isSuspended();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰id</span></span><br><span class="line">    String processDefinitionId = processDefinition.getId();</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºæš‚åœ</span></span><br><span class="line">    <span class="keyword">if</span>(suspended)&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æš‚åœï¼Œå¯ä»¥æ‰§è¡Œæ¿€æ´»æ“ä½œ:param1 ï¼šæµç¨‹å®šä¹‰id ï¼Œparam12ï¼šæ˜¯å¦æ¿€æ´»ï¼Œparam13ï¼šæ¿€æ´»æ—¶é—´</span></span><br><span class="line">        repositoryService.activateProcessDefinitionById(processDefinitionId, <span class="keyword">true</span>, <span class="keyword">null</span></span><br><span class="line">                                                       );</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span>+processDefinitionId+<span class="string">&quot;,å·²æ¿€æ´»&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æ¿€æ´»çŠ¶æ€ï¼Œå¯ä»¥æš‚åœï¼Œå‚æ•°1 ï¼šæµç¨‹å®šä¹‰id ï¼Œå‚æ•°2ï¼šæ˜¯å¦æš‚åœï¼Œå‚æ•°3ï¼šæš‚åœæ—¶é—´</span></span><br><span class="line">        repositoryService.suspendProcessDefinitionById(processDefinitionId,</span><br><span class="line">                                                       <span class="keyword">true</span>,</span><br><span class="line">                                                       <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span>+processDefinitionId+<span class="string">&quot;,å·²æŒ‚èµ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‚èµ·å‰act_ru_execution&amp;act_ru_taskè¡¨çš„çŠ¶æ€ï¼Œå³æ¿€æ´»æ€ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰çš„æ¿€æ´»çŠ¶æ€ï¼šact_ru_execution.PNG" alt="å½“å‰çš„æ¿€æ´»çŠ¶æ€ï¼šact_ru_execution"></p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰æµç¨‹çš„æ¿€æ´»çŠ¶æ€ï¼šact_ru_task.PNG" alt="å½“å‰æµç¨‹çš„æ¿€æ´»çŠ¶æ€ï¼šact_ru_task"></p>
<p>æŒ‚èµ·åact_ru_execution&amp;act_ru_taskè¡¨çš„çŠ¶æ€ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰çš„æŒ‚èµ·çŠ¶æ€ï¼šact_ru_execution.PNG" alt="å½“å‰çš„æŒ‚èµ·çŠ¶æ€ï¼šact_ru_execution"></p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰æµç¨‹çš„æŒ‚èµ·çŠ¶æ€ï¼šact_ru_task.PNG" alt="å½“å‰æµç¨‹çš„æŒ‚èµ·çŠ¶æ€ï¼šact_ru_task"></p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ° <code>SUSPENSION_STATE_</code> çš„çŠ¶æ€</p>
</blockquote>
<h4 id="å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·">1.3.2 å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·</h4>
<p>æ“ä½œæµç¨‹å®ä¾‹å¯¹è±¡ï¼Œé’ˆå¯¹å•ä¸ªæµç¨‹æ‰§è¡ŒæŒ‚èµ·æ“ä½œï¼ŒæŸä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·åˆ™æ­¤æµç¨‹ä¸å†ç»§ç»­æ‰§è¡Œï¼Œå®Œæˆè¯¥æµç¨‹å®ä¾‹çš„å½“å‰ä»»åŠ¡å°†æŠ¥å¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·ä¸æ¿€æ´»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">suspendSingleProcessInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æµç¨‹å®šä¹‰çš„å¯¹è±¡</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService</span><br><span class="line">        .createProcessInstanceQuery()</span><br><span class="line">        .processInstanceId(<span class="string">&quot;17501&quot;</span>)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="comment">// å¾—åˆ°å½“å‰æµç¨‹å®šä¹‰çš„å®ä¾‹æ˜¯å¦éƒ½ä¸ºæš‚åœçŠ¶æ€,true:å·²æš‚åœ</span></span><br><span class="line">    <span class="keyword">boolean</span> suspended = processInstance.isSuspended();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰idï¼Œå…¶å®å°±æ˜¯ä¸Šé¢å¡«å†™çš„id 17501</span></span><br><span class="line">    String processDefinitionId = processInstance.getId();</span><br><span class="line">    System.out.println(processDefinitionId); </span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºæš‚åœ</span></span><br><span class="line">    <span class="keyword">if</span>(suspended)&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æš‚åœï¼Œå¯ä»¥æ‰§è¡Œæ¿€æ´»æ“ä½œ ,å‚æ•°ï¼šæµç¨‹å®šä¹‰id</span></span><br><span class="line">        runtimeService.activateProcessInstanceById(processDefinitionId);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span>+processDefinitionId+<span class="string">&quot;,å·²æ¿€æ´»&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æ¿€æ´»çŠ¶æ€ï¼Œå¯ä»¥æš‚åœï¼Œå‚æ•°ï¼šæµç¨‹å®šä¹‰id</span></span><br><span class="line">        runtimeService.suspendProcessInstanceById( processDefinitionId);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span>+processDefinitionId+<span class="string">&quot;,å·²æŒ‚èµ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·åact_ru_execution&amp;act_ru_taskè¡¨çš„çŠ¶æ€ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰çš„æŒ‚èµ·çŠ¶æ€-å•æµç¨‹ï¼šact_ru_execution.PNG" alt="å½“å‰çš„æŒ‚èµ·çŠ¶æ€-å•æµç¨‹ï¼šact_ru_execution"></p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å½“å‰æµç¨‹çš„æŒ‚èµ·çŠ¶æ€-å•æµç¨‹ï¼šact_ru_task.PNG" alt="å½“å‰æµç¨‹çš„æŒ‚èµ·çŠ¶æ€-å•æµç¨‹ï¼šact_ru_task"></p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°å®ä¾‹idä¸º17501çš„æµç¨‹è¢«æŒ‚èµ·äº†ï¼Œè€Œæµç¨‹idä¸º20001çš„æµç¨‹å®ä¾‹æ˜¯æ²¡æœ‰è¢«æŒ‚èµ·çš„ã€‚</p>
</blockquote>
<p>åœ¨æµç¨‹å®ä¾‹è¢«æŒ‚èµ·çš„çŠ¶æ€å»æ‰§è¡Œæµç¨‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•å®Œæˆä¸ªäººä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡,å‚æ•°ï¼šæµç¨‹å®ä¾‹id,å®Œæˆzhangsançš„ä»»åŠ¡</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processInstanceId(<span class="string">&quot;17501&quot;</span>)</span><br><span class="line">        .taskAssignee(<span class="string">&quot;zhangsan&quot;</span>)</span><br><span class="line">        .singleResult();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹id=&quot;</span>+task.getProcessInstanceId());</span><br><span class="line">    System.out.println(<span class="string">&quot;ä»»åŠ¡Id=&quot;</span>+task.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;ä»»åŠ¡è´Ÿè´£äºº=&quot;</span>+task.getAssignee());</span><br><span class="line">    System.out.println(<span class="string">&quot;ä»»åŠ¡åç§°=&quot;</span>+task.getName());</span><br><span class="line">    <span class="comment">// æµ‹è¯•æ˜¯å¦èƒ½å®Œæˆä»»åŠ¡</span></span><br><span class="line">    taskService.complete(task.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å½“æµç¨‹è¢«æŒ‚èµ·çš„çŠ¶æ€å»æ‰§è¡Œä»»åŠ¡ï¼Œæ­¤æ—¶æ˜¯æ— æ³•æ‰§è¡Œçš„ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.activiti.engine.ActivitiException: Cannot complete a suspended task</span><br></pre></td></tr></table></figure></li>
<li><p>å†æŒ‚èµ·çš„æµç¨‹å®ä¾‹é‡æ–°æ¿€æ´»åå†æ‰§è¡Œä»»åŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è°ƒç”¨æ–¹æ³•suspendSingleProcessInstance</span></span><br><span class="line">æµç¨‹å®šä¹‰ï¼š17501,å·²æ¿€æ´»</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨è°ƒç”¨æ–¹æ³•completTaskï¼ŒæˆåŠŸæ‰§è¡Œ</span></span><br><span class="line">æµç¨‹å®ä¾‹id=17501</span><br><span class="line">ä»»åŠ¡Id=17505</span><br><span class="line">ä»»åŠ¡è´Ÿè´£äºº=zhangsan</span><br><span class="line">ä»»åŠ¡åç§°=åˆ›å»ºå‡ºå·®ç”³è¯·</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ä¸ªäººä»»åŠ¡">2. ä¸ªäººä»»åŠ¡</h2>
<h3 id="åˆ†é…ä»»åŠ¡è´Ÿè´£äºº">2.1 åˆ†é…ä»»åŠ¡è´Ÿè´£äºº</h3>
<h4 id="å›ºå®šåˆ†é…">2.1.1 å›ºå®šåˆ†é…</h4>
<p>åœ¨è¿›è¡Œä¸šåŠ¡æµç¨‹å»ºæ¨¡æ—¶æŒ‡å®šå›ºå®šçš„ä»»åŠ¡è´Ÿè´£äººï¼Œ å¦‚å›¾ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/è´£ä»»äººæŒ‡å®š.PNG" alt="è´£ä»»äººæŒ‡å®š"></p>
<h4 id="è¡¨è¾¾å¼åˆ†é…">2.1.2 è¡¨è¾¾å¼åˆ†é…</h4>
<p>ç”±äºå›ºå®šåˆ†é…æ–¹å¼ï¼Œä»»åŠ¡åªç®¡ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œä»»åŠ¡ï¼Œæ‰§è¡Œåˆ°æ¯ä¸€ä¸ªä»»åŠ¡å°†æŒ‰ç…§ bpmn çš„é…ç½®å»åˆ†é…ä»»åŠ¡è´Ÿè´£äººã€‚</p>
<p><strong>UEL è¡¨è¾¾å¼ï¼š</strong>Activiti ä½¿ç”¨ UEL è¡¨è¾¾å¼ï¼ŒUEL æ˜¯ java EE6 è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼ŒUELï¼ˆUnified Expression Languageï¼Œç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€ï¼‰activiti æ”¯æŒä¸¤ä¸ª UEL è¡¨è¾¾å¼ï¼šUEL-value å’Œ UEL-methodã€‚</p>
<p><strong>UEL-value å®šä¹‰æ–¹å¼ï¼š</strong></p>
<ul>
<li>å®šä¹‰æ–¹å¼1ï¼š<code>$&#123;...&#125;</code>ï¼Œåœ¨<code>&#123;&#125;</code>ä¸­å¡«å…¥ç›¸åº”çš„å˜é‡ï¼Œå³å¯ä»¥æ›¿æ¢ä¸Šå›¾ä¸­Assigneeä¸­å†™æ­»çš„å€¼ï¼Œå¦‚<code>$&#123;assignee _1&#125;</code></li>
<li>å®šä¹‰æ–¹å¼2ï¼š<code>$&#123;xxx.xxx&#125;</code>ï¼Œå¦‚<code>$&#123;user.assignee_1&#125;</code>ï¼Œè¡¨ç¤º user ä¹Ÿæ˜¯ activiti çš„ä¸€ä¸ªæµç¨‹å˜é‡ï¼Œ<code>user.assignee</code>è¡¨ç¤ºé€šè¿‡è°ƒç”¨ user çš„ getter æ–¹æ³•è·å–å€¼</li>
</ul>
<p><strong>UEL-method æ–¹å¼ï¼š</strong></p>
<ul>
<li><code>$&#123;xxxBean.getxxx&#125;</code>ï¼Œå¦‚ï¼š<code>$&#123;UserBean.getUserId()&#125;</code>ï¼Œå…¶ä¸­userBean æ˜¯ spring å®¹å™¨ä¸­çš„ä¸€ä¸ª beanï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥ bean çš„ <code>getUserId()</code> æ–¹æ³•ã€‚</li>
</ul>
<p><strong>UEL-method ä¸ UEL-value ç»“åˆæ–¹å¼ï¼š</strong></p>
<ul>
<li>æ¯”å¦‚ï¼š<code>$&#123;ldapService.findManagerForEmployee(emp)&#125;</code>ï¼Œå…¶ä¸­ ldapService æ˜¯ spring å®¹å™¨çš„ä¸€ä¸ª beanï¼ŒfindManagerForEmployee æ˜¯è¯¥ bean çš„ä¸€ä¸ªæ–¹æ³•ï¼Œemp æ˜¯ activiti æµç¨‹å˜é‡ï¼Œ emp ä½œä¸ºå‚æ•°ä¼ åˆ° ldapService.findManagerForEmployee æ–¹æ³•ä¸­ã€‚</li>
</ul>
<p><strong>å…¶å®ƒæ–¹å¼ï¼š</strong></p>
<ul>
<li>è¡¨è¾¾å¼æ”¯æŒè§£æåŸºç¡€ç±»å‹ã€beanã€listã€array å’Œ mapï¼Œä¹Ÿå¯ä½œä¸ºæ¡ä»¶åˆ¤æ–­ã€‚å¦‚ä¸‹ï¼š<code>$&#123;order.price &gt; 100 &amp;&amp; order.price &lt; 250&#125;</code></li>
</ul>
<blockquote>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<p>ç”±äºä½¿ç”¨äº†è¡¨è¾¾å¼åˆ†é…ï¼Œå¿…é¡»ä¿è¯åœ¨ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹è¡¨è¾¾å¼æ‰§è¡ŒæˆåŠŸï¼Œæ¯”å¦‚ï¼šæŸä¸ªä»»åŠ¡ä½¿ç”¨äº†è¡¨è¾¾å¼<code>$&#123;order.price &gt; 100 &amp;&amp; order.price &lt; 250&#125;</code>ï¼Œå½“æ‰§è¡Œè¯¥ä»»åŠ¡æ—¶å¿…é¡»ä¿è¯ order åœ¨æµç¨‹å˜é‡ä¸­å­˜åœ¨ï¼Œå¦åˆ™ activiti å¼‚å¸¸ã€‚</p>
</blockquote>
<p><strong>ä½¿ç”¨UEL-value å®šä¹‰æ–¹å¼æ¥å®ç°ç¼–å†™ä»£ç é…ç½®è´Ÿè´£äººï¼š</strong></p>
<ol type="1">
<li><p>å®šä¹‰ä»»åŠ¡åˆ†é…æµç¨‹å˜é‡ï¼Œè¿˜æ˜¯ç”¨äº†ä¹‹å‰çš„è¿™ä¸ªå‡ºå·®æµç¨‹ï¼Œä½†æ˜¯è¿™é‡Œçš„è´£ä»»äººé€šè¿‡äº† UEL è¡¨è¾¾å¼è¿›è¡ŒæŒ‡å®šï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/è´£ä»»äººæŒ‡å®š-UEL.PNG" alt="è´£ä»»äººæŒ‡å®š-UEL"></p>
<blockquote>
<p>å…¶ä»–èŠ‚ç‚¹ä¹Ÿå’Œä¹‹å‰çš„ç›¸åŒï¼Œæ€»å…±æ˜¯4ä¸ªèŠ‚ç‚¹ï¼š<code>$&#123;assignee_1&#125;</code>~<code>$&#123;assignee_4&#125;</code></p>
</blockquote></li>
<li><p>å¸ƒç½²è¯¥æµç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éƒ¨ç½²æµç¨‹å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½²</span></span><br><span class="line">    Deployment deployment = repositoryService.createDeployment()</span><br><span class="line">        .addClasspathResource(<span class="string">&quot;bpmn/evection-uel.bpmn&quot;</span>) <span class="comment">// æ·»åŠ bpmnèµ„æº(è¿™é‡Œå°±ç”Ÿæˆpngäº†)</span></span><br><span class="line">        .name(<span class="string">&quot;å‡ºå·®ç”³è¯·æµç¨‹&quot;</span>)</span><br><span class="line">        .deploy();</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²idï¼š&quot;</span> + deployment.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot;</span> + deployment.getName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºå†…å®¹ï¼š</span></span><br><span class="line"><span class="comment">// æµç¨‹éƒ¨ç½²idï¼š25001</span></span><br><span class="line"><span class="comment">// æµç¨‹éƒ¨ç½²åç§°ï¼šå‡ºå·®ç”³è¯·æµç¨‹</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŸ¥çœ‹å¸ƒç½²çš„æ•°æ®ï¼š</p>
<ul>
<li>act_re_deployment</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	NAME_	CATEGORY_	KEY_	TENANT_ID_	DEPLOY_TIME_	ENGINE_VERSION_</span><br><span class="line">25001	å‡ºå·®ç”³è¯·æµç¨‹	\N	\N		2022-05-02 14:11:37	\N</span><br></pre></td></tr></table></figure>
<ul>
<li>act_re_procdef</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	CATEGORY_	NAME_	KEY_	VERSION_	DEPLOYMENT_ID_	RESOURCE_NAME_	DGRM_RESOURCE_NAME_	DESCRIPTION_	HAS_START_FORM_KEY_	HAS_GRAPHICAL_NOTATION_	SUSPENSION_STATE_	TENANT_ID_	ENGINE_VERSION_</span><br><span class="line">myEvection-uel:1:25003	1	http://www.activiti.org/testm1651471112919	å‡ºå·®ç”³è¯·-uel	myEvection-uel	1	25001	bpmn/evection-uel.bpmn	\N	\N	0	1	1		\N</span><br></pre></td></tr></table></figure>
</blockquote></li>
<li><p>è®¾ç½®æµç¨‹å˜é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®æµç¨‹è´Ÿè´£äºº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">assigneeUEL</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å– RuntimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// è®¾ç½®assigneeçš„å–å€¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç•Œé¢ä¸Šè®¾ç½®æµç¨‹çš„æ‰§è¡Œ</span></span><br><span class="line">    Map&lt;String,Object&gt; assigneeMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    assigneeMap.put(<span class="string">&quot;assignee_1&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    assigneeMap.put(<span class="string">&quot;assignee_2&quot;</span>,<span class="string">&quot;æç»ç†&quot;</span>);</span><br><span class="line">    assigneeMap.put(<span class="string">&quot;assignee_3&quot;</span>,<span class="string">&quot;ç‹æ€»ç»ç†&quot;</span>);</span><br><span class="line">    assigneeMap.put(<span class="string">&quot;assignee_4&quot;</span>,<span class="string">&quot;èµµè´¢åŠ¡&quot;</span>);</span><br><span class="line">    <span class="comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¿˜è¦è®¾ç½®æµç¨‹å®šä¹‰çš„assigneeçš„å€¼</span></span><br><span class="line">    runtimeService.startProcessInstanceByKey(<span class="string">&quot;myEvection-uel&quot;</span>,assigneeMap);</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    System.out.println(processEngine.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡ŒæˆåŠŸåï¼Œå¯ä»¥åœ¨act_ru_variableè¡¨ä¸­çœ‹åˆ°åˆšæ‰mapä¸­çš„æ•°æ®ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/act_ru_variableæ•°æ®.PNG" alt="act_ru_variableæ•°æ®"></p></li>
</ol>
<h4 id="ç›‘å¬å™¨åˆ†é…">2.1.3 ç›‘å¬å™¨åˆ†é…</h4>
<p>å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šActivitiæµç¨‹çš„ä¸šåŠ¡ã€‚æ¯”å¦‚é€šè¿‡ç›‘å¬å™¨çš„æ–¹å¼æ¥æŒ‡å®šè´Ÿè´£äººï¼Œé‚£ä¹ˆåœ¨æµç¨‹è®¾è®¡æ—¶å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚</p>
<p>ä»»åŠ¡ç›‘å¬å™¨æ˜¯å‘ç”Ÿå¯¹åº”çš„ä»»åŠ¡ç›¸å…³äº‹ä»¶æ—¶æ‰§è¡Œè‡ªå®šä¹‰ java é€»è¾‘ æˆ–è¡¨è¾¾å¼ã€‚</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/äº‹ä»¶ç±»å‹.PNG" alt="äº‹ä»¶ç±»å‹"></p>
<p><strong>ä»»åŠ¡äº‹ä»¶eventåŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>åˆ›å»ºæ—¶é—´ï¼šcreateï¼Œä»»åŠ¡åˆ›å»ºåè§¦å‘ï¼›</li>
<li>åˆ†é…äº‹ä»¶ï¼šassigneeï¼Œä»»åŠ¡åˆ†é…åè§¦å‘ï¼›</li>
<li>åˆ é™¤äº‹ä»¶ï¼šdeleteï¼Œä»»åŠ¡å®Œæˆåè§¦å‘ï¼›</li>
<li>æ‰€æœ‰æ—¶é—´ï¼šallï¼Œæ‰€æœ‰äº‹ä»¶å‘ç”Ÿéƒ½è§¦å‘ï¼›</li>
</ul>
<p><strong>ä»»åŠ¡ç±»å‹typeåŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>classï¼šç±»ï¼Œç›‘å¬åˆ°äº‹ä»¶æ‰¾ä¸€ä¸ªç±»æ¥å¤„ç†å½“ç„¶ä»»åŠ¡ï¼›é€‰æ‹©classåï¼Œåœ¨åç»­çš„classæ ä¸­å¡«å…¥å…¨é™å®šç±»åï¼›</li>
<li>expressionï¼šè¡¨è¾¾å¼ï¼Œç›‘å¬åˆ°äº‹ä»¶æ‰¾ä¸€ä¸ªè¡¨è¾¾å¼æ¥å¤„ç†å½“ç„¶ä»»åŠ¡ï¼›</li>
<li>delegate expressionï¼š</li>
</ul>
<p><strong>ä¸€ä¸ªç›‘å¬å™¨çš„å°Demoï¼š</strong></p>
<ol type="1">
<li><p>åˆ›å»ºæµç¨‹ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/ç›‘å¬æµç¨‹é…ç½®.PNG" alt="ç›‘å¬æµç¨‹é…ç½®"></p>
<blockquote>
<p>è¿™é‡Œçš„è¯å®šä¹‰ä»»åŠ¡ç›‘å¬ç±»ï¼šä¸”ç±»å¿…é¡»å®ç° org.activiti.engine.delegate.TaskListener æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package cn.xyc.demo.listener;</span><br><span class="line"></span><br><span class="line">import org.activiti.engine.delegate.DelegateTask;</span><br><span class="line">import org.activiti.engine.delegate.TaskListener;</span><br><span class="line"></span><br><span class="line">public class MyTaskListener implements TaskListener&#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é‡å†™notifyæ–¹æ³•</span><br><span class="line">     * @param delegateTask</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void notify(DelegateTask delegateTask) &#123;</span><br><span class="line">        if(delegateTask.getName().equals(&quot;åˆ›å»ºå‡ºå·®ç”³è¯·&quot;)&amp;&amp;</span><br><span class="line">                delegateTask.getEventName().equals(&quot;create&quot;))&#123;</span><br><span class="line">            //è¿™é‡ŒæŒ‡å®šä»»åŠ¡è´Ÿè´£äºº</span><br><span class="line">            delegateTask.setAssignee(&quot;å¼ ä¸‰&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰“ä¸ªæ–­ç‚¹æŸ¥çœ‹ç±»DelegateTaskä¸­çš„å†…å®¹ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/DelegateTaskç±»çš„å€¼.PNG" alt="DelegateTaskç±»çš„å€¼"></p>
</blockquote></li>
<li><p>éƒ¨ç½²&amp;å¯åŠ¨æµç¨‹å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éƒ¨ç½²æµç¨‹å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½²</span></span><br><span class="line">    Deployment deployment = repositoryService.createDeployment()</span><br><span class="line">        .addClasspathResource(<span class="string">&quot;bpmn/listen-demo.bpmn&quot;</span>) <span class="comment">// æ·»åŠ bpmnèµ„æº</span></span><br><span class="line">        .name(<span class="string">&quot;ç›‘å¬äº‹ä»¶çš„Demo&quot;</span>)</span><br><span class="line">        .deploy();</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²idï¼š&quot;</span> + deployment.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot;</span> + deployment.getName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµç¨‹å¯åŠ¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListenerStart</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°runtimeServiceå®ä¾‹</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// 3ã€å¯åŠ¨ï¼ˆMyTaskListenerä¸­æ‰“æ–­ç‚¹æŸ¥çœ‹ï¼‰</span></span><br><span class="line">    runtimeService.startProcessInstanceByKey(<span class="string">&quot;listen-demo&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨å®Œæˆåï¼Œå¯ä»¥åœ¨æ‰§è¡Œä»»åŠ¡è¡¨act_ru_taskä¸­æŸ¥çœ‹æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°å…¶<code>ASSIGNEE_</code>å±æ€§å³ä¸ºä¸Šè¿°è®¾ç½®çš„<code>å¼ ä¸‰</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">32505	1	32502	32501	listen-demo:1:30003	ç›‘å¬ä»»åŠ¡	\N	\N	_3	\N	å¼ ä¸‰	\N	50	2022-05-02 15:15:22	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>æ³¨æ„äº‹é¡¹ï¼šä½¿ç”¨ç›‘å¬å™¨åˆ†é…æ–¹å¼ï¼ŒæŒ‰ç…§ç›‘å¬äº‹ä»¶å»æ‰§è¡Œç›‘å¬ç±»çš„ notify æ–¹æ³•ï¼Œæ–¹æ³•å¦‚æœä¸èƒ½æ­£å¸¸æ‰§è¡Œä¹Ÿä¼šå½±å“ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
</blockquote>
<h3 id="æŸ¥è¯¢ä»»åŠ¡">2.2 æŸ¥è¯¢ä»»åŠ¡</h3>
<p><strong>æŸ¥è¯¢ä»»åŠ¡è´Ÿè´£äººçš„å¾…åŠä»»åŠ¡ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å½“å‰ä¸ªäººå¾…æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findPersonalTaskList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String processDefinitionKey = <span class="string">&quot;myEvection1&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assignee = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–TaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    List&lt;Task&gt; taskList = taskService.createTaskQuery()</span><br><span class="line">    	.processDefinitionKey(processDefinitionKey)</span><br><span class="line">    	.includeProcessVariables()</span><br><span class="line">        .taskAssignee(assignee)</span><br><span class="line">        .list();</span><br><span class="line">    <span class="keyword">for</span> (Task task : taskList) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹idï¼š &quot;</span> + task.getProcessInstanceId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡idï¼š &quot;</span> + task.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡è´Ÿè´£äººï¼š &quot;</span> + task.getAssignee());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡åç§°ï¼š &quot;</span> + task.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å…³è” businessKeyï¼š</strong></p>
<ul>
<li><p>éœ€æ±‚ï¼šåœ¨ activiti å®é™…åº”ç”¨æ—¶ï¼ŒæŸ¥è¯¢å¾…åŠä»»åŠ¡å¯èƒ½è¦æ˜¾ç¤ºå‡ºä¸šåŠ¡ç³»ç»Ÿçš„ä¸€äº›ç›¸å…³ä¿¡æ¯ã€‚</p>
<p>æ¯”å¦‚ï¼šæŸ¥è¯¢å¾…å®¡æ‰¹å‡ºå·®ä»»åŠ¡åˆ—è¡¨éœ€è¦å°†å‡ºå·®å•çš„æ—¥æœŸã€ å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­å­˜åœ¨ï¼Œè€Œå¹¶æ²¡æœ‰åœ¨ activiti æ•°æ®åº“ä¸­å­˜åœ¨ï¼Œæ‰€ä»¥æ˜¯æ— æ³•é€šè¿‡ activiti çš„ api æŸ¥è¯¢åˆ°å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚</p></li>
<li><p>å®ç°ï¼šåœ¨æŸ¥è¯¢å¾…åŠä»»åŠ¡æ—¶ï¼Œé€šè¿‡ businessKeyï¼ˆä¸šåŠ¡æ ‡è¯† ï¼‰å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„å‡ºå·®å•è¡¨ï¼ŒæŸ¥è¯¢å‡ºå‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…³è” businessKey</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findProcessInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–TaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// è·å–RuntimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æµç¨‹å®šä¹‰çš„å¯¹è±¡</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(<span class="string">&quot;myEvection1&quot;</span>)</span><br><span class="line">        .taskAssignee(<span class="string">&quot;å¼ ä¸‰&quot;</span>)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="comment">// ä½¿ç”¨taskå¯¹è±¡è·å–å®ä¾‹id</span></span><br><span class="line">    String processInstanceId = task.getProcessInstanceId();</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å®ä¾‹idï¼Œè·å–æµç¨‹å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService.createProcessInstanceQuery()</span><br><span class="line">        .processInstanceId(processInstanceId)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="comment">// ä½¿ç”¨processInstanceï¼Œå¾—åˆ° businessKeyï¼Œç„¶åå°±å¯ä»¥ç”¨bussinesskeyå»å…³è”ä¸šåŠ¡è¡¨äº†</span></span><br><span class="line">    String businessKey = processInstance.getBusinessKey();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;businessKey=&quot;</span>+businessKey);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŠç†ä»»åŠ¡">2.3 åŠç†ä»»åŠ¡</h3>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå®Œæˆä»»åŠ¡å‰éœ€è¦æ ¡éªŒä»»åŠ¡çš„è´Ÿè´£äººæ˜¯å¦å…·æœ‰è¯¥ä»»åŠ¡çš„åŠç†æƒé™ ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡id</span></span><br><span class="line">    String taskId = <span class="string">&quot;15005&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assingee = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºTaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">// æ ¡éªŒæ–¹æ³•ï¼šæ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .taskId(taskId)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        taskService.complete(taskId);</span><br><span class="line">        System.out.println(<span class="string">&quot;å®Œæˆä»»åŠ¡&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æµç¨‹å˜é‡">3. æµç¨‹å˜é‡</h2>
<h3 id="æµç¨‹å˜é‡-1">3.1 æµç¨‹å˜é‡</h3>
<p><strong>æµç¨‹å˜é‡ï¼š</strong></p>
<ul>
<li>æµç¨‹å˜é‡åœ¨ activiti ä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œæµç¨‹è¿è½¬æœ‰æ—¶éœ€è¦é æµç¨‹å˜é‡ï¼Œä¸šåŠ¡ç³»ç»Ÿå’Œ activiti ç»“åˆæ—¶å°‘ä¸äº†æµç¨‹å˜é‡ï¼Œæµç¨‹å˜é‡å°±æ˜¯ activiti åœ¨ç®¡ç†å·¥ä½œæµæ—¶æ ¹æ®ç®¡ç†éœ€è¦è€Œè®¾ç½®çš„å˜é‡ã€‚</li>
<li>æ¯”å¦‚ï¼šåœ¨å‡ºå·®ç”³è¯·æµç¨‹æµè½¬æ—¶å¦‚æœå‡ºå·®å¤©æ•°å¤§äº 3 å¤©åˆ™ç”±æ€»ç»ç†å®¡æ ¸ï¼Œå¦åˆ™ç”±äººäº‹ç›´æ¥å®¡æ ¸ï¼Œå‡ºå·®å¤©æ•°å°±å¯ä»¥è®¾ç½®ä¸ºæµç¨‹å˜é‡ï¼Œåœ¨æµç¨‹æµè½¬æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>æ³¨æ„ï¼šè™½ç„¶æµç¨‹å˜é‡ä¸­å¯ä»¥å­˜å‚¨ä¸šåŠ¡æ•°æ®ï¼Œå¯ä»¥é€šè¿‡activitiçš„apiæŸ¥è¯¢æµç¨‹å˜é‡ä»è€Œå®ç°æŸ¥è¯¢ä¸šåŠ¡æ•°æ®ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºä¸šåŠ¡æ•°æ®æŸ¥è¯¢ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£ï¼Œactivitiè®¾ç½®æµç¨‹å˜é‡æ˜¯ä¸ºäº†æµç¨‹æ‰§è¡Œéœ€è¦è€Œåˆ›å»ºã€‚</strong></li>
</ul>
<p><strong>æµç¨‹å˜é‡ç±»å‹ï¼š</strong></p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æµç¨‹å˜é‡.png" alt="æµç¨‹å˜é‡"></p>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœå°† pojo å­˜å‚¨åˆ°æµç¨‹å˜é‡ä¸­ï¼Œå¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£ serializableï¼Œä¸ºäº†é˜²æ­¢ç”±äºæ–°å¢å­—æ®µæ— æ³•ååºåˆ—åŒ–ï¼Œéœ€è¦ç”Ÿæˆ serialVersionUIDã€‚</p>
</blockquote>
<h3 id="æµç¨‹å˜é‡ä½œç”¨åŸŸ">3.2 æµç¨‹å˜é‡ä½œç”¨åŸŸ</h3>
<p>æµç¨‹å˜é‡çš„ä½œç”¨åŸŸå¯ä»¥æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹(processInstance)ï¼›æˆ–ä¸€ä¸ªä»»åŠ¡(task)ï¼›æˆ–ä¸€ä¸ªæ‰§è¡Œå®ä¾‹(execution)ã€‚</p>
<p><strong>globaå˜é‡</strong></p>
<ul>
<li><p>æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ï¼Œå½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡ï¼›</p></li>
<li><p>æ³¨æ„ï¼š</p>
<p>å¦‚ï¼šGlobalå˜é‡ï¼šuserId(å˜é‡å)ï¼šzhangsan(å˜é‡å€¼)</p>
<p>global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚</p></li>
</ul>
<p><strong>localå˜é‡</strong></p>
<ul>
<li><p>ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œç§°ä¸º local å˜é‡ï¼›</p></li>
<li>Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ï¼›</li>
<li><p>Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚</p></li>
</ul>
<h3 id="æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•">3.3 æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•</h3>
<p><strong>åœ¨å±æ€§ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼ï¼š</strong></p>
<ul>
<li><p>å¯ä»¥åœ¨ assignee å¤„è®¾ç½® UEL è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„å€¼ä¸ºä»»åŠ¡çš„è´Ÿè´£äººï¼Œæ¯”å¦‚ï¼š<code>$&#123;assignee&#125;</code>ï¼Œassignee å°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ï¼›</p></li>
<li><p>Activitiè·å–UELè¡¨è¾¾å¼çš„å€¼ï¼Œå³æµç¨‹å˜é‡assigneeçš„å€¼ ï¼Œå°†assigneeçš„å€¼ä½œä¸ºä»»åŠ¡çš„è´Ÿè´£äººè¿›è¡Œä»»åŠ¡åˆ†é…ã€‚</p></li>
</ul>
<p><strong>åœ¨è¿çº¿ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼ï¼š</strong></p>
<ul>
<li><p>å¯ä»¥åœ¨è¿çº¿ä¸Šè®¾ç½®UELè¡¨è¾¾å¼ï¼Œå†³å®šæµç¨‹èµ°å‘ï¼Œæ¯”å¦‚ï¼š<code>$&#123;price&lt;10000&#125;</code>ï¼Œpriceå°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ï¼Œuelè¡¨è¾¾å¼ç»“æœç±»å‹ä¸ºå¸ƒå°”ç±»å‹ï¼›</p></li>
<li><p>å¦‚æœUELè¡¨è¾¾å¼æ˜¯trueï¼Œè¦å†³å®šæµç¨‹æ‰§è¡Œèµ°å‘ã€‚</p></li>
</ul>
<h3 id="ä½¿ç”¨globalå˜é‡æ§åˆ¶æµç¨‹">3.4 ä½¿ç”¨Globalå˜é‡æ§åˆ¶æµç¨‹</h3>
<h4 id="éœ€æ±‚">3.4.1 éœ€æ±‚</h4>
<p>å‘˜å·¥åˆ›å»ºå‡ºå·®ç”³è¯·å•ï¼Œç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼š</p>
<ul>
<li>éƒ¨é—¨ç»ç†å®¡æ ¸é€šè¿‡åå‡ºå·®3å¤©åŠä»¥ä¸‹ç”±äººè´¢åŠ¡ç›´æ¥å®¡æ‰¹ï¼›</li>
<li>3å¤©ä»¥ä¸Šå…ˆç”±æ€»ç»ç†å®¡æ ¸ï¼Œæ€»ç»ç†å®¡æ ¸é€šè¿‡å†ç”±è´¢åŠ¡å®¡æ‰¹ã€‚</li>
</ul>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-1.PNG" alt="æ¡ä»¶-1"></p>
<h4 id="æµç¨‹å®šä¹‰">3.4.2 æµç¨‹å®šä¹‰</h4>
<ol type="1">
<li><p>å‡ºå·®å¤©æ•°å¤§äºç­‰äº3è¿çº¿æ¡ä»¶ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-2.PNG" alt="æ¡ä»¶-2"></p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å‚æ•°å‘½åï¼Œå¦‚evection.numï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-3.PNG" alt="æ¡ä»¶-3"></p></li>
<li><p>å‡ºå·®å¤©æ•°å°äº3è¿çº¿æ¡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å‚æ•°å‘½åï¼Œå¦‚ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-4.PNG" alt="æ¡ä»¶-4"></p></li>
</ol>
<h4 id="æµç¨‹å¸ƒç½²">3.4.3 æµç¨‹å¸ƒç½²</h4>
<p>å°†åˆšåˆšè®¾è®¡å¥½çš„æµç¨‹è¿›è¡Œéƒ¨ç½²ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµç¨‹éƒ¨ç½²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€è·å–RepositoryServcie</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// 3ã€ä½¿ç”¨serviceè¿›è¡Œæµç¨‹çš„éƒ¨ç½²ï¼Œå®šä¹‰ä¸€ä¸ªæµç¨‹çš„åå­—ï¼ŒæŠŠbpmnå’Œpngéƒ¨ç½²åˆ°æ•°æ®ä¸­</span></span><br><span class="line">    Deployment deploy = repositoryService.createDeployment()</span><br><span class="line">            .name(<span class="string">&quot;å‡ºå·®ç”³è¯·æµç¨‹-variables&quot;</span>)</span><br><span class="line">            .addClasspathResource(<span class="string">&quot;bpmn/evection-global.bpmn&quot;</span>)</span><br><span class="line">            .deploy();</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²id=&quot;</span>+deploy.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åå­—=&quot;</span>+deploy.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¸ƒç½²åçš„.bpmnæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">definitions</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class="attr">xmlns:activiti</span>=<span class="string">&quot;http://activiti.org/bpmn&quot;</span> <span class="attr">xmlns:bpmndi</span>=<span class="string">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class="attr">xmlns:dc</span>=<span class="string">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class="attr">xmlns:di</span>=<span class="string">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class="attr">xmlns:tns</span>=<span class="string">&quot;http://www.activiti.org/testm1651545432300&quot;</span> <span class="attr">xmlns:xsd</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">expressionLanguage</span>=<span class="string">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class="attr">id</span>=<span class="string">&quot;m1651545432300&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">targetNamespace</span>=<span class="string">&quot;http://www.activiti.org/testm1651545432300&quot;</span> <span class="attr">typeLanguage</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;myEvection-global&quot;</span> <span class="attr">isClosed</span>=<span class="string">&quot;false&quot;</span> <span class="attr">isExecutable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®ç”³è¯·-global&quot;</span> <span class="attr">processType</span>=<span class="string">&quot;None&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;StartEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;$&#123;assignee1&#125;&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;åˆ›å»ºå‡ºå·®ç”³è¯·&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;$&#123;assignee2&#125;&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">name</span>=<span class="string">&quot;éƒ¨é—¨ç»ç†å®¡æ ¸&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;$&#123;assignee3&#125;&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ€»ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;$&#123;assignee4&#125;&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;è´¢åŠ¡å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bpmndi:BPMNDiagram</span> <span class="attr">documentation</span>=<span class="string">&quot;background=#3C3F41;count=1;horizontalcount=1;orientation=0;width=842.4;height=1195.2;imageableWidth=832.4;imageableHeight=1185.2;imageableX=5.0;imageableY=5.0&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Diagram-_1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;New Diagram&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bpmndi:BPMNPlane</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;myEvection-global&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNShape</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Shape-_2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;-5.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;15.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNShape</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNShape</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Shape-_3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNShape</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNShape</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Shape-_4&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;220.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNShape</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNShape</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Shape-_5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;360.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNShape</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNShape</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Shape-_6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;365.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;120.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;55.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNShape</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNShape</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Shape-_7&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;505.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;145.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;32.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNShape</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNEdge</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">id</span>=<span class="string">&quot;BPMNEdge__13&quot;</span> <span class="attr">sourceElement</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetElement</span>=<span class="string">&quot;_7&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;450.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;147.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;505.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;161.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNEdge</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">id</span>=<span class="string">&quot;BPMNEdge__12&quot;</span> <span class="attr">sourceElement</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetElement</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;405.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;75.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;405.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;120.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNEdge</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">id</span>=<span class="string">&quot;BPMNEdge__8&quot;</span> <span class="attr">sourceElement</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetElement</span>=<span class="string">&quot;_3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;27.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;31.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;85.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;47.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNEdge</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">id</span>=<span class="string">&quot;BPMNEdge__9&quot;</span> <span class="attr">sourceElement</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetElement</span>=<span class="string">&quot;_4&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;170.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;47.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;220.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;47.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNEdge</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">id</span>=<span class="string">&quot;BPMNEdge__11&quot;</span> <span class="attr">sourceElement</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetElement</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;305.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;47.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;365.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;147.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bpmndi:BPMNEdge</span> <span class="attr">bpmnElement</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">id</span>=<span class="string">&quot;BPMNEdge__10&quot;</span> <span class="attr">sourceElement</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetElement</span>=<span class="string">&quot;_5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;305.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;47.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">di:waypoint</span> <span class="attr">x</span>=<span class="string">&quot;360.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;47.5&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dc:Bounds</span> <span class="attr">height</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bpmndi:BPMNLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="è®¾ç½®globalæµç¨‹å˜é‡">3.4.4 è®¾ç½®globalæµç¨‹å˜é‡</h4>
<p>åœ¨éƒ¨é—¨ç»ç†å®¡æ ¸å‰è®¾ç½®æµç¨‹å˜é‡ï¼Œå˜é‡å€¼ä¸ºå‡ºå·®å•ä¿¡æ¯ï¼ˆåŒ…æ‹¬å‡ºå·®å¤©æ•°ï¼‰ï¼Œéƒ¨é—¨ç»ç†å®¡æ ¸åå¯ä»¥æ ¹æ®æµç¨‹å˜é‡çš„å€¼å†³å®šæµç¨‹èµ°å‘ã€‚</p>
<p>åœ¨è®¾ç½®æµç¨‹å˜é‡æ—¶ï¼Œ<strong>å¯ä»¥åœ¨å¯åŠ¨æµç¨‹æ—¶è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡åŠç†æ—¶è®¾ç½®</strong>ã€‚</p>
<p><strong>åˆ›å»ºPOJOå¯¹è±¡</strong>ï¼šåˆ›å»ºå‡ºå·®ç”³è¯·pojoå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡ºå·®ç”³è¯· pojo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Evection</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»é”®id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡ºå·®ç”³è¯·å•åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String evectionName;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡ºå·®å¤©æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Double num;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¢„è®¡å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date beginDate;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¢„è®¡ç»“æŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date endDate;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›®çš„åœ°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String destination;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡ºå·®äº‹ç”±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String reson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡">3.4.4.1 å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡</h5>
<p>åœ¨å¯åŠ¨æµç¨‹æ—¶è®¾ç½®æµç¨‹å˜é‡ï¼Œå˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹ã€‚</p>
<p>é€šè¿‡Map&lt;key,value&gt;è®¾ç½®æµç¨‹å˜é‡ï¼Œmapä¸­å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ï¼Œè¿™ä¸ªkeyå°±æ˜¯æµç¨‹å˜é‡çš„åå­—ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡çš„å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–runtimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String processKey = <span class="string">&quot;myEvection-global&quot;</span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå˜é‡é›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡ï¼Œè®¾ç½®å‡ºå·®å¤©æ•°</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    evection.setNum(<span class="number">2d</span>);</span><br><span class="line">    <span class="comment">// å®šä¹‰æµç¨‹å˜é‡ï¼ŒæŠŠå‡ºå·®pojoå¯¹è±¡æ”¾å…¥map</span></span><br><span class="line">    map.put(<span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">    <span class="comment">// è®¾ç½®assigneeçš„å–å€¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç•Œé¢ä¸Šè®¾ç½®æµç¨‹çš„æ‰§è¡Œ</span></span><br><span class="line">    map.put(<span class="string">&quot;assignee1&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;assignee2&quot;</span>,<span class="string">&quot;æç»ç†&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;assignee3&quot;</span>,<span class="string">&quot;ç‹æ€»ç»ç†&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;assignee4&quot;</span>,<span class="string">&quot;èµµè´¢åŠ¡&quot;</span>);</span><br><span class="line">    <span class="comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶è®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼ˆæŠŠmapä¼ å…¥ï¼‰</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(processKey, map);</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹åç§°=&quot;</span>+processInstance.getName());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰id=&quot;</span>+processInstance.getProcessDefinitionId());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// æµç¨‹å®ä¾‹åç§°=null</span></span><br><span class="line"><span class="comment">// æµç¨‹å®šä¹‰id=myEvection-global:1:35003</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼š<code>startProcessInstanceByKey(processDefinitionKey, variables)</code>ï¼Œæµç¨‹å˜é‡ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œ<strong>æµç¨‹å˜é‡ä½¿ç”¨Mapå­˜å‚¨</strong>ï¼ŒåŒä¸€ä¸ªæµç¨‹å®ä¾‹è®¾ç½®å˜é‡mapä¸­keyç›¸åŒï¼Œåè€…è¦†ç›–å‰è€…ã€‚</p>
</blockquote>
<p>æŸ¥çœ‹è¡¨act_ru_variableä¸­çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šè¿°è®¾ç½®çš„æ•°æ®ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/variablesï¼šact_ru_variable.PNG" alt="variablesï¼šact_ru_variable"></p>
<blockquote>
<p>åˆ—è¯´æ˜ï¼š<code>Id_ï¼šä¸»é”®  / Type_ï¼šå˜é‡ç±»å‹ / Name_ï¼šå˜é‡åç§°  / Execution_id_ï¼šæ‰€å±æµç¨‹å®ä¾‹æ‰§è¡Œidï¼Œglobalå’Œlocalå˜é‡éƒ½å­˜å‚¨ / Proc_inst_id_ï¼šæ‰€å±æµç¨‹å®ä¾‹idï¼Œglobalå’Œlocalå˜é‡éƒ½å­˜å‚¨  / Task_id_ï¼šæ‰€å±ä»»åŠ¡idï¼Œlocalå˜é‡å­˜å‚¨ / Bytearray_ï¼šserializableç±»å‹å˜é‡å­˜å‚¨å¯¹åº”act_ge_bytearrayè¡¨çš„id / Double_ï¼šdoubleç±»å‹å˜é‡å€¼ / Long_ï¼šlongç±»å‹å˜é‡å€¼/ Text_ï¼štextç±»å‹å˜é‡å€¼</code></p>
</blockquote>
<h5 id="ä»»åŠ¡åŠç†æ—¶è®¾ç½®å˜é‡">3.4.4.2 ä»»åŠ¡åŠç†æ—¶è®¾ç½®å˜é‡</h5>
<p>åœ¨å®Œæˆä»»åŠ¡æ—¶è®¾ç½®æµç¨‹å˜é‡ï¼Œè¯¥æµç¨‹å˜é‡åªæœ‰åœ¨è¯¥ä»»åŠ¡å®Œæˆåå…¶å®ƒç»“ç‚¹æ‰å¯ä½¿ç”¨è¯¥å˜é‡ï¼Œå®ƒçš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹ï¼Œå¦‚æœè®¾ç½®çš„æµç¨‹å˜é‡çš„keyåœ¨æµç¨‹å®ä¾‹ä¸­å·²å­˜åœ¨ç›¸åŒçš„åå­—åˆ™åè®¾ç½®çš„å˜é‡æ›¿æ¢å‰è¾¹è®¾ç½®çš„å˜é‡ã€‚</p>
<p>è¿™é‡Œéœ€è¦åœ¨åˆ›å»ºå‡ºå·®å•ä»»åŠ¡å®Œæˆæ—¶è®¾ç½®æµç¨‹å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡ï¼Œå³åœ¨ä»»åŠ¡åŠç†æ—¶è®¾ç½®å˜é‡å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡id</span></span><br><span class="line">    String key = <span class="string">&quot;myEvection-global&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assingee = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºTaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå˜é‡é›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    <span class="comment">// è®¾ç½®å‡ºå·®å¤©æ•°</span></span><br><span class="line">    evection.setNum(<span class="number">2d</span>);</span><br><span class="line">    <span class="comment">// å®šä¹‰æµç¨‹å˜é‡</span></span><br><span class="line">    map.put(<span class="string">&quot;evection&quot;</span>,evection);</span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">// æ ¡éªŒæ–¹æ³•ï¼šæ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(key)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// å®Œæˆä»»åŠ¡æ˜¯ï¼Œè®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼Œæ”¾å…¥è¿™map</span></span><br><span class="line">        taskService.complete(task.getId(),map);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡æ‰§è¡Œå®Œæˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼šé€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®æµç¨‹å˜é‡ï¼Œéœ€è¦æŒ‡å®šå½“å‰ä»»åŠ¡idï¼Œå¦‚æœå½“å‰æ‰§è¡Œçš„ä»»åŠ¡idä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ä»»åŠ¡åŠç†æ—¶ä¹Ÿæ˜¯é€šè¿‡<code>map&lt;key,value&gt;</code>è®¾ç½®æµç¨‹å˜é‡ï¼Œä¸€æ¬¡å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ã€‚</p>
</blockquote>
<h5 id="é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®">3.4.4.3 é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®</h5>
<p>é€šè¿‡æµç¨‹å®ä¾‹idè®¾ç½®å…¨å±€å˜é‡ï¼Œ<strong>è¯¥æµç¨‹å®ä¾‹å¿…é¡»æœªæ‰§è¡Œå®Œæˆ</strong>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGlobalVariableByExecutionId</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// å½“å‰æµç¨‹å®ä¾‹æ‰§è¡Œ idï¼Œé€šå¸¸è®¾ç½®ä¸ºå½“å‰æ‰§è¡Œçš„æµç¨‹å®ä¾‹</span></span><br><span class="line">    String executionId=<span class="string">&quot;47501&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–RuntimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    <span class="comment">// è®¾ç½®å¤©æ•°</span></span><br><span class="line">    evection.setNum(<span class="number">3d</span>);</span><br><span class="line">    <span class="comment">// é€šè¿‡æµç¨‹å®ä¾‹ idè®¾ç½®æµç¨‹å˜é‡</span></span><br><span class="line">    runtimeService.setVariable(executionId, <span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ï¼Œå°±æ˜¯ä¹‹å‰çš„mapå½¢å¼</span></span><br><span class="line">    <span class="comment">// runtimeService.setVariables(executionId, variables)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¡¨act_ru_executionä¸­è·å–åˆ°çš„æµç¨‹å®ä¾‹idï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	PROC_INST_ID_	BUSINESS_KEY_	PARENT_ID_	PROC_DEF_ID_	SUPER_EXEC_	ROOT_PROC_INST_ID_	ACT_ID_	IS_ACTIVE_	IS_CONCURRENT_	IS_SCOPE_	IS_EVENT_SCOPE_	IS_MI_ROOT_	SUSPENSION_STATE_	CACHED_ENT_STATE_	TENANT_ID_	NAME_	START_TIME_	START_USER_ID_	LOCK_TIME_	IS_COUNT_ENABLED_	EVT_SUBSCR_COUNT_	TASK_COUNT_	JOB_COUNT_	TIMER_JOB_COUNT_	SUSP_JOB_COUNT_	DEADLETTER_JOB_COUNT_	VAR_COUNT_	ID_LINK_COUNT_</span><br><span class="line">47506	1	47501	\N	47501	myEvection-global:1:35003	\N	47501	_3	1	0	0	0	0	1	\N		\N	2022-05-03 12:01:29	\N	\N	0	0	0	0	0	0	0	0	0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šexecutionId å¿…é¡»å½“å‰æœªç»“æŸæµç¨‹å®ä¾‹çš„æ‰§è¡Œidï¼Œé€šå¸¸æ­¤idè®¾ç½®æµç¨‹å®ä¾‹çš„idã€‚ä¹Ÿå¯ä»¥é€š<code>runtimeService.getVariable()</code> è·å–æµç¨‹å˜é‡ã€‚</p>
</blockquote>
<h5 id="é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®">3.4.4.4 é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGlobalVariableByTaskId</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰å¾…åŠä»»åŠ¡idï¼Œè¿™ä¸ªä»»åŠ¡idå¯ä»¥ä»act_ru_taskä¸­è·å–</span></span><br><span class="line">    String taskId=<span class="string">&quot;47509&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    evection.setNum(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">// é€šè¿‡ä»»åŠ¡è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class="line">    taskService.setVariable(taskId, <span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">    <span class="comment">// ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ï¼Œå°±æ˜¯ä¹‹å‰çš„mapå½¢å¼</span></span><br><span class="line">    <span class="comment">// taskService.setVariables(taskId, variables)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¡¨act_ru_taskä¸­è·å–åˆ°çš„ä»»åŠ¡idï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">47509	1	47506	47501	myEvection-global:1:35003	åˆ›å»ºå‡ºå·®ç”³è¯·	\N	\N	_3	\N	å¼ ä¸‰	\N	50	2022-05-03 12:01:29	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šä»»åŠ¡idå¿…é¡»æ˜¯å½“å‰å¾…åŠä»»åŠ¡idï¼Œact_ru_taskä¸­å­˜åœ¨ã€‚å¦‚æœè¯¥ä»»åŠ¡å·²ç»“æŸï¼Œä¼šæŠ¥é”™ä¹Ÿå¯ä»¥é€šè¿‡<code>taskService.getVariable()</code> è·å–æµç¨‹å˜é‡ã€‚</p>
</blockquote>
<h4 id="åˆ†æ”¯æµ‹è¯•">3.4.5 åˆ†æ”¯æµ‹è¯•</h4>
<p><strong>åˆ†æ”¯1ï¼šå‡ºå·®å¤©æ•°å°äº3å¤©çš„</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡-èŠ‚ç‚¹1ï¼šåˆ›å»ºå‡ºå·®ç”³è¯·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡id</span></span><br><span class="line">    String processKey = <span class="string">&quot;myEvection-global&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assingee = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºTaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">// æ ¡éªŒæ–¹æ³•ï¼šæ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(processKey)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        taskService.complete(task.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡æ‰§è¡Œå®Œæˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡-èŠ‚ç‚¹2ï¼šéƒ¨é—¨ç»ç†å®¡æ ¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String assingee = <span class="string">&quot;æç»ç†&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè®¾ç½®çš„å‡ºå·®å¤©æ•°ä¸ºï¼š<code>evection.setNum(2d);</code>ï¼Œå› æ­¤å½“<code>èŠ‚ç‚¹2ï¼šéƒ¨é—¨ç»ç†å®¡æ ¸</code>å®Œæˆåï¼Œåº”è¯¥èµ°çš„æ˜¯<code>è´¢åŠ¡å®¡æ‰¹èŠ‚ç‚¹</code>ï¼ŒæŸ¥çœ‹æ•°æ®åº“ä¸­è¡¨ act_ru_task ä¸­çš„ä»»åŠ¡èŠ‚ç‚¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">42502	1	37509	37501	myEvection-global:1:35003	è´¢åŠ¡å®¡æ‰¹	\N	\N	_6	\N	èµµè´¢åŠ¡	\N	50	2022-05-03 11:26:55	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»åˆ°äº†<code>è´¢åŠ¡å®¡æ‰¹èŠ‚ç‚¹</code>ï¼Œæ²¡æœ‰èµ°è¿™ä¸ª<code>æ€»ç»ç†å®¡æ‰¹</code>èŠ‚ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡-èŠ‚ç‚¹4ï¼šè´¢åŠ¡å®¡æ‰¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String assingee = <span class="string">&quot;èµµè´¢åŠ¡&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹è¡¨ act_hi_procinst æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ¡æµç¨‹å·²ç»èµ°å®Œäº†ï¼š</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ¡ä»¶-5.PNG" alt="æ¡ä»¶-5"></p>
<p><strong>åˆ†æ”¯2ï¼šå‡ºå·®å¤©æ•°å¤§äºç­‰äº3å¤©çš„</strong></p>
<blockquote>
<p>å‰é¢çš„æ“ä½œè¿˜æ˜¯ä¸€æ ·ï¼šå¼€å¯æµç¨‹&amp;æ‰§è¡Œä»»åŠ¡ï¼Œä¸è¿‡è¿™é‡Œä¸åŒçš„å°±æ˜¯åœ¨å¼€å¯æµç¨‹æ—¶ï¼Œä¸è®¾ç½®å‡ºå·®çš„pojoå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡å½“å‰æµç¨‹å®ä¾‹æ¥è¿›è¡Œè®¾ç½®ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡çš„å€¼-åˆ†æ”¯2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startProcess2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–runtimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String processKey = <span class="string">&quot;myEvection-global&quot;</span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå˜é‡é›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡ï¼Œè®¾ç½®å‡ºå·®å¤©æ•°</span></span><br><span class="line">    map.put(<span class="string">&quot;assignee1&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;assignee2&quot;</span>,<span class="string">&quot;æç»ç†&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;assignee3&quot;</span>,<span class="string">&quot;ç‹æ€»ç»ç†&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;assignee4&quot;</span>,<span class="string">&quot;èµµè´¢åŠ¡&quot;</span>);</span><br><span class="line">    <span class="comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶è®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼ˆæŠŠmapä¼ å…¥ï¼‰</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(processKey, map);</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹åç§°=&quot;</span>+processInstance.getName());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰id=&quot;</span>+processInstance.getProcessDefinitionId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åé€šè¿‡å½“å‰æµç¨‹å®ä¾‹æ¥è®¾ç½®pojoå¯¹è±¡ï¼š</p>
<blockquote>
<p>å…¶ä¸­çš„æµç¨‹å®ä¾‹çš„idå¯ä»¥åœ¨è¡¨act_ru_executionä¸­çš„åˆ—<code>PROC_INST_ID_</code>ä¸­æ‰¾åˆ°</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGlobalVariableByExecutionId</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// å½“å‰æµç¨‹å®ä¾‹æ‰§è¡Œ idï¼Œé€šå¸¸è®¾ç½®ä¸ºå½“å‰æ‰§è¡Œçš„æµç¨‹å®ä¾‹</span></span><br><span class="line">    String executionId=<span class="string">&quot;47501&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–RuntimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    <span class="comment">// è®¾ç½®å¤©æ•°</span></span><br><span class="line">    evection.setNum(<span class="number">3d</span>);</span><br><span class="line">    <span class="comment">// é€šè¿‡æµç¨‹å®ä¾‹ idè®¾ç½®æµç¨‹å˜é‡</span></span><br><span class="line">    runtimeService.setVariable(executionId, <span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">    <span class="comment">// ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼</span></span><br><span class="line">    <span class="comment">// runtimeService.setVariables(executionId, variables)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œæˆåï¼Œåˆ›å»ºçš„å‡ºå·®pojoå¯¹è±¡å°±è®¾ç½®æˆåŠŸäº†ï¼Œè¿™æ—¶å†ç»§ç»­å®Œæˆåç»­ä»»åŠ¡èŠ‚ç‚¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®Œæˆä»»åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡id</span></span><br><span class="line">    String processKey = <span class="string">&quot;myEvection-global&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assingee = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    <span class="comment">//  String assingee = &quot;æç»ç†&quot;;</span></span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºTaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">// æ ¡éªŒæ–¹æ³•ï¼šæ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(processKey)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        taskService.complete(task.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡æ‰§è¡Œå®Œæˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“<code>éƒ¨é—¨ç»ç†å®¡æ ¸</code>å®¡æ ¸å®Œæˆåï¼Œè¿™æ—¶ç”±äºè®¾ç½®çš„å‡ºå·®å¤©æ•°ä¸ºï¼š<code>evection.setNum(3d);</code>åç»­èµ°çš„å°±æ˜¯<code>æ€»ç»ç†å®¡æ‰¹</code>èŠ‚ç‚¹å—ï¼ŒæŸ¥çœ‹æ•°æ®åº“ä¸­è¡¨ act_ru_task ä¸­çš„ä»»åŠ¡èŠ‚ç‚¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">55002	1	47506	47501	myEvection-global:1:35003	æ€»ç»ç†å®¡æ‰¹	\N	\N	_5	\N	ç‹æ€»ç»ç†	\N	50	2022-05-03 13:36:51	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ç¡®å®èµ°æ˜¯<code>æ€»ç»ç†å®¡æ‰¹</code>ï¼Œç»§ç»­æ‰§è¡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›¿æ¢ä¸Šè¿°çš„ä»»åŠ¡è´£ä»»äººï¼š</span></span><br><span class="line">String assingee = <span class="string">&quot;ç‹æ€»ç»ç†&quot;</span>;</span><br><span class="line">String assingee = <span class="string">&quot;èµµè´¢åŠ¡&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>å½“èŠ‚ç‚¹<code>è´¢åŠ¡å®¡æ‰¹</code>å®Œæˆå®¡æ‰¹åï¼Œæ•´ä¸ªå®ä¾‹å°±æ‰§è¡Œå®Œæˆï¼Œå¯ä»¥æŸ¥çœ‹è¡¨ act_hi_procinstï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	PROC_INST_ID_	BUSINESS_KEY_	PROC_DEF_ID_	START_TIME_	END_TIME_	DURATION_	START_USER_ID_	START_ACT_ID_	END_ACT_ID_	SUPER_PROCESS_INSTANCE_ID_	DELETE_REASON_	TENANT_ID_	NAME_</span><br><span class="line">47501	47501	\N	myEvection-global:1:35003	2022-05-03 12:01:29	2022-05-03 13:39:38	5889759	\N	_2	_7	\N	\N		\N</span><br></pre></td></tr></table></figure>
<h4 id="æ³¨æ„äº‹é¡¹">3.4.6 æ³¨æ„äº‹é¡¹</h4>
<ol type="1">
<li><p>å¦‚æœUELè¡¨è¾¾å¼ä¸­æµç¨‹å˜é‡åä¸å­˜åœ¨åˆ™æŠ¥é”™ï¼›</p></li>
<li><p>å¦‚æœUELè¡¨è¾¾å¼ä¸­æµç¨‹å˜é‡å€¼ä¸ºç©ºNULLï¼Œæµç¨‹ä¸æŒ‰UELè¡¨è¾¾å¼å»æ‰§è¡Œï¼Œè€Œæµç¨‹ç»“æŸï¼›</p></li>
<li><p>å¦‚æœUELè¡¨è¾¾å¼éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œæµç¨‹ç»“æŸï¼›</p></li>
<li><p>å¦‚æœè¿çº¿ä¸è®¾ç½®æ¡ä»¶ï¼Œä¼šèµ°flowåºå·å°çš„é‚£æ¡çº¿ã€‚</p>
<blockquote>
<p>å¯ä»¥æŸ¥çœ‹å®šä¹‰çš„æµç¨‹æ–‡ä»¶ä¿¡æ¯ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡å®šä¹‰è¿™ä¸ªconditionExpressionçš„è¯ï¼Œé»˜è®¤èµ°çš„å°±æ˜¯flowåºå·è¾ƒå°çš„ï¼Œå³<code>id=&quot;_10&quot;</code>çš„è¿™æ¡ã€‚</p>
<blockquote>
<p><strong>å®æµ‹ï¼šä¼šç”Ÿæˆæ‰€æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ä»»åŠ¡ï¼</strong></p>
</blockquote>
</blockquote></li>
</ol>
<h3 id="è®¾ç½®localæµç¨‹å˜é‡">3.5 è®¾ç½®localæµç¨‹å˜é‡</h3>
<h4 id="ä»»åŠ¡åŠç†æ—¶è®¾ç½®">3.5.1 ä»»åŠ¡åŠç†æ—¶è®¾ç½®</h4>
<p>ä»»åŠ¡åŠç†æ—¶è®¾ç½®localæµç¨‹å˜é‡ï¼Œå½“å‰è¿è¡Œçš„æµç¨‹å®ä¾‹åªèƒ½åœ¨è¯¥ä»»åŠ¡ç»“æŸå‰ä½¿ç”¨ï¼Œä»»åŠ¡ç»“æŸè¯¥å˜é‡æ— æ³•åœ¨å½“å‰æµç¨‹å®ä¾‹ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢å†å²ä»»åŠ¡æŸ¥è¯¢ã€‚</p>
<blockquote>
<p>å…¶ä»–çš„æµç¨‹å¼€å§‹å•¥çš„éƒ½å’Œä¸Šé¢ä¸€è‡´</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†ä»»åŠ¡æ—¶è®¾ç½®localæµç¨‹å˜é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTaskLocal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡idï¼Œä»è¡¨act_ru_taskä¸­è·å–</span></span><br><span class="line">    String taskId = <span class="string">&quot;62509&quot;</span>;  <span class="comment">// ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å®šä¹‰æµç¨‹å˜é‡</span></span><br><span class="line">    Map&lt;String, Object&gt; variables = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection ();</span><br><span class="line">    evection.setNum(<span class="number">3d</span>);</span><br><span class="line">    <span class="comment">// å˜é‡åæ˜¯holidayï¼Œå˜é‡å€¼æ˜¯holidayå¯¹è±¡</span></span><br><span class="line">    variables.put(<span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">    <span class="comment">// è®¾ç½®localå˜é‡ï¼Œä½œç”¨åŸŸä¸ºè¯¥ä»»åŠ¡ï¼Œæ³¨æ„è¿™é‡Œæ˜¯setVariablesLocalï¼Œè€Œå…¨å±€çš„æ˜¯setVariable</span></span><br><span class="line">    taskService.setVariablesLocal(taskId, variables);</span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡</span></span><br><span class="line">    taskService.complete(taskId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼šè®¾ç½®ä½œç”¨åŸŸä¸ºä»»åŠ¡çš„localå˜é‡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥è®¾ç½®åŒåçš„å˜é‡ï¼Œäº’ä¸å½±å“ã€‚</p>
</blockquote>
<h4 id="é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®-1">3.5.2 é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®localå˜é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLocalVariableByTaskId</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// å½“å‰å¾…åŠä»»åŠ¡id</span></span><br><span class="line">    String taskId=<span class="string">&quot;65005&quot;</span>;  <span class="comment">// ç¬¬äºŒä¸ªèŠ‚ç‚¹</span></span><br><span class="line">	<span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection ();</span><br><span class="line">    evection.setNum(<span class="number">3d</span>);</span><br><span class="line">	<span class="comment">// é€šè¿‡ä»»åŠ¡è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class="line">    taskService.setVariableLocal(taskId, <span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">	<span class="comment">// ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ </span></span><br><span class="line">    <span class="comment">// taskService.setVariablesLocal(taskId, variables)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šä»»åŠ¡idå¿…é¡»æ˜¯å½“å‰å¾…åŠä»»åŠ¡idï¼Œact_ru_taskä¸­å­˜åœ¨ã€‚</p>
</blockquote>
<h4 id="localå˜é‡æµ‹è¯•">3.5.3 Localå˜é‡æµ‹è¯•</h4>
<p><strong>æµ‹è¯•1ï¼š</strong></p>
<p>è‹¥ä¸Šè¾¹ä¾‹å­ä¸­è®¾ç½®globalå˜é‡æ”¹ä¸ºè®¾ç½®localå˜é‡æ˜¯å¦å¯è¡Œï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>Localå˜é‡åœ¨ä»»åŠ¡ç»“æŸåæ— æ³•åœ¨å½“å‰æµç¨‹å®ä¾‹æ‰§è¡Œä¸­ä½¿ç”¨ï¼Œå¦‚æœåç»­çš„æµç¨‹æ‰§è¡Œéœ€è¦ç”¨åˆ°æ­¤å˜é‡åˆ™ä¼šæŠ¥é”™ã€‚</p>
<blockquote>
<p>å³ä¸Šè¿°å°†Evectionè®¾ç½®æˆç«‹localå˜é‡ï¼Œåç»­åœ¨æµç¨‹åˆ†æ”¯åˆ¤æ–­æ—¶æ˜¯æ— æ³•è¿›è¡Œè¿›è¡Œçš„ï¼Œå› ä¸ºæµç¨‹ç»“æŸåå°±ä¸è®¤è¯†è¿™ä¸ªå˜é‡äº†ï¼ŒæŠ¥é”™ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.activiti.engine.ActivitiException: Unknown property used in expression: $&#123;evection.num&gt;=3&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>æµ‹è¯•2ï¼š</strong></p>
<p>åœ¨éƒ¨é—¨ç»ç†å®¡æ ¸ã€æ€»ç»ç†å®¡æ ¸ã€è´¢åŠ¡å®¡æ ¸æ—¶è®¾ç½®localå˜é‡ï¼Œå¯é€šè¿‡historyServiceæŸ¥è¯¢æ¯ä¸ªå†å²ä»»åŠ¡æ—¶å°†æµç¨‹å˜é‡çš„å€¼ä¹ŸæŸ¥è¯¢å‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ¯ä¸ªå†å²ä»»åŠ¡çš„æµç¨‹å˜é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetHistoryLocalVariable</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå†å²ä»»åŠ¡æŸ¥è¯¢å¯¹è±¡</span></span><br><span class="line">    HistoryService historyService = processEngine.getHistoryService();</span><br><span class="line">    HistoricTaskInstanceQuery historicTaskInstanceQuery = historyService.createHistoricTaskInstanceQuery();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç»“æœåŒ…æ‹¬ localå˜é‡</span></span><br><span class="line">    HistoricTaskInstanceQuery taskInstanceQuery = historicTaskInstanceQuery.includeTaskLocalVariables();</span><br><span class="line">    List&lt;HistoricTaskInstance&gt; list = taskInstanceQuery.processInstanceId(<span class="string">&quot;62501&quot;</span>).list();</span><br><span class="line">    <span class="keyword">for</span> (HistoricTaskInstance historicTaskInstance : list) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;==============================&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡idï¼š&quot;</span> + historicTaskInstance.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡åç§°ï¼š&quot;</span> + historicTaskInstance.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot;</span> + historicTaskInstance.getAssignee());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡localå˜é‡ï¼š&quot;</span> + historicTaskInstance.getTaskLocalVariables());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// ==============================</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡idï¼š62509</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡åç§°ï¼šåˆ›å»ºå‡ºå·®ç”³è¯·</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡è´Ÿè´£äººï¼šå¼ ä¸‰</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡localå˜é‡ï¼š&#123;evection=cn.xyc.demo.listener.pojo.Evection@5f6722d3&#125;</span></span><br><span class="line"><span class="comment">// ==============================</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡idï¼š65005</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡åç§°ï¼šéƒ¨é—¨ç»ç†å®¡æ ¸</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡è´Ÿè´£äººï¼šæç»ç†</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡localå˜é‡ï¼š&#123;evection=cn.xyc.demo.listener.pojo.Evection@2c532cd8&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šæŸ¥è¯¢å†å²æµç¨‹å˜é‡ï¼Œç‰¹åˆ«æ˜¯æŸ¥è¯¢pojoå˜é‡éœ€è¦ç»è¿‡ååºåˆ—åŒ–ï¼Œä¸æ¨èä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="ç»„ä»»åŠ¡">4. ç»„ä»»åŠ¡</h2>
<h3 id="ç»„ä»»åŠ¡è®¾ç½®">4.1 ç»„ä»»åŠ¡è®¾ç½®</h3>
<p><strong>éœ€æ±‚ï¼š</strong></p>
<ul>
<li>åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨ .bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚</li>
<li>é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººï¼Œ<strong>å¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡</strong>ã€‚</li>
</ul>
<p><strong>è®¾ç½®ä»»åŠ¡å€™é€‰äººï¼š</strong></p>
<ul>
<li><p>åœ¨æµç¨‹å›¾ä¸­ä»»åŠ¡èŠ‚ç‚¹çš„é…ç½®ä¸­è®¾ç½® <code>candidate-users</code>(å€™é€‰äºº)ï¼Œå¤šä¸ªå€™é€‰äººä¹‹é—´ç”¨é€—å·åˆ†å¼€ã€‚</p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å¤šå€™é€‰äººçš„bpmnå›¾.PNG" alt="å¤šå€™é€‰äººçš„bpmnå›¾"></p></li>
<li><p>æŸ¥çœ‹bpmnæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;åˆ›å»ºå‡ºå·®ç”³è¯·&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯ä»¥çœ‹åˆ°éƒ¨é—¨ç»ç†çš„å®¡æ ¸äººå·²ç»è®¾ç½®ä¸º lisi,wangwu è¿™æ ·çš„ä¸€ç»„å€™é€‰äººï¼Œ</span></span><br><span class="line"><span class="comment">	å¯ä»¥ä½¿ç”¨activiti:candiateUsers=â€ç”¨æˆ· 1,ç”¨æˆ· 2,ç”¨æˆ· 3â€çš„è¿™ç§æ–¹å¼æ¥å®ç°è®¾ç½®ä¸€ç»„å€™é€‰äºº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:candidateUsers</span>=<span class="string">&quot;lisi,wangwu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;jack&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ€»ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;rose&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;è´¢åŠ¡å®¡æ‰¹&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ç»„ä»»åŠ¡-1">4.2 ç»„ä»»åŠ¡</h3>
<h4 id="ç»„ä»»åŠ¡åŠç†æµç¨‹">4.2.1 ç»„ä»»åŠ¡åŠç†æµç¨‹</h4>
<ol type="1">
<li><p><strong>æŸ¥è¯¢ç»„ä»»åŠ¡</strong></p>
<p>æŒ‡å®šå€™é€‰äººï¼ŒæŸ¥è¯¢è¯¥å€™é€‰äººå½“å‰çš„å¾…åŠä»»åŠ¡ã€‚</p>
<p>å€™é€‰äººä¸èƒ½ç«‹å³åŠç†ä»»åŠ¡ã€‚</p></li>
<li><p><strong>æ‹¾å–(claim)ä»»åŠ¡</strong></p>
<p>è¯¥ç»„ä»»åŠ¡çš„æ‰€æœ‰å€™é€‰äººéƒ½èƒ½æ‹¾å–ã€‚</p>
<p>å°†å€™é€‰äººçš„ç»„ä»»åŠ¡ï¼Œå˜æˆä¸ªäººä»»åŠ¡ï¼ŒåŸæ¥å€™é€‰äººå°±å˜æˆäº†è¯¥ä»»åŠ¡çš„è´Ÿè´£äººã€‚</p>
<p>å¦‚æœæ‹¾å–åä¸æƒ³åŠç†è¯¥ä»»åŠ¡ï¼Ÿéœ€è¦å°†å·²ç»æ‹¾å–çš„ä¸ªäººä»»åŠ¡å½’è¿˜åˆ°ç»„é‡Œè¾¹ï¼Œå°†ä¸ªäººä»»åŠ¡å˜æˆäº†ç»„ä»»åŠ¡ã€‚</p></li>
<li><p><strong>æŸ¥è¯¢ä¸ªäººä»»åŠ¡</strong></p>
<p>æŸ¥è¯¢æ–¹å¼åŒä¸ªäººä»»åŠ¡éƒ¨åˆ†ï¼Œæ ¹æ®assigneeæŸ¥è¯¢ç”¨æˆ·è´Ÿè´£çš„ä¸ªäººä»»åŠ¡ã€‚</p></li>
<li><p><strong>åŠç†ä¸ªäººä»»åŠ¡</strong></p></li>
</ol>
<h4 id="ç»„ä»»åŠ¡æ“ä½œ">4.2.2 ç»„ä»»åŠ¡æ“ä½œ</h4>
<blockquote>
<p>å¸ƒç½²ä»»åŠ¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xyc.activiti01.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.ProcessEngine;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.ProcessEngines;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.RepositoryService;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.repository.Deployment;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CandidateTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éƒ¨ç½²æµç¨‹å®šä¹‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">        <span class="comment">// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹</span></span><br><span class="line">        RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">        <span class="comment">// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½²</span></span><br><span class="line">        Deployment deployment = repositoryService.createDeployment()</span><br><span class="line">                .addClasspathResource(<span class="string">&quot;bpmn/evection-cadidate.bpmn&quot;</span>)</span><br><span class="line">                .name(<span class="string">&quot;å‡ºå·®ç”³è¯·æµç¨‹-å¤šå€™é€‰äºº&quot;</span>)</span><br><span class="line">                .deploy();</span><br><span class="line">        <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²idï¼š&quot;</span> + deployment.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot;</span> + deployment.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼€å¯ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStartProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€è·å–RunTimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// 3ã€æ ¹æ®æµç¨‹å®šä¹‰Idå¯åŠ¨æµç¨‹ï¼ˆè¿™é‡Œçš„keyå¿˜è®°è¯¥äº†ï¼Œå°±è¿™æ ·å§ï¼‰</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(<span class="string">&quot;myProcess_1&quot;</span>);</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºå†…å®¹</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰idï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹idï¼š&quot;</span> + processInstance.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;å½“å‰æ´»åŠ¨Idï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œç¬¬ä¸€èŠ‚ç‚¹ä»»åŠ¡ï¼Œæµè½¬åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œå³å¤šå€™é€‰äººèŠ‚ç‚¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä»»å®Œç¬¬ä¸€èŠ‚ç‚¹ä»»åŠ¡ï¼Œæµè½¬åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œå³å¤šå€™é€‰äººèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–taskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®æµç¨‹key å’Œ ä»»åŠ¡çš„è´Ÿè´£äºº æŸ¥è¯¢ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªä»»åŠ¡å¯¹è±¡</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(<span class="string">&quot;myProcess_1&quot;</span>) <span class="comment">//æµç¨‹Key</span></span><br><span class="line">        .taskAssignee(<span class="string">&quot;zhangsan&quot;</span>)  <span class="comment">//è¦æŸ¥è¯¢çš„è´Ÿè´£äºº</span></span><br><span class="line">        .singleResult();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡,å‚æ•°ï¼šä»»åŠ¡id</span></span><br><span class="line">    taskService.complete(task.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æµè½¬åˆ°å¤šå€™é€‰äººèŠ‚ç‚¹æ—¶ï¼Œç”±äºæœ‰å¤šä¸ªå€™é€‰äººè¿˜æœªåˆ†é…è´£ä»»äººï¼Œå› è€Œåœ¨ act_ru_taskè¡¨ä¸­ï¼ŒASSIGNEE_ å­—æ®µä¸ºnullï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">75002	1	72502	72501	myProcess_1:1:70003	ç»ç†å®¡æ‰¹	\N	\N	_4	\N	\N	\N	50	2022-05-08 12:01:58	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¡¨ act_ru_identitylinkï¼ˆä»»åŠ¡å‚ä¸è€…ï¼‰ä¸­çš„æ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	GROUP_ID_	TYPE_	USER_ID_	TASK_ID_	PROC_INST_ID_	PROC_DEF_ID_</span><br><span class="line">75003	1	\N	candidate	lisi	75002	\N	\N</span><br><span class="line">75004	1	\N	participant	lisi	\N	72501	\N</span><br><span class="line">75005	1	\N	candidate	wangwu	75002	\N	\N</span><br><span class="line">75006	1	\N	participant	wangwu	\N	72501	\N</span><br></pre></td></tr></table></figure>
<p>è¯¥è¡¨ä¸­è®°å½•å½“å‰å‚è€ƒä»»åŠ¡ç”¨æˆ·æˆ–ç»„ï¼Œå½“å‰ä»»åŠ¡å¦‚æœè®¾ç½®äº†å€™é€‰äººï¼Œä¼šå‘è¯¥è¡¨æ’å…¥å€™é€‰äººè®°å½•ï¼Œæœ‰å‡ ä¸ªå€™é€‰å°±æ’å…¥å‡ ä¸ªã€‚</p>
<blockquote>
<p>ä¸act_ru_identitylinkå¯¹åº”çš„è¿˜æœ‰ä¸€å¼ å†å²è¡¨act_hi_identitylinkï¼Œå‘act_ru_identitylinkæ’å…¥è®°å½•çš„åŒæ—¶ä¹Ÿä¼šå‘å†å²è¡¨æ’å…¥è®°å½•ã€‚</p>
</blockquote>
</blockquote>
<p><strong>æŸ¥è¯¢ç»„ä»»åŠ¡ï¼š</strong> æ ¹æ®å€™é€‰äººæŸ¥è¯¢ç»„ä»»åŠ¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®å€™é€‰äººæŸ¥è¯¢ç»„ä»»åŠ¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findGroupTaskList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String processDefinitionKey = <span class="string">&quot;myProcess_1&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡å€™é€‰äºº</span></span><br><span class="line">    String candidateUser = <span class="string">&quot;lisi&quot;</span>;</span><br><span class="line">    <span class="comment">//  è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºTaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç»„ä»»åŠ¡</span></span><br><span class="line">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(processDefinitionKey)</span><br><span class="line">        .taskCandidateUser(candidateUser)  <span class="comment">// æ ¹æ®å€™é€‰äººæŸ¥è¯¢</span></span><br><span class="line">        .list();</span><br><span class="line">    <span class="keyword">for</span> (Task task : list) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹idï¼š&quot;</span> + task.getProcessInstanceId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡idï¼š&quot;</span> + task.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot;</span> + task.getAssignee());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡åç§°ï¼š&quot;</span> + task.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// ----------------------------</span></span><br><span class="line"><span class="comment">// æµç¨‹å®ä¾‹idï¼š72501</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡idï¼š75002</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡è´Ÿè´£äººï¼šnull</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡åç§°ï¼šç»ç†å®¡æ‰¹</span></span><br></pre></td></tr></table></figure>
<p><strong>æ‹¾å–ç»„ä»»åŠ¡ï¼š </strong>å€™é€‰äººå‘˜æ‹¾å–ç»„ä»»åŠ¡åè¯¥ä»»åŠ¡å˜ä¸ºè‡ªå·±çš„ä¸ªäººä»»åŠ¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¾å–ç»„ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">claimTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// è¦æ‹¾å–çš„ä»»åŠ¡idï¼ˆä¸Šé¢å¯çŸ¥ï¼Œä¹Ÿå¯ä»¥ä»è¡¨act_ru_taskä¸­è·å–ï¼‰</span></span><br><span class="line">    String taskId = <span class="string">&quot;75002&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡å€™é€‰äººid</span></span><br><span class="line">    String userId = <span class="string">&quot;lisi&quot;</span>;</span><br><span class="line">    <span class="comment">// æ‹¾å–ä»»åŠ¡</span></span><br><span class="line">    <span class="comment">//    å³ä½¿è¯¥ç”¨æˆ·ä¸æ˜¯å€™é€‰äººä¹Ÿèƒ½æ‹¾å–(å»ºè®®æ‹¾å–æ—¶æ ¡éªŒæ˜¯å¦æœ‰èµ„æ ¼)</span></span><br><span class="line">    <span class="comment">//    æ ¡éªŒè¯¥ç”¨æˆ·æœ‰æ²¡æœ‰æ‹¾å–ä»»åŠ¡çš„èµ„æ ¼</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .taskId(taskId)</span><br><span class="line">        .taskCandidateUser(userId)  <span class="comment">// æ ¹æ®å€™é€‰äººæŸ¥è¯¢</span></span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// æ‹¾å–ä»»åŠ¡</span></span><br><span class="line">        taskService.claim(taskId, userId);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><p>å³ä½¿è¯¥ç”¨æˆ·ä¸æ˜¯å€™é€‰äººä¹Ÿèƒ½æ‹¾å–ï¼Œå»ºè®®æ‹¾å–æ—¶æ ¡éªŒæ˜¯å¦æœ‰èµ„æ ¼</p></li>
<li><p>ç»„ä»»åŠ¡æ‹¾å–åï¼Œè¯¥ä»»åŠ¡å·²æœ‰è´Ÿè´£äººï¼Œé€šè¿‡å€™é€‰äººå°†æŸ¥è¯¢ä¸åˆ°è¯¥ä»»åŠ¡</p></li>
</ul>
<p>æ‹¾å–æˆåŠŸåï¼Œact_ru_taskè¡¨ä¸­ï¼ŒASSIGNEE_ å­—æ®µä¸å†æ˜¯nulläº†ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">75002	2	72502	72501	myProcess_1:1:70003	ç»ç†å®¡æ‰¹	\N	\N	_4	\N	lisi	\N	50	2022-05-08 12:01:58	\N	\N	1		\N	2022-05-08 12:12:01</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡ï¼š</strong> æŸ¥è¯¢æ–¹å¼åŒä¸ªäººä»»åŠ¡æŸ¥è¯¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findPersonalTaskList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String processDefinitionKey = <span class="string">&quot;myProcess_1&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assignee = <span class="string">&quot;lisi&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// åˆ›å»ºTaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(processDefinitionKey)</span><br><span class="line">        .taskAssignee(assignee)</span><br><span class="line">        .list();</span><br><span class="line">    <span class="keyword">for</span> (Task task : list) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹idï¼š&quot;</span> + task.getProcessInstanceId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡idï¼š&quot;</span> + task.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot;</span> + task.getAssignee());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä»»åŠ¡åç§°ï¼š&quot;</span> + task.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// ----------------------------</span></span><br><span class="line"><span class="comment">// æµç¨‹å®ä¾‹idï¼š72501</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡idï¼š75002</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡è´Ÿè´£äººï¼šlisi</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡åç§°ï¼šç»ç†å®¡æ‰¹</span></span><br></pre></td></tr></table></figure>
<p><strong>å½’è¿˜ç»„ä»»åŠ¡ï¼š</strong> å¦‚æœä¸ªäººä¸æƒ³åŠç†è¯¥ç»„ä»»åŠ¡ï¼Œå¯ä»¥å½’è¿˜ç»„ä»»åŠ¡ï¼Œå½’è¿˜åè¯¥ç”¨æˆ·ä¸å†æ˜¯è¯¥ä»»åŠ¡çš„è´Ÿè´£äºº</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å½’è¿˜ç»„ä»»åŠ¡ï¼Œç”±ä¸ªäººä»»åŠ¡å˜ä¸ºç»„ä»»åŠ¡ï¼Œè¿˜å¯ä»¥è¿›è¡Œä»»åŠ¡äº¤æ¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAssigneeToGroupTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ä»»åŠ¡ä½¿ç”¨TaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å½“å‰å¾…åŠä»»åŠ¡</span></span><br><span class="line">    String taskId = <span class="string">&quot;75002&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String userId = <span class="string">&quot;lisi&quot;</span>;</span><br><span class="line">    <span class="comment">// æ ¡éªŒuserIdæ˜¯å¦æ˜¯taskIdçš„è´Ÿè´£äººï¼Œå¦‚æœæ˜¯è´Ÿè´£äººæ‰å¯ä»¥å½’è¿˜ç»„ä»»åŠ¡</span></span><br><span class="line">    Task task = taskService</span><br><span class="line">        .createTaskQuery()</span><br><span class="line">        .taskId(taskId)</span><br><span class="line">        .taskAssignee(userId)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span> (task != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè®¾ç½®ä¸ºnullï¼Œå½’è¿˜ç»„ä»»åŠ¡,è¯¥ ä»»åŠ¡æ²¡æœ‰è´Ÿè´£äºº</span></span><br><span class="line">        taskService.setAssignee(taskId, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><p>å»ºè®®å½’è¿˜ä»»åŠ¡å‰æ ¡éªŒè¯¥ç”¨æˆ·æ˜¯å¦æ˜¯è¯¥ä»»åŠ¡çš„è´Ÿè´£äºº</p></li>
<li><p>ä¹Ÿå¯ä»¥é€šè¿‡setAssigneeæ–¹æ³•å°†ä»»åŠ¡å§”æ‰˜ç»™å…¶å®ƒç”¨æˆ·è´Ÿè´£ï¼Œæ³¨æ„è¢«å§”æ‰˜çš„ç”¨æˆ·å¯ä»¥ä¸æ˜¯å€™é€‰äººï¼ˆå»ºè®®ä¸è¦è¿™æ ·ä½¿ç”¨ï¼‰</p></li>
</ul>
<p>ä»»åŠ¡å½’è¿˜åï¼Œact_ru_taskè¡¨ä¸­ï¼ŒASSIGNEE_ å­—æ®µå†æ¬¡ç½®ä¸ºnullå€¼ï¼›ä¸”ä¸Šè¿°æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡æ‰§è¡Œç»“æœä¸ºç©ºäº†ï¼›</p>
</blockquote>
<p><strong>ä»»åŠ¡äº¤æ¥ï¼š</strong>ä»»åŠ¡äº¤æ¥ï¼Œä»»åŠ¡è´Ÿè´£äººå°†ä»»åŠ¡äº¤ç»™å…¶å®ƒå€™é€‰äººåŠç†è¯¥ä»»åŠ¡</p>
<blockquote>
<p>äº¤æ¥å‰å€™é€‰äººlisiå…ˆå»æ‹¾å–ä¸€ä¸‹ä»»åŠ¡ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»»åŠ¡äº¤æ¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAssigneeToCandidateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è·å–processEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ä»»åŠ¡ä½¿ç”¨TaskService</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// å½“å‰å¾…åŠä»»åŠ¡</span></span><br><span class="line">    String taskId = <span class="string">&quot;75002&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String userId = <span class="string">&quot;lisi&quot;</span>;</span><br><span class="line">    <span class="comment">// å°†æ­¤ä»»åŠ¡äº¤ç»™å…¶å®ƒå€™é€‰äººåŠç†è¯¥ ä»»åŠ¡</span></span><br><span class="line">    String candidateuser = <span class="string">&quot;wangwu&quot;</span>;</span><br><span class="line">    <span class="comment">// æ ¡éªŒuserIdæ˜¯å¦æ˜¯taskIdçš„è´Ÿè´£äººï¼Œå¦‚æœæ˜¯è´Ÿè´£äººæ‰å¯ä»¥å½’è¿˜ç»„ä»»åŠ¡</span></span><br><span class="line">    Task task = taskService</span><br><span class="line">        .createTaskQuery()</span><br><span class="line">        .taskId(taskId)</span><br><span class="line">        .taskAssignee(userId)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span> (task != <span class="keyword">null</span>) &#123;</span><br><span class="line">        taskService.setAssignee(taskId, candidateuser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>äº¤æ¥å®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°è¡¨ act_ru_taskä¸­çš„ASSIGNEE_å­—æ®µå‘ç”Ÿæ”¹å˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">75002	5	72502	72501	myProcess_1:1:70003	ç»ç†å®¡æ‰¹	\N	\N	_4	\N	wangwu	\N	50	2022-05-08 12:01:58	\N	\N	1		\N	2022-05-08 12:19:15</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>åŠç†ä¸ªäººä»»åŠ¡ï¼š</strong>ä»»åŠ¡æ‹¾å–å®Œæˆåï¼Œå°±å¯ä»¥æœ‰æ‹¾å–äººå»åŠç†ä»»åŠ¡äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completeTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡ID</span></span><br><span class="line">    String taskId = <span class="string">&quot;75002&quot;</span>;</span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    processEngine.getTaskService().complete(taskId);</span><br><span class="line">    System.out.println(<span class="string">&quot;å®Œæˆä»»åŠ¡ï¼š&quot;</span>+taskId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»»åŠ¡å®Œæˆï¼Œæµç¨‹æµè½¬åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»»åŠ¡ act_ru_task è¡¨æ•°æ®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">82502	1	72502	72501	myProcess_1:1:70003	æ€»ç»ç†å®¡æ‰¹	\N	\N	_5	\N	jack	\N	50	2022-05-08 12:23:02	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="ç½‘å…³">5. ç½‘å…³</h2>
<p><strong>ç½‘å…³ä½œç”¨ï¼šç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘</strong></p>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/ç½‘å…³.PNG" alt="ç½‘å…³"></p>
<h3 id="æ’ä»–ç½‘å…³-exclusivegateway">5.1 æ’ä»–ç½‘å…³-ExclusiveGateway</h3>
<h4 id="æ¦‚è¿°-2">5.1.1 æ¦‚è¿°</h4>
<p>æ’ä»–ç½‘å…³ï¼šç”¨æ¥åœ¨æµç¨‹ä¸­å®ç°å†³ç­–ï¼›å½“æµç¨‹æ‰§è¡Œåˆ°è¿™ä¸ªç½‘å…³ï¼Œæ‰€æœ‰åˆ†æ”¯éƒ½ä¼šåˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºtrueï¼Œå¦‚æœä¸ºtrueåˆ™æ‰§è¡Œè¯¥åˆ†æ”¯ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ’ä»–ç½‘å…³åªä¼šé€‰æ‹©ä¸€ä¸ªä¸ºtrueçš„åˆ†æ”¯æ‰§è¡Œã€‚<strong>å¦‚æœæœ‰ä¸¤ä¸ªåˆ†æ”¯æ¡ä»¶éƒ½ä¸ºtrueï¼Œæ’ä»–ç½‘å…³ä¼šé€‰æ‹©idå€¼è¾ƒå°çš„ä¸€æ¡åˆ†æ”¯å»æ‰§è¡Œã€‚</strong></p>
</blockquote>
<p>ä¸ºä»€ä¹ˆè¦ç”¨æ’ä»–ç½‘å…³ï¼Ÿ</p>
<ul>
<li>ä¸ç”¨æ’ä»–ç½‘å…³ä¹Ÿå¯ä»¥å®ç°åˆ†æ”¯ï¼Œå¦‚ï¼šåœ¨è¿çº¿çš„conditionæ¡ä»¶ä¸Šè®¾ç½®åˆ†æ”¯æ¡ä»¶ï¼›</li>
<li>åœ¨è¿çº¿è®¾ç½®conditionæ¡ä»¶çš„ç¼ºç‚¹ï¼šå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæµç¨‹å°±ç»“æŸäº†(æ˜¯å¼‚å¸¸ç»“æŸ)ï¼›ä½†å¦‚æœä»ç½‘å…³å‡ºå»çš„çº¿æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³åˆ™ç³»ç»Ÿ<strong>æŠ›å‡ºå¼‚å¸¸</strong>ã€‚</li>
</ul>
<h4 id="æµç¨‹å®šä¹‰-1">5.1.2 æµç¨‹å®šä¹‰</h4>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/æ’ä»–ç½‘å…³å›¾.PNG" alt="æ’ä»–ç½‘å…³å›¾"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;evection-exclusive&quot;</span> <span class="attr">isClosed</span>=<span class="string">&quot;false&quot;</span> <span class="attr">isExecutable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å®¡æ‰¹-æ’ä»–ç½‘å…³&quot;</span> <span class="attr">processType</span>=<span class="string">&quot;None&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;StartEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å¡«å†™å‡ºå·®å•&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;lisi&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">name</span>=<span class="string">&quot;éƒ¨é—¨ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ExclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;wangwu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ€»ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhaoliu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;è´¢åŠ¡å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å¤§äºç­‰äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å°äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_14&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_15&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æµç¨‹æµ‹è¯•">5.1.3 æµç¨‹æµ‹è¯•</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éƒ¨ç½²æµç¨‹å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½²</span></span><br><span class="line">    Deployment deployment = repositoryService.createDeployment()</span><br><span class="line">        .addClasspathResource(<span class="string">&quot;bpmn/evection-exclusive.bpmn&quot;</span>) <span class="comment">// æ·»åŠ bpmnèµ„æº</span></span><br><span class="line">        .name(<span class="string">&quot;å‡ºå·®å®¡æ‰¹-æ’ä»–ç½‘å…³&quot;</span>)</span><br><span class="line">        .deploy();</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²idï¼š&quot;</span> + deployment.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot;</span> + deployment.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†æ”¯1ï¼š</strong>å³ <code>exection.num&gt;=3</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡çš„å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–RunTimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String key = <span class="string">&quot;evection-exclusive&quot;</span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå˜é‡é›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    <span class="comment">// è®¾ç½®å‡ºå·®å¤©æ•°</span></span><br><span class="line">    evection.setNum(<span class="number">3d</span>);</span><br><span class="line">    <span class="comment">// å®šä¹‰æµç¨‹å˜é‡ï¼ŒæŠŠå‡ºå·®pojoå¯¹è±¡æ”¾å…¥map</span></span><br><span class="line">    map.put(<span class="string">&quot;evection&quot;</span>, evection);</span><br><span class="line">    <span class="comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶è®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼ˆæŠŠmapä¼ å…¥ï¼‰</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService</span><br><span class="line">        .startProcessInstanceByKey(key, map);</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹åç§°ï¼š&quot;</span>+processInstance.getName());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰idï¼š&quot;</span>+processInstance.getProcessDefinitionId());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®Œæˆä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰çš„Key</span></span><br><span class="line">    String key = <span class="string">&quot;evection-exclusive&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    <span class="comment">//   èŠ‚ç‚¹1:å¡«å†™å‡ºå·®å•</span></span><br><span class="line">    <span class="comment">// String assingee = &quot;zhangsan&quot;;  </span></span><br><span class="line">    <span class="comment">//   èŠ‚ç‚¹2ï¼šéƒ¨é—¨ç»ç†å®¡æ‰¹</span></span><br><span class="line">    <span class="comment">// String assingee = &quot;lisi&quot;;</span></span><br><span class="line">    <span class="comment">//   èŠ‚ç‚¹3ï¼šæ ¹æ®æ’ä»–ç½‘å…³ï¼ˆexection.num=3)ï¼Œç°åœ¨åº”è¯¥æ‰§è¡Œçš„æ˜¯èŠ‚ç‚¹3ï¼Œå³æ€»ç»ç†å®¡æ‰¹</span></span><br><span class="line">    <span class="comment">// String assingee = &quot;wangwu&quot;;  </span></span><br><span class="line">    <span class="comment">//   èŠ‚ç‚¹4ï¼šè´¢åŠ¡å®¡æ‰¹</span></span><br><span class="line">    String assingee = <span class="string">&quot;zhaoliu&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–taskservice</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ä»»åŠ¡</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(key)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ä»»åŠ¡idæ¥   å®Œæˆä»»åŠ¡</span></span><br><span class="line">        taskService.complete(task.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“æ‰§è¡Œå®Œ<code>éƒ¨é—¨ç»ç†å®¡æ‰¹</code>èŠ‚ç‚¹åï¼Œæ ¹æ®æ’ç½‘å…³ï¼Œæ­¤æ—¶èµ°çš„å°±æ˜¯<code>æ€»ç»ç†å®¡æ‰¹</code>èŠ‚ç‚¹ï¼ŒæŸ¥çœ‹è¡¨act_ru_taskï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ€»ç»ç†å®¡æ‰¹ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">7503	1	2505	2501	evection-exclusive:1:3	æ€»ç»ç†å®¡æ‰¹	\N	\N	_6	\N	wangwu	\N	50	2022-05-08 13:38:27	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>åˆ†æ”¯2ï¼š</strong>å³ <code>exection.num&lt;3</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸Šè¿°æ–¹æ³•startProcessä¸­ï¼š</span></span><br><span class="line">evection.setNum(<span class="number">2d</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šè¿°æ–¹æ³•completTaskä¸­ï¼š</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line"><span class="comment">//   èŠ‚ç‚¹1:å¡«å†™å‡ºå·®å•</span></span><br><span class="line"><span class="comment">// String assingee = &quot;zhangsan&quot;;  </span></span><br><span class="line"><span class="comment">//   èŠ‚ç‚¹2ï¼šéƒ¨é—¨ç»ç†å®¡æ‰¹</span></span><br><span class="line"><span class="comment">// String assingee = &quot;lisi&quot;; </span></span><br><span class="line"><span class="comment">//   èŠ‚ç‚¹4ï¼šè´¢åŠ¡å®¡æ‰¹ï¼Œæ ¹æ®æ’ä»–ç½‘å…³ï¼ˆexection.num=3)ï¼Œç°åœ¨åº”è¯¥æ‰§è¡Œçš„æ˜¯èŠ‚ç‚¹4ï¼Œå³è´¢åŠ¡å®¡æ‰¹</span></span><br><span class="line">String assingee = <span class="string">&quot;zhaoliu&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“æ‰§è¡Œå®Œ<code>éƒ¨é—¨ç»ç†å®¡æ‰¹</code>èŠ‚ç‚¹åï¼Œæ ¹æ®æ’ç½‘å…³ï¼Œæ­¤æ—¶èµ°çš„å°±æ˜¯<code>è´¢åŠ¡å®¡æ‰¹</code>èŠ‚ç‚¹ï¼ŒæŸ¥çœ‹è¡¨act_ru_taskï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">20003	1	15005	15001	evection-exclusive:1:3	è´¢åŠ¡å®¡æ‰¹	\N	\N	_7	\N	zhaoliu	\N	50	2022-05-08 13:48:42	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>åˆ†æ”¯3ï¼š</strong>éƒ½æ»¡è¶³çš„æƒ…å†µ</p>
<blockquote>
<p>é‡æ–°å®šä¹‰æµç¨‹ï¼ˆåˆ åº“é‡æ¥ï¼‰</p>
</blockquote>
<p>å°†æµç¨‹å®šä¹‰ä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;evection-exclusive&quot;</span> <span class="attr">isClosed</span>=<span class="string">&quot;false&quot;</span> <span class="attr">isExecutable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å®¡æ‰¹-æ’ä»–ç½‘å…³&quot;</span> <span class="attr">processType</span>=<span class="string">&quot;None&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;StartEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å¡«å†™å‡ºå·®å•&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;lisi&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">name</span>=<span class="string">&quot;éƒ¨é—¨ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ExclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;wangwu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ€»ç»ç†å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhaoliu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;è´¢åŠ¡å®¡æ‰¹&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å¤§äºç­‰äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å¤§äºç­‰äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_14&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_15&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¾æ®æ‰§è¡Œä¸Šæ–¹ä»£ç ï¼š<code>evection.setNum(3d);</code></p>
</blockquote>
<p>åœ¨å®ŒæˆèŠ‚ç‚¹2ï¼š<code>éƒ¨é—¨ç»ç†å®¡æ‰¹</code>æ—¶ï¼Œæµè½¬åˆ°äº†èŠ‚ç‚¹3ï¼š<code>æ€»ç»ç†å®¡æ‰¹</code>ï¼Œå› ä¸ºæ­¤æ—¶<code>æ€»ç»ç†å®¡æ‰¹</code>èŠ‚ç‚¹çš„idå°äº<code>è´¢åŠ¡å®¡æ‰¹</code>çš„èŠ‚ç‚¹idï¼›ä½“ç°å‡ºï¼š<strong>å¦‚æœæœ‰ä¸¤ä¸ªåˆ†æ”¯æ¡ä»¶éƒ½ä¸ºtrueï¼Œæ’ä»–ç½‘å…³ä¼šé€‰æ‹©idå€¼è¾ƒå°çš„ä¸€æ¡åˆ†æ”¯å»æ‰§è¡Œã€‚</strong></p>
<p><strong>åˆ†æ”¯4ï¼š</strong>å¼‚å¸¸æƒ…å†µï¼Œå³éƒ½ä¸æ»¡è¶³çš„æƒ…å†µ</p>
<blockquote>
<p>è¿˜æ˜¯ç”¨ä¸Šé¢åˆ†æ”¯3çš„æµç¨‹å®šä¹‰ï¼Œè¿˜æ˜¯æ‰§è¡Œä¸Šæ–¹ä»£ç ï¼š<code>evection.setNum(2d);</code></p>
<p>åœ¨å®ŒæˆèŠ‚ç‚¹2ï¼š<code>éƒ¨é—¨ç»ç†å®¡æ‰¹</code>æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.activiti.engine.ActivitiException: No outgoing sequence flow of the exclusive gateway <span class="string">&#x27;_5&#x27;</span> could be selected <span class="keyword">for</span> continuing the process</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="å¹¶è¡Œç½‘å…³-parallelgateway">5.2 å¹¶è¡Œç½‘å…³-ParallelGateway</h3>
<h4 id="æ¦‚è¿°-3">5.2.1 æ¦‚è¿°</h4>
<p><strong>å¹¶è¡Œç½‘å…³ï¼š</strong>å¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ã€‚</p>
<p><strong>forkåˆ†æ”¯ï¼š</strong>å¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚</p>
<p><strong>joinæ±‡èšï¼š</strong> æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œæµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li><p>å¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œå®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ï¼›è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚</p></li>
<li><p><strong>ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚</strong> <strong>å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</strong></p></li>
</ul>
</blockquote>
<h4 id="æµç¨‹å®šä¹‰-2">5.2.2 æµç¨‹å®šä¹‰</h4>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/å¹¶è¡Œç½‘å…³å›¾.PNG" alt="å¹¶è¡Œç½‘å…³å›¾"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;evection-parallel&quot;</span> <span class="attr">isClosed</span>=<span class="string">&quot;false&quot;</span> <span class="attr">isExecutable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">processType</span>=<span class="string">&quot;None&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;StartEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;åˆ›å»ºå‡ºå·®å•&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parallelGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ParallelGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;lisi&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æŠ€æœ¯ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;wangwu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;é¡¹ç›®ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parallelGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ParallelGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ExclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhaoliu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ€»ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å¤§äºç­‰äº3å¤©(ä¸èµ·ä½œç”¨)&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_14&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å°äº3å¤©(ä¸èµ·ä½œç”¨)&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_15&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_16&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_17&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_18&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å¤§äºç­‰äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_9&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[#&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_19&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_10&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_20&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤©æ•°å°äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_10&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><p>æŠ€æœ¯ç»ç†å’Œé¡¹ç›®ç»ç†æ˜¯ä¸¤ä¸ªexecutionåˆ†æ”¯ï¼Œåœ¨act_ru_executionè¡¨æœ‰ä¸¤æ¡è®°å½•åˆ†åˆ«æ˜¯æŠ€æœ¯ç»ç†å’Œé¡¹ç›®ç»ç†ï¼Œact_ru_executionè¿˜æœ‰ä¸€æ¡è®°å½•è¡¨ç¤ºè¯¥æµç¨‹å®ä¾‹ã€‚</p></li>
<li><p>å¾…æŠ€æœ¯ç»ç†å’Œé¡¹ç›®ç»ç†ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œåœ¨æ±‡èšç‚¹æ±‡èšï¼Œé€šè¿‡parallelGatewayå¹¶è¡Œç½‘å…³ã€‚</p></li>
<li><p>å¹¶è¡Œç½‘å…³åœ¨ä¸šåŠ¡åº”ç”¨ä¸­å¸¸ç”¨äºä¼šç­¾ä»»åŠ¡ï¼Œ<strong>ä¼šç­¾ä»»åŠ¡å³å¤šä¸ªå‚ä¸è€…å…±åŒåŠç†çš„ä»»åŠ¡</strong>ã€‚</p></li>
</ul>
</blockquote>
<h4 id="æµç¨‹æµ‹è¯•-1">5.2.2 æµç¨‹æµ‹è¯•</h4>
<p><strong>å®šä¹‰æµç¨‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éƒ¨ç½²æµç¨‹å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½²</span></span><br><span class="line">    Deployment deployment = repositoryService.createDeployment()</span><br><span class="line">        .addClasspathResource(<span class="string">&quot;bpmn/evection-parallel.bpmn&quot;</span>)</span><br><span class="line">        .name(<span class="string">&quot;å‡ºå·®ç”³è¯·-å¹¶è¡Œç½‘å…³&quot;</span>)</span><br><span class="line">        .deploy();</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²idï¼š&quot;</span> + deployment.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot;</span> + deployment.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¯åŠ¨æµç¨‹å®ä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡çš„å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–RunTimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String key = <span class="string">&quot;evection-parallel&quot;</span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå˜é‡é›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    <span class="comment">// è®¾ç½®å‡ºå·®å¤©æ•°</span></span><br><span class="line">    evection.setNum(<span class="number">4d</span>);</span><br><span class="line">    <span class="comment">// å®šä¹‰æµç¨‹å˜é‡ï¼ŒæŠŠå‡ºå·®pojoå¯¹è±¡æ”¾å…¥map</span></span><br><span class="line">    map.put(<span class="string">&quot;evection&quot;</span>,evection);</span><br><span class="line">    <span class="comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶è®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼ˆæŠŠmapä¼ å…¥ï¼‰</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService</span><br><span class="line">        .startProcessInstanceByKey(key, map);</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹åç§°ï¼š&quot;</span>+processInstance.getName());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰idï¼š&quot;</span>+processInstance.getProcessDefinitionId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong>èŠ‚ç‚¹1<code>åˆ›å»ºå‡ºå·®å•</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰§è¡Œæµç¨‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰çš„Key</span></span><br><span class="line">    String key = <span class="string">&quot;evection-parallel&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assingee = <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–taskservice</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ä»»åŠ¡</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(key)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ä»»åŠ¡idæ¥   å®Œæˆä»»åŠ¡</span></span><br><span class="line">        taskService.complete(task.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œå®Œç¬¬ä¸€ä¸ªä»»åŠ¡èŠ‚ç‚¹åï¼Œè¿›å…¥å¹¶è¡Œç½‘å…³ï¼ŒæŸ¥çœ‹è¡¨æ•°æ®ï¼š</p>
<ul>
<li><p>act_ru_taskï¼Œåœ¨ä»»åŠ¡æ‰§è¡Œè¡¨ä¸­ï¼Œå­˜åœ¨ä¸¤æ¡ä»»åŠ¡ï¼ˆæ ¹æ®ä¸Šé¢è®¾ç½®çš„æ¡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºå¹¶è¡Œç½‘å…³çš„æ¡ä»¶è®¾å®šæ˜¯ä¸èµ·ä½œç”¨çš„ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">5004	1	2505	2501	evection-parallel:1:3	æŠ€æœ¯ç»ç†	\N	\N	_5	\N	lisi	\N	50	2022-05-08 14:35:31	\N	\N	1		\N	\N</span><br><span class="line">5007	1	5002	2501	evection-parallel:1:3	é¡¹ç›®ç»ç†	\N	\N	_6	\N	wangwu	\N	50	2022-05-08 14:35:31	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure></li>
<li><p>act_ru_identitylinkï¼Œä»»åŠ¡æ‰§è¡Œäººè¡¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰3æ¡æ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	GROUP_ID_	TYPE_	USER_ID_	TASK_ID_	PROC_INST_ID_	PROC_DEF_ID_</span><br><span class="line">2509	1	\N	participant	zhangsan	\N	2501	\N</span><br><span class="line">5005	1	\N	participant	lisi	\N	2501	\N</span><br><span class="line">5008	1	\N	participant	wangwu	\N	2501	\N</span><br></pre></td></tr></table></figure></li>
<li><p>act_ru_executionï¼ŒæŸ¥è¯¢æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªåˆ†æ”¯åœ¨æ‰§è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	PROC_INST_ID_	BUSINESS_KEY_	PARENT_ID_	PROC_DEF_ID_	SUPER_EXEC_	ROOT_PROC_INST_ID_	ACT_ID_	IS_ACTIVE_	IS_CONCURRENT_	IS_SCOPE_	IS_EVENT_SCOPE_	IS_MI_ROOT_	SUSPENSION_STATE_	CACHED_ENT_STATE_	TENANT_ID_	NAME_	START_TIME_	START_USER_ID_	LOCK_TIME_	IS_COUNT_ENABLED_	EVT_SUBSCR_COUNT_	TASK_COUNT_	JOB_COUNT_	TIMER_JOB_COUNT_	SUSP_JOB_COUNT_	DEADLETTER_JOB_COUNT_	VAR_COUNT_	ID_LINK_COUNT_</span><br><span class="line">2501	2	2501	\N	\N	evection-parallel:1:3	\N	2501	\N	1	0	1	0	0	1	\N		\N	2022-05-08 14:33:17	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">2505	2	2501	\N	2501	evection-parallel:1:3	\N	2501	_5	1	0	0	0	0	1	\N		\N	2022-05-08 14:33:17	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">5002	1	2501	\N	2501	evection-parallel:1:3	\N	2501	_6	1	0	0	0	0	1	\N		\N	2022-05-08 14:35:31	\N	\N	0	0	0	0	0	0	0	0	0</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong>ç»§ç»­æ‰§è¡Œï¼Œéšæ„æ‰§è¡Œä¸€ä¸ªåˆ†æ”¯èŠ‚ç‚¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸Šè¿°æ–¹æ³•ï¼šcompletTask</span></span><br><span class="line"><span class="comment">// ä»»åŠ¡è´Ÿè´£äººï¼šæŠ€æœ¯ç»ç†lisi</span></span><br><span class="line">String assingee = <span class="string">&quot;lisi&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹å¹¶è¡Œä»»åŠ¡çš„æ‰§è¡Œï¼šå¹¶è¡Œä»»åŠ¡æ‰§è¡Œä¸åˆ†å‰åï¼Œç”±ä»»åŠ¡çš„è´Ÿè´£äººå»æ‰§è¡Œå³å¯ã€‚</p>
<p>å½“æ‰§è¡Œå®Œæˆåï¼Œact_ru_taskè¡¨ä¸­å°±å°‘äº†ä¸€æ¡æ•°æ®ã€‚</p>
<p>åœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨act_ru_executionä¸­æœ‰ä¸­å¤šä¸ªåˆ†æ”¯å­˜åœ¨ä¸”æœ‰å¹¶è¡Œç½‘å…³çš„æ±‡èšç»“ç‚¹ï¼šï¼ˆç¬¬äºŒæ¡æ•°æ®ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	PROC_INST_ID_	BUSINESS_KEY_	PARENT_ID_	PROC_DEF_ID_	SUPER_EXEC_	ROOT_PROC_INST_ID_	ACT_ID_	IS_ACTIVE_	IS_CONCURRENT_	IS_SCOPE_	IS_EVENT_SCOPE_	IS_MI_ROOT_	SUSPENSION_STATE_	CACHED_ENT_STATE_	TENANT_ID_	NAME_	START_TIME_	START_USER_ID_	LOCK_TIME_	IS_COUNT_ENABLED_	EVT_SUBSCR_COUNT_	TASK_COUNT_	JOB_COUNT_	TIMER_JOB_COUNT_	SUSP_JOB_COUNT_	DEADLETTER_JOB_COUNT_	VAR_COUNT_	ID_LINK_COUNT_</span><br><span class="line">2501	3	2501	\N	\N	evection-parallel:1:3	\N	2501	\N	1	0	1	0	0	1	\N		\N	2022-05-08 14:33:17	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">2505	3	2501	\N	2501	evection-parallel:1:3	\N	2501	_7	0	0	0	0	0	1	\N		\N	2022-05-08 14:33:17	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">5002	1	2501	\N	2501	evection-parallel:1:3	\N	2501	_6	1	0	0	0	0	1	\N		\N	2022-05-08 14:35:31	\N	\N	0	0	0	0	0	0	0	0	0</span><br></pre></td></tr></table></figure>
<p>æœ‰å¹¶è¡Œç½‘å…³çš„æ±‡èšç»“ç‚¹ï¼šè¯´æ˜æœ‰ä¸€ä¸ªåˆ†æ”¯å·²ç»åˆ°æ±‡èšï¼Œç­‰å¾…å…¶å®ƒçš„åˆ†æ”¯åˆ°è¾¾ã€‚</p>
</blockquote>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong>ç»§ç»­æ‰§è¡Œå‰©ä¸‹çš„ä¸€ä¸ªèŠ‚ç‚¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String assingee = <span class="string">&quot;wangwu&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“æ‰€æœ‰åˆ†æ”¯ä»»åŠ¡éƒ½å®Œæˆï¼Œéƒ½åˆ°è¾¾æ±‡èšç»“ç‚¹åï¼šæµç¨‹å®ä¾‹æ‰§è¡Œè¡¨act_ru_executionï¼Œæ‰§è¡Œæµç¨‹å®ä¾‹å·²ç»å˜ä¸ºæ€»ç»ç†å®¡æ‰¹ï¼ˆç”±äºä¹‹å‰æ¡ä»¶è®¾ç½®ä¸ºäº†<code>evection.num=4</code>)ï¼Œè¯´æ˜æµç¨‹æ‰§è¡Œå·²ç»é€šè¿‡å¹¶è¡Œç½‘å…³</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	PROC_INST_ID_	BUSINESS_KEY_	PARENT_ID_	PROC_DEF_ID_	SUPER_EXEC_	ROOT_PROC_INST_ID_	ACT_ID_	IS_ACTIVE_	IS_CONCURRENT_	IS_SCOPE_	IS_EVENT_SCOPE_	IS_MI_ROOT_	SUSPENSION_STATE_	CACHED_ENT_STATE_	TENANT_ID_	NAME_	START_TIME_	START_USER_ID_	LOCK_TIME_	IS_COUNT_ENABLED_	EVT_SUBSCR_COUNT_	TASK_COUNT_	JOB_COUNT_	TIMER_JOB_COUNT_	SUSP_JOB_COUNT_	DEADLETTER_JOB_COUNT_	VAR_COUNT_	ID_LINK_COUNT_</span><br><span class="line">2501	4	2501	\N	\N	evection-parallel:1:3	\N	2501	\N	1	0	1	0	0	1	\N		\N	2022-05-08 14:33:17	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">5002	2	2501	\N	2501	evection-parallel:1:3	\N	2501	_9	1	0	0	0	0	1	\N		\N	2022-05-08 14:35:31	\N	\N	0	0	0	0	0	0	0	0	0</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>æ€»ç»“ï¼šæ‰€æœ‰åˆ†æ”¯åˆ°è¾¾æ±‡èšç»“ç‚¹ï¼Œå¹¶è¡Œç½‘å…³æ‰§è¡Œå®Œæˆã€‚</strong></p>
<h3 id="åŒ…å«ç½‘å…³-inclusivegateway">5.3 åŒ…å«ç½‘å…³-InclusiveGateway</h3>
<h4 id="æ¦‚è¿°-4">5.3.1 æ¦‚è¿°</h4>
<p><strong>åŒ…å«ç½‘å…³ï¼š</strong>å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚</p>
<ul>
<li>å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œå¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ï¼›</li>
<li>ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚</li>
</ul>
<p>åŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>
<ul>
<li><p>åˆ†æ”¯ï¼šæ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p></li>
<li><p>æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ï¼›è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼Œ<strong>åŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµ</strong>ã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚</p></li>
</ul>
<h4 id="æµç¨‹å®šä¹‰-3">5.3.2 æµç¨‹å®šä¹‰</h4>
<blockquote>
<p>å‡ºå·®ç”³è¯·å¤§äºç­‰äº3å¤©éœ€è¦ç”±é¡¹ç›®ç»ç†å®¡æ‰¹ï¼Œå°äº3å¤©ç”±æŠ€æœ¯ç»ç†å®¡æ‰¹ï¼Œå‡ºå·®ç”³è¯·å¿…é¡»ç»è¿‡äººäº‹ç»ç†å®¡æ‰¹ã€‚</p>
</blockquote>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/åŒ…å«ç½‘å…³å›¾.PNG" alt="åŒ…å«ç½‘å…³å›¾"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;evection-inclusive&quot;</span> <span class="attr">isClosed</span>=<span class="string">&quot;false&quot;</span> <span class="attr">isExecutable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®ç”³è¯·-åŒ…å«ç½‘å…³&quot;</span> <span class="attr">processType</span>=<span class="string">&quot;None&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;StartEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;åˆ›å»ºå‡ºå·®ç”³è¯·&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">name</span>=<span class="string">&quot;InclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;lisi&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;é¡¹ç›®ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;wangwu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;äººäº‹ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhaoliu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æŠ€æœ¯ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">name</span>=<span class="string">&quot;InclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ExclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;qianqi&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ€»ç»ç†&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_14&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤§äºç­‰äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_15&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_16&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å°äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_17&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_18&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_19&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_20&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_9&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_21&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å¤§äºç­‰äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_10&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&gt;=3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_22&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®å°äº3å¤©&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_11&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;evection.num&lt;3&#125;]]&gt;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_23&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_11&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æµç¨‹æµ‹è¯•-2">5.3.3 æµç¨‹æµ‹è¯•</h4>
<p><strong>å®šä¹‰æµç¨‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éƒ¨ç½²æµç¨‹å®šä¹‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeployment</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ›å»ºProcessEngine</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹</span></span><br><span class="line">    RepositoryService repositoryService = processEngine.getRepositoryService();</span><br><span class="line">    <span class="comment">// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½²</span></span><br><span class="line">    Deployment deployment = repositoryService.createDeployment()</span><br><span class="line">        .addClasspathResource(<span class="string">&quot;bpmn/evection-inclusive.bpmn&quot;</span>)</span><br><span class="line">        .name(<span class="string">&quot;å‡ºå·®æµç¨‹-åŒ…å«ç½‘å…³&quot;</span>)</span><br><span class="line">        .deploy();</span><br><span class="line">    <span class="comment">// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²idï¼š&quot;</span> + deployment.getId());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot;</span> + deployment.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¯åŠ¨æµç¨‹å®ä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡çš„å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–RunTimeService</span></span><br><span class="line">    RuntimeService runtimeService = processEngine.getRuntimeService();</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰key</span></span><br><span class="line">    String key = <span class="string">&quot;evection-inclusive&quot;</span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå˜é‡é›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡</span></span><br><span class="line">    Evection evection = <span class="keyword">new</span> Evection();</span><br><span class="line">    <span class="comment">// è®¾ç½®å‡ºå·®å¤©æ•°</span></span><br><span class="line">    evection.setNum(<span class="number">4d</span>);</span><br><span class="line">    <span class="comment">// å®šä¹‰æµç¨‹å˜é‡ï¼ŒæŠŠå‡ºå·®pojoå¯¹è±¡æ”¾å…¥map</span></span><br><span class="line">    map.put(<span class="string">&quot;evection&quot;</span>,evection);</span><br><span class="line">    <span class="comment">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶è®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼ˆæŠŠmapä¼ å…¥ï¼‰</span></span><br><span class="line">    ProcessInstance processInstance = runtimeService</span><br><span class="line">        .startProcessInstanceByKey(key, map);</span><br><span class="line">    <span class="comment">// è¾“å‡º</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®ä¾‹åç§°ï¼š&quot;</span>+processInstance.getName());</span><br><span class="line">    System.out.println(<span class="string">&quot;æµç¨‹å®šä¹‰idï¼š&quot;</span>+processInstance.getProcessDefinitionId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong>èŠ‚ç‚¹1<code>åˆ›å»ºå‡ºå·®å•</code>ï¼Œæ‰§è¡Œå®Œæˆåå°±è¿›å…¥äº†åŒ…å«ç½‘å…³</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰§è¡Œæµç¨‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// æµç¨‹å®šä¹‰çš„Key</span></span><br><span class="line">    String key = <span class="string">&quot;evection-inclusive&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡è´Ÿè´£äºº</span></span><br><span class="line">    String assingee = <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–æµç¨‹å¼•æ“</span></span><br><span class="line">    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">    <span class="comment">// è·å–taskservice</span></span><br><span class="line">    TaskService taskService = processEngine.getTaskService();</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ä»»åŠ¡</span></span><br><span class="line">    Task task = taskService.createTaskQuery()</span><br><span class="line">        .processDefinitionKey(key)</span><br><span class="line">        .taskAssignee(assingee)</span><br><span class="line">        .singleResult();</span><br><span class="line">    <span class="keyword">if</span>(task != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ä»»åŠ¡idæ¥   å®Œæˆä»»åŠ¡</span></span><br><span class="line">        taskService.complete(task.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“æµç¨‹æ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªåŒ…å«ç½‘å…³åï¼Œä¼šæ ¹æ®æ¡ä»¶åˆ¤æ–­ï¼Œå½“å‰è¦èµ°å“ªå‡ ä¸ªåˆ†æ”¯ï¼š</p>
<ul>
<li><p>act_ru_taskï¼Œåœ¨ä»»åŠ¡æ‰§è¡Œè¡¨ä¸­ï¼Œå­˜åœ¨ä¸¤æ¡ä»»åŠ¡ï¼Œå³æ»¡è¶³æ¡ä»¶çš„ä¸€æ¡<code>é¡¹ç›®ç»ç†</code>ï¼Œå¦ä¸€æ¡å³ä¸ºéƒ½ä¼šæ‰§è¡Œçš„<code>äººäº‹ç»ç†</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	EXECUTION_ID_	PROC_INST_ID_	PROC_DEF_ID_	NAME_	PARENT_TASK_ID_	DESCRIPTION_	TASK_DEF_KEY_	OWNER_	ASSIGNEE_	DELEGATION_	PRIORITY_	CREATE_TIME_	DUE_DATE_	CATEGORY_	SUSPENSION_STATE_	TENANT_ID_	FORM_KEY_	CLAIM_TIME_</span><br><span class="line">5004	1	2505	2501	evection-inclusive:1:3	é¡¹ç›®ç»ç†	\N	\N	_5	\N	lisi	\N	50	2022-05-08 15:06:45	\N	\N	1		\N	\N</span><br><span class="line">5007	1	5002	2501	evection-inclusive:1:3	äººäº‹ç»ç†	\N	\N	_6	\N	wangwu	\N	50	2022-05-08 15:06:45	\N	\N	1		\N	\N</span><br></pre></td></tr></table></figure></li>
<li><p>act_ru_executionï¼ŒæŸ¥è¯¢æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªåˆ†æ”¯åœ¨æ‰§è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ID_	REV_	PROC_INST_ID_	BUSINESS_KEY_	PARENT_ID_	PROC_DEF_ID_	SUPER_EXEC_	ROOT_PROC_INST_ID_	ACT_ID_	IS_ACTIVE_	IS_CONCURRENT_	IS_SCOPE_	IS_EVENT_SCOPE_	IS_MI_ROOT_	SUSPENSION_STATE_	CACHED_ENT_STATE_	TENANT_ID_	NAME_	START_TIME_	START_USER_ID_	LOCK_TIME_	IS_COUNT_ENABLED_	EVT_SUBSCR_COUNT_	TASK_COUNT_	JOB_COUNT_	TIMER_JOB_COUNT_	SUSP_JOB_COUNT_	DEADLETTER_JOB_COUNT_	VAR_COUNT_	ID_LINK_COUNT_</span><br><span class="line">2501	2	2501	\N	\N	evection-inclusive:1:3	\N	2501	\N	1	0	1	0	0	1	\N		\N	2022-05-08 15:05:48	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">2505	2	2501	\N	2501	evection-inclusive:1:3	\N	2501	_5	1	0	0	0	0	1	\N		\N	2022-05-08 15:05:48	\N	\N	0	0	0	0	0	0	0	0	0</span><br><span class="line">5002	1	2501	\N	2501	evection-inclusive:1:3	\N	2501	_6	1	0	0	0	0	1	\N		\N	2022-05-08 15:06:45	\N	\N	0	0	0	0	0	0	0	0	0</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼šç¬¬ä¸€æ¡è®°å½•ï¼šåŒ…å«ç½‘å…³åˆ†æ”¯ï¼›</p>
<p>åä¸¤æ¡è®°å½•ä»£è¡¨ä¸¤ä¸ªè¦æ‰§è¡Œçš„åˆ†æ”¯ï¼š</p>
<ul>
<li><p><code>ACT_ID = &quot;_5&quot;</code> ä»£è¡¨ <code>é¡¹ç›®ç»ç†</code> å®¡æ‰¹èŠ‚ç‚¹</p></li>
<li><p><code>ACT_ID = &quot;_6&quot;</code> ä»£è¡¨ <code>äººäº‹ç»ç†</code> å®¡æ‰¹èŠ‚ç‚¹</p></li>
</ul></li>
</ul>
</blockquote>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong>åç»­æ‰§è¡Œæµç¨‹åŸºæœ¬å°±å’Œå¹¶ç½‘å…³ç›¸åŒäº†ï¼›</p>
<p><strong>å°ç»“ï¼š</strong>åœ¨åˆ†æ”¯æ—¶ï¼Œéœ€è¦åˆ¤æ–­æ¡ä»¶ï¼Œ<strong>ç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯ï¼Œå°†ä¼šæ‰§è¡Œ</strong>ï¼Œç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯æœ€ç»ˆæ‰è¿›è¡Œæ±‡èšã€‚</p>
<h3 id="äº‹ä»¶ç½‘å…³-eventgateway">5.4 äº‹ä»¶ç½‘å…³-EventGateway</h3>
<blockquote>
<p>ä¸ç”šç†è§£ï¼Œæ²¡æœ‰æµ‹è¯•ã€‚</p>
</blockquote>
<h4 id="æ¦‚è¿°-5">5.4.1 æ¦‚è¿°</h4>
<p>äº‹ä»¶ç½‘å…³å…è®¸æ ¹æ®äº‹ä»¶åˆ¤æ–­æµå‘ï¼Œç½‘å…³çš„æ¯ä¸ªå¤–å‡ºé¡ºåºæµéƒ½è¦è¿æ¥åˆ°ä¸€ä¸ª<strong>ä¸­é—´æ•è·äº‹ä»¶</strong>ã€‚</p>
<p>å½“æµç¨‹åˆ°è¾¾ä¸€ä¸ªåŸºäºäº‹ä»¶ç½‘å…³ï¼Œç½‘å…³ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼šä¼šæš‚åœæ‰§è¡Œï¼›ä¸æ­¤åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªå¤–å‡ºé¡ºåºæµåˆ›å»ºç›¸å¯¹çš„äº‹ä»¶è®¢é˜…ã€‚</p>
<p>äº‹ä»¶ç½‘å…³çš„å¤–å‡ºé¡ºåºæµå’Œæ™®é€šé¡ºåºæµä¸åŒï¼Œè¿™äº›é¡ºåºæµä¸ä¼šçœŸçš„&quot;æ‰§è¡Œ&quot;ï¼Œç›¸åå®ƒä»¬è®©æµç¨‹å¼•æ“å»å†³å®šæ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³çš„æµç¨‹éœ€è¦è®¢é˜…å“ªäº›äº‹ä»¶ã€‚</p>
<p>äº‹ä»¶ç½‘å…³è¦è€ƒè™‘ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol type="1">
<li>äº‹ä»¶ç½‘å…³å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¤–å‡ºé¡ºåºæµï¼›</li>
<li>äº‹ä»¶ç½‘å…³åï¼Œåªèƒ½ä½¿ç”¨intermediateCatchEventç±»å‹ï¼ˆactivitiä¸æ”¯æŒåŸºäºäº‹ä»¶ç½‘å…³åè¿æ¥ReceiveTaskï¼‰</li>
<li>è¿æ¥åˆ°äº‹ä»¶ç½‘å…³çš„ä¸­é—´æ•è·äº‹ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªå…¥å£é¡ºåºæµã€‚</li>
</ol>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/äº‹ä»¶ç±»å‹-2.PNG" alt="äº‹ä»¶ç±»å‹-2"></p>
<h4 id="æµç¨‹å®šä¹‰-4">5.4.2 æµç¨‹å®šä¹‰</h4>
<p><img src="/2022/05/08/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E6%8F%90%E5%8D%87/äº‹ä»¶ç½‘å…³.PNG" alt="äº‹ä»¶ç½‘å…³"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;evection-event&quot;</span> <span class="attr">isClosed</span>=<span class="string">&quot;false&quot;</span> <span class="attr">isExecutable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å‡ºå·®ç”³è¯·-äº‹ä»¶ç½‘å…³&quot;</span> <span class="attr">processType</span>=<span class="string">&quot;None&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;StartEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æäº¤ç”³è¯·&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">eventBasedGateway</span> <span class="attr">eventGatewayType</span>=<span class="string">&quot;Exclusive&quot;</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">instantiate</span>=<span class="string">&quot;false&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EventGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">name</span>=<span class="string">&quot;IntermediateCatchingEvent&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">id</span>=<span class="string">&quot;_5_ED_1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;IntermediateCatchingEvent&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">id</span>=<span class="string">&quot;_6_ED_1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">name</span>=<span class="string">&quot;IntermediateCatchingEvent&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">timerEventDefinition</span> <span class="attr">id</span>=<span class="string">&quot;_7_ED_1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;lisi&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">name</span>=<span class="string">&quot;æ¶ˆæ¯ä»»åŠ¡&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;wangwu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ä¿¡å·ä»»åŠ¡&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">activiti:assignee</span>=<span class="string">&quot;zhaoliu&quot;</span> <span class="attr">activiti:exclusive</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">name</span>=<span class="string">&quot;å®šæ—¶ä»»åŠ¡&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">gatewayDirection</span>=<span class="string">&quot;Unspecified&quot;</span> <span class="attr">id</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">name</span>=<span class="string">&quot;ExclusiveGateway&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;_12&quot;</span> <span class="attr">name</span>=<span class="string">&quot;EndEvent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_13&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_2&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_14&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_3&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_15&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_16&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_6&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_17&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_4&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_7&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_18&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_5&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_19&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_6&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_9&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_20&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_7&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_10&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_21&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_8&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_11&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_22&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_9&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_11&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_23&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_10&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_11&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;_24&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;_11&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;_12&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- æœ¬æ–‡ç»“æŸ </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> æ„Ÿè°¢é˜…è¯» ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> å­¦ä¹ ç¬”è®°</a>
              <a href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> å¼€å‘æ¡†æ¶</a>
              <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> å·¥ä½œæµ</a>
              <a href="/tags/Activiti/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Activiti</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/05/01/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Activiti/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%9AActiviti%E5%9F%BA%E7%A1%80/" rel="prev" title="å·¥ä½œæµï¼šActivitiåŸºç¡€">
      <i class="fa fa-chevron-left"></i> å·¥ä½œæµï¼šActivitiåŸºç¡€
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E6%B5%81activiti%E6%8F%90%E5%8D%87"><span class="nav-text">å·¥ä½œæµï¼šActivitiæå‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B"><span class="nav-text">1. æµç¨‹å®ä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-text">1.1 æ¦‚è¿°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#businesskey"><span class="nav-text">1.2 Businesskey</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="nav-text">1.2.1 æ¦‚è¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-text">1.2.2 æ•°æ®åº“æ“ä½œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B"><span class="nav-text">1.2.3 æŸ¥è¯¢æµç¨‹å®ä¾‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E8%81%94-businesskey"><span class="nav-text">1.2.4 å…³è” BusinessKey</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%82%E8%B5%B7%E6%BF%80%E6%B4%BB%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B"><span class="nav-text">1.3 æŒ‚èµ·&amp;æ¿€æ´»æµç¨‹å®ä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E9%83%A8%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B%E6%8C%82%E8%B5%B7"><span class="nav-text">1.3.1 å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E4%B8%AA%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B%E6%8C%82%E8%B5%B7"><span class="nav-text">1.3.2 å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AA%E4%BA%BA%E4%BB%BB%E5%8A%A1"><span class="nav-text">2. ä¸ªäººä»»åŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E9%85%8D%E4%BB%BB%E5%8A%A1%E8%B4%9F%E8%B4%A3%E4%BA%BA"><span class="nav-text">2.1 åˆ†é…ä»»åŠ¡è´Ÿè´£äºº</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%BA%E5%AE%9A%E5%88%86%E9%85%8D"><span class="nav-text">2.1.1 å›ºå®šåˆ†é…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%88%86%E9%85%8D"><span class="nav-text">2.1.2 è¡¨è¾¾å¼åˆ†é…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8%E5%88%86%E9%85%8D"><span class="nav-text">2.1.3 ç›‘å¬å™¨åˆ†é…</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E4%BB%BB%E5%8A%A1"><span class="nav-text">2.2 æŸ¥è¯¢ä»»åŠ¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9E%E7%90%86%E4%BB%BB%E5%8A%A1"><span class="nav-text">2.3 åŠç†ä»»åŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F"><span class="nav-text">3. æµç¨‹å˜é‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F-1"><span class="nav-text">3.1 æµç¨‹å˜é‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-text">3.2 æµç¨‹å˜é‡ä½œç”¨åŸŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-text">3.3 æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8global%E5%8F%98%E9%87%8F%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B"><span class="nav-text">3.4 ä½¿ç”¨Globalå˜é‡æ§åˆ¶æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9C%80%E6%B1%82"><span class="nav-text">3.4.1 éœ€æ±‚</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89"><span class="nav-text">3.4.2 æµç¨‹å®šä¹‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%B8%83%E7%BD%B2"><span class="nav-text">3.4.3 æµç¨‹å¸ƒç½²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEglobal%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F"><span class="nav-text">3.4.4 è®¾ç½®globalæµç¨‹å˜é‡</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="nav-text">3.4.4.1 å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1%E5%8A%9E%E7%90%86%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="nav-text">3.4.4.2 ä»»åŠ¡åŠç†æ—¶è®¾ç½®å˜é‡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%BD%93%E5%89%8D%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B%E8%AE%BE%E7%BD%AE"><span class="nav-text">3.4.4.3 é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%BD%93%E5%89%8D%E4%BB%BB%E5%8A%A1%E8%AE%BE%E7%BD%AE"><span class="nav-text">3.4.4.4 é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E6%B5%8B%E8%AF%95"><span class="nav-text">3.4.5 åˆ†æ”¯æµ‹è¯•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-text">3.4.6 æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AElocal%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F"><span class="nav-text">3.5 è®¾ç½®localæµç¨‹å˜é‡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1%E5%8A%9E%E7%90%86%E6%97%B6%E8%AE%BE%E7%BD%AE"><span class="nav-text">3.5.1 ä»»åŠ¡åŠç†æ—¶è®¾ç½®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%BD%93%E5%89%8D%E4%BB%BB%E5%8A%A1%E8%AE%BE%E7%BD%AE-1"><span class="nav-text">3.5.2 é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#local%E5%8F%98%E9%87%8F%E6%B5%8B%E8%AF%95"><span class="nav-text">3.5.3 Localå˜é‡æµ‹è¯•</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%BB%E5%8A%A1"><span class="nav-text">4. ç»„ä»»åŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%BB%E5%8A%A1%E8%AE%BE%E7%BD%AE"><span class="nav-text">4.1 ç»„ä»»åŠ¡è®¾ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%BB%E5%8A%A1-1"><span class="nav-text">4.2 ç»„ä»»åŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%BB%E5%8A%A1%E5%8A%9E%E7%90%86%E6%B5%81%E7%A8%8B"><span class="nav-text">4.2.1 ç»„ä»»åŠ¡åŠç†æµç¨‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%BB%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-text">4.2.2 ç»„ä»»åŠ¡æ“ä½œ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E5%85%B3"><span class="nav-text">5. ç½‘å…³</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%92%E4%BB%96%E7%BD%91%E5%85%B3-exclusivegateway"><span class="nav-text">5.1 æ’ä»–ç½‘å…³-ExclusiveGateway</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="nav-text">5.1.1 æ¦‚è¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-1"><span class="nav-text">5.1.2 æµç¨‹å®šä¹‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%B5%8B%E8%AF%95"><span class="nav-text">5.1.3 æµç¨‹æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E8%A1%8C%E7%BD%91%E5%85%B3-parallelgateway"><span class="nav-text">5.2 å¹¶è¡Œç½‘å…³-ParallelGateway</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="nav-text">5.2.1 æ¦‚è¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-2"><span class="nav-text">5.2.2 æµç¨‹å®šä¹‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%B5%8B%E8%AF%95-1"><span class="nav-text">5.2.2 æµç¨‹æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E5%90%AB%E7%BD%91%E5%85%B3-inclusivegateway"><span class="nav-text">5.3 åŒ…å«ç½‘å…³-InclusiveGateway</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-4"><span class="nav-text">5.3.1 æ¦‚è¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-3"><span class="nav-text">5.3.2 æµç¨‹å®šä¹‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%B5%8B%E8%AF%95-2"><span class="nav-text">5.3.3 æµç¨‹æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E7%BD%91%E5%85%B3-eventgateway"><span class="nav-text">5.4 äº‹ä»¶ç½‘å…³-EventGateway</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-5"><span class="nav-text">5.4.1 æ¦‚è¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-4"><span class="nav-text">5.4.2 æµç¨‹å®šä¹‰</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">ä¸æ€¥ä¸èºã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">210</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">100</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activiti/" rel="tag">Activiti</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arthas/" rel="tag">Arthas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CompletableFuture/" rel="tag">CompletableFuture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Groovy/" rel="tag">Groovy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">76</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">JavaåŸºç¡€</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">Javaè¯­æ³•</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">Kè¿‘é‚»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Optional/" rel="tag">Optional</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TransmittableThreadLocal/" rel="tag">TransmittableThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E7%BB%8F%E5%8E%86/" rel="tag">ä¸ªäººç»å†</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">ä¸­é—´ä»¶</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">å…¨æ–‡æ£€ç´¢</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">å†³ç­–æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">åˆ†ç±»é—®é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">åˆ·é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">åˆ·é¢˜ç¬”è®°</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/" rel="tag">åŠ å¯†æ–‡ç« </a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">åšå®¢æ­å»º</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">å‚è€ƒæ–‡ä»¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">åŸºç¡€çŸ¥è¯†</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">å­¦ä¹ ç¬”è®°</a><span class="tag-list-count">106</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/" rel="tag">å·¥ä½œæµ</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">å¹¶å‘ç¼–ç¨‹</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">å¼€å‘æ¡†æ¶</a><span class="tag-list-count">33</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%90%E9%95%BF%E5%8F%B2/" rel="tag">æˆé•¿å²</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">æŒä¹…å±‚æ¡†æ¶</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">æ’åºç®—æ³•</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">æ“ä½œç³»ç»Ÿ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">æ”¯æŒå‘é‡æœº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">æ•°å­¦æ¨å¯¼</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">æ•°æ®æ¸…æ´—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8/" rel="tag">æ—¥å¸¸</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">æ—¥å¿—æ¡†æ¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">æœºå™¨å­¦ä¹ </a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">æ ‘ç»“æ„</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">æ ‘è“æ´¾</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag">æµ‹è¯•å·¥å…·</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">æ¶ˆæ¯é˜Ÿåˆ—</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">æ·±åº¦å­¦ä¹ </a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">ç‰¹å¾é€‰æ‹©</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">ç¯å¢ƒé…ç½®</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">ç›®æ ‡æ£€æµ‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">çº¿æ€§å›å½’</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">èšç±»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">è¡¨ç¤ºå±‚</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">è®¡ç®—æœºç½‘è·¯</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">è¯»ä¹¦ç¬”è®°</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">è°ƒç”¨é“¾ç›‘æ§</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">è´å¶æ–¯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">è½¯ä»¶ä½¿ç”¨</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">é€»è¾‘å›å½’</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">é›†åˆç±»</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">é›†æˆå­¦ä¹ </a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">é¢ç»</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">é¢è¯•ç¬”è®°</a><span class="tag-list-count">61</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">3.8m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">57:29</span>
</div>

<!--
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "è¯·å¤šå¤šæŒ‡æ•™~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
