<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Mario.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Mario.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="工欲善其事必先利其器，在工作过程中对于一些在线上不太好进行Debug的场景，这时候就可以通过 Arthas 来获取其对应方法的：输入&#x2F;输出&#x2F;异常&#x2F;调用链路执行时间...；于是就抽空学一下 Arthas 的一些使用。  官网文档传送门：Arthas 用户文档">
<meta property="og:type" content="article">
<meta property="og:title" content="Utils：Arthas">
<meta property="og:url" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/index.html">
<meta property="og:site_name" content="贤余超">
<meta property="og:description" content="工欲善其事必先利其器，在工作过程中对于一些在线上不太好进行Debug的场景，这时候就可以通过 Arthas 来获取其对应方法的：输入&#x2F;输出&#x2F;异常&#x2F;调用链路执行时间...；于是就抽空学一下 Arthas 的一些使用。  官网文档传送门：Arthas 用户文档">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-1.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-2.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-3.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-4.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/trace结果-1.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/trace结果-2.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/trace结果-3.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/stack使用-1.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/monitor输出结果.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/tt使用-1.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/options-1.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/options-2.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/options-3.PNG">
<meta property="og:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/dashboard.PNG">
<meta property="article:published_time" content="2022-01-16T02:24:00.000Z">
<meta property="article:modified_time" content="2022-01-16T02:24:00.000Z">
<meta property="article:author" content="ZhuCC">
<meta property="article:tag" content="测试工具">
<meta property="article:tag" content="Arthas">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-1.PNG">

<link rel="canonical" href="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Utils：Arthas | 贤余超</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a target="_blank" rel="noopener" href="https://github.com/zhuChengChao" class="github-corner" aria-label="View source on GitHub">
	<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
	<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
	</svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">贤余超</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">一位底层码农 :-)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">98</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">17</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">201</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="ZhuCC">
      <meta itemprop="description" content="不急不躁。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="贤余超">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Utils：Arthas
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-16 10:24:00" itemprop="dateCreated datePublished" datetime="2022-01-16T10:24:00+08:00">2022-01-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">开发框架</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>工欲善其事必先利其器，在工作过程中对于一些在线上不太好进行Debug的场景，这时候就可以通过 Arthas 来获取其对应方法的：输入/输出/异常/调用链路执行时间...；于是就抽空学一下 Arthas 的一些使用。</p>
<blockquote>
<p>官网文档传送门：<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/">Arthas 用户文档</a></p>
</blockquote>
<span id="more"></span>
<h1 id="utilsarthas">Utils：Arthas</h1>
<p>其实在官方文档里：<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/">Arthas 用户文档</a>，对其使用已经说的很明确了；</p>
<p>这里的话就想记录一下日常使用较多的一些命令之类的，方便后续个人查看；</p>
<h2 id="准备">准备</h2>
<blockquote>
<p>然后这里的话就先在 win 系统下测试其使用了</p>
</blockquote>
<p><strong>下载：</strong>打开控制台输入<code>curl -O https://arthas.aliyun.com/arthas-boot.jar</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Software\arthas&gt;curl -O https://arthas.aliyun.com/arthas-boot.jar  <span class="comment"># 下载</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  138k  100  138k    0     0   138k      0  0:00:01  0:00:01 --:--:--  134k</span><br><span class="line"></span><br><span class="line">C:\Software\arthas&gt;java -jar arthas-boot.jar  <span class="comment"># 运行</span></span><br><span class="line">[INFO] arthas-boot version: 3.5.5</span><br><span class="line">[INFO] Found existing java process, please choose one and input the serial number of the process, eg : 1. Then hit ENTER.</span><br><span class="line">* [1]: 40956 org.jetbrains.jps.cmdline.Launcher</span><br><span class="line">  [2]: 57500</span><br></pre></td></tr></table></figure>
<p><strong>运行：</strong>任意选择一个Java的进程即可</p>
<blockquote>
<p>最好先下一个官方给的一个Java进程，和上面同样的方式下载，然后运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Software\arthas&gt;curl -O https://arthas.aliyun.com/math-game.jar</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  4496  100  4496    0     0   4496      0  0:00:01 --:--:--  0:00:01 20529</span><br><span class="line"></span><br><span class="line">C:\Software\arthas&gt;java -jar math-game.jar  <span class="comment"># 运行一个Java程序</span></span><br><span class="line">13491=3*3*1499</span><br><span class="line">169180=2*2*5*11*769</span><br></pre></td></tr></table></figure>
</blockquote>
<p>在有Java程序运行的基础上开启arthas，然后选择相应的java进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">C:\Software\arthas&gt;java -jar arthas-boot.jar  <span class="comment"># 运行arthas</span></span><br><span class="line">[INFO] arthas-boot version: 3.5.5</span><br><span class="line">[INFO] Process 57500 already using port 3658</span><br><span class="line">[INFO] Process 57500 already using port 8563</span><br><span class="line">[INFO] Found existing java process, please choose one and input the serial number of the process, eg : 1. Then hit ENTER.</span><br><span class="line">* [1]: 57500</span><br><span class="line">  [2]: 67168 math-game.jar  <span class="comment"># 选择这个jar进程</span></span><br><span class="line">  [3]: 40956 org.jetbrains.jps.cmdline.Launcher</span><br><span class="line"></span><br><span class="line">[INFO] arthas home: C:\Users\ZhuCC\.arthas\lib\3.5.5\arthas</span><br><span class="line">[INFO] The target process already listen port 3658, skip attach.</span><br><span class="line">[INFO] arthas-client connect 127.0.0.1 3658</span><br><span class="line">  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.</span><br><span class="line"> /  O  \ |  .--. <span class="string">&#x27;&#x27;</span>--.  .--<span class="string">&#x27;|  &#x27;</span>--<span class="string">&#x27;  | /  O  \ &#x27;</span>   .-<span class="string">&#x27;</span></span><br><span class="line"><span class="string">|  .-.  ||  &#x27;</span>--<span class="string">&#x27;.&#x27;</span>   |  |   |  .--.  ||  .-.  |`.  `-.</span><br><span class="line">|  | |  ||  |\  \    |  |   |  |  |  ||  | |  |.-<span class="string">&#x27;    |</span></span><br><span class="line"><span class="string">`--&#x27;</span> `--<span class="string">&#x27;`--&#x27;</span> <span class="string">&#x27;--&#x27;</span>   `--<span class="string">&#x27;   `--&#x27;</span>  `--<span class="string">&#x27;`--&#x27;</span> `--<span class="string">&#x27;`-----&#x27;</span></span><br><span class="line"></span><br><span class="line">wiki       https://arthas.aliyun.com/doc</span><br><span class="line">tutorials  https://arthas.aliyun.com/doc/arthas-tutorials.html</span><br><span class="line">version    3.5.5</span><br><span class="line">main_class</span><br><span class="line">pid        57500</span><br><span class="line">time       2022-02-13 21:39:08</span><br><span class="line">[arthas@67168]$  <span class="comment"># 进入arthas的命令行了</span></span><br><span class="line">[arthas@67168]$</span><br></pre></td></tr></table></figure>
<blockquote>
<p>日常使用其实根本不用自己装，运维会去装好滴啦，分工明确！</p>
</blockquote>
<h2 id="常用命令">常用命令</h2>
<blockquote>
<p>最好的话就是去IDEA中下载一个插件：<code>arthas idea</code>，这样的话在idea中可以直接选择需要查看的方法通过插件直接来获取到arthas的命令了。</p>
</blockquote>
<p>这部分就记录一下个人在工作中使用过的一些命令。</p>
<h3 id="watch">watch</h3>
<p><strong>作用</strong>：观察到指定函数的调用情况，能观察到的范围为：返回值、抛出异常、入参，通过编写OGNL表达式进行对应变量的查看。</p>
<blockquote>
<p>使用的比较多的命令，可以直接用插件在方法上生成命令，如：<code>watch 包名.类名 方法名 '&#123;params,returnObj,throwExp&#125;' -v -n 5 -x 3 '1==1'</code></p>
</blockquote>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>class-pattern</td>
<td>类名表达式匹配</td>
</tr>
<tr class="even">
<td>method-pattern</td>
<td>函数名表达式匹配</td>
</tr>
<tr class="odd">
<td>express</td>
<td>观察表达式，默认值：<code>&#123;params, target, returnObj&#125;</code>，支持OGNL</td>
</tr>
<tr class="even">
<td>condition-express</td>
<td>条件表达式，支持OGNL</td>
</tr>
<tr class="odd">
<td>[b]</td>
<td>在<strong>函数调用之前</strong>观察，默认关闭</td>
</tr>
<tr class="even">
<td>[e]</td>
<td>在<strong>函数异常之后</strong>观察，默认关闭</td>
</tr>
<tr class="odd">
<td>[s]</td>
<td>在<strong>函数返回之后</strong>观察，默认关闭</td>
</tr>
<tr class="even">
<td>[f]</td>
<td>在<strong>函数结束之后</strong>(正常返回和异常返回)观察，<strong>默认打开</strong></td>
</tr>
<tr class="odd">
<td>[E]</td>
<td>开启正则表达式匹配，默认为通配符匹配</td>
</tr>
<tr class="even">
<td>[x:]</td>
<td>指定输出结果的属性遍历深度，默认为 1</td>
</tr>
</tbody>
</table>
<p><strong>特别说明</strong>：</p>
<ul>
<li>watch 命令定义了<strong>4个观察事件点</strong>，即 <code>-b</code> 函数调用前，<code>-e</code> 函数异常后，<code>-s</code> 函数返回后，<code>-f</code> 函数结束后</li>
<li>4个观察事件点 <code>-b</code>、<code>-e</code>、<code>-s</code> 默认关闭，<strong><code>-f</code> 默认打开</strong>，当指定观察点被打开后，在相应事件点会对观察表达式进行求值并输出</li>
<li>这里要注意<code>函数入参</code>和<code>函数出参</code>的区别，有可能在中间被修改导致前后不一致，除了 <code>-b</code> 事件点 <code>params</code> 代表函数入参外，其余事件都代表函数出参</li>
<li>当使用 <code>-b</code> 时，由于观察事件点是在函数调用前，此时返回值或异常均不存在</li>
<li>在watch命令的结果里，会打印出<code>location</code>信息。<strong><code>location</code>有三种可能值</strong>：<code>AtEnter</code>，<code>AtExit</code>，<code>AtExceptionExit</code>。对应函数入口，函数正常return，函数抛出异常。</li>
</ul>
<p><strong>使用说明：</strong></p>
<ul>
<li><p><strong>常用命令</strong>：<code>watch demo.MathGame primeFactors '&#123;params,returnObj,throwExp&#125;' -x 2 -n 2</code></p>
<p>结果：</p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-1.PNG" alt="watch执行结果-1"></p>
<blockquote>
<ul>
<li>这里的<code>'&#123;params,returnObj,throwExp&#125;'</code>就可以按需设置了，比如我只要异常信息就设置一下<code>'&#123;throwExp&#125;'</code></li>
<li><code>-n 2</code>：表明执行2次就退出watch；</li>
<li><code>-x 2</code>：输出结果的属性遍历深度，即对象里面还有对象成员，加大这个就可以输出，后续进一步说明</li>
</ul>
</blockquote></li>
<li><p><strong>关于<code>-x</code>命令</strong>：<code>watch demo.MathGame primeFactors '&#123;target&#125;' -x 3 -n 1</code></p>
<blockquote>
<p><code>'&#123;target&#125;'</code>表明的是当前的对象信息，因为这里函数出入输出对于<code>-x</code>体现不明朗因而用了当前对象</p>
</blockquote>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-2.PNG" alt="watch执行结果-2"></p>
<p>对比一下<code>-x 2</code>：</p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-3.PNG" alt="watch执行结果-3"></p></li>
<li><p><strong>函数调用前后命令</strong>：<code>watch demo.MathGame primeFactors &quot;&#123;params,target,returnObj&#125;&quot; -x 2 -b -s -n 2</code></p>
<blockquote>
<p>采用了<code>-s -b</code>，表明：第一次输出的是函数调用前的观察表达式的结果，第二次输出的是函数返回后的表达式的结果；</p>
<p>注意：这里由于是执行前和执行后，因此<code>-n 2</code>，不然只会输出执行前的结果。</p>
</blockquote>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/watch执行结果-4.PNG" alt="watch执行结果-4"></p></li>
<li><p><strong>关于条件表达式</strong></p>
<ul>
<li><p><strong>例1参数过滤</strong>：<code>watch demo.MathGame primeFactors &quot;&#123;params[0],target&#125;&quot; &quot;params[0]&lt;0&quot;</code></p>
<blockquote>
<p>即：只有满足条件的调用，才会有响应，上述的话是传入参数<code>&quot;params[0]&lt;0&quot;</code>才输出watch结果</p>
</blockquote></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[arthas@62532]$ watch demo.MathGame primeFactors <span class="string">&quot;&#123;params[0],target&#125;&quot;</span> <span class="string">&quot;params[0]&lt;0&quot;</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 20 ms, listenerId: 16</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=2022-02-19 13:01:42; [cost=0.3774ms] result=@ArrayList[</span><br><span class="line">    @Integer[-169794],</span><br><span class="line">    @MathGame[demo.MathGame@5a10411],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>例2耗时过滤</strong>：<code>watch demo.MathGame primeFactors '&#123;params, returnObj&#125;' '#cost&gt;20' -x 2</code></p>
<blockquote>
<p>即：当函数rt时间大于20ms才输出，这样就可以过滤掉执行时间小于200ms的调用</p>
</blockquote></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[arthas@62532]$ watch demo.MathGame primeFactors <span class="string">&#x27;&#123;params, returnObj&#125;&#x27;</span> <span class="string">&#x27;#cost&gt;1&#x27;</span> -x 2  <span class="comment"># 这里的话因为函数执行时间很短，因此设置了1</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 16 ms, listenerId: 33</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExit</span><br><span class="line">ts=2022-02-19 13:30:50; [cost=1.3509ms] result=@ArrayList[</span><br><span class="line">    @Object[][</span><br><span class="line">        @Integer[1],</span><br><span class="line">    ],</span><br><span class="line">    @ArrayList[</span><br><span class="line">        @Integer[106657],</span><br><span class="line">    ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
<li><p><strong><code>target</code>的说明</strong>：表明当前对象中的属性，可以使用<code>target</code>关键字，代表当前对象</p>
<ul>
<li><p>查看当前对象：<code>watch demo.MathGame primeFactors 'target'</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[arthas@62532]$ watch demo.MathGame primeFactors <span class="string">&#x27;target&#x27;</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 18 ms, listenerId: 34</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=2022-02-19 13:33:04; [cost=0.2689ms] result=@MathGame[</span><br><span class="line">    random=@Random[java.util.Random@7a07c5b4],</span><br><span class="line">    illegalArgumentCount=@Integer[4389],</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
<li><p>访问当前对象的某个属性：<code>watch demo.MathGame primeFactors 'target.illegalArgumentCount'</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[arthas@62532]$ watch demo.MathGame primeFactors <span class="string">&#x27;target.illegalArgumentCount&#x27;</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 19 ms, listenerId: 35</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExit</span><br><span class="line">ts=2022-02-19 13:34:44; [cost=0.1083ms] result=@Integer[4435]</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExit</span><br></pre></td></tr></table></figure></li>
<li><p>获取类中的静态字段、调用类的静态函数：<code>watch demo.MathGame * '&#123;params,@demo.MathGame@random.nextInt(100)&#125;' -n 1 -x 2</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[arthas@62532]$ watch demo.MathGame * <span class="string">&#x27;&#123;params,@demo.MathGame@random.nextInt(100)&#125;&#x27;</span> -n 1 -x 2</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 5) cost <span class="keyword">in</span> 22 ms, listenerId: 36</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=2022-02-19 13:40:22; [cost=0.0815ms] result=@ArrayList[</span><br><span class="line">    @Object[][</span><br><span class="line">        @Integer[-110932],</span><br><span class="line">    ],</span><br><span class="line">    @Integer[33],</span><br><span class="line">]</span><br><span class="line">Command execution <span class="built_in">times</span> exceed <span class="built_in">limit</span>: 1, so <span class="built_in">command</span> will <span class="built_in">exit</span>. You can <span class="built_in">set</span> it with -n option.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中Demo中random为静态成员字段：<code>private static Random random = new Random();</code></p>
</blockquote></li>
</ul></li>
</ul>
<h3 id="trace">trace</h3>
<p><strong>作用：</strong>方法内部调用路径，并<strong>输出方法路径上的每个节点上耗时</strong>（很好用）</p>
<blockquote>
<p><code>trace</code> 能方便的帮助你定位和发现因 RT 高而导致的性能问题缺陷，<strong>但其每次只能跟踪一级方法的调用链路，</strong>因此多级别调用的话就需要<strong>一步步的trace</strong> / <strong>动态trace</strong> / <strong>利用正则表匹配</strong></p>
</blockquote>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>class-pattern</td>
<td>类名表达式匹配</td>
</tr>
<tr class="even">
<td>method-pattern</td>
<td>方法名表达式匹配</td>
</tr>
<tr class="odd">
<td>condition-express</td>
<td>条件表达式</td>
</tr>
<tr class="even">
<td>[E]</td>
<td>开启正则表达式匹配，默认为通配符匹配</td>
</tr>
<tr class="odd">
<td>[n:]</td>
<td>命令执行次数</td>
</tr>
<tr class="even">
<td>#cost</td>
<td>方法执行耗时</td>
</tr>
</tbody>
</table>
<p><strong>使用说明：</strong></p>
<ul>
<li><p><strong>基础使用：</strong><code>trace demo.MathGame run -n 1</code></p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/trace结果-1.PNG" alt="trace结果-1"></p>
<blockquote>
<p>上述<code>-n 1</code>和之前说明的一样，就是trace一次就退出，默认是会一直trace的，即每次调用相应方法都会trace</p>
</blockquote></li>
<li><p><strong>是否跳过jdk的函数</strong>：<code>--skipJDKMethod &lt;value&gt;</code>，默认情况下，trace不会包含jdk里的函数调用，如果希望trace jdk里的函数，需要显式设置<code>--skipJDKMethod false</code></p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/trace结果-2.PNG" alt="trace结果-2"></p></li>
<li><p><strong>据调用耗时过滤：</strong><code>trace demo.MathGame run '#cost &gt; 1' -n 1</code></p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/trace结果-3.PNG" alt="trace结果-3"></p>
<blockquote>
<p>只会展示耗时大于1ms的调用路径，有助于在排查问题的时候，只关注异常情况；</p>
<p>这里存在一个统计不准确的问题，就是所有方法耗时加起来可能会小于该监测方法的总耗时，这个是由于 Arthas 本身的逻辑会有一定的耗时</p>
</blockquote></li>
<li><p><strong>动态trace</strong>：因为trace其每次只能跟踪一级方法的调用链路，可以通过动态trace得到一定程度解决，如下：</p>
<ul>
<li><p>打开终端1，trace上面demo里的<code>run</code>函数，可以看到打印出 <code>listenerId: 1</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[arthas@70700]$ trace demo.MathGame run</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 81 ms, listenerId: 1</span><br><span class="line">`---ts=2022-02-19 15:50:06;thread_name=main;id=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=sun.misc.Launcher<span class="variable">$AppClassLoader</span>@5c647e05</span><br><span class="line">    `---[7.0375ms] demo.MathGame:run()</span><br><span class="line">        `---[0.0668ms] demo.MathGame:primeFactors() <span class="comment">#24 [throws Exception]</span></span><br></pre></td></tr></table></figure></li>
<li><p>想要深入子函数<code>primeFactors</code>，可以打开一个新终端2，使用<code>telnet localhost 3658</code>连接上arthas，再<code>trace primeFactors</code>时，指定<code>listenerId</code>。</p>
<blockquote>
<p>win下的telnet开启：https://jingyan.baidu.com/article/8065f87f67d4b52331249806.html；</p>
<p>然后端口3658，则是arthas的默认情况下使用的端口</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[arthas@70700]$ trace demo.MathGame primeFactors --listenerId 1</span><br><span class="line">Press Q or Ctrl+C to abort.                                                       Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 28 ms, listenerId: 1</span><br></pre></td></tr></table></figure>
<p>这时终端2打印的结果，说明已经增强了一个函数：<code>Affect(class count: 1 , method count: 1)</code>，但不再打印更多的结果。</p></li>
<li><p>再查看终端1，可以发现trace的结果增加了一层，打印了<code>primeFactors</code>函数里的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">`---ts=2022-02-19 15:51:35;thread_name=main;id=1;is_daemon=false;priority=5;TCCL=sun.misc.Launcher$AppClassLoader@5c647e05</span><br><span class="line">    `---[0.6494ms] demo.MathGame:run()</span><br><span class="line">        +---[0.2029ms] demo.MathGame:primeFactors() #24</span><br><span class="line">        |   `---[0.1812ms] demo.MathGame:primeFactors()  # 可以看到多加了一层的trace</span><br><span class="line">        `---[0.3999ms] demo.MathGame:print() #25</span><br><span class="line"></span><br><span class="line">`---ts=2022-02-19 15:51:36;thread_name=main;id=1;is_daemon=false;priority=5;TCCL=sun.misc.Launcher$AppClassLoader@5c647e05</span><br><span class="line">    `---[0.8585ms] demo.MathGame:run()</span><br><span class="line">        +---[0.3161ms] demo.MathGame:primeFactors() #24</span><br><span class="line">        |   `---[0.2888ms] demo.MathGame:primeFactors()</span><br><span class="line">        `---[0.5058ms] demo.MathGame:print() #25</span><br><span class="line"></span><br><span class="line">`---ts=2022-02-19 15:51:37;thread_name=main;id=1;is_daemon=false;priority=5;TCCL=sun.misc.Launcher$AppClassLoader@5c647e05</span><br><span class="line">    `---[0.5411ms] demo.MathGame:run()</span><br><span class="line">        `---[0.0941ms] demo.MathGame:primeFactors() #24 [throws Exception]</span><br><span class="line">            `---[0.0787ms] demo.MathGame:primeFactors() [throws Exception]</span><br><span class="line">                `---throw:java.lang.IllegalArgumentException #46 [number is: -151442, need &gt;= 2]</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>通过指定<code>listenerId</code>的方式动态trace，可以不断深入。另外 <code>watch</code>/<code>tt</code>/<code>monitor</code>等命令也支持类似的功能。</p>
</blockquote></li>
<li><p><strong>trace多个类或者多个函数：</strong>trace命令只会trace匹配到的函数里的子调用，<strong>并不会向下trace多层</strong>。因为trace是代价比较贵的，多层trace可能会导致最终要trace的类和函数非常多。但可以用<strong>正则表匹配路径上的多个类和函数</strong>，一定程度上达到多层trace的效果；比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trace -E com.test.ClassA|org.test.ClassB method1|method2|method3</span><br></pre></td></tr></table></figure></li>
<li><p><strong>排除掉指定的类</strong>：使用 <code>--exclude-class-pattern</code> 参数可以排除掉指定的类，比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trace javax.servlet.Filter * --exclude-class-pattern com.demo.TestFilter</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="stack">stack</h3>
<p><strong>作用：</strong>输出当前方法被调用的调用路径，很多时候我们都知道一个方法被执行，但这个方法被执行的路径非常多，或者你根本就不知道这个方法是从那里被执行了，此时你需要的是 stack 命令。</p>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>class-pattern</td>
<td>类名表达式匹配</td>
</tr>
<tr class="even">
<td>method-pattern</td>
<td>方法名表达式匹配</td>
</tr>
<tr class="odd">
<td>condition-express</td>
<td>条件表达式</td>
</tr>
<tr class="even">
<td>[E]</td>
<td>开启正则表达式匹配，默认为通配符匹配</td>
</tr>
<tr class="odd">
<td>[n:]</td>
<td>执行次数限制</td>
</tr>
</tbody>
</table>
<p><strong>使用说明：</strong></p>
<ul>
<li><p>基础使用：<code>stack demo.MathGame primeFactors -n 1</code></p>
<blockquote>
<p>获取方法demo.MathGame.primeFactors的调用路径</p>
</blockquote>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/stack使用-1.PNG" alt="stack使用-1"></p></li>
<li><p><strong>据条件表达式来过滤：</strong><code>stack demo.MathGame primeFactors 'params[0]&lt;0' -n 2</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[arthas@70700]$ stack demo.MathGame primeFactors <span class="string">&#x27;params[0]&lt;0&#x27;</span> -n 2</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 14 ms, listenerId: 3</span><br><span class="line">ts=2022-02-19 15:59:19;thread_name=main;id=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=sun.misc.Launcher<span class="variable">$AppClassLoader</span>@5c647e05</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(MathGame.java:16)</span><br><span class="line"></span><br><span class="line">ts=2022-02-19 15:59:21;thread_name=main;id=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=sun.misc.Launcher<span class="variable">$AppClassLoader</span>@5c647e05</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(MathGame.java:16)</span><br></pre></td></tr></table></figure></li>
<li><p><strong>据执行时间来过滤：</strong><code>stack demo.MathGame primeFactors '#cost&gt;1'</code></p>
<blockquote>
<p>大同小异</p>
</blockquote></li>
</ul>
<h3 id="monitor">monitor</h3>
<p><strong>作用：用于监视指定类中方法的执行情况</strong>，即：对匹配 <code>class-pattern</code>／<code>method-pattern</code>／<code>condition-express</code>的类、方法的调用进行监控。</p>
<blockquote>
<p><code>monitor</code> 命令是一个非实时返回命令。</p>
</blockquote>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>class-pattern</td>
<td>类名表达式匹配，即类名</td>
</tr>
<tr class="even">
<td>method-pattern</td>
<td>方法名表达式匹配，即方法名</td>
</tr>
<tr class="odd">
<td>condition-express</td>
<td>条件表达式</td>
</tr>
<tr class="even">
<td>[E]</td>
<td>开启正则表达式匹配，默认为通配符匹配</td>
</tr>
<tr class="odd">
<td>[c:]</td>
<td>统计周期，默认值为120秒</td>
</tr>
<tr class="even">
<td>[b]</td>
<td>在<strong>方法调用之前</strong>计算condition-express</td>
</tr>
</tbody>
</table>
<blockquote>
<p>用idea插件默认生成的monitor命令：<code>monitor demo.MathGame primeFactors -v -n 10 --cycle 10 '1==1'</code>，可见其也支持<code>[n:]</code>参数，<strong>即每运行10次命令输出结果，且不断循环。</strong></p>
</blockquote>
<p><strong>使用说明：</strong></p>
<ul>
<li><p>监控方法<code>demo.MathGame primeFactors</code>5s后输出结果：<code>monitor -c 5 demo.MathGame primeFactors</code></p>
<p>输出内容：</p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/monitor输出结果.PNG" alt="monitor输出结果"></p></li>
<li><p>计算条件表达式过滤统计结果(<strong>方法执行完毕之后</strong>)</p>
<p><code>monitor -c 5 demo.MathGame primeFactors &quot;params[0] &lt;= 2&quot;</code></p>
<blockquote>
<p>条件表达式：<code>&quot;params[0] &lt;= 2&quot;</code>，即返回值需要满足上述条件</p>
</blockquote></li>
<li><p>计算条件表达式过滤统计结果(<strong>方法执行完毕之前</strong>)</p>
<p><code>monitor -b -c 5 com.test.testes.MathGame primeFactors &quot;params[0] &lt;= 2&quot;</code></p>
<blockquote>
<p>条件表达式：<code>&quot;params[0] &lt;= 2&quot;</code>，即传入参数需要满足<code>&quot;params[0] &lt;= 2&quot;</code></p>
</blockquote></li>
</ul>
<h3 id="tttimetunnel">tt（TimeTunnel）</h3>
<blockquote>
<p>在工作中没怎么用过，考虑完整性就记录一下<span class="emoji" data-emoji="dog2">🐕</span></p>
</blockquote>
<p><strong>作用：</strong>方法执行数据的时空隧道，记录下指定方法每次调用的入参和返回信息，并能对这些不同的时间下调用进行观测</p>
<blockquote>
<p><code>watch</code> 虽然很方便和灵活，但需要提前想清楚观察表达式的拼写，这对排查问题而言要求太高，因为很多时候我们并不清楚问题出自于何方，只能靠蛛丝马迹进行猜测。</p>
<p>这个时候如果能记录下当时方法调用的所有入参和返回值、抛出的异常会对整个问题的思考与判断非常有帮助。</p>
</blockquote>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-t</td>
<td>记录某个方法在一个时间段内的调用</td>
</tr>
<tr class="even">
<td>-l</td>
<td>列出之前所有时间片段</td>
</tr>
<tr class="odd">
<td>-s 表达式</td>
<td>搜索表达式，不像-l一样列出所有</td>
</tr>
<tr class="even">
<td>-i 索引号</td>
<td>查看指定索引号的详细调用信息</td>
</tr>
<tr class="odd">
<td>-p</td>
<td>重新调用一次指定的方法</td>
</tr>
</tbody>
</table>
<p><strong>使用说明：</strong></p>
<ul>
<li><p>基本使用：<code>tt -t demo.MathGame primeFactors</code></p>
<blockquote>
<p>对于一个最基本的使用来说，就是记录下当前方法的每次调用环境现场。</p>
</blockquote>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/tt使用-1.PNG" alt="tt使用-1"></p>
<blockquote>
<p>字段说明：</p>
<table>
<colgroup>
<col style="width: 13%">
<col style="width: 86%">
</colgroup>
<thead>
<tr class="header">
<th>表格字段</th>
<th>字段解释</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>INDEX</td>
<td>时间片段记录编号，每一个编号代表着一次调用，后续tt还有很多命令都是基于此编号指定记录操作，非常重要。</td>
</tr>
<tr class="even">
<td>TIMESTAMP</td>
<td>方法执行的本机时间，记录了这个时间片段所发生的本机时间</td>
</tr>
<tr class="odd">
<td>COST(ms)</td>
<td>方法执行的耗时</td>
</tr>
<tr class="even">
<td>IS-RET</td>
<td>方法是否以正常返回的形式结束</td>
</tr>
<tr class="odd">
<td>IS-EXP</td>
<td>方法是否以抛异常的形式结束</td>
</tr>
<tr class="even">
<td>OBJECT</td>
<td>执行对象的<code>hashCode()</code>，注意，曾经有人误认为是对象在JVM中的内存地址，但很遗憾他不是。但他能帮助你简单的标记当前执行方法的类实体</td>
</tr>
<tr class="odd">
<td>CLASS</td>
<td>执行的类名</td>
</tr>
<tr class="even">
<td>METHOD</td>
<td>执行的方法名</td>
</tr>
</tbody>
</table>
</blockquote></li>
<li><p>条件表达式：条件表达式也是用 <code>OGNL</code> 来编写，核心的判断对象依然是 <code>Advice</code> 对象。除了 <code>tt</code> 命令之外，<code>watch</code>、<code>trace</code>、<code>stack</code> 命令也都支持条件表达式。</p>
<ul>
<li><p>解决方法重载</p>
<p><code>tt -t *Test print params.length==1</code></p></li>
<li><p>通过制定参数个数的形式解决不同的方法签名，如果参数个数一样，你还可以这样写</p>
<p><code>tt -t *Test print 'params[1] instanceof Integer'</code></p></li>
<li><p>解决指定参数</p>
<p><code>tt -t *Test print params[0].mobile==&quot;13989838402&quot;</code></p></li>
</ul></li>
<li><p>检索调用记录：就是根据<code>-l</code>和<code>-s 表达式</code>来进行一个检索：</p>
<ul>
<li>列出之前所有时间片段：<code>tt -l</code>；</li>
<li>筛选出 <code>primeFactors</code> 方法的调用信息：<code>tt -s 'method.name==&quot;primeFactors&quot;'</code></li>
</ul></li>
<li><p>查看调用信息：通过 <code>-i</code> 参数后边跟着对应的 <code>INDEX</code> 编号查看到他的详细信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[arthas@70700]$ tt -i 1005</span><br><span class="line"> INDEX          1005</span><br><span class="line"> GMT-CREATE     2022-02-19 16:24:52</span><br><span class="line"> COST(ms)       0.135</span><br><span class="line"> OBJECT         0x1055e4af</span><br><span class="line"> CLASS          demo.MathGame</span><br><span class="line"> METHOD         primeFactors</span><br><span class="line"> IS-RETURN      <span class="literal">true</span></span><br><span class="line"> IS-EXCEPTION   <span class="literal">false</span></span><br><span class="line"> PARAMETERS[0]  @Integer[133275]</span><br><span class="line"> RETURN-OBJ     @ArrayList[</span><br><span class="line">                    @Integer[3],</span><br><span class="line">                    @Integer[5],</span><br><span class="line">                    @Integer[5],</span><br><span class="line">                    @Integer[1777],</span><br><span class="line">                ]</span><br><span class="line">Affect(row-cnt:1) cost <span class="keyword">in</span> 1 ms.</span><br></pre></td></tr></table></figure></li>
<li><p>重做一次调用：<code>tt</code> 命令由于保存了当时调用的所有现场信息，所以我们可以自己主动对一个 <code>INDEX</code> 编号的时间片自主发起一次调用，从而解放你的沟通成本。此时你需要 <code>-p</code> 参数。通过 <code>--replay-times</code> 指定 调用次数，通过 <code>--replay-interval</code> 指定多次调用间隔(单位ms, 默认1000ms)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[arthas@70700]$ tt -i 1005 -p --replay-times 2  <span class="comment"># 重新调用2次1005的方法</span></span><br><span class="line"> RE-INDEX       1005</span><br><span class="line"> GMT-REPLAY     2022-02-19 16:39:25</span><br><span class="line"> OBJECT         0x1055e4af</span><br><span class="line"> CLASS          demo.MathGame</span><br><span class="line"> METHOD         primeFactors</span><br><span class="line"> PARAMETERS[0]  @Integer[133275]</span><br><span class="line"> IS-RETURN      <span class="literal">true</span></span><br><span class="line"> IS-EXCEPTION   <span class="literal">false</span></span><br><span class="line"> COST(ms)       0.1307</span><br><span class="line"> RETURN-OBJ     @ArrayList[</span><br><span class="line">                    @Integer[3],</span><br><span class="line">                    @Integer[5],</span><br><span class="line">                    @Integer[5],</span><br><span class="line">                    @Integer[1777],</span><br><span class="line">                ]</span><br><span class="line">Time fragment[1005] successfully replayed 1 <span class="built_in">times</span>.</span><br><span class="line"></span><br><span class="line"> RE-INDEX       1005</span><br><span class="line"> GMT-REPLAY     2022-02-19 16:39:26</span><br><span class="line"> OBJECT         0x1055e4af</span><br><span class="line"> CLASS          demo.MathGame</span><br><span class="line"> METHOD         primeFactors</span><br><span class="line"> PARAMETERS[0]  @Integer[133275]</span><br><span class="line"> IS-RETURN      <span class="literal">true</span></span><br><span class="line"> IS-EXCEPTION   <span class="literal">false</span></span><br><span class="line"> COST(ms)       0.11</span><br><span class="line"> RETURN-OBJ     @ArrayList[</span><br><span class="line">                    @Integer[3],</span><br><span class="line">                    @Integer[5],</span><br><span class="line">                    @Integer[5],</span><br><span class="line">                    @Integer[1777],</span><br><span class="line">                ]</span><br><span class="line">Time fragment[1005] successfully replayed 2 <span class="built_in">times</span>.</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>tt这个命令真没在线上用过，好像也没使用场景，更多内容见：https://arthas.aliyun.com/doc/tt.html</p>
</blockquote>
<h3 id="通用操作">通用操作</h3>
<p><strong>耗时时间：</strong>watch/stack/trace这个三个命令都支持<code>#cost</code></p>
<p><strong>排除掉指定的类</strong>：watch/trace/monitor/stack/tt 命令都支持 <code>--exclude-class-pattern</code> 参数</p>
<blockquote>
<p>使用 <code>--exclude-class-pattern</code> 参数可以排除掉指定的类，比如：<code>watch javax.servlet.Filter * --exclude-class-pattern com.demo.TestFilter</code></p>
</blockquote>
<p><strong>使用-v参数打印更多信息：</strong>watch/trace/monitor/stack/tt 命令都支持 <code>-v</code> 参数</p>
<blockquote>
<p>当命令执行之后，没有输出结果。有两种可能：</p>
<ol type="1">
<li>匹配到的函数没有被执行</li>
<li>条件表达式结果是 false</li>
</ol>
<p>但用户区分不出是哪种情况。使用 <code>-v</code>选项，则会打印<code>Condition express</code>的具体值和执行结果，方便确认。</p>
</blockquote>
<h3 id="options">Options</h3>
<blockquote>
<p>用过的仅仅是：<code>json-format</code></p>
</blockquote>
<p><strong>Options全局开关：</strong></p>
<table>
<colgroup>
<col style="width: 24%">
<col style="width: 9%">
<col style="width: 65%">
</colgroup>
<thead>
<tr class="header">
<th>名称</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>unsafe</td>
<td>false</td>
<td>是否支持对系统级别的类进行增强，打开该开关可能导致把JVM搞挂，请慎重选择！</td>
</tr>
<tr class="even">
<td>dump</td>
<td>false</td>
<td>是否支持被增强了的类dump到外部文件中，如果打开开关，class文件会被dump到<code>/$&#123;application working dir&#125;/arthas-class-dump/</code>目录下，具体位置详见控制台输出</td>
</tr>
<tr class="odd">
<td>batch-re-transform</td>
<td>true</td>
<td>是否支持批量对匹配到的类执行retransform操作</td>
</tr>
<tr class="even">
<td><strong>json-format</strong></td>
<td><strong>false</strong></td>
<td><strong>是否支持json化的输出</strong></td>
</tr>
<tr class="odd">
<td>disable-sub-class</td>
<td>false</td>
<td>是否禁用子类匹配，默认在匹配目标类的时候会默认匹配到其子类，如果想精确匹配，可以关闭此开关</td>
</tr>
<tr class="even">
<td>support-default-method</td>
<td>true</td>
<td>是否支持匹配到default method，默认会查找interface，匹配里面的default method。参考 <a target="_blank" rel="noopener" href="https://github.com/alibaba/arthas/issues/1105">#1105</a></td>
</tr>
<tr class="odd">
<td>save-result</td>
<td>false</td>
<td>是否打开执行结果存日志功能，打开之后所有命令的运行结果都将保存到<code>~/logs/arthas-cache/result.log</code>中</td>
</tr>
<tr class="even">
<td>job-timeout</td>
<td>1d</td>
<td>异步后台任务的默认超时时间，超过这个时间，任务自动停止；比如设置 1d, 2h, 3m, 25s，分别代表天、小时、分、秒</td>
</tr>
<tr class="odd">
<td>print-parent-fields</td>
<td>true</td>
<td>是否打印在parent class里的filed</td>
</tr>
</tbody>
</table>
<p><strong>获取&amp;修改option的值</strong>：</p>
<ul>
<li><p>直接输入options就可以查看所有支持的options</p></li>
<li><p>options 上面的名称，如：<code>options json-format</code></p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/options-1.PNG" alt="options-1"></p>
<blockquote>
<p>可以看到默认是false</p>
</blockquote></li>
<li><p><strong>修改options的值</strong>，这里修改<code>json-format</code>为true：<code>options json-format true</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[arthas@70700]$ options json-format <span class="literal">true</span></span><br><span class="line"> NAME         BEFORE-VALUE  AFTER-VALUE</span><br><span class="line">----------------------------------------</span><br><span class="line"> json-format  <span class="literal">false</span>         <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>默认情况下<code>json-format</code>为false，如果希望<code>watch</code>/<code>tt</code>等命令结果以json格式输出，则可以设置<code>json-format</code>为true</strong></p>
<ul>
<li><p><code>json-format</code>为false：</p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/options-2.PNG" alt="options-2"></p></li>
<li><p><code>json-format</code>为true：</p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/options-3.PNG" alt="options-3"></p>
<p>格式化一下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;@type&quot;</span>: <span class="string">&quot;java.lang.IllegalArgumentException&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;localizedMessage&quot;</span>: <span class="string">&quot;number is: -80370, need &gt;= 2&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;message&quot;</span>: <span class="string">&quot;number is: -80370, need &gt;= 2&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;stackTrace&quot;</span>: [&#123;</span><br><span class="line">		<span class="attr">&quot;className&quot;</span>: <span class="string">&quot;demo.MathGame&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;fileName&quot;</span>: <span class="string">&quot;MathGame.java&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;lineNumber&quot;</span>: <span class="number">46</span>,</span><br><span class="line">		<span class="attr">&quot;methodName&quot;</span>: <span class="string">&quot;primeFactors&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;nativeMethod&quot;</span>: <span class="literal">false</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;className&quot;</span>: <span class="string">&quot;demo.MathGame&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;fileName&quot;</span>: <span class="string">&quot;MathGame.java&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;lineNumber&quot;</span>: <span class="number">24</span>,</span><br><span class="line">		<span class="attr">&quot;methodName&quot;</span>: <span class="string">&quot;run&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;nativeMethod&quot;</span>: <span class="literal">false</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;className&quot;</span>: <span class="string">&quot;demo.MathGame&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;fileName&quot;</span>: <span class="string">&quot;MathGame.java&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;lineNumber&quot;</span>: <span class="number">16</span>,</span><br><span class="line">		<span class="attr">&quot;methodName&quot;</span>: <span class="string">&quot;main&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;nativeMethod&quot;</span>: <span class="literal">false</span></span><br><span class="line">	&#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote></li>
</ul>
<h2 id="其他命令">其他命令</h2>
<p>这部分就大致记录一下没怎么用过的一些命令，后续工作中如果有使用的就再好好学下然后放到上一趴里。</p>
<h3 id="命令列表">命令列表★</h3>
<blockquote>
<p>命令列表见：</p>
<p>https://arthas.aliyun.com/doc/advanced-use.html</p>
<p>https://arthas.aliyun.com/doc/commands.html</p>
</blockquote>
<h3 id="thread">thread*</h3>
<p><strong>基础使用：</strong></p>
<ul>
<li><p>通过thread命令来获取到当前运行的所有线程：</p></li>
<li><p><code>thread 1</code>会打印线程ID 1的栈，通常是main函数的线程。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[arthas@67168]$ thread 1</span><br><span class="line"><span class="string">&quot;main&quot;</span> Id=1 TIMED_WAITING</span><br><span class="line">    at java.lang.Thread.sleep(Native Method)</span><br><span class="line">    at java.lang.Thread.sleep(Thread.java:340)</span><br><span class="line">    at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)</span><br><span class="line">    at demo.MathGame.main(MathGame.java:17)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>参数说明：</strong></p>
<table>
<colgroup>
<col style="width: 11%">
<col style="width: 46%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id</td>
<td>线程id</td>
<td>查看线程ID为1的线程信息：<code>thread 1</code></td>
</tr>
<tr class="even">
<td>[n:]</td>
<td>指定最忙的前N个线程并打印堆栈</td>
<td>查看当前最忙的3个线程：<code>thread -n 3</code></td>
</tr>
<tr class="odd">
<td>[b]</td>
<td>找出当前阻塞其他线程的线程</td>
<td>用于排查死锁等(存在阻塞时用)：<code>thread -b</code></td>
</tr>
<tr class="even">
<td>[i <code>&lt;value&gt;</code>]</td>
<td>指定cpu使用率统计的采样间隔，单位为毫秒，默认值为200</td>
<td>1000ms内最忙的3个线程：<code>thread -n 3 -i 1000</code></td>
</tr>
<tr class="odd">
<td>[--all]</td>
<td>显示所有匹配的线程</td>
<td><code>thread -all</code></td>
</tr>
<tr class="even">
<td>[--state]</td>
<td>查看指定状态的线程</td>
<td>查看waitting状态的线程：<code>thread --state WATTING</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>cpu使用率是如何统计出来的？</strong></p>
<p>这里的cpu使用率与linux 命令<code>top -H -p &lt;pid&gt;</code> 的线程<code>%CPU</code>类似，一段采样间隔时间内，当前JVM里各个线程的增量cpu时间与采样间隔时间的比例。</p>
</blockquote>
<blockquote>
<p>更为详细内容：https://arthas.aliyun.com/doc/thread.html</p>
</blockquote>
<h3 id="dashboard">dashboard*</h3>
<p><strong>基础使用：</strong>输入<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/dashboard.html">dashboard</a>，按<code>回车/enter</code>，会展示当前进程的信息，按<code>ctrl+c</code>可以中断执行：</p>
<p><img src="/2022/01/16/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/Utils/Utils%EF%BC%9AArthas/dashboard.PNG" alt="dashboard"></p>
<p><strong>数据说明：</strong></p>
<ul>
<li>ID: Java级别的线程ID，注意这个ID不能跟jstack中的nativeID一一对应。</li>
<li>NAME: 线程名</li>
<li>GROUP: 线程组名</li>
<li>PRIORITY: 线程优先级, 1~10之间的数字，越大表示优先级越高</li>
<li>STATE: 线程的状态</li>
<li>CPU%: 线程的cpu使用率。比如采样间隔1000ms，某个线程的增量cpu时间为100ms，则cpu使用率=100/1000=10%</li>
<li>DELTA_TIME: 上次采样之后线程运行增量CPU时间，数据格式为<code>秒</code></li>
<li>TIME: 线程运行总CPU时间，数据格式为<code>分:秒</code></li>
<li>INTERRUPTED: 线程当前的中断位状态</li>
<li>DAEMON: 是否是daemon线程</li>
</ul>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr class="header">
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[i:]</td>
<td>刷新实时数据的时间间隔 (ms)，默认5000ms</td>
</tr>
<tr class="even">
<td>[n:]</td>
<td>刷新实时数据的次数</td>
</tr>
</tbody>
</table>
<blockquote>
<p>更详细的内容：https://arthas.aliyun.com/doc/dashboard.html</p>
</blockquote>

    </div>

    
    
    
	
	<div>
		
			<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">

<div>
    
       <div style="text-align:center;color:#bfbfbf;font-size:16px;">
             <span>--- 本文结束 </span>
             <i class="fa fa-thumbs-o-up"></i>
             <span> 感谢阅读 ---</span>
       </div>
    
</div>
		
	</div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> 测试工具</a>
              <a href="/tags/Arthas/" rel="tag"><i class="fa fa-hand-peace-o" aria-hidden="true"></i> Arthas</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/26/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/Hexo%E5%8D%9A%E5%AE%A2GitHub&Gitee%E5%8F%8C%E6%89%98%E7%AE%A1+%E7%AB%99%E7%82%B9%E6%94%B6%E5%BD%95/" rel="prev" title="Hexo博客GitHub&Gitee双托管+站点收录">
      <i class="fa fa-chevron-left"></i> Hexo博客GitHub&Gitee双托管+站点收录
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/01/23/Java%E5%B9%B6%E5%8F%91/Java%EF%BC%9ACompletableFuture/" rel="next" title="Java：CompletableFuture">
      Java：CompletableFuture <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#utilsarthas"><span class="nav-text">Utils：Arthas</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%86%E5%A4%87"><span class="nav-text">准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#watch"><span class="nav-text">watch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#trace"><span class="nav-text">trace</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stack"><span class="nav-text">stack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#monitor"><span class="nav-text">monitor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tttimetunnel"><span class="nav-text">tt（TimeTunnel）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">通用操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#options"><span class="nav-text">Options</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="nav-text">其他命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E5%88%97%E8%A1%A8"><span class="nav-text">命令列表★</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#thread"><span class="nav-text">thread*</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dashboard"><span class="nav-text">dashboard*</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhuCC"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">ZhuCC</p>
  <div class="site-description" itemprop="description">不急不躁。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  
	  
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
            <div id="myCanvasContainer" class="widget tagcloud">
                <canvas width="250" height="250" id="resCanvas" style="width=100%">
                    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activiti/" rel="tag">Activiti</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arthas/" rel="tag">Arthas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAT/" rel="tag">CAT</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CompletableFuture/" rel="tag">CompletableFuture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/" rel="tag">ELK</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearck/" rel="tag">Elasticsearck</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Groovy/" rel="tag">Groovy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">76</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">Java基础</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E8%AF%AD%E6%B3%95/" rel="tag">Java语法</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K%E8%BF%91%E9%82%BB/" rel="tag">K近邻</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lombok/" rel="tag">Lombok</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS/" rel="tag">OSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/" rel="tag">OpenCV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Optional/" rel="tag">Optional</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/" rel="tag">ThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TortoiseGit/" rel="tag">TortoiseGit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TransmittableThreadLocal/" rel="tag">TransmittableThreadLocal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/" rel="tag">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/" rel="tag">全文检索</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" rel="tag">决策树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98/" rel="tag">分类问题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">刷题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">刷题笔记</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6/" rel="tag">参考文件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">基础知识</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a><span class="tag-list-count">106</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/" rel="tag">工作流</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">并发编程</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">开发框架</a><span class="tag-list-count">33</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" rel="tag">持久层框架</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">排序算法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" rel="tag">支持向量机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6%E6%8E%A8%E5%AF%BC/" rel="tag">数学推导</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/" rel="tag">数据清洗</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/" rel="tag">日志框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E7%BB%93%E6%9E%84/" rel="tag">树结构</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E8%A7%A3/" rel="tag">注解</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" rel="tag">测试工具</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">消息队列</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/" rel="tag">特征选择</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="tag">环境配置</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" rel="tag">目标检测</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" rel="tag">线性回归</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E7%B1%BB/" rel="tag">聚类</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A8%E7%A4%BA%E5%B1%82/" rel="tag">表示层</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF/" rel="tag">计算机网路</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E7%94%A8%E9%93%BE%E7%9B%91%E6%8E%A7/" rel="tag">调用链监控</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/" rel="tag">贝叶斯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/" rel="tag">软件使用</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" rel="tag">逻辑回归</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E7%B1%BB/" rel="tag">集合类</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/" rel="tag">集成学习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E7%BB%8F/" rel="tag">面经</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/" rel="tag">面试笔记</a><span class="tag-list-count">59</span></li></ul>
                </canvas>
            </div>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhuCC</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">3.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">56:40</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3it0tVBbppFeFBVa8QgB3vxM-gzGzoHsz',
      appKey     : '9VtnMWSrhAtC1pSRaA4Rivx9',
      placeholder: "请多多指教~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
